var GU=Object.defineProperty;var KU=(t,e,n)=>e in t?GU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var QU=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var ie=(t,e,n)=>KU(t,typeof e!="symbol"?e+"":e,n);var tge=QU((Ar,Cr)=>{function YU(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var ra=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Np(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _D={exports:{}},pv={},ED={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kp=Symbol.for("react.element"),XU=Symbol.for("react.portal"),JU=Symbol.for("react.fragment"),ZU=Symbol.for("react.strict_mode"),e$=Symbol.for("react.profiler"),t$=Symbol.for("react.provider"),n$=Symbol.for("react.context"),r$=Symbol.for("react.forward_ref"),s$=Symbol.for("react.suspense"),i$=Symbol.for("react.memo"),o$=Symbol.for("react.lazy"),NI=Symbol.iterator;function a$(t){return t===null||typeof t!="object"?null:(t=NI&&t[NI]||t["@@iterator"],typeof t=="function"?t:null)}var xD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bD=Object.assign,TD={};function Ld(t,e,n){this.props=t,this.context=e,this.refs=TD,this.updater=n||xD}Ld.prototype.isReactComponent={};Ld.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ld.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function SD(){}SD.prototype=Ld.prototype;function ux(t,e,n){this.props=t,this.context=e,this.refs=TD,this.updater=n||xD}var dx=ux.prototype=new SD;dx.constructor=ux;bD(dx,Ld.prototype);dx.isPureReactComponent=!0;var kI=Array.isArray,ID=Object.prototype.hasOwnProperty,hx={current:null},AD={key:!0,ref:!0,__self:!0,__source:!0};function CD(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)ID.call(e,r)&&!AD.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:kp,type:t,key:i,ref:o,props:s,_owner:hx.current}}function l$(t,e){return{$$typeof:kp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fx(t){return typeof t=="object"&&t!==null&&t.$$typeof===kp}function c$(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var DI=/\/+/g;function H0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?c$(""+t.key):e.toString(36)}function gg(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case kp:case XU:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+H0(o,0):r,kI(s)?(n="",t!=null&&(n=t.replace(DI,"$&/")+"/"),gg(s,e,n,"",function(c){return c})):s!=null&&(fx(s)&&(s=l$(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(DI,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",kI(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+H0(i,a);o+=gg(i,e,n,l,s)}else if(l=a$(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+H0(i,a++),o+=gg(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Tm(t,e,n){if(t==null)return t;var r=[],s=0;return gg(t,r,"","",function(i){return e.call(n,i,s++)}),r}function u$(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xn={current:null},yg={transition:null},d$={ReactCurrentDispatcher:Xn,ReactCurrentBatchConfig:yg,ReactCurrentOwner:hx};function RD(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:Tm,forEach:function(t,e,n){Tm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Tm(t,function(){e++}),e},toArray:function(t){return Tm(t,function(e){return e})||[]},only:function(t){if(!fx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ke.Component=Ld;ke.Fragment=JU;ke.Profiler=e$;ke.PureComponent=ux;ke.StrictMode=ZU;ke.Suspense=s$;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d$;ke.act=RD;ke.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=bD({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=hx.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ID.call(e,l)&&!AD.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:kp,type:t.type,key:s,ref:i,props:r,_owner:o}};ke.createContext=function(t){return t={$$typeof:n$,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:t$,_context:t},t.Consumer=t};ke.createElement=CD;ke.createFactory=function(t){var e=CD.bind(null,t);return e.type=t,e};ke.createRef=function(){return{current:null}};ke.forwardRef=function(t){return{$$typeof:r$,render:t}};ke.isValidElement=fx;ke.lazy=function(t){return{$$typeof:o$,_payload:{_status:-1,_result:t},_init:u$}};ke.memo=function(t,e){return{$$typeof:i$,type:t,compare:e===void 0?null:e}};ke.startTransition=function(t){var e=yg.transition;yg.transition={};try{t()}finally{yg.transition=e}};ke.unstable_act=RD;ke.useCallback=function(t,e){return Xn.current.useCallback(t,e)};ke.useContext=function(t){return Xn.current.useContext(t)};ke.useDebugValue=function(){};ke.useDeferredValue=function(t){return Xn.current.useDeferredValue(t)};ke.useEffect=function(t,e){return Xn.current.useEffect(t,e)};ke.useId=function(){return Xn.current.useId()};ke.useImperativeHandle=function(t,e,n){return Xn.current.useImperativeHandle(t,e,n)};ke.useInsertionEffect=function(t,e){return Xn.current.useInsertionEffect(t,e)};ke.useLayoutEffect=function(t,e){return Xn.current.useLayoutEffect(t,e)};ke.useMemo=function(t,e){return Xn.current.useMemo(t,e)};ke.useReducer=function(t,e,n){return Xn.current.useReducer(t,e,n)};ke.useRef=function(t){return Xn.current.useRef(t)};ke.useState=function(t){return Xn.current.useState(t)};ke.useSyncExternalStore=function(t,e,n){return Xn.current.useSyncExternalStore(t,e,n)};ke.useTransition=function(){return Xn.current.useTransition()};ke.version="18.3.1";ED.exports=ke;var _=ED.exports;const yn=Np(_),PD=YU({__proto__:null,default:yn},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h$=_,f$=Symbol.for("react.element"),p$=Symbol.for("react.fragment"),m$=Object.prototype.hasOwnProperty,g$=h$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y$={key:!0,ref:!0,__self:!0,__source:!0};function ND(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)m$.call(e,r)&&!y$.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:f$,type:t,key:i,ref:o,props:s,_owner:g$.current}}pv.Fragment=p$;pv.jsx=ND;pv.jsxs=ND;_D.exports=pv;var y=_D.exports,kD={exports:{}},Or={},DD={exports:{}},OD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,Y){var G=U.length;U.push(Y);e:for(;0<G;){var he=G-1>>>1,we=U[he];if(0<s(we,Y))U[he]=Y,U[G]=we,G=he;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var Y=U[0],G=U.pop();if(G!==Y){U[0]=G;e:for(var he=0,we=U.length,ve=we>>>1;he<ve;){var De=2*(he+1)-1,_e=U[De],Ye=De+1,se=U[Ye];if(0>s(_e,G))Ye<we&&0>s(se,_e)?(U[he]=se,U[Ye]=G,he=Ye):(U[he]=_e,U[De]=G,he=De);else if(Ye<we&&0>s(se,G))U[he]=se,U[Ye]=G,he=Ye;else break e}}return Y}function s(U,Y){var G=U.sortIndex-Y.sortIndex;return G!==0?G:U.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,g=!1,m=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var Y=n(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=U)r(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(c)}}function C(U){if(m=!1,b(U),!g)if(n(l)!==null)g=!0,re(R);else{var Y=n(c);Y!==null&&Z(C,Y.startTime-U)}}function R(U,Y){g=!1,m&&(m=!1,v(A),A=-1),p=!0;var G=f;try{for(b(Y),d=n(l);d!==null&&(!(d.expirationTime>Y)||U&&!M());){var he=d.callback;if(typeof he=="function"){d.callback=null,f=d.priorityLevel;var we=he(d.expirationTime<=Y);Y=t.unstable_now(),typeof we=="function"?d.callback=we:d===n(l)&&r(l),b(Y)}else r(l);d=n(l)}if(d!==null)var ve=!0;else{var De=n(c);De!==null&&Z(C,De.startTime-Y),ve=!1}return ve}finally{d=null,f=G,p=!1}}var O=!1,I=null,A=-1,P=5,D=-1;function M(){return!(t.unstable_now()-D<P)}function V(){if(I!==null){var U=t.unstable_now();D=U;var Y=!0;try{Y=I(!0,U)}finally{Y?L():(O=!1,I=null)}}else O=!1}var L;if(typeof E=="function")L=function(){E(V)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,oe=W.port2;W.port1.onmessage=V,L=function(){oe.postMessage(null)}}else L=function(){w(V,0)};function re(U){I=U,O||(O=!0,L())}function Z(U,Y){A=w(function(){U(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,re(R))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var Y=3;break;default:Y=f}var G=f;f=Y;try{return U()}finally{f=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,Y){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var G=f;f=U;try{return Y()}finally{f=G}},t.unstable_scheduleCallback=function(U,Y,G){var he=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?he+G:he):G=he,U){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=G+we,U={id:u++,callback:Y,priorityLevel:U,startTime:G,expirationTime:we,sortIndex:-1},G>he?(U.sortIndex=G,e(c,U),n(l)===null&&U===n(c)&&(m?(v(A),A=-1):m=!0,Z(C,G-he))):(U.sortIndex=we,e(l,U),g||p||(g=!0,re(R))),U},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(U){var Y=f;return function(){var G=f;f=Y;try{return U.apply(this,arguments)}finally{f=G}}}})(OD);DD.exports=OD;var v$=DD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w$=_,kr=v$;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var LD=new Set,If={};function Ec(t,e){sd(t,e),sd(t+"Capture",e)}function sd(t,e){for(If[t]=e,t=0;t<e.length;t++)LD.add(e[t])}var Ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),T_=Object.prototype.hasOwnProperty,_$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,OI={},LI={};function E$(t){return T_.call(LI,t)?!0:T_.call(OI,t)?!1:_$.test(t)?LI[t]=!0:(OI[t]=!0,!1)}function x$(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function b$(t,e,n,r){if(e===null||typeof e>"u"||x$(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Jn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var xn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xn[t]=new Jn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xn[e]=new Jn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xn[t]=new Jn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xn[t]=new Jn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xn[t]=new Jn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xn[t]=new Jn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xn[t]=new Jn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xn[t]=new Jn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xn[t]=new Jn(t,5,!1,t.toLowerCase(),null,!1,!1)});var px=/[\-:]([a-z])/g;function mx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(px,mx);xn[e]=new Jn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(px,mx);xn[e]=new Jn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(px,mx);xn[e]=new Jn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xn[t]=new Jn(t,1,!1,t.toLowerCase(),null,!1,!1)});xn.xlinkHref=new Jn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xn[t]=new Jn(t,1,!1,t.toLowerCase(),null,!0,!0)});function gx(t,e,n,r){var s=xn.hasOwnProperty(e)?xn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(b$(e,n,s,r)&&(n=null),r||s===null?E$(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var mo=w$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sm=Symbol.for("react.element"),xu=Symbol.for("react.portal"),bu=Symbol.for("react.fragment"),yx=Symbol.for("react.strict_mode"),S_=Symbol.for("react.profiler"),MD=Symbol.for("react.provider"),VD=Symbol.for("react.context"),vx=Symbol.for("react.forward_ref"),I_=Symbol.for("react.suspense"),A_=Symbol.for("react.suspense_list"),wx=Symbol.for("react.memo"),Go=Symbol.for("react.lazy"),jD=Symbol.for("react.offscreen"),MI=Symbol.iterator;function hh(t){return t===null||typeof t!="object"?null:(t=MI&&t[MI]||t["@@iterator"],typeof t=="function"?t:null)}var bt=Object.assign,G0;function Nh(t){if(G0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);G0=e&&e[1]||""}return`
`+G0+t}var K0=!1;function Q0(t,e){if(!t||K0)return"";K0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{K0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Nh(t):""}function T$(t){switch(t.tag){case 5:return Nh(t.type);case 16:return Nh("Lazy");case 13:return Nh("Suspense");case 19:return Nh("SuspenseList");case 0:case 2:case 15:return t=Q0(t.type,!1),t;case 11:return t=Q0(t.type.render,!1),t;case 1:return t=Q0(t.type,!0),t;default:return""}}function C_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case bu:return"Fragment";case xu:return"Portal";case S_:return"Profiler";case yx:return"StrictMode";case I_:return"Suspense";case A_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case VD:return(t.displayName||"Context")+".Consumer";case MD:return(t._context.displayName||"Context")+".Provider";case vx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case wx:return e=t.displayName||null,e!==null?e:C_(t.type)||"Memo";case Go:e=t._payload,t=t._init;try{return C_(t(e))}catch{}}return null}function S$(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return C_(e);case 8:return e===yx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ta(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function FD(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function I$(t){var e=FD(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Im(t){t._valueTracker||(t._valueTracker=I$(t))}function BD(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=FD(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ey(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function R_(t,e){var n=e.checked;return bt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function VI(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ta(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function UD(t,e){e=e.checked,e!=null&&gx(t,"checked",e,!1)}function P_(t,e){UD(t,e);var n=Ta(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?N_(t,e.type,n):e.hasOwnProperty("defaultValue")&&N_(t,e.type,Ta(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function jI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function N_(t,e,n){(e!=="number"||ey(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var kh=Array.isArray;function Fu(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ta(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function k_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return bt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function FI(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(kh(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ta(n)}}function $D(t,e){var n=Ta(e.value),r=Ta(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function BI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function qD(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function D_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?qD(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Am,zD=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Am=Am||document.createElement("div"),Am.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Am.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Af(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Gh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},A$=["Webkit","ms","Moz","O"];Object.keys(Gh).forEach(function(t){A$.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gh[e]=Gh[t]})});function WD(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Gh.hasOwnProperty(t)&&Gh[t]?(""+e).trim():e+"px"}function HD(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=WD(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var C$=bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function O_(t,e){if(e){if(C$[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function L_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var M_=null;function _x(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var V_=null,Bu=null,Uu=null;function UI(t){if(t=Lp(t)){if(typeof V_!="function")throw Error(J(280));var e=t.stateNode;e&&(e=wv(e),V_(t.stateNode,t.type,e))}}function GD(t){Bu?Uu?Uu.push(t):Uu=[t]:Bu=t}function KD(){if(Bu){var t=Bu,e=Uu;if(Uu=Bu=null,UI(t),e)for(t=0;t<e.length;t++)UI(e[t])}}function QD(t,e){return t(e)}function YD(){}var Y0=!1;function XD(t,e,n){if(Y0)return t(e,n);Y0=!0;try{return QD(t,e,n)}finally{Y0=!1,(Bu!==null||Uu!==null)&&(YD(),KD())}}function Cf(t,e){var n=t.stateNode;if(n===null)return null;var r=wv(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var j_=!1;if(Ji)try{var fh={};Object.defineProperty(fh,"passive",{get:function(){j_=!0}}),window.addEventListener("test",fh,fh),window.removeEventListener("test",fh,fh)}catch{j_=!1}function R$(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Kh=!1,ty=null,ny=!1,F_=null,P$={onError:function(t){Kh=!0,ty=t}};function N$(t,e,n,r,s,i,o,a,l){Kh=!1,ty=null,R$.apply(P$,arguments)}function k$(t,e,n,r,s,i,o,a,l){if(N$.apply(this,arguments),Kh){if(Kh){var c=ty;Kh=!1,ty=null}else throw Error(J(198));ny||(ny=!0,F_=c)}}function xc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function JD(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $I(t){if(xc(t)!==t)throw Error(J(188))}function D$(t){var e=t.alternate;if(!e){if(e=xc(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return $I(s),t;if(i===r)return $I(s),e;i=i.sibling}throw Error(J(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function ZD(t){return t=D$(t),t!==null?eO(t):null}function eO(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=eO(t);if(e!==null)return e;t=t.sibling}return null}var tO=kr.unstable_scheduleCallback,qI=kr.unstable_cancelCallback,O$=kr.unstable_shouldYield,L$=kr.unstable_requestPaint,Ot=kr.unstable_now,M$=kr.unstable_getCurrentPriorityLevel,Ex=kr.unstable_ImmediatePriority,nO=kr.unstable_UserBlockingPriority,ry=kr.unstable_NormalPriority,V$=kr.unstable_LowPriority,rO=kr.unstable_IdlePriority,mv=null,oi=null;function j$(t){if(oi&&typeof oi.onCommitFiberRoot=="function")try{oi.onCommitFiberRoot(mv,t,void 0,(t.current.flags&128)===128)}catch{}}var Ps=Math.clz32?Math.clz32:U$,F$=Math.log,B$=Math.LN2;function U$(t){return t>>>=0,t===0?32:31-(F$(t)/B$|0)|0}var Cm=64,Rm=4194304;function Dh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function sy(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Dh(a):(i&=o,i!==0&&(r=Dh(i)))}else o=n&~s,o!==0?r=Dh(o):i!==0&&(r=Dh(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ps(e),s=1<<n,r|=t[n],e&=~s;return r}function $$(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function q$(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ps(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=$$(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function B_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function sO(){var t=Cm;return Cm<<=1,!(Cm&4194240)&&(Cm=64),t}function X0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Dp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ps(e),t[e]=n}function z$(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ps(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function xx(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ps(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Qe=0;function iO(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var oO,bx,aO,lO,cO,U_=!1,Pm=[],ua=null,da=null,ha=null,Rf=new Map,Pf=new Map,Yo=[],W$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zI(t,e){switch(t){case"focusin":case"focusout":ua=null;break;case"dragenter":case"dragleave":da=null;break;case"mouseover":case"mouseout":ha=null;break;case"pointerover":case"pointerout":Rf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pf.delete(e.pointerId)}}function ph(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Lp(e),e!==null&&bx(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function H$(t,e,n,r,s){switch(e){case"focusin":return ua=ph(ua,t,e,n,r,s),!0;case"dragenter":return da=ph(da,t,e,n,r,s),!0;case"mouseover":return ha=ph(ha,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Rf.set(i,ph(Rf.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Pf.set(i,ph(Pf.get(i)||null,t,e,n,r,s)),!0}return!1}function uO(t){var e=Vl(t.target);if(e!==null){var n=xc(e);if(n!==null){if(e=n.tag,e===13){if(e=JD(n),e!==null){t.blockedOn=e,cO(t.priority,function(){aO(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);M_=r,n.target.dispatchEvent(r),M_=null}else return e=Lp(n),e!==null&&bx(e),t.blockedOn=n,!1;e.shift()}return!0}function WI(t,e,n){vg(t)&&n.delete(e)}function G$(){U_=!1,ua!==null&&vg(ua)&&(ua=null),da!==null&&vg(da)&&(da=null),ha!==null&&vg(ha)&&(ha=null),Rf.forEach(WI),Pf.forEach(WI)}function mh(t,e){t.blockedOn===e&&(t.blockedOn=null,U_||(U_=!0,kr.unstable_scheduleCallback(kr.unstable_NormalPriority,G$)))}function Nf(t){function e(s){return mh(s,t)}if(0<Pm.length){mh(Pm[0],t);for(var n=1;n<Pm.length;n++){var r=Pm[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ua!==null&&mh(ua,t),da!==null&&mh(da,t),ha!==null&&mh(ha,t),Rf.forEach(e),Pf.forEach(e),n=0;n<Yo.length;n++)r=Yo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Yo.length&&(n=Yo[0],n.blockedOn===null);)uO(n),n.blockedOn===null&&Yo.shift()}var $u=mo.ReactCurrentBatchConfig,iy=!0;function K$(t,e,n,r){var s=Qe,i=$u.transition;$u.transition=null;try{Qe=1,Tx(t,e,n,r)}finally{Qe=s,$u.transition=i}}function Q$(t,e,n,r){var s=Qe,i=$u.transition;$u.transition=null;try{Qe=4,Tx(t,e,n,r)}finally{Qe=s,$u.transition=i}}function Tx(t,e,n,r){if(iy){var s=$_(t,e,n,r);if(s===null)aw(t,e,r,oy,n),zI(t,r);else if(H$(s,t,e,n,r))r.stopPropagation();else if(zI(t,r),e&4&&-1<W$.indexOf(t)){for(;s!==null;){var i=Lp(s);if(i!==null&&oO(i),i=$_(t,e,n,r),i===null&&aw(t,e,r,oy,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else aw(t,e,r,null,n)}}var oy=null;function $_(t,e,n,r){if(oy=null,t=_x(r),t=Vl(t),t!==null)if(e=xc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=JD(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return oy=t,null}function dO(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(M$()){case Ex:return 1;case nO:return 4;case ry:case V$:return 16;case rO:return 536870912;default:return 16}default:return 16}}var sa=null,Sx=null,wg=null;function hO(){if(wg)return wg;var t,e=Sx,n=e.length,r,s="value"in sa?sa.value:sa.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return wg=s.slice(t,1<r?1-r:void 0)}function _g(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Nm(){return!0}function HI(){return!1}function Lr(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Nm:HI,this.isPropagationStopped=HI,this}return bt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Nm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Nm)},persist:function(){},isPersistent:Nm}),e}var Md={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ix=Lr(Md),Op=bt({},Md,{view:0,detail:0}),Y$=Lr(Op),J0,Z0,gh,gv=bt({},Op,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ax,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==gh&&(gh&&t.type==="mousemove"?(J0=t.screenX-gh.screenX,Z0=t.screenY-gh.screenY):Z0=J0=0,gh=t),J0)},movementY:function(t){return"movementY"in t?t.movementY:Z0}}),GI=Lr(gv),X$=bt({},gv,{dataTransfer:0}),J$=Lr(X$),Z$=bt({},Op,{relatedTarget:0}),ew=Lr(Z$),e9=bt({},Md,{animationName:0,elapsedTime:0,pseudoElement:0}),t9=Lr(e9),n9=bt({},Md,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),r9=Lr(n9),s9=bt({},Md,{data:0}),KI=Lr(s9),i9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},a9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function l9(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=a9[t])?!!e[t]:!1}function Ax(){return l9}var c9=bt({},Op,{key:function(t){if(t.key){var e=i9[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_g(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?o9[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ax,charCode:function(t){return t.type==="keypress"?_g(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_g(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),u9=Lr(c9),d9=bt({},gv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),QI=Lr(d9),h9=bt({},Op,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ax}),f9=Lr(h9),p9=bt({},Md,{propertyName:0,elapsedTime:0,pseudoElement:0}),m9=Lr(p9),g9=bt({},gv,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),y9=Lr(g9),v9=[9,13,27,32],Cx=Ji&&"CompositionEvent"in window,Qh=null;Ji&&"documentMode"in document&&(Qh=document.documentMode);var w9=Ji&&"TextEvent"in window&&!Qh,fO=Ji&&(!Cx||Qh&&8<Qh&&11>=Qh),YI=" ",XI=!1;function pO(t,e){switch(t){case"keyup":return v9.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mO(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Tu=!1;function _9(t,e){switch(t){case"compositionend":return mO(e);case"keypress":return e.which!==32?null:(XI=!0,YI);case"textInput":return t=e.data,t===YI&&XI?null:t;default:return null}}function E9(t,e){if(Tu)return t==="compositionend"||!Cx&&pO(t,e)?(t=hO(),wg=Sx=sa=null,Tu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fO&&e.locale!=="ko"?null:e.data;default:return null}}var x9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function JI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!x9[t.type]:e==="textarea"}function gO(t,e,n,r){GD(r),e=ay(e,"onChange"),0<e.length&&(n=new Ix("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yh=null,kf=null;function b9(t){AO(t,0)}function yv(t){var e=Au(t);if(BD(e))return t}function T9(t,e){if(t==="change")return e}var yO=!1;if(Ji){var tw;if(Ji){var nw="oninput"in document;if(!nw){var ZI=document.createElement("div");ZI.setAttribute("oninput","return;"),nw=typeof ZI.oninput=="function"}tw=nw}else tw=!1;yO=tw&&(!document.documentMode||9<document.documentMode)}function eA(){Yh&&(Yh.detachEvent("onpropertychange",vO),kf=Yh=null)}function vO(t){if(t.propertyName==="value"&&yv(kf)){var e=[];gO(e,kf,t,_x(t)),XD(b9,e)}}function S9(t,e,n){t==="focusin"?(eA(),Yh=e,kf=n,Yh.attachEvent("onpropertychange",vO)):t==="focusout"&&eA()}function I9(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yv(kf)}function A9(t,e){if(t==="click")return yv(e)}function C9(t,e){if(t==="input"||t==="change")return yv(e)}function R9(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Vs=typeof Object.is=="function"?Object.is:R9;function Df(t,e){if(Vs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!T_.call(e,s)||!Vs(t[s],e[s]))return!1}return!0}function tA(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nA(t,e){var n=tA(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tA(n)}}function wO(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?wO(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function _O(){for(var t=window,e=ey();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ey(t.document)}return e}function Rx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function P9(t){var e=_O(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&wO(n.ownerDocument.documentElement,n)){if(r!==null&&Rx(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=nA(n,i);var o=nA(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var N9=Ji&&"documentMode"in document&&11>=document.documentMode,Su=null,q_=null,Xh=null,z_=!1;function rA(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;z_||Su==null||Su!==ey(r)||(r=Su,"selectionStart"in r&&Rx(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xh&&Df(Xh,r)||(Xh=r,r=ay(q_,"onSelect"),0<r.length&&(e=new Ix("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Su)))}function km(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Iu={animationend:km("Animation","AnimationEnd"),animationiteration:km("Animation","AnimationIteration"),animationstart:km("Animation","AnimationStart"),transitionend:km("Transition","TransitionEnd")},rw={},EO={};Ji&&(EO=document.createElement("div").style,"AnimationEvent"in window||(delete Iu.animationend.animation,delete Iu.animationiteration.animation,delete Iu.animationstart.animation),"TransitionEvent"in window||delete Iu.transitionend.transition);function vv(t){if(rw[t])return rw[t];if(!Iu[t])return t;var e=Iu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in EO)return rw[t]=e[n];return t}var xO=vv("animationend"),bO=vv("animationiteration"),TO=vv("animationstart"),SO=vv("transitionend"),IO=new Map,sA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qa(t,e){IO.set(t,e),Ec(e,[t])}for(var sw=0;sw<sA.length;sw++){var iw=sA[sw],k9=iw.toLowerCase(),D9=iw[0].toUpperCase()+iw.slice(1);qa(k9,"on"+D9)}qa(xO,"onAnimationEnd");qa(bO,"onAnimationIteration");qa(TO,"onAnimationStart");qa("dblclick","onDoubleClick");qa("focusin","onFocus");qa("focusout","onBlur");qa(SO,"onTransitionEnd");sd("onMouseEnter",["mouseout","mouseover"]);sd("onMouseLeave",["mouseout","mouseover"]);sd("onPointerEnter",["pointerout","pointerover"]);sd("onPointerLeave",["pointerout","pointerover"]);Ec("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ec("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ec("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ec("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ec("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ec("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),O9=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oh));function iA(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,k$(r,e,void 0,t),t.currentTarget=null}function AO(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;iA(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;iA(s,a,c),i=l}}}if(ny)throw t=F_,ny=!1,F_=null,t}function ct(t,e){var n=e[Q_];n===void 0&&(n=e[Q_]=new Set);var r=t+"__bubble";n.has(r)||(CO(e,t,2,!1),n.add(r))}function ow(t,e,n){var r=0;e&&(r|=4),CO(n,t,r,e)}var Dm="_reactListening"+Math.random().toString(36).slice(2);function Of(t){if(!t[Dm]){t[Dm]=!0,LD.forEach(function(n){n!=="selectionchange"&&(O9.has(n)||ow(n,!1,t),ow(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Dm]||(e[Dm]=!0,ow("selectionchange",!1,e))}}function CO(t,e,n,r){switch(dO(e)){case 1:var s=K$;break;case 4:s=Q$;break;default:s=Tx}n=s.bind(null,e,n,t),s=void 0,!j_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function aw(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Vl(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}XD(function(){var c=i,u=_x(n),d=[];e:{var f=IO.get(t);if(f!==void 0){var p=Ix,g=t;switch(t){case"keypress":if(_g(n)===0)break e;case"keydown":case"keyup":p=u9;break;case"focusin":g="focus",p=ew;break;case"focusout":g="blur",p=ew;break;case"beforeblur":case"afterblur":p=ew;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=GI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=J$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=f9;break;case xO:case bO:case TO:p=t9;break;case SO:p=m9;break;case"scroll":p=Y$;break;case"wheel":p=y9;break;case"copy":case"cut":case"paste":p=r9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=QI}var m=(e&4)!==0,w=!m&&t==="scroll",v=m?f!==null?f+"Capture":null:f;m=[];for(var E=c,b;E!==null;){b=E;var C=b.stateNode;if(b.tag===5&&C!==null&&(b=C,v!==null&&(C=Cf(E,v),C!=null&&m.push(Lf(E,C,b)))),w)break;E=E.return}0<m.length&&(f=new p(f,g,null,n,u),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==M_&&(g=n.relatedTarget||n.fromElement)&&(Vl(g)||g[Zi]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=c,g=g?Vl(g):null,g!==null&&(w=xc(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(m=GI,C="onMouseLeave",v="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(m=QI,C="onPointerLeave",v="onPointerEnter",E="pointer"),w=p==null?f:Au(p),b=g==null?f:Au(g),f=new m(C,E+"leave",p,n,u),f.target=w,f.relatedTarget=b,C=null,Vl(u)===c&&(m=new m(v,E+"enter",g,n,u),m.target=b,m.relatedTarget=w,C=m),w=C,p&&g)t:{for(m=p,v=g,E=0,b=m;b;b=eu(b))E++;for(b=0,C=v;C;C=eu(C))b++;for(;0<E-b;)m=eu(m),E--;for(;0<b-E;)v=eu(v),b--;for(;E--;){if(m===v||v!==null&&m===v.alternate)break t;m=eu(m),v=eu(v)}m=null}else m=null;p!==null&&oA(d,f,p,m,!1),g!==null&&w!==null&&oA(d,w,g,m,!0)}}e:{if(f=c?Au(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var R=T9;else if(JI(f))if(yO)R=C9;else{R=I9;var O=S9}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(R=A9);if(R&&(R=R(t,c))){gO(d,R,n,u);break e}O&&O(t,f,c),t==="focusout"&&(O=f._wrapperState)&&O.controlled&&f.type==="number"&&N_(f,"number",f.value)}switch(O=c?Au(c):window,t){case"focusin":(JI(O)||O.contentEditable==="true")&&(Su=O,q_=c,Xh=null);break;case"focusout":Xh=q_=Su=null;break;case"mousedown":z_=!0;break;case"contextmenu":case"mouseup":case"dragend":z_=!1,rA(d,n,u);break;case"selectionchange":if(N9)break;case"keydown":case"keyup":rA(d,n,u)}var I;if(Cx)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Tu?pO(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(fO&&n.locale!=="ko"&&(Tu||A!=="onCompositionStart"?A==="onCompositionEnd"&&Tu&&(I=hO()):(sa=u,Sx="value"in sa?sa.value:sa.textContent,Tu=!0)),O=ay(c,A),0<O.length&&(A=new KI(A,t,null,n,u),d.push({event:A,listeners:O}),I?A.data=I:(I=mO(n),I!==null&&(A.data=I)))),(I=w9?_9(t,n):E9(t,n))&&(c=ay(c,"onBeforeInput"),0<c.length&&(u=new KI("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=I))}AO(d,e)})}function Lf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ay(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Cf(t,n),i!=null&&r.unshift(Lf(t,i,s)),i=Cf(t,e),i!=null&&r.push(Lf(t,i,s))),t=t.return}return r}function eu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function oA(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Cf(n,i),l!=null&&o.unshift(Lf(n,l,a))):s||(l=Cf(n,i),l!=null&&o.push(Lf(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var L9=/\r\n?/g,M9=/\u0000|\uFFFD/g;function aA(t){return(typeof t=="string"?t:""+t).replace(L9,`
`).replace(M9,"")}function Om(t,e,n){if(e=aA(e),aA(t)!==e&&n)throw Error(J(425))}function ly(){}var W_=null,H_=null;function G_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var K_=typeof setTimeout=="function"?setTimeout:void 0,V9=typeof clearTimeout=="function"?clearTimeout:void 0,lA=typeof Promise=="function"?Promise:void 0,j9=typeof queueMicrotask=="function"?queueMicrotask:typeof lA<"u"?function(t){return lA.resolve(null).then(t).catch(F9)}:K_;function F9(t){setTimeout(function(){throw t})}function lw(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Nf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Nf(e)}function fa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function cA(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Vd=Math.random().toString(36).slice(2),ri="__reactFiber$"+Vd,Mf="__reactProps$"+Vd,Zi="__reactContainer$"+Vd,Q_="__reactEvents$"+Vd,B9="__reactListeners$"+Vd,U9="__reactHandles$"+Vd;function Vl(t){var e=t[ri];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zi]||n[ri]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=cA(t);t!==null;){if(n=t[ri])return n;t=cA(t)}return e}t=n,n=t.parentNode}return null}function Lp(t){return t=t[ri]||t[Zi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Au(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function wv(t){return t[Mf]||null}var Y_=[],Cu=-1;function za(t){return{current:t}}function ht(t){0>Cu||(t.current=Y_[Cu],Y_[Cu]=null,Cu--)}function rt(t,e){Cu++,Y_[Cu]=t.current,t.current=e}var Sa={},Vn=za(Sa),dr=za(!1),Ql=Sa;function id(t,e){var n=t.type.contextTypes;if(!n)return Sa;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function hr(t){return t=t.childContextTypes,t!=null}function cy(){ht(dr),ht(Vn)}function uA(t,e,n){if(Vn.current!==Sa)throw Error(J(168));rt(Vn,e),rt(dr,n)}function RO(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(J(108,S$(t)||"Unknown",s));return bt({},n,r)}function uy(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Sa,Ql=Vn.current,rt(Vn,t),rt(dr,dr.current),!0}function dA(t,e,n){var r=t.stateNode;if(!r)throw Error(J(169));n?(t=RO(t,e,Ql),r.__reactInternalMemoizedMergedChildContext=t,ht(dr),ht(Vn),rt(Vn,t)):ht(dr),rt(dr,n)}var Fi=null,_v=!1,cw=!1;function PO(t){Fi===null?Fi=[t]:Fi.push(t)}function $9(t){_v=!0,PO(t)}function Wa(){if(!cw&&Fi!==null){cw=!0;var t=0,e=Qe;try{var n=Fi;for(Qe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Fi=null,_v=!1}catch(s){throw Fi!==null&&(Fi=Fi.slice(t+1)),tO(Ex,Wa),s}finally{Qe=e,cw=!1}}return null}var Ru=[],Pu=0,dy=null,hy=0,Zr=[],es=0,Yl=null,Ui=1,$i="";function Il(t,e){Ru[Pu++]=hy,Ru[Pu++]=dy,dy=t,hy=e}function NO(t,e,n){Zr[es++]=Ui,Zr[es++]=$i,Zr[es++]=Yl,Yl=t;var r=Ui;t=$i;var s=32-Ps(r)-1;r&=~(1<<s),n+=1;var i=32-Ps(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ui=1<<32-Ps(e)+s|n<<s|r,$i=i+t}else Ui=1<<i|n<<s|r,$i=t}function Px(t){t.return!==null&&(Il(t,1),NO(t,1,0))}function Nx(t){for(;t===dy;)dy=Ru[--Pu],Ru[Pu]=null,hy=Ru[--Pu],Ru[Pu]=null;for(;t===Yl;)Yl=Zr[--es],Zr[es]=null,$i=Zr[--es],Zr[es]=null,Ui=Zr[--es],Zr[es]=null}var Rr=null,Sr=null,mt=!1,As=null;function kO(t,e){var n=ss(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function hA(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Rr=t,Sr=fa(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Rr=t,Sr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Yl!==null?{id:Ui,overflow:$i}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ss(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Rr=t,Sr=null,!0):!1;default:return!1}}function X_(t){return(t.mode&1)!==0&&(t.flags&128)===0}function J_(t){if(mt){var e=Sr;if(e){var n=e;if(!hA(t,e)){if(X_(t))throw Error(J(418));e=fa(n.nextSibling);var r=Rr;e&&hA(t,e)?kO(r,n):(t.flags=t.flags&-4097|2,mt=!1,Rr=t)}}else{if(X_(t))throw Error(J(418));t.flags=t.flags&-4097|2,mt=!1,Rr=t}}}function fA(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rr=t}function Lm(t){if(t!==Rr)return!1;if(!mt)return fA(t),mt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!G_(t.type,t.memoizedProps)),e&&(e=Sr)){if(X_(t))throw DO(),Error(J(418));for(;e;)kO(t,e),e=fa(e.nextSibling)}if(fA(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Sr=fa(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Sr=null}}else Sr=Rr?fa(t.stateNode.nextSibling):null;return!0}function DO(){for(var t=Sr;t;)t=fa(t.nextSibling)}function od(){Sr=Rr=null,mt=!1}function kx(t){As===null?As=[t]:As.push(t)}var q9=mo.ReactCurrentBatchConfig;function yh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function Mm(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function pA(t){var e=t._init;return e(t._payload)}function OO(t){function e(v,E){if(t){var b=v.deletions;b===null?(v.deletions=[E],v.flags|=16):b.push(E)}}function n(v,E){if(!t)return null;for(;E!==null;)e(v,E),E=E.sibling;return null}function r(v,E){for(v=new Map;E!==null;)E.key!==null?v.set(E.key,E):v.set(E.index,E),E=E.sibling;return v}function s(v,E){return v=ya(v,E),v.index=0,v.sibling=null,v}function i(v,E,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<E?(v.flags|=2,E):b):(v.flags|=2,E)):(v.flags|=1048576,E)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,E,b,C){return E===null||E.tag!==6?(E=gw(b,v.mode,C),E.return=v,E):(E=s(E,b),E.return=v,E)}function l(v,E,b,C){var R=b.type;return R===bu?u(v,E,b.props.children,C,b.key):E!==null&&(E.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Go&&pA(R)===E.type)?(C=s(E,b.props),C.ref=yh(v,E,b),C.return=v,C):(C=Ag(b.type,b.key,b.props,null,v.mode,C),C.ref=yh(v,E,b),C.return=v,C)}function c(v,E,b,C){return E===null||E.tag!==4||E.stateNode.containerInfo!==b.containerInfo||E.stateNode.implementation!==b.implementation?(E=yw(b,v.mode,C),E.return=v,E):(E=s(E,b.children||[]),E.return=v,E)}function u(v,E,b,C,R){return E===null||E.tag!==7?(E=Wl(b,v.mode,C,R),E.return=v,E):(E=s(E,b),E.return=v,E)}function d(v,E,b){if(typeof E=="string"&&E!==""||typeof E=="number")return E=gw(""+E,v.mode,b),E.return=v,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Sm:return b=Ag(E.type,E.key,E.props,null,v.mode,b),b.ref=yh(v,null,E),b.return=v,b;case xu:return E=yw(E,v.mode,b),E.return=v,E;case Go:var C=E._init;return d(v,C(E._payload),b)}if(kh(E)||hh(E))return E=Wl(E,v.mode,b,null),E.return=v,E;Mm(v,E)}return null}function f(v,E,b,C){var R=E!==null?E.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return R!==null?null:a(v,E,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Sm:return b.key===R?l(v,E,b,C):null;case xu:return b.key===R?c(v,E,b,C):null;case Go:return R=b._init,f(v,E,R(b._payload),C)}if(kh(b)||hh(b))return R!==null?null:u(v,E,b,C,null);Mm(v,b)}return null}function p(v,E,b,C,R){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(b)||null,a(E,v,""+C,R);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Sm:return v=v.get(C.key===null?b:C.key)||null,l(E,v,C,R);case xu:return v=v.get(C.key===null?b:C.key)||null,c(E,v,C,R);case Go:var O=C._init;return p(v,E,b,O(C._payload),R)}if(kh(C)||hh(C))return v=v.get(b)||null,u(E,v,C,R,null);Mm(E,C)}return null}function g(v,E,b,C){for(var R=null,O=null,I=E,A=E=0,P=null;I!==null&&A<b.length;A++){I.index>A?(P=I,I=null):P=I.sibling;var D=f(v,I,b[A],C);if(D===null){I===null&&(I=P);break}t&&I&&D.alternate===null&&e(v,I),E=i(D,E,A),O===null?R=D:O.sibling=D,O=D,I=P}if(A===b.length)return n(v,I),mt&&Il(v,A),R;if(I===null){for(;A<b.length;A++)I=d(v,b[A],C),I!==null&&(E=i(I,E,A),O===null?R=I:O.sibling=I,O=I);return mt&&Il(v,A),R}for(I=r(v,I);A<b.length;A++)P=p(I,v,A,b[A],C),P!==null&&(t&&P.alternate!==null&&I.delete(P.key===null?A:P.key),E=i(P,E,A),O===null?R=P:O.sibling=P,O=P);return t&&I.forEach(function(M){return e(v,M)}),mt&&Il(v,A),R}function m(v,E,b,C){var R=hh(b);if(typeof R!="function")throw Error(J(150));if(b=R.call(b),b==null)throw Error(J(151));for(var O=R=null,I=E,A=E=0,P=null,D=b.next();I!==null&&!D.done;A++,D=b.next()){I.index>A?(P=I,I=null):P=I.sibling;var M=f(v,I,D.value,C);if(M===null){I===null&&(I=P);break}t&&I&&M.alternate===null&&e(v,I),E=i(M,E,A),O===null?R=M:O.sibling=M,O=M,I=P}if(D.done)return n(v,I),mt&&Il(v,A),R;if(I===null){for(;!D.done;A++,D=b.next())D=d(v,D.value,C),D!==null&&(E=i(D,E,A),O===null?R=D:O.sibling=D,O=D);return mt&&Il(v,A),R}for(I=r(v,I);!D.done;A++,D=b.next())D=p(I,v,A,D.value,C),D!==null&&(t&&D.alternate!==null&&I.delete(D.key===null?A:D.key),E=i(D,E,A),O===null?R=D:O.sibling=D,O=D);return t&&I.forEach(function(V){return e(v,V)}),mt&&Il(v,A),R}function w(v,E,b,C){if(typeof b=="object"&&b!==null&&b.type===bu&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Sm:e:{for(var R=b.key,O=E;O!==null;){if(O.key===R){if(R=b.type,R===bu){if(O.tag===7){n(v,O.sibling),E=s(O,b.props.children),E.return=v,v=E;break e}}else if(O.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Go&&pA(R)===O.type){n(v,O.sibling),E=s(O,b.props),E.ref=yh(v,O,b),E.return=v,v=E;break e}n(v,O);break}else e(v,O);O=O.sibling}b.type===bu?(E=Wl(b.props.children,v.mode,C,b.key),E.return=v,v=E):(C=Ag(b.type,b.key,b.props,null,v.mode,C),C.ref=yh(v,E,b),C.return=v,v=C)}return o(v);case xu:e:{for(O=b.key;E!==null;){if(E.key===O)if(E.tag===4&&E.stateNode.containerInfo===b.containerInfo&&E.stateNode.implementation===b.implementation){n(v,E.sibling),E=s(E,b.children||[]),E.return=v,v=E;break e}else{n(v,E);break}else e(v,E);E=E.sibling}E=yw(b,v.mode,C),E.return=v,v=E}return o(v);case Go:return O=b._init,w(v,E,O(b._payload),C)}if(kh(b))return g(v,E,b,C);if(hh(b))return m(v,E,b,C);Mm(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,E!==null&&E.tag===6?(n(v,E.sibling),E=s(E,b),E.return=v,v=E):(n(v,E),E=gw(b,v.mode,C),E.return=v,v=E),o(v)):n(v,E)}return w}var ad=OO(!0),LO=OO(!1),fy=za(null),py=null,Nu=null,Dx=null;function Ox(){Dx=Nu=py=null}function Lx(t){var e=fy.current;ht(fy),t._currentValue=e}function Z_(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function qu(t,e){py=t,Dx=Nu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ar=!0),t.firstContext=null)}function us(t){var e=t._currentValue;if(Dx!==t)if(t={context:t,memoizedValue:e,next:null},Nu===null){if(py===null)throw Error(J(308));Nu=t,py.dependencies={lanes:0,firstContext:t}}else Nu=Nu.next=t;return e}var jl=null;function Mx(t){jl===null?jl=[t]:jl.push(t)}function MO(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Mx(e)):(n.next=s.next,s.next=n),e.interleaved=n,eo(t,r)}function eo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ko=!1;function Vx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function VO(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ki(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function pa(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,$e&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,eo(t,n)}return s=r.interleaved,s===null?(e.next=e,Mx(r)):(e.next=s.next,s.next=e),r.interleaved=e,eo(t,n)}function Eg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xx(t,n)}}function mA(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function my(t,e,n,r){var s=t.updateQueue;Ko=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,u=c=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,m=a;switch(f=e,p=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){d=g.call(p,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,f=typeof g=="function"?g.call(p,d,f):g,f==null)break e;d=bt({},d,f);break e;case 2:Ko=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Jl|=o,t.lanes=o,t.memoizedState=d}}function gA(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(J(191,s));s.call(r)}}}var Mp={},ai=za(Mp),Vf=za(Mp),jf=za(Mp);function Fl(t){if(t===Mp)throw Error(J(174));return t}function jx(t,e){switch(rt(jf,e),rt(Vf,t),rt(ai,Mp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:D_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=D_(e,t)}ht(ai),rt(ai,e)}function ld(){ht(ai),ht(Vf),ht(jf)}function jO(t){Fl(jf.current);var e=Fl(ai.current),n=D_(e,t.type);e!==n&&(rt(Vf,t),rt(ai,n))}function Fx(t){Vf.current===t&&(ht(ai),ht(Vf))}var vt=za(0);function gy(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var uw=[];function Bx(){for(var t=0;t<uw.length;t++)uw[t]._workInProgressVersionPrimary=null;uw.length=0}var xg=mo.ReactCurrentDispatcher,dw=mo.ReactCurrentBatchConfig,Xl=0,Et=null,Kt=null,sn=null,yy=!1,Jh=!1,Ff=0,z9=0;function In(){throw Error(J(321))}function Ux(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Vs(t[n],e[n]))return!1;return!0}function $x(t,e,n,r,s,i){if(Xl=i,Et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xg.current=t===null||t.memoizedState===null?K9:Q9,t=n(r,s),Jh){i=0;do{if(Jh=!1,Ff=0,25<=i)throw Error(J(301));i+=1,sn=Kt=null,e.updateQueue=null,xg.current=Y9,t=n(r,s)}while(Jh)}if(xg.current=vy,e=Kt!==null&&Kt.next!==null,Xl=0,sn=Kt=Et=null,yy=!1,e)throw Error(J(300));return t}function qx(){var t=Ff!==0;return Ff=0,t}function ti(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?Et.memoizedState=sn=t:sn=sn.next=t,sn}function ds(){if(Kt===null){var t=Et.alternate;t=t!==null?t.memoizedState:null}else t=Kt.next;var e=sn===null?Et.memoizedState:sn.next;if(e!==null)sn=e,Kt=t;else{if(t===null)throw Error(J(310));Kt=t,t={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},sn===null?Et.memoizedState=sn=t:sn=sn.next=t}return sn}function Bf(t,e){return typeof e=="function"?e(t):e}function hw(t){var e=ds(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=Kt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((Xl&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Et.lanes|=u,Jl|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Vs(r,e.memoizedState)||(ar=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Et.lanes|=i,Jl|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function fw(t){var e=ds(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Vs(i,e.memoizedState)||(ar=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function FO(){}function BO(t,e){var n=Et,r=ds(),s=e(),i=!Vs(r.memoizedState,s);if(i&&(r.memoizedState=s,ar=!0),r=r.queue,zx(qO.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||sn!==null&&sn.memoizedState.tag&1){if(n.flags|=2048,Uf(9,$O.bind(null,n,r,s,e),void 0,null),an===null)throw Error(J(349));Xl&30||UO(n,e,s)}return s}function UO(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Et.updateQueue,e===null?(e={lastEffect:null,stores:null},Et.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $O(t,e,n,r){e.value=n,e.getSnapshot=r,zO(e)&&WO(t)}function qO(t,e,n){return n(function(){zO(e)&&WO(t)})}function zO(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Vs(t,n)}catch{return!0}}function WO(t){var e=eo(t,1);e!==null&&Ns(e,t,1,-1)}function yA(t){var e=ti();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bf,lastRenderedState:t},e.queue=t,t=t.dispatch=G9.bind(null,Et,t),[e.memoizedState,t]}function Uf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Et.updateQueue,e===null?(e={lastEffect:null,stores:null},Et.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function HO(){return ds().memoizedState}function bg(t,e,n,r){var s=ti();Et.flags|=t,s.memoizedState=Uf(1|e,n,void 0,r===void 0?null:r)}function Ev(t,e,n,r){var s=ds();r=r===void 0?null:r;var i=void 0;if(Kt!==null){var o=Kt.memoizedState;if(i=o.destroy,r!==null&&Ux(r,o.deps)){s.memoizedState=Uf(e,n,i,r);return}}Et.flags|=t,s.memoizedState=Uf(1|e,n,i,r)}function vA(t,e){return bg(8390656,8,t,e)}function zx(t,e){return Ev(2048,8,t,e)}function GO(t,e){return Ev(4,2,t,e)}function KO(t,e){return Ev(4,4,t,e)}function QO(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function YO(t,e,n){return n=n!=null?n.concat([t]):null,Ev(4,4,QO.bind(null,e,t),n)}function Wx(){}function XO(t,e){var n=ds();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ux(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function JO(t,e){var n=ds();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ux(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ZO(t,e,n){return Xl&21?(Vs(n,e)||(n=sO(),Et.lanes|=n,Jl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ar=!0),t.memoizedState=n)}function W9(t,e){var n=Qe;Qe=n!==0&&4>n?n:4,t(!0);var r=dw.transition;dw.transition={};try{t(!1),e()}finally{Qe=n,dw.transition=r}}function e2(){return ds().memoizedState}function H9(t,e,n){var r=ga(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},t2(t))n2(e,n);else if(n=MO(t,e,n,r),n!==null){var s=Gn();Ns(n,t,r,s),r2(n,e,r)}}function G9(t,e,n){var r=ga(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(t2(t))n2(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Vs(a,o)){var l=e.interleaved;l===null?(s.next=s,Mx(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=MO(t,e,s,r),n!==null&&(s=Gn(),Ns(n,t,r,s),r2(n,e,r))}}function t2(t){var e=t.alternate;return t===Et||e!==null&&e===Et}function n2(t,e){Jh=yy=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function r2(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xx(t,n)}}var vy={readContext:us,useCallback:In,useContext:In,useEffect:In,useImperativeHandle:In,useInsertionEffect:In,useLayoutEffect:In,useMemo:In,useReducer:In,useRef:In,useState:In,useDebugValue:In,useDeferredValue:In,useTransition:In,useMutableSource:In,useSyncExternalStore:In,useId:In,unstable_isNewReconciler:!1},K9={readContext:us,useCallback:function(t,e){return ti().memoizedState=[t,e===void 0?null:e],t},useContext:us,useEffect:vA,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,bg(4194308,4,QO.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bg(4194308,4,t,e)},useInsertionEffect:function(t,e){return bg(4,2,t,e)},useMemo:function(t,e){var n=ti();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ti();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=H9.bind(null,Et,t),[r.memoizedState,t]},useRef:function(t){var e=ti();return t={current:t},e.memoizedState=t},useState:yA,useDebugValue:Wx,useDeferredValue:function(t){return ti().memoizedState=t},useTransition:function(){var t=yA(!1),e=t[0];return t=W9.bind(null,t[1]),ti().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Et,s=ti();if(mt){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),an===null)throw Error(J(349));Xl&30||UO(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,vA(qO.bind(null,r,i,t),[t]),r.flags|=2048,Uf(9,$O.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ti(),e=an.identifierPrefix;if(mt){var n=$i,r=Ui;n=(r&~(1<<32-Ps(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ff++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=z9++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Q9={readContext:us,useCallback:XO,useContext:us,useEffect:zx,useImperativeHandle:YO,useInsertionEffect:GO,useLayoutEffect:KO,useMemo:JO,useReducer:hw,useRef:HO,useState:function(){return hw(Bf)},useDebugValue:Wx,useDeferredValue:function(t){var e=ds();return ZO(e,Kt.memoizedState,t)},useTransition:function(){var t=hw(Bf)[0],e=ds().memoizedState;return[t,e]},useMutableSource:FO,useSyncExternalStore:BO,useId:e2,unstable_isNewReconciler:!1},Y9={readContext:us,useCallback:XO,useContext:us,useEffect:zx,useImperativeHandle:YO,useInsertionEffect:GO,useLayoutEffect:KO,useMemo:JO,useReducer:fw,useRef:HO,useState:function(){return fw(Bf)},useDebugValue:Wx,useDeferredValue:function(t){var e=ds();return Kt===null?e.memoizedState=t:ZO(e,Kt.memoizedState,t)},useTransition:function(){var t=fw(Bf)[0],e=ds().memoizedState;return[t,e]},useMutableSource:FO,useSyncExternalStore:BO,useId:e2,unstable_isNewReconciler:!1};function Ss(t,e){if(t&&t.defaultProps){e=bt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function e1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:bt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xv={isMounted:function(t){return(t=t._reactInternals)?xc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Gn(),s=ga(t),i=Ki(r,s);i.payload=e,n!=null&&(i.callback=n),e=pa(t,i,s),e!==null&&(Ns(e,t,s,r),Eg(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Gn(),s=ga(t),i=Ki(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=pa(t,i,s),e!==null&&(Ns(e,t,s,r),Eg(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Gn(),r=ga(t),s=Ki(n,r);s.tag=2,e!=null&&(s.callback=e),e=pa(t,s,r),e!==null&&(Ns(e,t,r,n),Eg(e,t,r))}};function wA(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Df(n,r)||!Df(s,i):!0}function s2(t,e,n){var r=!1,s=Sa,i=e.contextType;return typeof i=="object"&&i!==null?i=us(i):(s=hr(e)?Ql:Vn.current,r=e.contextTypes,i=(r=r!=null)?id(t,s):Sa),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xv,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function _A(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xv.enqueueReplaceState(e,e.state,null)}function t1(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Vx(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=us(i):(i=hr(e)?Ql:Vn.current,s.context=id(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(e1(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&xv.enqueueReplaceState(s,s.state,null),my(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function cd(t,e){try{var n="",r=e;do n+=T$(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function pw(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function n1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var X9=typeof WeakMap=="function"?WeakMap:Map;function i2(t,e,n){n=Ki(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_y||(_y=!0,h1=r),n1(t,e)},n}function o2(t,e,n){n=Ki(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){n1(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){n1(t,e),typeof r!="function"&&(ma===null?ma=new Set([this]):ma.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function EA(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new X9;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=d6.bind(null,t,e,n),e.then(t,t))}function xA(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function bA(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ki(-1,1),e.tag=2,pa(n,e,1))),n.lanes|=1),t)}var J9=mo.ReactCurrentOwner,ar=!1;function $n(t,e,n,r){e.child=t===null?LO(e,null,n,r):ad(e,t.child,n,r)}function TA(t,e,n,r,s){n=n.render;var i=e.ref;return qu(e,s),r=$x(t,e,n,r,i,s),n=qx(),t!==null&&!ar?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,to(t,e,s)):(mt&&n&&Px(e),e.flags|=1,$n(t,e,r,s),e.child)}function SA(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Zx(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,a2(t,e,i,r,s)):(t=Ag(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Df,n(o,r)&&t.ref===e.ref)return to(t,e,s)}return e.flags|=1,t=ya(i,r),t.ref=e.ref,t.return=e,e.child=t}function a2(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Df(i,r)&&t.ref===e.ref)if(ar=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(ar=!0);else return e.lanes=t.lanes,to(t,e,s)}return r1(t,e,n,r,s)}function l2(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(Du,xr),xr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,rt(Du,xr),xr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,rt(Du,xr),xr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,rt(Du,xr),xr|=r;return $n(t,e,s,n),e.child}function c2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function r1(t,e,n,r,s){var i=hr(n)?Ql:Vn.current;return i=id(e,i),qu(e,s),n=$x(t,e,n,r,i,s),r=qx(),t!==null&&!ar?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,to(t,e,s)):(mt&&r&&Px(e),e.flags|=1,$n(t,e,n,s),e.child)}function IA(t,e,n,r,s){if(hr(n)){var i=!0;uy(e)}else i=!1;if(qu(e,s),e.stateNode===null)Tg(t,e),s2(e,n,r),t1(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=us(c):(c=hr(n)?Ql:Vn.current,c=id(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&_A(e,o,r,c),Ko=!1;var f=e.memoizedState;o.state=f,my(e,r,o,s),l=e.memoizedState,a!==r||f!==l||dr.current||Ko?(typeof u=="function"&&(e1(e,n,u,r),l=e.memoizedState),(a=Ko||wA(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,VO(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ss(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=us(l):(l=hr(n)?Ql:Vn.current,l=id(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&_A(e,o,r,l),Ko=!1,f=e.memoizedState,o.state=f,my(e,r,o,s);var g=e.memoizedState;a!==d||f!==g||dr.current||Ko?(typeof p=="function"&&(e1(e,n,p,r),g=e.memoizedState),(c=Ko||wA(e,n,c,r,f,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return s1(t,e,n,r,i,s)}function s1(t,e,n,r,s,i){c2(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&dA(e,n,!1),to(t,e,i);r=e.stateNode,J9.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ad(e,t.child,null,i),e.child=ad(e,null,a,i)):$n(t,e,a,i),e.memoizedState=r.state,s&&dA(e,n,!0),e.child}function u2(t){var e=t.stateNode;e.pendingContext?uA(t,e.pendingContext,e.pendingContext!==e.context):e.context&&uA(t,e.context,!1),jx(t,e.containerInfo)}function AA(t,e,n,r,s){return od(),kx(s),e.flags|=256,$n(t,e,n,r),e.child}var i1={dehydrated:null,treeContext:null,retryLane:0};function o1(t){return{baseLanes:t,cachePool:null,transitions:null}}function d2(t,e,n){var r=e.pendingProps,s=vt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),rt(vt,s&1),t===null)return J_(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Sv(o,r,0,null),t=Wl(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=o1(n),e.memoizedState=i1,t):Hx(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Z9(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ya(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ya(a,i):(i=Wl(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?o1(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=i1,r}return i=t.child,t=i.sibling,r=ya(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Hx(t,e){return e=Sv({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vm(t,e,n,r){return r!==null&&kx(r),ad(e,t.child,null,n),t=Hx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Z9(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=pw(Error(J(422))),Vm(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Sv({mode:"visible",children:r.children},s,0,null),i=Wl(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ad(e,t.child,null,o),e.child.memoizedState=o1(o),e.memoizedState=i1,i);if(!(e.mode&1))return Vm(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(J(419)),r=pw(i,r,void 0),Vm(t,e,o,r)}if(a=(o&t.childLanes)!==0,ar||a){if(r=an,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,eo(t,s),Ns(r,t,s,-1))}return Jx(),r=pw(Error(J(421))),Vm(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=h6.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Sr=fa(s.nextSibling),Rr=e,mt=!0,As=null,t!==null&&(Zr[es++]=Ui,Zr[es++]=$i,Zr[es++]=Yl,Ui=t.id,$i=t.overflow,Yl=e),e=Hx(e,r.children),e.flags|=4096,e)}function CA(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Z_(t.return,e,n)}function mw(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function h2(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if($n(t,e,r.children,n),r=vt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&CA(t,n,e);else if(t.tag===19)CA(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(rt(vt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&gy(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),mw(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&gy(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}mw(e,!0,n,null,i);break;case"together":mw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function to(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Jl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=ya(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ya(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function e6(t,e,n){switch(e.tag){case 3:u2(e),od();break;case 5:jO(e);break;case 1:hr(e.type)&&uy(e);break;case 4:jx(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;rt(fy,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(rt(vt,vt.current&1),e.flags|=128,null):n&e.child.childLanes?d2(t,e,n):(rt(vt,vt.current&1),t=to(t,e,n),t!==null?t.sibling:null);rt(vt,vt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return h2(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),rt(vt,vt.current),r)break;return null;case 22:case 23:return e.lanes=0,l2(t,e,n)}return to(t,e,n)}var f2,a1,p2,m2;f2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};a1=function(){};p2=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Fl(ai.current);var i=null;switch(n){case"input":s=R_(t,s),r=R_(t,r),i=[];break;case"select":s=bt({},s,{value:void 0}),r=bt({},r,{value:void 0}),i=[];break;case"textarea":s=k_(t,s),r=k_(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ly)}O_(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(If.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(If.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ct("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};m2=function(t,e,n,r){n!==r&&(e.flags|=4)};function vh(t,e){if(!mt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function An(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function t6(t,e,n){var r=e.pendingProps;switch(Nx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return An(e),null;case 1:return hr(e.type)&&cy(),An(e),null;case 3:return r=e.stateNode,ld(),ht(dr),ht(Vn),Bx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Lm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,As!==null&&(m1(As),As=null))),a1(t,e),An(e),null;case 5:Fx(e);var s=Fl(jf.current);if(n=e.type,t!==null&&e.stateNode!=null)p2(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(J(166));return An(e),null}if(t=Fl(ai.current),Lm(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ri]=e,r[Mf]=i,t=(e.mode&1)!==0,n){case"dialog":ct("cancel",r),ct("close",r);break;case"iframe":case"object":case"embed":ct("load",r);break;case"video":case"audio":for(s=0;s<Oh.length;s++)ct(Oh[s],r);break;case"source":ct("error",r);break;case"img":case"image":case"link":ct("error",r),ct("load",r);break;case"details":ct("toggle",r);break;case"input":VI(r,i),ct("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ct("invalid",r);break;case"textarea":FI(r,i),ct("invalid",r)}O_(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Om(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Om(r.textContent,a,t),s=["children",""+a]):If.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ct("scroll",r)}switch(n){case"input":Im(r),jI(r,i,!0);break;case"textarea":Im(r),BI(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ly)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qD(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ri]=e,t[Mf]=r,f2(t,e,!1,!1),e.stateNode=t;e:{switch(o=L_(n,r),n){case"dialog":ct("cancel",t),ct("close",t),s=r;break;case"iframe":case"object":case"embed":ct("load",t),s=r;break;case"video":case"audio":for(s=0;s<Oh.length;s++)ct(Oh[s],t);s=r;break;case"source":ct("error",t),s=r;break;case"img":case"image":case"link":ct("error",t),ct("load",t),s=r;break;case"details":ct("toggle",t),s=r;break;case"input":VI(t,r),s=R_(t,r),ct("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=bt({},r,{value:void 0}),ct("invalid",t);break;case"textarea":FI(t,r),s=k_(t,r),ct("invalid",t);break;default:s=r}O_(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?HD(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&zD(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Af(t,l):typeof l=="number"&&Af(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(If.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ct("scroll",t):l!=null&&gx(t,i,l,o))}switch(n){case"input":Im(t),jI(t,r,!1);break;case"textarea":Im(t),BI(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ta(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Fu(t,!!r.multiple,i,!1):r.defaultValue!=null&&Fu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ly)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return An(e),null;case 6:if(t&&e.stateNode!=null)m2(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(J(166));if(n=Fl(jf.current),Fl(ai.current),Lm(e)){if(r=e.stateNode,n=e.memoizedProps,r[ri]=e,(i=r.nodeValue!==n)&&(t=Rr,t!==null))switch(t.tag){case 3:Om(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Om(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ri]=e,e.stateNode=r}return An(e),null;case 13:if(ht(vt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(mt&&Sr!==null&&e.mode&1&&!(e.flags&128))DO(),od(),e.flags|=98560,i=!1;else if(i=Lm(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(J(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(J(317));i[ri]=e}else od(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;An(e),i=!1}else As!==null&&(m1(As),As=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||vt.current&1?Yt===0&&(Yt=3):Jx())),e.updateQueue!==null&&(e.flags|=4),An(e),null);case 4:return ld(),a1(t,e),t===null&&Of(e.stateNode.containerInfo),An(e),null;case 10:return Lx(e.type._context),An(e),null;case 17:return hr(e.type)&&cy(),An(e),null;case 19:if(ht(vt),i=e.memoizedState,i===null)return An(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)vh(i,!1);else{if(Yt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=gy(t),o!==null){for(e.flags|=128,vh(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return rt(vt,vt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ot()>ud&&(e.flags|=128,r=!0,vh(i,!1),e.lanes=4194304)}else{if(!r)if(t=gy(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),vh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!mt)return An(e),null}else 2*Ot()-i.renderingStartTime>ud&&n!==1073741824&&(e.flags|=128,r=!0,vh(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ot(),e.sibling=null,n=vt.current,rt(vt,r?n&1|2:n&1),e):(An(e),null);case 22:case 23:return Xx(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?xr&1073741824&&(An(e),e.subtreeFlags&6&&(e.flags|=8192)):An(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function n6(t,e){switch(Nx(e),e.tag){case 1:return hr(e.type)&&cy(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ld(),ht(dr),ht(Vn),Bx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Fx(e),null;case 13:if(ht(vt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));od()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ht(vt),null;case 4:return ld(),null;case 10:return Lx(e.type._context),null;case 22:case 23:return Xx(),null;case 24:return null;default:return null}}var jm=!1,Nn=!1,r6=typeof WeakSet=="function"?WeakSet:Set,le=null;function ku(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Rt(t,e,r)}else n.current=null}function l1(t,e,n){try{n()}catch(r){Rt(t,e,r)}}var RA=!1;function s6(t,e){if(W_=iy,t=_O(),Rx(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++u===r&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(H_={focusedElem:t,selectionRange:n},iy=!1,le=e;le!==null;)if(e=le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,le=t;else for(;le!==null;){e=le;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,w=g.memoizedState,v=e.stateNode,E=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:Ss(e.type,m),w);v.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(C){Rt(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,le=t;break}le=e.return}return g=RA,RA=!1,g}function Zh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&l1(e,n,i)}s=s.next}while(s!==r)}}function bv(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function c1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function g2(t){var e=t.alternate;e!==null&&(t.alternate=null,g2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ri],delete e[Mf],delete e[Q_],delete e[B9],delete e[U9])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function y2(t){return t.tag===5||t.tag===3||t.tag===4}function PA(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||y2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function u1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ly));else if(r!==4&&(t=t.child,t!==null))for(u1(t,e,n),t=t.sibling;t!==null;)u1(t,e,n),t=t.sibling}function d1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(d1(t,e,n),t=t.sibling;t!==null;)d1(t,e,n),t=t.sibling}var mn=null,Is=!1;function Oo(t,e,n){for(n=n.child;n!==null;)v2(t,e,n),n=n.sibling}function v2(t,e,n){if(oi&&typeof oi.onCommitFiberUnmount=="function")try{oi.onCommitFiberUnmount(mv,n)}catch{}switch(n.tag){case 5:Nn||ku(n,e);case 6:var r=mn,s=Is;mn=null,Oo(t,e,n),mn=r,Is=s,mn!==null&&(Is?(t=mn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):mn.removeChild(n.stateNode));break;case 18:mn!==null&&(Is?(t=mn,n=n.stateNode,t.nodeType===8?lw(t.parentNode,n):t.nodeType===1&&lw(t,n),Nf(t)):lw(mn,n.stateNode));break;case 4:r=mn,s=Is,mn=n.stateNode.containerInfo,Is=!0,Oo(t,e,n),mn=r,Is=s;break;case 0:case 11:case 14:case 15:if(!Nn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&l1(n,e,o),s=s.next}while(s!==r)}Oo(t,e,n);break;case 1:if(!Nn&&(ku(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Rt(n,e,a)}Oo(t,e,n);break;case 21:Oo(t,e,n);break;case 22:n.mode&1?(Nn=(r=Nn)||n.memoizedState!==null,Oo(t,e,n),Nn=r):Oo(t,e,n);break;default:Oo(t,e,n)}}function NA(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new r6),e.forEach(function(r){var s=f6.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function _s(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:mn=a.stateNode,Is=!1;break e;case 3:mn=a.stateNode.containerInfo,Is=!0;break e;case 4:mn=a.stateNode.containerInfo,Is=!0;break e}a=a.return}if(mn===null)throw Error(J(160));v2(i,o,s),mn=null,Is=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Rt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)w2(e,t),e=e.sibling}function w2(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_s(e,t),ei(t),r&4){try{Zh(3,t,t.return),bv(3,t)}catch(m){Rt(t,t.return,m)}try{Zh(5,t,t.return)}catch(m){Rt(t,t.return,m)}}break;case 1:_s(e,t),ei(t),r&512&&n!==null&&ku(n,n.return);break;case 5:if(_s(e,t),ei(t),r&512&&n!==null&&ku(n,n.return),t.flags&32){var s=t.stateNode;try{Af(s,"")}catch(m){Rt(t,t.return,m)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&UD(s,i),L_(a,o);var c=L_(a,i);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?HD(s,d):u==="dangerouslySetInnerHTML"?zD(s,d):u==="children"?Af(s,d):gx(s,u,d,c)}switch(a){case"input":P_(s,i);break;case"textarea":$D(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Fu(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?Fu(s,!!i.multiple,i.defaultValue,!0):Fu(s,!!i.multiple,i.multiple?[]:"",!1))}s[Mf]=i}catch(m){Rt(t,t.return,m)}}break;case 6:if(_s(e,t),ei(t),r&4){if(t.stateNode===null)throw Error(J(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(m){Rt(t,t.return,m)}}break;case 3:if(_s(e,t),ei(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Nf(e.containerInfo)}catch(m){Rt(t,t.return,m)}break;case 4:_s(e,t),ei(t);break;case 13:_s(e,t),ei(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Qx=Ot())),r&4&&NA(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Nn=(c=Nn)||u,_s(e,t),Nn=c):_s(e,t),ei(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(le=t,u=t.child;u!==null;){for(d=le=u;le!==null;){switch(f=le,p=f.child,f.tag){case 0:case 11:case 14:case 15:Zh(4,f,f.return);break;case 1:ku(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Rt(r,n,m)}}break;case 5:ku(f,f.return);break;case 22:if(f.memoizedState!==null){DA(d);continue}}p!==null?(p.return=f,le=p):DA(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=WD("display",o))}catch(m){Rt(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Rt(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:_s(e,t),ei(t),r&4&&NA(t);break;case 21:break;default:_s(e,t),ei(t)}}function ei(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(y2(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Af(s,""),r.flags&=-33);var i=PA(t);d1(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=PA(t);u1(t,a,o);break;default:throw Error(J(161))}}catch(l){Rt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function i6(t,e,n){le=t,_2(t)}function _2(t,e,n){for(var r=(t.mode&1)!==0;le!==null;){var s=le,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||jm;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Nn;a=jm;var c=Nn;if(jm=o,(Nn=l)&&!c)for(le=s;le!==null;)o=le,l=o.child,o.tag===22&&o.memoizedState!==null?OA(s):l!==null?(l.return=o,le=l):OA(s);for(;i!==null;)le=i,_2(i),i=i.sibling;le=s,jm=a,Nn=c}kA(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,le=i):kA(t)}}function kA(t){for(;le!==null;){var e=le;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nn||bv(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Nn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ss(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&gA(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gA(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Nf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Nn||e.flags&512&&c1(e)}catch(f){Rt(e,e.return,f)}}if(e===t){le=null;break}if(n=e.sibling,n!==null){n.return=e.return,le=n;break}le=e.return}}function DA(t){for(;le!==null;){var e=le;if(e===t){le=null;break}var n=e.sibling;if(n!==null){n.return=e.return,le=n;break}le=e.return}}function OA(t){for(;le!==null;){var e=le;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{bv(4,e)}catch(l){Rt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Rt(e,s,l)}}var i=e.return;try{c1(e)}catch(l){Rt(e,i,l)}break;case 5:var o=e.return;try{c1(e)}catch(l){Rt(e,o,l)}}}catch(l){Rt(e,e.return,l)}if(e===t){le=null;break}var a=e.sibling;if(a!==null){a.return=e.return,le=a;break}le=e.return}}var o6=Math.ceil,wy=mo.ReactCurrentDispatcher,Gx=mo.ReactCurrentOwner,ls=mo.ReactCurrentBatchConfig,$e=0,an=null,$t=null,wn=0,xr=0,Du=za(0),Yt=0,$f=null,Jl=0,Tv=0,Kx=0,ef=null,ir=null,Qx=0,ud=1/0,ji=null,_y=!1,h1=null,ma=null,Fm=!1,ia=null,Ey=0,tf=0,f1=null,Sg=-1,Ig=0;function Gn(){return $e&6?Ot():Sg!==-1?Sg:Sg=Ot()}function ga(t){return t.mode&1?$e&2&&wn!==0?wn&-wn:q9.transition!==null?(Ig===0&&(Ig=sO()),Ig):(t=Qe,t!==0||(t=window.event,t=t===void 0?16:dO(t.type)),t):1}function Ns(t,e,n,r){if(50<tf)throw tf=0,f1=null,Error(J(185));Dp(t,n,r),(!($e&2)||t!==an)&&(t===an&&(!($e&2)&&(Tv|=n),Yt===4&&Xo(t,wn)),fr(t,r),n===1&&$e===0&&!(e.mode&1)&&(ud=Ot()+500,_v&&Wa()))}function fr(t,e){var n=t.callbackNode;q$(t,e);var r=sy(t,t===an?wn:0);if(r===0)n!==null&&qI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&qI(n),e===1)t.tag===0?$9(LA.bind(null,t)):PO(LA.bind(null,t)),j9(function(){!($e&6)&&Wa()}),n=null;else{switch(iO(r)){case 1:n=Ex;break;case 4:n=nO;break;case 16:n=ry;break;case 536870912:n=rO;break;default:n=ry}n=C2(n,E2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function E2(t,e){if(Sg=-1,Ig=0,$e&6)throw Error(J(327));var n=t.callbackNode;if(zu()&&t.callbackNode!==n)return null;var r=sy(t,t===an?wn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=xy(t,r);else{e=r;var s=$e;$e|=2;var i=b2();(an!==t||wn!==e)&&(ji=null,ud=Ot()+500,zl(t,e));do try{c6();break}catch(a){x2(t,a)}while(!0);Ox(),wy.current=i,$e=s,$t!==null?e=0:(an=null,wn=0,e=Yt)}if(e!==0){if(e===2&&(s=B_(t),s!==0&&(r=s,e=p1(t,s))),e===1)throw n=$f,zl(t,0),Xo(t,r),fr(t,Ot()),n;if(e===6)Xo(t,r);else{if(s=t.current.alternate,!(r&30)&&!a6(s)&&(e=xy(t,r),e===2&&(i=B_(t),i!==0&&(r=i,e=p1(t,i))),e===1))throw n=$f,zl(t,0),Xo(t,r),fr(t,Ot()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(J(345));case 2:Al(t,ir,ji);break;case 3:if(Xo(t,r),(r&130023424)===r&&(e=Qx+500-Ot(),10<e)){if(sy(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Gn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=K_(Al.bind(null,t,ir,ji),e);break}Al(t,ir,ji);break;case 4:if(Xo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ps(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ot()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*o6(r/1960))-r,10<r){t.timeoutHandle=K_(Al.bind(null,t,ir,ji),r);break}Al(t,ir,ji);break;case 5:Al(t,ir,ji);break;default:throw Error(J(329))}}}return fr(t,Ot()),t.callbackNode===n?E2.bind(null,t):null}function p1(t,e){var n=ef;return t.current.memoizedState.isDehydrated&&(zl(t,e).flags|=256),t=xy(t,e),t!==2&&(e=ir,ir=n,e!==null&&m1(e)),t}function m1(t){ir===null?ir=t:ir.push.apply(ir,t)}function a6(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Vs(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xo(t,e){for(e&=~Kx,e&=~Tv,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ps(e),r=1<<n;t[n]=-1,e&=~r}}function LA(t){if($e&6)throw Error(J(327));zu();var e=sy(t,0);if(!(e&1))return fr(t,Ot()),null;var n=xy(t,e);if(t.tag!==0&&n===2){var r=B_(t);r!==0&&(e=r,n=p1(t,r))}if(n===1)throw n=$f,zl(t,0),Xo(t,e),fr(t,Ot()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Al(t,ir,ji),fr(t,Ot()),null}function Yx(t,e){var n=$e;$e|=1;try{return t(e)}finally{$e=n,$e===0&&(ud=Ot()+500,_v&&Wa())}}function Zl(t){ia!==null&&ia.tag===0&&!($e&6)&&zu();var e=$e;$e|=1;var n=ls.transition,r=Qe;try{if(ls.transition=null,Qe=1,t)return t()}finally{Qe=r,ls.transition=n,$e=e,!($e&6)&&Wa()}}function Xx(){xr=Du.current,ht(Du)}function zl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,V9(n)),$t!==null)for(n=$t.return;n!==null;){var r=n;switch(Nx(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cy();break;case 3:ld(),ht(dr),ht(Vn),Bx();break;case 5:Fx(r);break;case 4:ld();break;case 13:ht(vt);break;case 19:ht(vt);break;case 10:Lx(r.type._context);break;case 22:case 23:Xx()}n=n.return}if(an=t,$t=t=ya(t.current,null),wn=xr=e,Yt=0,$f=null,Kx=Tv=Jl=0,ir=ef=null,jl!==null){for(e=0;e<jl.length;e++)if(n=jl[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}jl=null}return t}function x2(t,e){do{var n=$t;try{if(Ox(),xg.current=vy,yy){for(var r=Et.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}yy=!1}if(Xl=0,sn=Kt=Et=null,Jh=!1,Ff=0,Gx.current=null,n===null||n.return===null){Yt=1,$f=e,$t=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=wn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=xA(o);if(p!==null){p.flags&=-257,bA(p,o,a,i,e),p.mode&1&&EA(i,c,e),e=p,l=c;var g=e.updateQueue;if(g===null){var m=new Set;m.add(l),e.updateQueue=m}else g.add(l);break e}else{if(!(e&1)){EA(i,c,e),Jx();break e}l=Error(J(426))}}else if(mt&&a.mode&1){var w=xA(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),bA(w,o,a,i,e),kx(cd(l,a));break e}}i=l=cd(l,a),Yt!==4&&(Yt=2),ef===null?ef=[i]:ef.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=i2(i,l,e);mA(i,v);break e;case 1:a=l;var E=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ma===null||!ma.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=o2(i,a,e);mA(i,C);break e}}i=i.return}while(i!==null)}S2(n)}catch(R){e=R,$t===n&&n!==null&&($t=n=n.return);continue}break}while(!0)}function b2(){var t=wy.current;return wy.current=vy,t===null?vy:t}function Jx(){(Yt===0||Yt===3||Yt===2)&&(Yt=4),an===null||!(Jl&268435455)&&!(Tv&268435455)||Xo(an,wn)}function xy(t,e){var n=$e;$e|=2;var r=b2();(an!==t||wn!==e)&&(ji=null,zl(t,e));do try{l6();break}catch(s){x2(t,s)}while(!0);if(Ox(),$e=n,wy.current=r,$t!==null)throw Error(J(261));return an=null,wn=0,Yt}function l6(){for(;$t!==null;)T2($t)}function c6(){for(;$t!==null&&!O$();)T2($t)}function T2(t){var e=A2(t.alternate,t,xr);t.memoizedProps=t.pendingProps,e===null?S2(t):$t=e,Gx.current=null}function S2(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=n6(n,e),n!==null){n.flags&=32767,$t=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Yt=6,$t=null;return}}else if(n=t6(n,e,xr),n!==null){$t=n;return}if(e=e.sibling,e!==null){$t=e;return}$t=e=t}while(e!==null);Yt===0&&(Yt=5)}function Al(t,e,n){var r=Qe,s=ls.transition;try{ls.transition=null,Qe=1,u6(t,e,n,r)}finally{ls.transition=s,Qe=r}return null}function u6(t,e,n,r){do zu();while(ia!==null);if($e&6)throw Error(J(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(z$(t,i),t===an&&($t=an=null,wn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fm||(Fm=!0,C2(ry,function(){return zu(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ls.transition,ls.transition=null;var o=Qe;Qe=1;var a=$e;$e|=4,Gx.current=null,s6(t,n),w2(n,t),P9(H_),iy=!!W_,H_=W_=null,t.current=n,i6(n),L$(),$e=a,Qe=o,ls.transition=i}else t.current=n;if(Fm&&(Fm=!1,ia=t,Ey=s),i=t.pendingLanes,i===0&&(ma=null),j$(n.stateNode),fr(t,Ot()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(_y)throw _y=!1,t=h1,h1=null,t;return Ey&1&&t.tag!==0&&zu(),i=t.pendingLanes,i&1?t===f1?tf++:(tf=0,f1=t):tf=0,Wa(),null}function zu(){if(ia!==null){var t=iO(Ey),e=ls.transition,n=Qe;try{if(ls.transition=null,Qe=16>t?16:t,ia===null)var r=!1;else{if(t=ia,ia=null,Ey=0,$e&6)throw Error(J(331));var s=$e;for($e|=4,le=t.current;le!==null;){var i=le,o=i.child;if(le.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(le=c;le!==null;){var u=le;switch(u.tag){case 0:case 11:case 15:Zh(8,u,i)}var d=u.child;if(d!==null)d.return=u,le=d;else for(;le!==null;){u=le;var f=u.sibling,p=u.return;if(g2(u),u===c){le=null;break}if(f!==null){f.return=p,le=f;break}le=p}}}var g=i.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var w=m.sibling;m.sibling=null,m=w}while(m!==null)}}le=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,le=o;else e:for(;le!==null;){if(i=le,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zh(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,le=v;break e}le=i.return}}var E=t.current;for(le=E;le!==null;){o=le;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,le=b;else e:for(o=E;le!==null;){if(a=le,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:bv(9,a)}}catch(R){Rt(a,a.return,R)}if(a===o){le=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,le=C;break e}le=a.return}}if($e=s,Wa(),oi&&typeof oi.onPostCommitFiberRoot=="function")try{oi.onPostCommitFiberRoot(mv,t)}catch{}r=!0}return r}finally{Qe=n,ls.transition=e}}return!1}function MA(t,e,n){e=cd(n,e),e=i2(t,e,1),t=pa(t,e,1),e=Gn(),t!==null&&(Dp(t,1,e),fr(t,e))}function Rt(t,e,n){if(t.tag===3)MA(t,t,n);else for(;e!==null;){if(e.tag===3){MA(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ma===null||!ma.has(r))){t=cd(n,t),t=o2(e,t,1),e=pa(e,t,1),t=Gn(),e!==null&&(Dp(e,1,t),fr(e,t));break}}e=e.return}}function d6(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Gn(),t.pingedLanes|=t.suspendedLanes&n,an===t&&(wn&n)===n&&(Yt===4||Yt===3&&(wn&130023424)===wn&&500>Ot()-Qx?zl(t,0):Kx|=n),fr(t,e)}function I2(t,e){e===0&&(t.mode&1?(e=Rm,Rm<<=1,!(Rm&130023424)&&(Rm=4194304)):e=1);var n=Gn();t=eo(t,e),t!==null&&(Dp(t,e,n),fr(t,n))}function h6(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),I2(t,n)}function f6(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(e),I2(t,n)}var A2;A2=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||dr.current)ar=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ar=!1,e6(t,e,n);ar=!!(t.flags&131072)}else ar=!1,mt&&e.flags&1048576&&NO(e,hy,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Tg(t,e),t=e.pendingProps;var s=id(e,Vn.current);qu(e,n),s=$x(null,e,r,t,s,n);var i=qx();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,hr(r)?(i=!0,uy(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Vx(e),s.updater=xv,e.stateNode=s,s._reactInternals=e,t1(e,r,t,n),e=s1(null,e,r,!0,i,n)):(e.tag=0,mt&&i&&Px(e),$n(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Tg(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=m6(r),t=Ss(r,t),s){case 0:e=r1(null,e,r,t,n);break e;case 1:e=IA(null,e,r,t,n);break e;case 11:e=TA(null,e,r,t,n);break e;case 14:e=SA(null,e,r,Ss(r.type,t),n);break e}throw Error(J(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ss(r,s),r1(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ss(r,s),IA(t,e,r,s,n);case 3:e:{if(u2(e),t===null)throw Error(J(387));r=e.pendingProps,i=e.memoizedState,s=i.element,VO(t,e),my(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=cd(Error(J(423)),e),e=AA(t,e,r,n,s);break e}else if(r!==s){s=cd(Error(J(424)),e),e=AA(t,e,r,n,s);break e}else for(Sr=fa(e.stateNode.containerInfo.firstChild),Rr=e,mt=!0,As=null,n=LO(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(od(),r===s){e=to(t,e,n);break e}$n(t,e,r,n)}e=e.child}return e;case 5:return jO(e),t===null&&J_(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,G_(r,s)?o=null:i!==null&&G_(r,i)&&(e.flags|=32),c2(t,e),$n(t,e,o,n),e.child;case 6:return t===null&&J_(e),null;case 13:return d2(t,e,n);case 4:return jx(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ad(e,null,r,n):$n(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ss(r,s),TA(t,e,r,s,n);case 7:return $n(t,e,e.pendingProps,n),e.child;case 8:return $n(t,e,e.pendingProps.children,n),e.child;case 12:return $n(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,rt(fy,r._currentValue),r._currentValue=o,i!==null)if(Vs(i.value,o)){if(i.children===s.children&&!dr.current){e=to(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Ki(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Z_(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(J(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Z_(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}$n(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,qu(e,n),s=us(s),r=r(s),e.flags|=1,$n(t,e,r,n),e.child;case 14:return r=e.type,s=Ss(r,e.pendingProps),s=Ss(r.type,s),SA(t,e,r,s,n);case 15:return a2(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ss(r,s),Tg(t,e),e.tag=1,hr(r)?(t=!0,uy(e)):t=!1,qu(e,n),s2(e,r,s),t1(e,r,s,n),s1(null,e,r,!0,t,n);case 19:return h2(t,e,n);case 22:return l2(t,e,n)}throw Error(J(156,e.tag))};function C2(t,e){return tO(t,e)}function p6(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ss(t,e,n,r){return new p6(t,e,n,r)}function Zx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function m6(t){if(typeof t=="function")return Zx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===vx)return 11;if(t===wx)return 14}return 2}function ya(t,e){var n=t.alternate;return n===null?(n=ss(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ag(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Zx(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case bu:return Wl(n.children,s,i,e);case yx:o=8,s|=8;break;case S_:return t=ss(12,n,e,s|2),t.elementType=S_,t.lanes=i,t;case I_:return t=ss(13,n,e,s),t.elementType=I_,t.lanes=i,t;case A_:return t=ss(19,n,e,s),t.elementType=A_,t.lanes=i,t;case jD:return Sv(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case MD:o=10;break e;case VD:o=9;break e;case vx:o=11;break e;case wx:o=14;break e;case Go:o=16,r=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=ss(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Wl(t,e,n,r){return t=ss(7,t,r,e),t.lanes=n,t}function Sv(t,e,n,r){return t=ss(22,t,r,e),t.elementType=jD,t.lanes=n,t.stateNode={isHidden:!1},t}function gw(t,e,n){return t=ss(6,t,null,e),t.lanes=n,t}function yw(t,e,n){return e=ss(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function g6(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=X0(0),this.expirationTimes=X0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=X0(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function eb(t,e,n,r,s,i,o,a,l){return t=new g6(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ss(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vx(i),t}function y6(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function R2(t){if(!t)return Sa;t=t._reactInternals;e:{if(xc(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(hr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(hr(n))return RO(t,n,e)}return e}function P2(t,e,n,r,s,i,o,a,l){return t=eb(n,r,!0,t,s,i,o,a,l),t.context=R2(null),n=t.current,r=Gn(),s=ga(n),i=Ki(r,s),i.callback=e??null,pa(n,i,s),t.current.lanes=s,Dp(t,s,r),fr(t,r),t}function Iv(t,e,n,r){var s=e.current,i=Gn(),o=ga(s);return n=R2(n),e.context===null?e.context=n:e.pendingContext=n,e=Ki(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=pa(s,e,o),t!==null&&(Ns(t,s,o,i),Eg(t,s,o)),o}function by(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function VA(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function tb(t,e){VA(t,e),(t=t.alternate)&&VA(t,e)}function v6(){return null}var N2=typeof reportError=="function"?reportError:function(t){console.error(t)};function nb(t){this._internalRoot=t}Av.prototype.render=nb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));Iv(t,e,null,null)};Av.prototype.unmount=nb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zl(function(){Iv(null,t,null,null)}),e[Zi]=null}};function Av(t){this._internalRoot=t}Av.prototype.unstable_scheduleHydration=function(t){if(t){var e=lO();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yo.length&&e!==0&&e<Yo[n].priority;n++);Yo.splice(n,0,t),n===0&&uO(t)}};function rb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function jA(){}function w6(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=by(o);i.call(c)}}var o=P2(e,r,t,0,null,!1,!1,"",jA);return t._reactRootContainer=o,t[Zi]=o.current,Of(t.nodeType===8?t.parentNode:t),Zl(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=by(l);a.call(c)}}var l=eb(t,0,!1,null,null,!1,!1,"",jA);return t._reactRootContainer=l,t[Zi]=l.current,Of(t.nodeType===8?t.parentNode:t),Zl(function(){Iv(e,l,n,r)}),l}function Rv(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=by(o);a.call(l)}}Iv(e,o,t,s)}else o=w6(n,e,t,s,r);return by(o)}oO=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Dh(e.pendingLanes);n!==0&&(xx(e,n|1),fr(e,Ot()),!($e&6)&&(ud=Ot()+500,Wa()))}break;case 13:Zl(function(){var r=eo(t,1);if(r!==null){var s=Gn();Ns(r,t,1,s)}}),tb(t,1)}};bx=function(t){if(t.tag===13){var e=eo(t,134217728);if(e!==null){var n=Gn();Ns(e,t,134217728,n)}tb(t,134217728)}};aO=function(t){if(t.tag===13){var e=ga(t),n=eo(t,e);if(n!==null){var r=Gn();Ns(n,t,e,r)}tb(t,e)}};lO=function(){return Qe};cO=function(t,e){var n=Qe;try{return Qe=t,e()}finally{Qe=n}};V_=function(t,e,n){switch(e){case"input":if(P_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=wv(r);if(!s)throw Error(J(90));BD(r),P_(r,s)}}}break;case"textarea":$D(t,n);break;case"select":e=n.value,e!=null&&Fu(t,!!n.multiple,e,!1)}};QD=Yx;YD=Zl;var _6={usingClientEntryPoint:!1,Events:[Lp,Au,wv,GD,KD,Yx]},wh={findFiberByHostInstance:Vl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},E6={bundleType:wh.bundleType,version:wh.version,rendererPackageName:wh.rendererPackageName,rendererConfig:wh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ZD(t),t===null?null:t.stateNode},findFiberByHostInstance:wh.findFiberByHostInstance||v6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bm.isDisabled&&Bm.supportsFiber)try{mv=Bm.inject(E6),oi=Bm}catch{}}Or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_6;Or.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rb(e))throw Error(J(200));return y6(t,e,null,n)};Or.createRoot=function(t,e){if(!rb(t))throw Error(J(299));var n=!1,r="",s=N2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=eb(t,1,!1,null,null,n,!1,r,s),t[Zi]=e.current,Of(t.nodeType===8?t.parentNode:t),new nb(e)};Or.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=ZD(e),t=t===null?null:t.stateNode,t};Or.flushSync=function(t){return Zl(t)};Or.hydrate=function(t,e,n){if(!Cv(e))throw Error(J(200));return Rv(null,t,e,!0,n)};Or.hydrateRoot=function(t,e,n){if(!rb(t))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=N2;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=P2(e,null,t,1,n??null,s,!1,i,o),t[Zi]=e.current,Of(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Av(e)};Or.render=function(t,e,n){if(!Cv(e))throw Error(J(200));return Rv(null,t,e,!1,n)};Or.unmountComponentAtNode=function(t){if(!Cv(t))throw Error(J(40));return t._reactRootContainer?(Zl(function(){Rv(null,null,t,!1,function(){t._reactRootContainer=null,t[Zi]=null})}),!0):!1};Or.unstable_batchedUpdates=Yx;Or.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Cv(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return Rv(t,e,n,!1,r)};Or.version="18.3.1-next-f1338f8080-20240426";function k2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(k2)}catch(t){console.error(t)}}k2(),kD.exports=Or;var go=kD.exports;const sb=Np(go);var D2,FA=go;D2=FA.createRoot,FA.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qf(){return qf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qf.apply(this,arguments)}var oa;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(oa||(oa={}));const BA="popstate";function x6(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=bc(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),g1("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:Ty(i))}function r(s,i){ib(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return T6(e,n,r,t)}function qt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ib(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function b6(){return Math.random().toString(36).substr(2,8)}function UA(t,e){return{usr:t.state,key:t.key,idx:e}}function g1(t,e,n,r){return n===void 0&&(n=null),qf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?bc(e):e,{state:n,key:e&&e.key||r||b6()})}function Ty(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function bc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function T6(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=oa.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(qf({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=oa.Pop;let w=u(),v=w==null?null:w-c;c=w,l&&l({action:a,location:m.location,delta:v})}function f(w,v){a=oa.Push;let E=g1(m.location,w,v);n&&n(E,w),c=u()+1;let b=UA(E,c),C=m.createHref(E);try{o.pushState(b,"",C)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(C)}i&&l&&l({action:a,location:m.location,delta:1})}function p(w,v){a=oa.Replace;let E=g1(m.location,w,v);n&&n(E,w),c=u();let b=UA(E,c),C=m.createHref(E);o.replaceState(b,"",C),i&&l&&l({action:a,location:m.location,delta:0})}function g(w){let v=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof w=="string"?w:Ty(w);return E=E.replace(/ $/,"%20"),qt(v,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,v)}let m={get action(){return a},get location(){return t(s,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(BA,d),l=w,()=>{s.removeEventListener(BA,d),l=null}},createHref(w){return e(s,w)},createURL:g,encodeLocation(w){let v=g(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(w){return o.go(w)}};return m}var $A;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})($A||($A={}));function S6(t,e,n){return n===void 0&&(n="/"),I6(t,e,n,!1)}function I6(t,e,n,r){let s=typeof e=="string"?bc(e):e,i=ob(s.pathname||"/",n);if(i==null)return null;let o=O2(t);A6(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=j6(i);a=M6(o[l],c,r)}return a}function O2(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(qt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=va([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(qt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),O2(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:O6(c,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of L2(i.path))s(i,o,l)}),e}function L2(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=L2(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function A6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:L6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const C6=/^:[\w-]+$/,R6=3,P6=2,N6=1,k6=10,D6=-2,qA=t=>t==="*";function O6(t,e){let n=t.split("/"),r=n.length;return n.some(qA)&&(r+=D6),e&&(r+=P6),n.filter(s=>!qA(s)).reduce((s,i)=>s+(C6.test(i)?R6:i===""?N6:k6),r)}function L6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function M6(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=zA({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=zA({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:va([i,d.pathname]),pathnameBase:$6(va([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=va([i,d.pathnameBase]))}return o}function zA(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=V6(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let m=a[d]||"";o=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const g=a[d];return p&&!g?c[f]=void 0:c[f]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function V6(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ib(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function j6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ib(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ob(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function F6(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?bc(t):t;return{pathname:n?n.startsWith("/")?n:B6(n,e):e,search:q6(r),hash:z6(s)}}function B6(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function vw(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function U6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function M2(t,e){let n=U6(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function V2(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=bc(t):(s=qf({},t),qt(!s.pathname||!s.pathname.includes("?"),vw("?","pathname","search",s)),qt(!s.pathname||!s.pathname.includes("#"),vw("#","pathname","hash",s)),qt(!s.search||!s.search.includes("#"),vw("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=F6(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const va=t=>t.join("/").replace(/\/\/+/g,"/"),$6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),q6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,z6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function W6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const j2=["post","put","patch","delete"];new Set(j2);const H6=["get",...j2];new Set(H6);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zf(){return zf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zf.apply(this,arguments)}const ab=_.createContext(null),G6=_.createContext(null),Tc=_.createContext(null),Pv=_.createContext(null),yo=_.createContext({outlet:null,matches:[],isDataRoute:!1}),F2=_.createContext(null);function K6(t,e){let{relative:n}=e===void 0?{}:e;Vp()||qt(!1);let{basename:r,navigator:s}=_.useContext(Tc),{hash:i,pathname:o,search:a}=U2(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:va([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Vp(){return _.useContext(Pv)!=null}function jp(){return Vp()||qt(!1),_.useContext(Pv).location}function B2(t){_.useContext(Tc).static||_.useLayoutEffect(t)}function fs(){let{isDataRoute:t}=_.useContext(yo);return t?cq():Q6()}function Q6(){Vp()||qt(!1);let t=_.useContext(ab),{basename:e,future:n,navigator:r}=_.useContext(Tc),{matches:s}=_.useContext(yo),{pathname:i}=jp(),o=JSON.stringify(M2(s,n.v7_relativeSplatPath)),a=_.useRef(!1);return B2(()=>{a.current=!0}),_.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=V2(c,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:va([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}const Y6=_.createContext(null);function X6(t){let e=_.useContext(yo).outlet;return e&&_.createElement(Y6.Provider,{value:t},e)}function Ha(){let{matches:t}=_.useContext(yo),e=t[t.length-1];return e?e.params:{}}function U2(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=_.useContext(Tc),{matches:s}=_.useContext(yo),{pathname:i}=jp(),o=JSON.stringify(M2(s,r.v7_relativeSplatPath));return _.useMemo(()=>V2(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function J6(t,e){return Z6(t,e)}function Z6(t,e,n,r){Vp()||qt(!1);let{navigator:s}=_.useContext(Tc),{matches:i}=_.useContext(yo),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=jp(),u;if(e){var d;let w=typeof e=="string"?bc(e):e;l==="/"||(d=w.pathname)!=null&&d.startsWith(l)||qt(!1),u=w}else u=c;let f=u.pathname||"/",p=f;if(l!=="/"){let w=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let g=S6(t,{pathname:p}),m=sq(g&&g.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:va([l,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:va([l,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&m?_.createElement(Pv.Provider,{value:{location:zf({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:oa.Pop}},m):m}function eq(){let t=lq(),e=W6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:s},n):null,null)}const tq=_.createElement(eq,null);class nq extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(yo.Provider,{value:this.props.routeContext},_.createElement(F2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rq(t){let{routeContext:e,match:n,children:r}=t,s=_.useContext(ab);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(yo.Provider,{value:e},r)}function sq(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||qt(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:p}=n,g=d.route.loader&&f[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,f)=>{let p,g=!1,m=null,w=null;n&&(p=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||tq,l&&(c<0&&f===0?(g=!0,w=null):c===f&&(g=!0,w=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,f+1)),E=()=>{let b;return p?b=m:g?b=w:d.route.Component?b=_.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,_.createElement(rq,{match:d,routeContext:{outlet:u,matches:v,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?_.createElement(nq,{location:n.location,revalidation:n.revalidation,component:m,error:p,children:E(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):E()},null)}var $2=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}($2||{}),Sy=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Sy||{});function iq(t){let e=_.useContext(ab);return e||qt(!1),e}function oq(t){let e=_.useContext(G6);return e||qt(!1),e}function aq(t){let e=_.useContext(yo);return e||qt(!1),e}function q2(t){let e=aq(),n=e.matches[e.matches.length-1];return n.route.id||qt(!1),n.route.id}function lq(){var t;let e=_.useContext(F2),n=oq(Sy.UseRouteError),r=q2(Sy.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function cq(){let{router:t}=iq($2.UseNavigateStable),e=q2(Sy.UseNavigateStable),n=_.useRef(!1);return B2(()=>{n.current=!0}),_.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,zf({fromRouteId:e},i)))},[t,e])}function uq(t){return X6(t.context)}function Er(t){qt(!1)}function dq(t){let{basename:e="/",children:n=null,location:r,navigationType:s=oa.Pop,navigator:i,static:o=!1,future:a}=t;Vp()&&qt(!1);let l=e.replace(/^\/*/,"/"),c=_.useMemo(()=>({basename:l,navigator:i,static:o,future:zf({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=bc(r));let{pathname:u="/",search:d="",hash:f="",state:p=null,key:g="default"}=r,m=_.useMemo(()=>{let w=ob(u,l);return w==null?null:{location:{pathname:w,search:d,hash:f,state:p,key:g},navigationType:s}},[l,u,d,f,p,g,s]);return m==null?null:_.createElement(Tc.Provider,{value:c},_.createElement(Pv.Provider,{children:n,value:m}))}function hq(t){let{children:e,location:n}=t;return J6(y1(e),n)}new Promise(()=>{});function y1(t,e){e===void 0&&(e=[]);let n=[];return _.Children.forEach(t,(r,s)=>{if(!_.isValidElement(r))return;let i=[...e,s];if(r.type===_.Fragment){n.push.apply(n,y1(r.props.children,i));return}r.type!==Er&&qt(!1),!r.props.index||!r.props.children||qt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=y1(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function v1(){return v1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},v1.apply(this,arguments)}function fq(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function pq(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function mq(t,e){return t.button===0&&(!e||e==="_self")&&!pq(t)}const gq=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],yq="6";try{window.__reactRouterVersion=yq}catch{}const vq="startTransition",WA=PD[vq];function wq(t){let{basename:e,children:n,future:r,window:s}=t,i=_.useRef();i.current==null&&(i.current=x6({window:s,v5Compat:!0}));let o=i.current,[a,l]=_.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=_.useCallback(d=>{c&&WA?WA(()=>l(d)):l(d)},[l,c]);return _.useLayoutEffect(()=>o.listen(u),[o,u]),_.createElement(dq,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const _q=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Eq=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ia=_.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,f=fq(e,gq),{basename:p}=_.useContext(Tc),g,m=!1;if(typeof c=="string"&&Eq.test(c)&&(g=c,_q))try{let b=new URL(window.location.href),C=c.startsWith("//")?new URL(b.protocol+c):new URL(c),R=ob(C.pathname,p);C.origin===b.origin&&R!=null?c=R+C.search+C.hash:m=!0}catch{}let w=K6(c,{relative:s}),v=xq(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:d});function E(b){r&&r(b),b.defaultPrevented||v(b)}return _.createElement("a",v1({},f,{href:g||w,onClick:m||i?r:E,ref:n,target:l}))});var HA;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(HA||(HA={}));var GA;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(GA||(GA={}));function xq(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=fs(),c=jp(),u=U2(t,{relative:o});return _.useCallback(d=>{if(mq(d,n)){d.preventDefault();let f=r!==void 0?r:Ty(c)===Ty(u);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,u,r,s,n,t,i,o,a])}const bq=yn.forwardRef(({Classname:t="",children:e,...n})=>y.jsx("div",{...n,className:` ${t} `,children:e}));var KA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Tq=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},W2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),r.push(n[u],n[d],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(z2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Tq(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||d==null)throw new Sq;const f=i<<2|a>>4;if(r.push(f),c!==64){const p=a<<4&240|c>>2;if(r.push(p),d!==64){const g=c<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Sq extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Iq=function(t){const e=z2(t);return W2.encodeByteArray(e,!0)},Iy=function(t){return Iq(t).replace(/\./g,"")},H2=function(t){try{return W2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ay(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Aq(n)||(t[n]=Ay(t[n],e[n]));return t}function Aq(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cq=()=>G2().__FIREBASE_DEFAULTS__,Rq=()=>{if(typeof process>"u"||typeof KA>"u")return;const t=KA.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Pq=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&H2(t[1]);return e&&JSON.parse(e)},Nv=()=>{try{return Cq()||Rq()||Pq()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Nq=t=>{var e,n;return(n=(e=Nv())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},K2=()=>{var t;return(t=Nv())===null||t===void 0?void 0:t.config},Q2=t=>{var e;return(e=Nv())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kq{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dq(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Iy(JSON.stringify(n)),Iy(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Oq(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xt())}function Lq(){var t;const e=(t=Nv())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Mq(){return typeof window<"u"||Y2()}function Y2(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Vq(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jq(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Fq(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Bq(){const t=Xt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function X2(){return!Lq()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function J2(){try{return typeof indexedDB=="object"}catch{return!1}}function Uq(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $q="FirebaseError";class Ti extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=$q,Object.setPrototypeOf(this,Ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sc.prototype.create)}}class Sc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?qq(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Ti(s,a,r)}}function qq(t,e){return t.replace(zq,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const zq=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Wq(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function dd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(YA(i)&&YA(o)){if(!dd(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function YA(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Lh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Mh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Z2(t,e){const n=new Hq(t,e);return n.subscribe.bind(n)}class Hq{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Gq(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ww),s.error===void 0&&(s.error=ww),s.complete===void 0&&(s.complete=ww);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gq(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ww(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(t){return t&&t._delegate?t._delegate:t}class no{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kq=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new kq;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Yq(e))try{this.getOrInitializeService({instanceIdentifier:Cl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Cl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cl){return this.instances.has(e)}getOptions(e=Cl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Qq(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Cl){return this.component?this.component.multipleInstances?e:Cl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Qq(t){return t===Cl?void 0:t}function Yq(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Kq(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb=[];var Ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ne||(Ne={}));const tL={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},Xq=Ne.INFO,Jq={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},Zq=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Jq[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kv{constructor(e){this.name=e,this._logLevel=Xq,this._logHandler=Zq,this._userLogHandler=null,lb.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}function e8(t){lb.forEach(e=>{e.setLogLevel(t)})}function t8(t,e){for(const n of lb){let r=null;e&&e.level&&(r=tL[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,i,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");i>=(r??s.logLevel)&&t({level:Ne[i].toLowerCase(),message:a,args:o,type:s.name})}}}const n8=(t,e)=>e.some(n=>t instanceof n);let XA,JA;function r8(){return XA||(XA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function s8(){return JA||(JA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nL=new WeakMap,w1=new WeakMap,rL=new WeakMap,_w=new WeakMap,cb=new WeakMap;function i8(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(wa(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&nL.set(n,t)}).catch(()=>{}),cb.set(e,t),e}function o8(t){if(w1.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});w1.set(t,e)}let _1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return w1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rL.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wa(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function a8(t){_1=t(_1)}function l8(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ew(this),e,...n);return rL.set(r,e.sort?e.sort():[e]),wa(r)}:s8().includes(t)?function(...e){return t.apply(Ew(this),e),wa(nL.get(this))}:function(...e){return wa(t.apply(Ew(this),e))}}function c8(t){return typeof t=="function"?l8(t):(t instanceof IDBTransaction&&o8(t),n8(t,r8())?new Proxy(t,_1):t)}function wa(t){if(t instanceof IDBRequest)return i8(t);if(_w.has(t))return _w.get(t);const e=c8(t);return e!==t&&(_w.set(t,e),cb.set(e,t)),e}const Ew=t=>cb.get(t);function u8(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=wa(o);return r&&o.addEventListener("upgradeneeded",l=>{r(wa(o.result),l.oldVersion,l.newVersion,wa(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const d8=["get","getKey","getAll","getAllKeys","count"],h8=["put","add","delete","clear"],xw=new Map;function ZA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xw.get(e))return xw.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=h8.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||d8.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return xw.set(e,i),i}a8(t=>({...t,get:(e,n,r)=>ZA(e,n)||t.get(e,n,r),has:(e,n)=>!!ZA(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(p8(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function p8(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cy="@firebase/app",E1="0.10.14";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new kv("@firebase/app"),m8="@firebase/app-compat",g8="@firebase/analytics-compat",y8="@firebase/analytics",v8="@firebase/app-check-compat",w8="@firebase/app-check",_8="@firebase/auth",E8="@firebase/auth-compat",x8="@firebase/database",b8="@firebase/data-connect",T8="@firebase/database-compat",S8="@firebase/functions",I8="@firebase/functions-compat",A8="@firebase/installations",C8="@firebase/installations-compat",R8="@firebase/messaging",P8="@firebase/messaging-compat",N8="@firebase/performance",k8="@firebase/performance-compat",D8="@firebase/remote-config",O8="@firebase/remote-config-compat",L8="@firebase/storage",M8="@firebase/storage-compat",V8="@firebase/firestore",j8="@firebase/vertexai",F8="@firebase/firestore-compat",B8="firebase",U8="11.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="[DEFAULT]",$8={[Cy]:"fire-core",[m8]:"fire-core-compat",[y8]:"fire-analytics",[g8]:"fire-analytics-compat",[w8]:"fire-app-check",[v8]:"fire-app-check-compat",[_8]:"fire-auth",[E8]:"fire-auth-compat",[x8]:"fire-rtdb",[b8]:"fire-data-connect",[T8]:"fire-rtdb-compat",[S8]:"fire-fn",[I8]:"fire-fn-compat",[A8]:"fire-iid",[C8]:"fire-iid-compat",[R8]:"fire-fcm",[P8]:"fire-fcm-compat",[N8]:"fire-perf",[k8]:"fire-perf-compat",[D8]:"fire-rc",[O8]:"fire-rc-compat",[L8]:"fire-gcs",[M8]:"fire-gcs-compat",[V8]:"fire-fst",[F8]:"fire-fst-compat",[j8]:"fire-vertex","fire-js":"fire-js",[B8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=new Map,hd=new Map,fd=new Map;function Wf(t,e){try{t.container.addComponent(e)}catch(n){ro.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function sL(t,e){t.container.addOrOverwriteComponent(e)}function Ra(t){const e=t.name;if(fd.has(e))return ro.debug(`There were multiple attempts to register component ${e}.`),!1;fd.set(e,t);for(const n of Ca.values())Wf(n,t);for(const n of hd.values())Wf(n,t);return!0}function Dv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function q8(t,e,n=Aa){Dv(t,e).clearInstance(n)}function iL(t){return t.options!==void 0}function is(t){return t.settings!==void 0}function z8(){fd.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cs=new Sc("app","Firebase",W8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oL=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new no("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cs.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8 extends oL{constructor(e,n,r,s){const i=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:i};if(e.apiKey!==void 0)super(e,o,s);else{const a=e;super(a.options,o,s)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,ks(Cy,E1,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){db(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw cs.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga=U8;function ub(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Aa,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw cs.create("bad-app-name",{appName:String(s)});if(n||(n=K2()),!n)throw cs.create("no-options");const i=Ca.get(s);if(i){if(dd(n,i.options)&&dd(r,i.config))return i;throw cs.create("duplicate-app",{appName:s})}const o=new eL(s);for(const l of fd.values())o.addComponent(l);const a=new oL(n,r,o);return Ca.set(s,a),a}function G8(t,e){if(Mq()&&!Y2())throw cs.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;iL(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const s=c=>[...c].reduce((u,d)=>Math.imul(31,u)+d.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw cs.create("finalization-registry-not-supported",{});const i=""+s(JSON.stringify(r)),o=hd.get(i);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new eL(i);for(const c of fd.values())a.addComponent(c);const l=new H8(n,e,i,a);return hd.set(i,l),l}function aL(t=Aa){const e=Ca.get(t);if(!e&&t===Aa&&K2())return ub();if(!e)throw cs.create("no-app",{appName:t});return e}function K8(){return Array.from(Ca.values())}async function db(t){let e=!1;const n=t.name;Ca.has(n)?(e=!0,Ca.delete(n)):hd.has(n)&&t.decRefCount()<=0&&(hd.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function ks(t,e,n){var r;let s=(r=$8[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ro.warn(a.join(" "));return}Ra(new no(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function lL(t,e){if(t!==null&&typeof t!="function")throw cs.create("invalid-log-argument");t8(t,e)}function cL(t){e8(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q8="firebase-heartbeat-database",Y8=1,Hf="firebase-heartbeat-store";let bw=null;function uL(){return bw||(bw=u8(Q8,Y8,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hf)}catch(n){console.warn(n)}}}}).catch(t=>{throw cs.create("idb-open",{originalErrorMessage:t.message})})),bw}async function X8(t){try{const n=(await uL()).transaction(Hf),r=await n.objectStore(Hf).get(dL(t));return await n.done,r}catch(e){if(e instanceof Ti)ro.warn(e.message);else{const n=cs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ro.warn(n.message)}}}async function eC(t,e){try{const r=(await uL()).transaction(Hf,"readwrite");await r.objectStore(Hf).put(e,dL(t)),await r.done}catch(n){if(n instanceof Ti)ro.warn(n.message);else{const r=cs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ro.warn(r.message)}}}function dL(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J8=1024,Z8=30*24*60*60*1e3;class ez{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new nz(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=tC();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Z8}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ro.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=tC(),{heartbeatsToSend:r,unsentEntries:s}=tz(this._heartbeatsCache.heartbeats),i=Iy(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ro.warn(n),""}}}function tC(){return new Date().toISOString().substring(0,10)}function tz(t,e=J8){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),nC(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),nC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class nz{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return J2()?Uq().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await X8(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return eC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return eC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function nC(t){return Iy(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rz(t){Ra(new no("platform-logger",e=>new f8(e),"PRIVATE")),Ra(new no("heartbeat",e=>new ez(e),"PRIVATE")),ks(Cy,E1,t),ks(Cy,E1,"esm2017"),ks("fire-js","")}rz("");const sz=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Ti,SDK_VERSION:Ga,_DEFAULT_ENTRY_NAME:Aa,_addComponent:Wf,_addOrOverwriteComponent:sL,_apps:Ca,_clearComponents:z8,_components:fd,_getProvider:Dv,_isFirebaseApp:iL,_isFirebaseServerApp:is,_registerComponent:Ra,_removeServiceInstance:q8,_serverApps:hd,deleteApp:db,getApp:aL,getApps:K8,initializeApp:ub,initializeServerApp:G8,onLog:lL,registerVersion:ks,setLogLevel:cL},Symbol.toStringTag,{value:"Module"}));var kn=function(){return kn=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},kn.apply(this,arguments)};function jd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function hL(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function fL(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iz=fL,pL=new Sc("auth","Firebase",fL());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry=new kv("@firebase/auth");function oz(t,...e){Ry.logLevel<=Ne.WARN&&Ry.warn(`Auth (${Ga}): ${t}`,...e)}function Cg(t,...e){Ry.logLevel<=Ne.ERROR&&Ry.error(`Auth (${Ga}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(t,...e){throw fb(t,...e)}function Ds(t,...e){return fb(t,...e)}function hb(t,e,n){const r=Object.assign(Object.assign({},iz()),{[e]:n});return new Sc("auth","Firebase",r).create(e,{appName:t.name})}function Qi(t){return hb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function az(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&hs(t,"argument-error"),hb(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function fb(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return pL.create(t,...e)}function Te(t,e,...n){if(!t)throw fb(e,...n)}function qi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Cg(e),new Error(e)}function so(t,e){t||qi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function lz(){return rC()==="http:"||rC()==="https:"}function rC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lz()||jq()||"connection"in navigator)?navigator.onLine:!0}function uz(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,n){this.shortDelay=e,this.longDelay=n,so(n>e,"Short delay should be less than long delay!"),this.isMobile=Oq()||Fq()}get(){return cz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(t,e){so(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hz=new Bp(3e4,6e4);function Ka(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Qa(t,e,n,r,s={}){return gL(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Fp(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return Vq()||(c.referrerPolicy="no-referrer"),mL.fetch()(yL(t,t.config.apiHost,n,a),c)})}async function gL(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},dz),e);try{const s=new pz(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Um(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Um(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Um(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Um(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw hb(t,u,c);hs(t,u)}}catch(s){if(s instanceof Ti)throw s;hs(t,"network-request-failed",{message:String(s)})}}async function Up(t,e,n,r,s={}){const i=await Qa(t,e,n,r,s);return"mfaPendingCredential"in i&&hs(t,"multi-factor-auth-required",{_serverResponse:i}),i}function yL(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?pb(t.config,s):`${t.config.apiScheme}://${s}`}function fz(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pz{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ds(this.auth,"network-request-failed")),hz.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Um(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ds(t,e,r);return s.customData._tokenResponse=n,s}function sC(t){return t!==void 0&&t.enterprise!==void 0}class mz{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return fz(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function gz(t,e){return Qa(t,"GET","/v2/recaptchaConfig",Ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yz(t,e){return Qa(t,"POST","/v1/accounts:delete",e)}async function vL(t,e){return Qa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vz(t,e=!1){const n=Je(t),r=await n.getIdToken(e),s=mb(r);Te(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:nf(Tw(s.auth_time)),issuedAtTime:nf(Tw(s.iat)),expirationTime:nf(Tw(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Tw(t){return Number(t)*1e3}function mb(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Cg("JWT malformed, contained fewer than 3 sections"),null;try{const s=H2(n);return s?JSON.parse(s):(Cg("Failed to decode base64 JWT payload"),null)}catch(s){return Cg("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function iC(t){const e=mb(t);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gf(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ti&&wz(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function wz({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=nf(this.lastLoginAt),this.creationTime=nf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Py(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Gf(t,vL(n,{idToken:r}));Te(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?wL(i.providerUserInfo):[],a=xz(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new b1(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function Ez(t){const e=Je(t);await Py(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xz(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function wL(t){return t.map(e=>{var{providerId:n}=e,r=jd(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bz(t,e){const n=await gL(t,{},async()=>{const r=Fp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=yL(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",mL.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Tz(t,e){return Qa(t,"POST","/v2/accounts:revokeToken",Ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=iC(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await bz(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Wu;return r&&(Te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Te(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Te(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wu,this.toJSON())}_performRefresh(){return qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(t,e){Te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zi{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=jd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _z(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new b1(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Gf(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return vz(this,e)}reload(){return Ez(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new zi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Py(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(is(this.auth.app))return Promise.reject(Qi(this.auth));const e=await this.getIdToken();return await Gf(this,yz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,u;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(s=n.email)!==null&&s!==void 0?s:void 0,p=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,E=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:b,emailVerified:C,isAnonymous:R,providerData:O,stsTokenManager:I}=n;Te(b&&I,e,"internal-error");const A=Wu.fromJSON(this.name,I);Te(typeof b=="string",e,"internal-error"),Lo(d,e.name),Lo(f,e.name),Te(typeof C=="boolean",e,"internal-error"),Te(typeof R=="boolean",e,"internal-error"),Lo(p,e.name),Lo(g,e.name),Lo(m,e.name),Lo(w,e.name),Lo(v,e.name),Lo(E,e.name);const P=new zi({uid:b,auth:e,email:f,emailVerified:C,displayName:d,isAnonymous:R,photoURL:g,phoneNumber:p,tenantId:m,stsTokenManager:A,createdAt:v,lastLoginAt:E});return O&&Array.isArray(O)&&(P.providerData=O.map(D=>Object.assign({},D))),w&&(P._redirectEventId=w),P}static async _fromIdTokenResponse(e,n,r=!1){const s=new Wu;s.updateFromServerResponse(n);const i=new zi({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Py(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Te(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?wL(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Wu;a.updateFromIdToken(r);const l=new zi({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new b1(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=new Map;function Wi(t){so(t instanceof Function,"Expected a class definition");let e=oC.get(t);return e?(so(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,oC.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_L.type="NONE";const aC=_L;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(t,e,n){return`firebase:${t}:${e}:${n}`}class Hu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Rg(this.userKey,s.apiKey,i),this.fullPersistenceKey=Rg("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Hu(Wi(aC),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Wi(aC);const o=Rg(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const d=zi._fromJSON(e,u);c!==i&&(a=d),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Hu(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Hu(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(TL(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EL(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(IL(e))return"Blackberry";if(AL(e))return"Webos";if(xL(e))return"Safari";if((e.includes("chrome/")||bL(e))&&!e.includes("edge/"))return"Chrome";if(SL(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function EL(t=Xt()){return/firefox\//i.test(t)}function xL(t=Xt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bL(t=Xt()){return/crios\//i.test(t)}function TL(t=Xt()){return/iemobile/i.test(t)}function SL(t=Xt()){return/android/i.test(t)}function IL(t=Xt()){return/blackberry/i.test(t)}function AL(t=Xt()){return/webos/i.test(t)}function gb(t=Xt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Sz(t=Xt()){var e;return gb(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Iz(){return Bq()&&document.documentMode===10}function CL(t=Xt()){return gb(t)||SL(t)||AL(t)||IL(t)||/windows phone/i.test(t)||TL(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RL(t,e=[]){let n;switch(t){case"Browser":n=lC(Xt());break;case"Worker":n=`${lC(Xt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ga}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cz(t,e={}){return Qa(t,"GET","/v2/passwordPolicy",Ka(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rz=6;class Pz{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Rz,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nz{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cC(this),this.idTokenSubscription=new cC(this),this.beforeStateQueue=new Az(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pL,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wi(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Hu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await vL(this,{idToken:e}),r=await zi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(is(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Py(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(is(this.app))return Promise.reject(Qi(this));const n=e?Je(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return is(this.app)?Promise.reject(Qi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return is(this.app)?Promise.reject(Qi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Cz(this),n=new Pz(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Sc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Tz(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Wi(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await Hu.create(this,[Wi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RL(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&oz(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ya(t){return Je(t)}class cC{constructor(e){this.auth=e,this.observer=null,this.addObserver=Z2(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ov={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kz(t){Ov=t}function PL(t){return Ov.loadJS(t)}function Dz(){return Ov.recaptchaEnterpriseScript}function Oz(){return Ov.gapiScript}function Lz(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Mz{constructor(){this.enterprise=new Vz}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Vz{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const jz="recaptcha-enterprise",NL="NO_RECAPTCHA";class Fz{constructor(e){this.type=jz,this.auth=Ya(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{gz(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new mz(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;sC(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(NL)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Mz().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&sC(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Dz();l.length!==0&&(l+=a),PL(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function uC(t,e,n,r=!1,s=!1){const i=new Fz(t);let o;if(s)o=NL;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function T1(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await uC(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await uC(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bz(t,e){const n=Dv(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(dd(i,e??{}))return s;hs(s,"already-initialized")}return n.initialize({options:e})}function Uz(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Wi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function $z(t,e,n){const r=Ya(t);Te(r._canInitEmulator,r,"emulator-config-failed"),Te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=kL(e),{host:o,port:a}=qz(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),zz()}function kL(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qz(t){const e=kL(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:dC(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:dC(o)}}}function dC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function zz(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qi("not implemented")}_getIdTokenResponse(e){return qi("not implemented")}_linkToIdToken(e,n){return qi("not implemented")}_getReauthenticationResolver(e){return qi("not implemented")}}async function Wz(t,e){return Qa(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hz(t,e){return Up(t,"POST","/v1/accounts:signInWithPassword",Ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gz(t,e){return Up(t,"POST","/v1/accounts:signInWithEmailLink",Ka(t,e))}async function Kz(t,e){return Up(t,"POST","/v1/accounts:signInWithEmailLink",Ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf extends yb{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Kf(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Kf(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return T1(e,n,"signInWithPassword",Hz);case"emailLink":return Gz(e,{email:this._email,oobCode:this._password});default:hs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return T1(e,r,"signUpPassword",Wz);case"emailLink":return Kz(e,{idToken:n,email:this._email,oobCode:this._password});default:hs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gu(t,e){return Up(t,"POST","/v1/accounts:signInWithIdp",Ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qz="http://localhost";class ec extends yb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ec(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=jd(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ec(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Gu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Gu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Gu(e,n)}buildRequest(){const e={requestUri:Qz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Fp(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yz(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Xz(t){const e=Lh(Mh(t)).link,n=e?Lh(Mh(e)).deep_link_id:null,r=Lh(Mh(t)).deep_link_id;return(r?Lh(Mh(r)).link:null)||r||n||e||t}class vb{constructor(e){var n,r,s,i,o,a;const l=Lh(Mh(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,d=Yz((s=l.mode)!==null&&s!==void 0?s:null);Te(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=Xz(e);try{return new vb(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(){this.providerId=Fd.PROVIDER_ID}static credential(e,n){return Kf._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=vb.parseLink(n);return Te(r,"argument-error"),Kf._fromEmailAndCode(e,r.code,r.tenantId)}}Fd.PROVIDER_ID="password";Fd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p extends wb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo extends $p{constructor(){super("facebook.com")}static credential(e){return ec._fromParams({providerId:Jo.PROVIDER_ID,signInMethod:Jo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jo.credentialFromTaggedObject(e)}static credentialFromError(e){return Jo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jo.credential(e.oauthAccessToken)}catch{return null}}}Jo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Jo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends $p{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ec._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Bi.credential(n,r)}catch{return null}}}Bi.GOOGLE_SIGN_IN_METHOD="google.com";Bi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo extends $p{constructor(){super("github.com")}static credential(e){return ec._fromParams({providerId:Zo.PROVIDER_ID,signInMethod:Zo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zo.credentialFromTaggedObject(e)}static credentialFromError(e){return Zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zo.credential(e.oauthAccessToken)}catch{return null}}}Zo.GITHUB_SIGN_IN_METHOD="github.com";Zo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea extends $p{constructor(){super("twitter.com")}static credential(e,n){return ec._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ea.credential(n,r)}catch{return null}}}ea.TWITTER_SIGN_IN_METHOD="twitter.com";ea.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jz(t,e){return Up(t,"POST","/v1/accounts:signUp",Ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await zi._fromIdTokenResponse(e,r,s),o=hC(r);return new tc({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=hC(r);return new tc({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function hC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny extends Ti{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ny.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ny(e,n,r,s)}}function DL(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ny._fromErrorAndOperation(t,i,e,r):i})}async function Zz(t,e,n=!1){const r=await Gf(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return tc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e7(t,e,n=!1){const{auth:r}=t;if(is(r.app))return Promise.reject(Qi(r));const s="reauthenticate";try{const i=await Gf(t,DL(r,s,e,t),n);Te(i.idToken,r,"internal-error");const o=mb(i.idToken);Te(o,r,"internal-error");const{sub:a}=o;return Te(t.uid===a,r,"user-mismatch"),tc._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&hs(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OL(t,e,n=!1){if(is(t.app))return Promise.reject(Qi(t));const r="signIn",s=await DL(t,r,e),i=await tc._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function t7(t,e){return OL(Ya(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LL(t){const e=Ya(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function n7(t,e,n){if(is(t.app))return Promise.reject(Qi(t));const r=Ya(t),o=await T1(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Jz).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&LL(t),l}),a=await tc._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function r7(t,e,n){return is(t.app)?Promise.reject(Qi(t)):t7(Je(t),Fd.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&LL(t),r})}function s7(t,e,n,r){return Je(t).onIdTokenChanged(e,n,r)}function i7(t,e,n){return Je(t).beforeAuthStateChanged(e,n)}function o7(t){return Je(t).signOut()}const ky="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ky,"1"),this.storage.removeItem(ky),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a7=1e3,l7=10;class VL extends ML{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=CL(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);Iz()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,l7):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},a7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}VL.type="LOCAL";const c7=VL;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL extends ML{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}jL.type="SESSION";const FL=jL;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u7(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Lv(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await u7(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lv.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=_b("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(){return window}function h7(t){li().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(){return typeof li().WorkerGlobalScope<"u"&&typeof li().importScripts=="function"}async function f7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function p7(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function m7(){return BL()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL="firebaseLocalStorageDb",g7=1,Dy="firebaseLocalStorage",$L="fbase_key";class qp{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mv(t,e){return t.transaction([Dy],e?"readwrite":"readonly").objectStore(Dy)}function y7(){const t=indexedDB.deleteDatabase(UL);return new qp(t).toPromise()}function S1(){const t=indexedDB.open(UL,g7);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Dy,{keyPath:$L})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Dy)?e(r):(r.close(),await y7(),e(await S1()))})})}async function fC(t,e,n){const r=Mv(t,!0).put({[$L]:e,value:n});return new qp(r).toPromise()}async function v7(t,e){const n=Mv(t,!1).get(e),r=await new qp(n).toPromise();return r===void 0?null:r.value}function pC(t,e){const n=Mv(t,!0).delete(e);return new qp(n).toPromise()}const w7=800,_7=3;class qL{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await S1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>_7)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return BL()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lv._getInstance(m7()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await f7(),!this.activeServiceWorker)return;this.sender=new d7(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||p7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await S1();return await fC(e,ky,"1"),await pC(e,ky),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>fC(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>v7(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>pC(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Mv(s,!1).getAll();return new qp(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),w7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qL.type="LOCAL";const E7=qL;new Bp(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(t,e){return e?Wi(e):(Te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb extends yb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Gu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Gu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function x7(t){return OL(t.auth,new Eb(t),t.bypassAuthState)}function b7(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),e7(n,new Eb(t),t.bypassAuthState)}async function T7(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),Zz(n,new Eb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return x7;case"linkViaPopup":case"linkViaRedirect":return T7;case"reauthViaPopup":case"reauthViaRedirect":return b7;default:hs(this.auth,"internal-error")}}resolve(e){so(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){so(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S7=new Bp(2e3,1e4);async function I7(t,e,n){if(is(t.app))return Promise.reject(Ds(t,"operation-not-supported-in-this-environment"));const r=Ya(t);az(t,e,wb);const s=zL(r,n);return new Bl(r,"signInViaPopup",e,s).executeNotNull()}class Bl extends WL{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Bl.currentPopupAction&&Bl.currentPopupAction.cancel(),Bl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){so(this.filter.length===1,"Popup operations only handle one event");const e=_b();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ds(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ds(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ds(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,S7.get())};e()}}Bl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A7="pendingRedirect",Pg=new Map;class C7 extends WL{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Pg.get(this.auth._key());if(!e){try{const r=await R7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Pg.set(this.auth._key(),e)}return this.bypassAuthState||Pg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function R7(t,e){const n=k7(e),r=N7(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function P7(t,e){Pg.set(t._key(),e)}function N7(t){return Wi(t._redirectPersistence)}function k7(t){return Rg(A7,t.config.apiKey,t.name)}async function D7(t,e,n=!1){if(is(t.app))return Promise.reject(Qi(t));const r=Ya(t),s=zL(r,e),o=await new C7(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O7=10*60*1e3;class L7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!M7(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!HL(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ds(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=O7&&this.cachedEventUids.clear(),this.cachedEventUids.has(mC(e))}saveEventToCache(e){this.cachedEventUids.add(mC(e)),this.lastProcessedEventTime=Date.now()}}function mC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function HL({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function M7(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HL(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V7(t,e={}){return Qa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,F7=/^https?/;async function B7(t){if(t.config.emulator)return;const{authorizedDomains:e}=await V7(t);for(const n of e)try{if(U7(n))return}catch{}hs(t,"unauthorized-domain")}function U7(t){const e=x1(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!F7.test(n))return!1;if(j7.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7=new Bp(3e4,6e4);function gC(){const t=li().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function q7(t){return new Promise((e,n)=>{var r,s,i;function o(){gC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gC(),n(Ds(t,"network-request-failed"))},timeout:$7.get()})}if(!((s=(r=li().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=li().gapi)===null||i===void 0)&&i.load)o();else{const a=Lz("iframefcb");return li()[a]=()=>{gapi.load?o():n(Ds(t,"network-request-failed"))},PL(`${Oz()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Ng=null,e})}let Ng=null;function z7(t){return Ng=Ng||q7(t),Ng}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W7=new Bp(5e3,15e3),H7="__/auth/iframe",G7="emulator/auth/iframe",K7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Q7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Y7(t){const e=t.config;Te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?pb(e,G7):`https://${t.config.authDomain}/${H7}`,r={apiKey:e.apiKey,appName:t.name,v:Ga},s=Q7.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Fp(r).slice(1)}`}async function X7(t){const e=await z7(t),n=li().gapi;return Te(n,t,"internal-error"),e.open({where:document.body,url:Y7(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:K7,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Ds(t,"network-request-failed"),a=li().setTimeout(()=>{i(o)},W7.get());function l(){li().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Z7=500,eW=600,tW="_blank",nW="http://localhost";let yC=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function rW(t,e,n,r=Z7,s=eW){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},J7),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Xt().toLowerCase();n&&(a=bL(c)?tW:n),EL(c)&&(e=e||nW,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[p,g])=>`${f}${p}=${g},`,"");if(Sz(c)&&a!=="_self")return sW(e||"",a),new yC(null);const d=window.open(e||"",a,u);Te(d,t,"popup-blocked");try{d.focus()}catch{}return new yC(d)}function sW(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iW="__/auth/handler",oW="emulator/auth/handler",aW=encodeURIComponent("fac");async function vC(t,e,n,r,s,i){Te(t.config.authDomain,t,"auth-domain-config-required"),Te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ga,eventId:s};if(e instanceof wb){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Wq(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))o[u]=d}if(e instanceof $p){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${aW}=${encodeURIComponent(l)}`:"";return`${lW(t)}?${Fp(a).slice(1)}${c}`}function lW({config:t}){return t.emulator?pb(t,oW):`https://${t.authDomain}/${iW}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw="webStorageSupport";class cW{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=FL,this._completeRedirectFn=D7,this._overrideRedirectResult=P7}async _openPopup(e,n,r,s){var i;so((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await vC(e,n,r,x1(),s);return rW(e,o,_b())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await vC(e,n,r,x1(),s);return h7(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(so(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await X7(e),r=new L7(e);return n.register("authEvent",s=>(Te(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Sw,{type:Sw},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Sw];o!==void 0&&n(!!o),hs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=B7(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return CL()||xL()||gb()}}const uW=cW;var wC="@firebase/auth",_C="1.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dW{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hW(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fW(t){Ra(new no("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RL(t)},c=new Nz(r,s,i,l);return Uz(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ra(new no("auth-internal",e=>{const n=Ya(e.getProvider("auth").getImmediate());return(r=>new dW(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ks(wC,_C,hW(t)),ks(wC,_C,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pW=5*60,mW=Q2("authIdTokenMaxAge")||pW;let EC=null;const gW=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>mW)return;const s=n==null?void 0:n.token;EC!==s&&(EC=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function yW(t=aL()){const e=Dv(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Bz(t,{popupRedirectResolver:uW,persistence:[E7,c7,FL]}),r=Q2("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=gW(i.toString());i7(n,o,()=>o(n.currentUser)),s7(n,a=>o(a))}}const s=Nq("auth");return s&&$z(n,`http://${s}`),n}function vW(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}kz({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Ds("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",vW().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fW("Browser");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wW{constructor(e,n){this._delegate=e,this.firebase=n,Wf(e,new no("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),db(this._delegate)))}_getService(e,n=Aa){var r;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&((r=s.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:n})}_removeServiceInstance(e,n=Aa){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Wf(this._delegate,e)}_addOrOverwriteComponent(e){sL(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _W={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},xC=new Sc("app-compat","Firebase",_W);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EW(t){const e={},n={__esModule:!0,initializeApp:i,app:s,registerVersion:ks,setLogLevel:cL,onLog:lL,apps:null,SDK_VERSION:Ga,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:sz}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(c){delete e[c]}function s(c){if(c=c||Aa,!QA(e,c))throw xC.create("no-app",{appName:c});return e[c]}s.App=t;function i(c,u={}){const d=ub(c,u);if(QA(e,d.name))return e[d.name];const f=new t(d,n);return e[d.name]=f,f}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const u=c.name,d=u.replace("-compat","");if(Ra(c)&&c.type==="PUBLIC"){const f=(p=s())=>{if(typeof p[d]!="function")throw xC.create("invalid-app-argument",{appName:u});return p[d]()};c.serviceProps!==void 0&&Ay(f,c.serviceProps),n[d]=f,t.prototype[d]=function(...p){return this._getService.bind(this,u).apply(this,c.multipleInstances?p:[])}}return c.type==="PUBLIC"?n[d]:null}function l(c,u){return u==="serverAuth"?null:u}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GL(){const t=EW(wW);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:GL,extendNamespace:e,createSubscribe:Z2,ErrorFactory:Sc,deepExtend:Ay});function e(n){Ay(t,n)}return t}const xW=GL();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=new kv("@firebase/app-compat"),bW="@firebase/app-compat",TW="0.2.44";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SW(t){ks(bW,TW,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=G2();if(t.firebase!==void 0){bC.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&bC.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Os=xW;SW();var IW="firebase",AW="11.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Os.registerVersion(IW,AW,"app-compat");var TC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hl,KL;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,A){function P(){}P.prototype=A.prototype,I.D=A.prototype,I.prototype=new P,I.prototype.constructor=I,I.C=function(D,M,V){for(var L=Array(arguments.length-2),W=2;W<arguments.length;W++)L[W-2]=arguments[W];return A.prototype[M].apply(D,L)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,A,P){P||(P=0);var D=Array(16);if(typeof A=="string")for(var M=0;16>M;++M)D[M]=A.charCodeAt(P++)|A.charCodeAt(P++)<<8|A.charCodeAt(P++)<<16|A.charCodeAt(P++)<<24;else for(M=0;16>M;++M)D[M]=A[P++]|A[P++]<<8|A[P++]<<16|A[P++]<<24;A=I.g[0],P=I.g[1],M=I.g[2];var V=I.g[3],L=A+(V^P&(M^V))+D[0]+3614090360&4294967295;A=P+(L<<7&4294967295|L>>>25),L=V+(M^A&(P^M))+D[1]+3905402710&4294967295,V=A+(L<<12&4294967295|L>>>20),L=M+(P^V&(A^P))+D[2]+606105819&4294967295,M=V+(L<<17&4294967295|L>>>15),L=P+(A^M&(V^A))+D[3]+3250441966&4294967295,P=M+(L<<22&4294967295|L>>>10),L=A+(V^P&(M^V))+D[4]+4118548399&4294967295,A=P+(L<<7&4294967295|L>>>25),L=V+(M^A&(P^M))+D[5]+1200080426&4294967295,V=A+(L<<12&4294967295|L>>>20),L=M+(P^V&(A^P))+D[6]+2821735955&4294967295,M=V+(L<<17&4294967295|L>>>15),L=P+(A^M&(V^A))+D[7]+4249261313&4294967295,P=M+(L<<22&4294967295|L>>>10),L=A+(V^P&(M^V))+D[8]+1770035416&4294967295,A=P+(L<<7&4294967295|L>>>25),L=V+(M^A&(P^M))+D[9]+2336552879&4294967295,V=A+(L<<12&4294967295|L>>>20),L=M+(P^V&(A^P))+D[10]+4294925233&4294967295,M=V+(L<<17&4294967295|L>>>15),L=P+(A^M&(V^A))+D[11]+2304563134&4294967295,P=M+(L<<22&4294967295|L>>>10),L=A+(V^P&(M^V))+D[12]+1804603682&4294967295,A=P+(L<<7&4294967295|L>>>25),L=V+(M^A&(P^M))+D[13]+4254626195&4294967295,V=A+(L<<12&4294967295|L>>>20),L=M+(P^V&(A^P))+D[14]+2792965006&4294967295,M=V+(L<<17&4294967295|L>>>15),L=P+(A^M&(V^A))+D[15]+1236535329&4294967295,P=M+(L<<22&4294967295|L>>>10),L=A+(M^V&(P^M))+D[1]+4129170786&4294967295,A=P+(L<<5&4294967295|L>>>27),L=V+(P^M&(A^P))+D[6]+3225465664&4294967295,V=A+(L<<9&4294967295|L>>>23),L=M+(A^P&(V^A))+D[11]+643717713&4294967295,M=V+(L<<14&4294967295|L>>>18),L=P+(V^A&(M^V))+D[0]+3921069994&4294967295,P=M+(L<<20&4294967295|L>>>12),L=A+(M^V&(P^M))+D[5]+3593408605&4294967295,A=P+(L<<5&4294967295|L>>>27),L=V+(P^M&(A^P))+D[10]+38016083&4294967295,V=A+(L<<9&4294967295|L>>>23),L=M+(A^P&(V^A))+D[15]+3634488961&4294967295,M=V+(L<<14&4294967295|L>>>18),L=P+(V^A&(M^V))+D[4]+3889429448&4294967295,P=M+(L<<20&4294967295|L>>>12),L=A+(M^V&(P^M))+D[9]+568446438&4294967295,A=P+(L<<5&4294967295|L>>>27),L=V+(P^M&(A^P))+D[14]+3275163606&4294967295,V=A+(L<<9&4294967295|L>>>23),L=M+(A^P&(V^A))+D[3]+4107603335&4294967295,M=V+(L<<14&4294967295|L>>>18),L=P+(V^A&(M^V))+D[8]+1163531501&4294967295,P=M+(L<<20&4294967295|L>>>12),L=A+(M^V&(P^M))+D[13]+2850285829&4294967295,A=P+(L<<5&4294967295|L>>>27),L=V+(P^M&(A^P))+D[2]+4243563512&4294967295,V=A+(L<<9&4294967295|L>>>23),L=M+(A^P&(V^A))+D[7]+1735328473&4294967295,M=V+(L<<14&4294967295|L>>>18),L=P+(V^A&(M^V))+D[12]+2368359562&4294967295,P=M+(L<<20&4294967295|L>>>12),L=A+(P^M^V)+D[5]+4294588738&4294967295,A=P+(L<<4&4294967295|L>>>28),L=V+(A^P^M)+D[8]+2272392833&4294967295,V=A+(L<<11&4294967295|L>>>21),L=M+(V^A^P)+D[11]+1839030562&4294967295,M=V+(L<<16&4294967295|L>>>16),L=P+(M^V^A)+D[14]+4259657740&4294967295,P=M+(L<<23&4294967295|L>>>9),L=A+(P^M^V)+D[1]+2763975236&4294967295,A=P+(L<<4&4294967295|L>>>28),L=V+(A^P^M)+D[4]+1272893353&4294967295,V=A+(L<<11&4294967295|L>>>21),L=M+(V^A^P)+D[7]+4139469664&4294967295,M=V+(L<<16&4294967295|L>>>16),L=P+(M^V^A)+D[10]+3200236656&4294967295,P=M+(L<<23&4294967295|L>>>9),L=A+(P^M^V)+D[13]+681279174&4294967295,A=P+(L<<4&4294967295|L>>>28),L=V+(A^P^M)+D[0]+3936430074&4294967295,V=A+(L<<11&4294967295|L>>>21),L=M+(V^A^P)+D[3]+3572445317&4294967295,M=V+(L<<16&4294967295|L>>>16),L=P+(M^V^A)+D[6]+76029189&4294967295,P=M+(L<<23&4294967295|L>>>9),L=A+(P^M^V)+D[9]+3654602809&4294967295,A=P+(L<<4&4294967295|L>>>28),L=V+(A^P^M)+D[12]+3873151461&4294967295,V=A+(L<<11&4294967295|L>>>21),L=M+(V^A^P)+D[15]+530742520&4294967295,M=V+(L<<16&4294967295|L>>>16),L=P+(M^V^A)+D[2]+3299628645&4294967295,P=M+(L<<23&4294967295|L>>>9),L=A+(M^(P|~V))+D[0]+4096336452&4294967295,A=P+(L<<6&4294967295|L>>>26),L=V+(P^(A|~M))+D[7]+1126891415&4294967295,V=A+(L<<10&4294967295|L>>>22),L=M+(A^(V|~P))+D[14]+2878612391&4294967295,M=V+(L<<15&4294967295|L>>>17),L=P+(V^(M|~A))+D[5]+4237533241&4294967295,P=M+(L<<21&4294967295|L>>>11),L=A+(M^(P|~V))+D[12]+1700485571&4294967295,A=P+(L<<6&4294967295|L>>>26),L=V+(P^(A|~M))+D[3]+2399980690&4294967295,V=A+(L<<10&4294967295|L>>>22),L=M+(A^(V|~P))+D[10]+4293915773&4294967295,M=V+(L<<15&4294967295|L>>>17),L=P+(V^(M|~A))+D[1]+2240044497&4294967295,P=M+(L<<21&4294967295|L>>>11),L=A+(M^(P|~V))+D[8]+1873313359&4294967295,A=P+(L<<6&4294967295|L>>>26),L=V+(P^(A|~M))+D[15]+4264355552&4294967295,V=A+(L<<10&4294967295|L>>>22),L=M+(A^(V|~P))+D[6]+2734768916&4294967295,M=V+(L<<15&4294967295|L>>>17),L=P+(V^(M|~A))+D[13]+1309151649&4294967295,P=M+(L<<21&4294967295|L>>>11),L=A+(M^(P|~V))+D[4]+4149444226&4294967295,A=P+(L<<6&4294967295|L>>>26),L=V+(P^(A|~M))+D[11]+3174756917&4294967295,V=A+(L<<10&4294967295|L>>>22),L=M+(A^(V|~P))+D[2]+718787259&4294967295,M=V+(L<<15&4294967295|L>>>17),L=P+(V^(M|~A))+D[9]+3951481745&4294967295,I.g[0]=I.g[0]+A&4294967295,I.g[1]=I.g[1]+(M+(L<<21&4294967295|L>>>11))&4294967295,I.g[2]=I.g[2]+M&4294967295,I.g[3]=I.g[3]+V&4294967295}r.prototype.u=function(I,A){A===void 0&&(A=I.length);for(var P=A-this.blockSize,D=this.B,M=this.h,V=0;V<A;){if(M==0)for(;V<=P;)s(this,I,V),V+=this.blockSize;if(typeof I=="string"){for(;V<A;)if(D[M++]=I.charCodeAt(V++),M==this.blockSize){s(this,D),M=0;break}}else for(;V<A;)if(D[M++]=I[V++],M==this.blockSize){s(this,D),M=0;break}}this.h=M,this.o+=A},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var A=1;A<I.length-8;++A)I[A]=0;var P=8*this.o;for(A=I.length-8;A<I.length;++A)I[A]=P&255,P/=256;for(this.u(I),I=Array(16),A=P=0;4>A;++A)for(var D=0;32>D;D+=8)I[P++]=this.g[A]>>>D&255;return I};function i(I,A){var P=a;return Object.prototype.hasOwnProperty.call(P,I)?P[I]:P[I]=A(I)}function o(I,A){this.h=A;for(var P=[],D=!0,M=I.length-1;0<=M;M--){var V=I[M]|0;D&&V==A||(P[M]=V,D=!1)}this.g=P}var a={};function l(I){return-128<=I&&128>I?i(I,function(A){return new o([A|0],0>A?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return w(c(-I));for(var A=[],P=1,D=0;I>=P;D++)A[D]=I/P|0,P*=4294967296;return new o(A,0)}function u(I,A){if(I.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(I.charAt(0)=="-")return w(u(I.substring(1),A));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=c(Math.pow(A,8)),D=d,M=0;M<I.length;M+=8){var V=Math.min(8,I.length-M),L=parseInt(I.substring(M,M+V),A);8>V?(V=c(Math.pow(A,V)),D=D.j(V).add(c(L))):(D=D.j(P),D=D.add(c(L)))}return D}var d=l(0),f=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(m(this))return-w(this).m();for(var I=0,A=1,P=0;P<this.g.length;P++){var D=this.i(P);I+=(0<=D?D:4294967296+D)*A,A*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(g(this))return"0";if(m(this))return"-"+w(this).toString(I);for(var A=c(Math.pow(I,6)),P=this,D="";;){var M=C(P,A).g;P=v(P,M.j(A));var V=((0<P.g.length?P.g[0]:P.h)>>>0).toString(I);if(P=M,g(P))return V+D;for(;6>V.length;)V="0"+V;D=V+D}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function g(I){if(I.h!=0)return!1;for(var A=0;A<I.g.length;A++)if(I.g[A]!=0)return!1;return!0}function m(I){return I.h==-1}t.l=function(I){return I=v(this,I),m(I)?-1:g(I)?0:1};function w(I){for(var A=I.g.length,P=[],D=0;D<A;D++)P[D]=~I.g[D];return new o(P,~I.h).add(f)}t.abs=function(){return m(this)?w(this):this},t.add=function(I){for(var A=Math.max(this.g.length,I.g.length),P=[],D=0,M=0;M<=A;M++){var V=D+(this.i(M)&65535)+(I.i(M)&65535),L=(V>>>16)+(this.i(M)>>>16)+(I.i(M)>>>16);D=L>>>16,V&=65535,L&=65535,P[M]=L<<16|V}return new o(P,P[P.length-1]&-2147483648?-1:0)};function v(I,A){return I.add(w(A))}t.j=function(I){if(g(this)||g(I))return d;if(m(this))return m(I)?w(this).j(w(I)):w(w(this).j(I));if(m(I))return w(this.j(w(I)));if(0>this.l(p)&&0>I.l(p))return c(this.m()*I.m());for(var A=this.g.length+I.g.length,P=[],D=0;D<2*A;D++)P[D]=0;for(D=0;D<this.g.length;D++)for(var M=0;M<I.g.length;M++){var V=this.i(D)>>>16,L=this.i(D)&65535,W=I.i(M)>>>16,oe=I.i(M)&65535;P[2*D+2*M]+=L*oe,E(P,2*D+2*M),P[2*D+2*M+1]+=V*oe,E(P,2*D+2*M+1),P[2*D+2*M+1]+=L*W,E(P,2*D+2*M+1),P[2*D+2*M+2]+=V*W,E(P,2*D+2*M+2)}for(D=0;D<A;D++)P[D]=P[2*D+1]<<16|P[2*D];for(D=A;D<2*A;D++)P[D]=0;return new o(P,0)};function E(I,A){for(;(I[A]&65535)!=I[A];)I[A+1]+=I[A]>>>16,I[A]&=65535,A++}function b(I,A){this.g=I,this.h=A}function C(I,A){if(g(A))throw Error("division by zero");if(g(I))return new b(d,d);if(m(I))return A=C(w(I),A),new b(w(A.g),w(A.h));if(m(A))return A=C(I,w(A)),new b(w(A.g),A.h);if(30<I.g.length){if(m(I)||m(A))throw Error("slowDivide_ only works with positive integers.");for(var P=f,D=A;0>=D.l(I);)P=R(P),D=R(D);var M=O(P,1),V=O(D,1);for(D=O(D,2),P=O(P,2);!g(D);){var L=V.add(D);0>=L.l(I)&&(M=M.add(P),V=L),D=O(D,1),P=O(P,1)}return A=v(I,M.j(A)),new b(M,A)}for(M=d;0<=I.l(A);){for(P=Math.max(1,Math.floor(I.m()/A.m())),D=Math.ceil(Math.log(P)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),V=c(P),L=V.j(A);m(L)||0<L.l(I);)P-=D,V=c(P),L=V.j(A);g(V)&&(V=f),M=M.add(V),I=v(I,L)}return new b(M,I)}t.A=function(I){return C(this,I).h},t.and=function(I){for(var A=Math.max(this.g.length,I.g.length),P=[],D=0;D<A;D++)P[D]=this.i(D)&I.i(D);return new o(P,this.h&I.h)},t.or=function(I){for(var A=Math.max(this.g.length,I.g.length),P=[],D=0;D<A;D++)P[D]=this.i(D)|I.i(D);return new o(P,this.h|I.h)},t.xor=function(I){for(var A=Math.max(this.g.length,I.g.length),P=[],D=0;D<A;D++)P[D]=this.i(D)^I.i(D);return new o(P,this.h^I.h)};function R(I){for(var A=I.g.length+1,P=[],D=0;D<A;D++)P[D]=I.i(D)<<1|I.i(D-1)>>>31;return new o(P,I.h)}function O(I,A){var P=A>>5;A%=32;for(var D=I.g.length-P,M=[],V=0;V<D;V++)M[V]=0<A?I.i(V+P)>>>A|I.i(V+P+1)<<32-A:I.i(V+P);return new o(M,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,KL=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Hl=o}).apply(typeof TC<"u"?TC:typeof self<"u"?self:typeof window<"u"?window:{});var $m=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var QL,Vh,YL,kg,I1,XL,JL,ZL;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,x,S){return h==Array.prototype||h==Object.prototype||(h[x]=S.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof $m=="object"&&$m];for(var x=0;x<h.length;++x){var S=h[x];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=n(this);function s(h,x){if(x)e:{var S=r;h=h.split(".");for(var k=0;k<h.length-1;k++){var B=h[k];if(!(B in S))break e;S=S[B]}h=h[h.length-1],k=S[h],x=x(k),x!=k&&x!=null&&e(S,h,{configurable:!0,writable:!0,value:x})}}function i(h,x){h instanceof String&&(h+="");var S=0,k=!1,B={next:function(){if(!k&&S<h.length){var q=S++;return{value:x(q,h[q]),done:!1}}return k=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}s("Array.prototype.values",function(h){return h||function(){return i(this,function(x,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(h){var x=typeof h;return x=x!="object"?x:h?Array.isArray(h)?"array":x:"null",x=="array"||x=="object"&&typeof h.length=="number"}function c(h){var x=typeof h;return x=="object"&&h!=null||x=="function"}function u(h,x,S){return h.call.apply(h.bind,arguments)}function d(h,x,S){if(!h)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,k),h.apply(x,B)}}return function(){return h.apply(x,arguments)}}function f(h,x,S){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function p(h,x){var S=Array.prototype.slice.call(arguments,1);return function(){var k=S.slice();return k.push.apply(k,arguments),h.apply(this,k)}}function g(h,x){function S(){}S.prototype=x.prototype,h.aa=x.prototype,h.prototype=new S,h.prototype.constructor=h,h.Qb=function(k,B,q){for(var ee=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)ee[Ze-2]=arguments[Ze];return x.prototype[B].apply(k,ee)}}function m(h){const x=h.length;if(0<x){const S=Array(x);for(let k=0;k<x;k++)S[k]=h[k];return S}return[]}function w(h,x){for(let S=1;S<arguments.length;S++){const k=arguments[S];if(l(k)){const B=h.length||0,q=k.length||0;h.length=B+q;for(let ee=0;ee<q;ee++)h[B+ee]=k[ee]}else h.push(k)}}class v{constructor(x,S){this.i=x,this.j=S,this.h=0,this.g=null}get(){let x;return 0<this.h?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function E(h){return/^[\s\xa0]*$/.test(h)}function b(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function C(h){return C[" "](h),h}C[" "]=function(){};var R=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function O(h,x,S){for(const k in h)x.call(S,h[k],k,h)}function I(h,x){for(const S in h)x.call(void 0,h[S],S,h)}function A(h){const x={};for(const S in h)x[S]=h[S];return x}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(h,x){let S,k;for(let B=1;B<arguments.length;B++){k=arguments[B];for(S in k)h[S]=k[S];for(let q=0;q<P.length;q++)S=P[q],Object.prototype.hasOwnProperty.call(k,S)&&(h[S]=k[S])}}function M(h){var x=1;h=h.split(":");const S=[];for(;0<x&&h.length;)S.push(h.shift()),x--;return h.length&&S.push(h.join(":")),S}function V(h){a.setTimeout(()=>{throw h},0)}function L(){var h=Y;let x=null;return h.g&&(x=h.g,h.g=h.g.next,h.g||(h.h=null),x.next=null),x}class W{constructor(){this.h=this.g=null}add(x,S){const k=oe.get();k.set(x,S),this.h?this.h.next=k:this.g=k,this.h=k}}var oe=new v(()=>new re,h=>h.reset());class re{constructor(){this.next=this.g=this.h=null}set(x,S){this.h=x,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,U=!1,Y=new W,G=()=>{const h=a.Promise.resolve(void 0);Z=()=>{h.then(he)}};var he=()=>{for(var h;h=L();){try{h.h.call(h.g)}catch(S){V(S)}var x=oe;x.j(h),100>x.h&&(x.h++,h.next=x.g,x.g=h)}U=!1};function we(){this.s=this.s,this.C=this.C}we.prototype.s=!1,we.prototype.ma=function(){this.s||(this.s=!0,this.N())},we.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(h,x){this.type=h,this.g=this.target=x,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var De=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,x=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const S=()=>{};a.addEventListener("test",S,x),a.removeEventListener("test",S,x)}catch{}return h}();function _e(h,x){if(ve.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var S=this.type=h.type,k=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=x,x=h.relatedTarget){if(R){e:{try{C(x.nodeName);var B=!0;break e}catch{}B=!1}B||(x=null)}}else S=="mouseover"?x=h.fromElement:S=="mouseout"&&(x=h.toElement);this.relatedTarget=x,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Ye[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&_e.aa.h.call(this)}}g(_e,ve);var Ye={2:"touch",3:"pen",4:"mouse"};_e.prototype.h=function(){_e.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var se="closure_listenable_"+(1e6*Math.random()|0),ye=0;function Be(h,x,S,k,B){this.listener=h,this.proxy=null,this.src=x,this.type=S,this.capture=!!k,this.ha=B,this.key=++ye,this.da=this.fa=!1}function xe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ue(h){this.src=h,this.g={},this.h=0}ue.prototype.add=function(h,x,S,k,B){var q=h.toString();h=this.g[q],h||(h=this.g[q]=[],this.h++);var ee=be(h,x,k,B);return-1<ee?(x=h[ee],S||(x.fa=!1)):(x=new Be(x,this.src,q,!!k,B),x.fa=S,h.push(x)),x};function X(h,x){var S=x.type;if(S in h.g){var k=h.g[S],B=Array.prototype.indexOf.call(k,x,void 0),q;(q=0<=B)&&Array.prototype.splice.call(k,B,1),q&&(xe(x),h.g[S].length==0&&(delete h.g[S],h.h--))}}function be(h,x,S,k){for(var B=0;B<h.length;++B){var q=h[B];if(!q.da&&q.listener==x&&q.capture==!!S&&q.ha==k)return B}return-1}var Ce="closure_lm_"+(1e6*Math.random()|0),We={};function it(h,x,S,k,B){if(Array.isArray(x)){for(var q=0;q<x.length;q++)it(h,x[q],S,k,B);return null}return S=jr(S),h&&h[se]?h.K(x,S,c(k)?!!k.capture:!!k,B):Tt(h,x,S,!1,k,B)}function Tt(h,x,S,k,B,q){if(!x)throw Error("Invalid event type");var ee=c(B)?!!B.capture:!!B,Ze=Vr(h);if(Ze||(h[Ce]=Ze=new ue(h)),S=Ze.add(x,S,k,ee,q),S.proxy)return S;if(k=Fn(),S.proxy=k,k.src=h,k.listener=S,h.addEventListener)De||(B=ee),B===void 0&&(B=!1),h.addEventListener(x.toString(),k,B);else if(h.attachEvent)h.attachEvent(Zn(x.toString()),k);else if(h.addListener&&h.removeListener)h.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Fn(){function h(S){return x.call(h.src,h.listener,S)}const x=Gs;return h}function jt(h,x,S,k,B){if(Array.isArray(x))for(var q=0;q<x.length;q++)jt(h,x[q],S,k,B);else k=c(k)?!!k.capture:!!k,S=jr(S),h&&h[se]?(h=h.i,x=String(x).toString(),x in h.g&&(q=h.g[x],S=be(q,S,k,B),-1<S&&(xe(q[S]),Array.prototype.splice.call(q,S,1),q.length==0&&(delete h.g[x],h.h--)))):h&&(h=Vr(h))&&(x=h.g[x.toString()],h=-1,x&&(h=be(x,S,k,B)),(S=-1<h?x[h]:null)&&en(S))}function en(h){if(typeof h!="number"&&h&&!h.da){var x=h.src;if(x&&x[se])X(x.i,h);else{var S=h.type,k=h.proxy;x.removeEventListener?x.removeEventListener(S,k,h.capture):x.detachEvent?x.detachEvent(Zn(S),k):x.addListener&&x.removeListener&&x.removeListener(k),(S=Vr(x))?(X(S,h),S.h==0&&(S.src=null,x[Ce]=null)):xe(h)}}}function Zn(h){return h in We?We[h]:We[h]="on"+h}function Gs(h,x){if(h.da)h=!0;else{x=new _e(x,this);var S=h.listener,k=h.ha||h.src;h.fa&&en(h),h=S.call(k,x)}return h}function Vr(h){return h=h[Ce],h instanceof ue?h:null}var ln="__closure_events_fn_"+(1e9*Math.random()>>>0);function jr(h){return typeof h=="function"?h:(h[ln]||(h[ln]=function(x){return h.handleEvent(x)}),h[ln])}function St(){we.call(this),this.i=new ue(this),this.M=this,this.F=null}g(St,we),St.prototype[se]=!0,St.prototype.removeEventListener=function(h,x,S,k){jt(this,h,x,S,k)};function et(h,x){var S,k=h.F;if(k)for(S=[];k;k=k.F)S.push(k);if(h=h.M,k=x.type||x,typeof x=="string")x=new ve(x,h);else if(x instanceof ve)x.target=x.target||h;else{var B=x;x=new ve(k,h),D(x,B)}if(B=!0,S)for(var q=S.length-1;0<=q;q--){var ee=x.g=S[q];B=pr(ee,k,!0,x)&&B}if(ee=x.g=h,B=pr(ee,k,!0,x)&&B,B=pr(ee,k,!1,x)&&B,S)for(q=0;q<S.length;q++)ee=x.g=S[q],B=pr(ee,k,!1,x)&&B}St.prototype.N=function(){if(St.aa.N.call(this),this.i){var h=this.i,x;for(x in h.g){for(var S=h.g[x],k=0;k<S.length;k++)xe(S[k]);delete h.g[x],h.h--}}this.F=null},St.prototype.K=function(h,x,S,k){return this.i.add(String(h),x,!1,S,k)},St.prototype.L=function(h,x,S,k){return this.i.add(String(h),x,!0,S,k)};function pr(h,x,S,k){if(x=h.i.g[String(x)],!x)return!0;x=x.concat();for(var B=!0,q=0;q<x.length;++q){var ee=x[q];if(ee&&!ee.da&&ee.capture==S){var Ze=ee.listener,pn=ee.ha||ee.src;ee.fa&&X(h.i,ee),B=Ze.call(pn,k)!==!1&&B}}return B&&!k.defaultPrevented}function Fr(h,x,S){if(typeof h=="function")S&&(h=f(h,S));else if(h&&typeof h.handleEvent=="function")h=f(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(x)?-1:a.setTimeout(h,x||0)}function It(h){h.g=Fr(()=>{h.g=null,h.i&&(h.i=!1,It(h))},h.l);const x=h.h;h.h=null,h.m.apply(null,x)}class Ks extends we{constructor(x,S){super(),this.m=x,this.l=S,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:It(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function er(h){we.call(this),this.h=h,this.g={}}g(er,we);var ps=[];function Qs(h){O(h.g,function(x,S){this.g.hasOwnProperty(S)&&en(x)},h),h.g={}}er.prototype.N=function(){er.aa.N.call(this),Qs(this)},er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Br=a.JSON.stringify,Io=a.JSON.parse,Ys=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function mr(){}mr.prototype.h=null;function cn(h){return h.h||(h.h=h.i())}function ms(){}var tr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nr(){ve.call(this,"d")}g(nr,ve);function Ur(){ve.call(this,"c")}g(Ur,ve);var un={},gs=null;function $r(){return gs=gs||new St}un.La="serverreachability";function Ao(h){ve.call(this,un.La,h)}g(Ao,ve);function rr(h){const x=$r();et(x,new Ao(x))}un.STAT_EVENT="statevent";function ol(h,x){ve.call(this,un.STAT_EVENT,h),this.stat=x}g(ol,ve);function ot(h){const x=$r();et(x,new ol(x,h))}un.Ma="timingevent";function jc(h,x){ve.call(this,un.Ma,h),this.size=x}g(jc,ve);function Ci(h,x){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},x)}function Ri(){this.g=!0}Ri.prototype.xa=function(){this.g=!1};function Fc(h,x,S,k,B,q){h.info(function(){if(h.g)if(q)for(var ee="",Ze=q.split("&"),pn=0;pn<Ze.length;pn++){var qe=Ze[pn].split("=");if(1<qe.length){var Tn=qe[0];qe=qe[1];var Sn=Tn.split("_");ee=2<=Sn.length&&Sn[1]=="type"?ee+(Tn+"="+qe+"&"):ee+(Tn+"=redacted&")}}else ee=null;else ee=q;return"XMLHTTP REQ ("+k+") [attempt "+B+"]: "+x+`
`+S+`
`+ee})}function al(h,x,S,k,B,q,ee){h.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+B+"]: "+x+`
`+S+`
`+q+" "+ee})}function ft(h,x,S,k){h.info(function(){return"XMLHTTP TEXT ("+x+"): "+sh(h,S)+(k?" "+k:"")})}function rh(h,x){h.info(function(){return"TIMEOUT: "+x})}Ri.prototype.info=function(){};function sh(h,x){if(!h.g)return x;if(!x)return null;try{var S=JSON.parse(x);if(S){for(h=0;h<S.length;h++)if(Array.isArray(S[h])){var k=S[h];if(!(2>k.length)){var B=k[1];if(Array.isArray(B)&&!(1>B.length)){var q=B[0];if(q!="noop"&&q!="stop"&&q!="close")for(var ee=1;ee<B.length;ee++)B[ee]=""}}}}return Br(S)}catch{return x}}var Co={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ll;function Nt(){}g(Nt,mr),Nt.prototype.g=function(){return new XMLHttpRequest},Nt.prototype.i=function(){return{}},ll=new Nt;function qr(h,x,S,k){this.j=h,this.i=x,this.l=S,this.R=k||1,this.U=new er(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Uc}function Uc(){this.i=null,this.g="",this.h=!1}var $c={},cl={};function ul(h,x,S){h.L=1,h.v=Gr(gr(x)),h.m=S,h.P=!0,dn(h,null)}function dn(h,x){h.F=Date.now(),Ro(h),h.A=gr(h.v);var S=h.A,k=h.R;Array.isArray(k)||(k=[String(k)]),vl(S.i,"t",k),h.C=0,S=h.j.J,h.h=new Uc,h.g=AI(h.j,S?x:null,!h.m),0<h.O&&(h.M=new Ks(f(h.Y,h,h.g),h.O)),x=h.U,S=h.g,k=h.ca;var B="readystatechange";Array.isArray(B)||(B&&(ps[0]=B.toString()),B=ps);for(var q=0;q<B.length;q++){var ee=it(S,B[q],k||x.handleEvent,!1,x.h||x);if(!ee)break;x.g[ee.key]=ee}x=h.H?A(h.H):{},h.m?(h.u||(h.u="POST"),x["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,x)):(h.u="GET",h.g.ea(h.A,h.u,null,x)),rr(),Fc(h.i,h.u,h.A,h.l,h.R,h.m)}qr.prototype.ca=function(h){h=h.target;const x=this.M;x&&tt(h)==3?x.j():this.Y(h)},qr.prototype.Y=function(h){try{if(h==this.g)e:{const Sn=tt(this.g);var x=this.g.Ba();const Zc=this.g.Z();if(!(3>Sn)&&(Sn!=3||this.g&&(this.h.h||this.g.oa()||fn(this.g)))){this.J||Sn!=4||x==7||(x==8||0>=Zc?rr(3):rr(2)),dl(this);var S=this.g.Z();this.X=S;t:if(qc(this)){var k=fn(this.g);h="";var B=k.length,q=tt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wr(this),zr(this);var ee="";break t}this.h.i=new a.TextDecoder}for(x=0;x<B;x++)this.h.h=!0,h+=this.h.i.decode(k[x],{stream:!(q&&x==B-1)});k.length=0,this.h.g+=h,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=S==200,al(this.i,this.u,this.A,this.l,this.R,Sn,S),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,pn=this.g;if((Ze=pn.g?pn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Ze)){var qe=Ze;break t}}qe=null}if(S=qe)ft(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xs(this,S);else{this.o=!1,this.s=3,ot(12),Wr(this),zr(this);break e}}if(this.P){S=!0;let ws;for(;!this.J&&this.C<ee.length;)if(ws=ih(this,ee),ws==cl){Sn==4&&(this.s=4,ot(14),S=!1),ft(this.i,this.l,null,"[Incomplete Response]");break}else if(ws==$c){this.s=4,ot(15),ft(this.i,this.l,ee,"[Invalid Chunk]"),S=!1;break}else ft(this.i,this.l,ws,null),Xs(this,ws);if(qc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Sn!=4||ee.length!=0||this.h.h||(this.s=1,ot(16),S=!1),this.o=this.o&&S,!S)ft(this.i,this.l,ee,"[Invalid Chunked Response]"),Wr(this),zr(this);else if(0<ee.length&&!this.W){this.W=!0;var Tn=this.j;Tn.g==this&&Tn.ba&&!Tn.M&&(Tn.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),z0(Tn),Tn.M=!0,ot(11))}}else ft(this.i,this.l,ee,null),Xs(this,ee);Sn==4&&Wr(this),this.o&&!this.J&&(Sn==4?bI(this.j,this):(this.o=!1,Ro(this)))}else kt(this.g),S==400&&0<ee.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),Wr(this),zr(this)}}}catch{}finally{}};function qc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function ih(h,x){var S=h.C,k=x.indexOf(`
`,S);return k==-1?cl:(S=Number(x.substring(S,k)),isNaN(S)?$c:(k+=1,k+S>x.length?cl:(x=x.slice(k,k+S),h.C=k+S,x)))}qr.prototype.cancel=function(){this.J=!0,Wr(this)};function Ro(h){h.S=Date.now()+h.I,zc(h,h.I)}function zc(h,x){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ci(f(h.ba,h),x)}function dl(h){h.B&&(a.clearTimeout(h.B),h.B=null)}qr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(rh(this.i,this.A),this.L!=2&&(rr(),ot(17)),Wr(this),this.s=2,zr(this)):zc(this,this.S-h)};function zr(h){h.j.G==0||h.J||bI(h.j,h)}function Wr(h){dl(h);var x=h.M;x&&typeof x.ma=="function"&&x.ma(),h.M=null,Qs(h.U),h.g&&(x=h.g,h.g=null,x.abort(),x.ma())}function Xs(h,x){try{var S=h.j;if(S.G!=0&&(S.g==h||hl(S.h,h))){if(!h.K&&hl(S.h,h)&&S.G==3){try{var k=S.Da.g.parse(x)}catch{k=null}if(Array.isArray(k)&&k.length==3){var B=k;if(B[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<h.F)Em(S),sr(S);else break e;q0(S),ot(18)}}else S.za=B[1],0<S.za-S.T&&37500>B[2]&&S.F&&S.v==0&&!S.C&&(S.C=Ci(f(S.Za,S),6e3));if(1>=Hc(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else bl(S,11)}else if((h.K||S.g==h)&&Em(S),!E(x))for(B=S.Da.g.parse(x),x=0;x<B.length;x++){let qe=B[x];if(S.T=qe[0],qe=qe[1],S.G==2)if(qe[0]=="c"){S.K=qe[1],S.ia=qe[2];const Tn=qe[3];Tn!=null&&(S.la=Tn,S.j.info("VER="+S.la));const Sn=qe[4];Sn!=null&&(S.Aa=Sn,S.j.info("SVER="+S.Aa));const Zc=qe[5];Zc!=null&&typeof Zc=="number"&&0<Zc&&(k=1.5*Zc,S.L=k,S.j.info("backChannelRequestTimeoutMs_="+k)),k=S;const ws=h.g;if(ws){const bm=ws.g?ws.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bm){var q=k.h;q.g||bm.indexOf("spdy")==-1&&bm.indexOf("quic")==-1&&bm.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(fl(q,q.h),q.h=null))}if(k.D){const W0=ws.g?ws.g.getResponseHeader("X-HTTP-Session-Id"):null;W0&&(k.ya=W0,Ge(k.I,k.D,W0))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-h.F,S.j.info("Handshake RTT: "+S.R+"ms")),k=S;var ee=h;if(k.qa=II(k,k.J?k.ia:null,k.W),ee.K){Gc(k.h,ee);var Ze=ee,pn=k.L;pn&&(Ze.I=pn),Ze.B&&(dl(Ze),Ro(Ze)),k.g=ee}else EI(k);0<S.i.length&&El(S)}else qe[0]!="stop"&&qe[0]!="close"||bl(S,7);else S.G==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?bl(S,7):Qr(S):qe[0]!="noop"&&S.l&&S.l.ta(qe),S.v=0)}}rr(4)}catch{}}var Hr=class{constructor(h,x){this.g=h,this.map=x}};function Po(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Hc(h){return h.h?1:h.g?h.g.size:0}function hl(h,x){return h.h?h.h==x:h.g?h.g.has(x):!1}function fl(h,x){h.g?h.g.add(x):h.h=x}function Gc(h,x){h.h&&h.h==x?h.h=null:h.g&&h.g.has(x)&&h.g.delete(x)}Po.prototype.cancel=function(){if(this.i=Pi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Pi(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let x=h.i;for(const S of h.g.values())x=x.concat(S.D);return x}return m(h.i)}function pl(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(l(h)){for(var x=[],S=h.length,k=0;k<S;k++)x.push(h[k]);return x}x=[],S=0;for(k in h)x[S++]=h[k];return x}function Ni(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(l(h)||typeof h=="string"){var x=[];h=h.length;for(var S=0;S<h;S++)x.push(S);return x}x=[],S=0;for(const k in h)x[S++]=k;return x}}}function ml(h,x){if(h.forEach&&typeof h.forEach=="function")h.forEach(x,void 0);else if(l(h)||typeof h=="string")Array.prototype.forEach.call(h,x,void 0);else for(var S=Ni(h),k=pl(h),B=k.length,q=0;q<B;q++)x.call(void 0,k[q],S&&S[q],h)}var gl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oh(h,x){if(h){h=h.split("&");for(var S=0;S<h.length;S++){var k=h[S].indexOf("="),B=null;if(0<=k){var q=h[S].substring(0,k);B=h[S].substring(k+1)}else q=h[S];x(q,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function ys(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof ys){this.h=h.h,No(this,h.j),this.o=h.o,this.g=h.g,Js(this,h.s),this.l=h.l;var x=h.i,S=new ki;S.i=x.i,x.g&&(S.g=new Map(x.g),S.h=x.h),Kc(this,S),this.m=h.m}else h&&(x=String(h).match(gl))?(this.h=!1,No(this,x[1]||"",!0),this.o=hn(x[2]||""),this.g=hn(x[3]||"",!0),Js(this,x[4]),this.l=hn(x[5]||"",!0),Kc(this,x[6]||"",!0),this.m=hn(x[7]||"")):(this.h=!1,this.i=new ki(null,this.h))}ys.prototype.toString=function(){var h=[],x=this.j;x&&h.push(Bn(x,Qc,!0),":");var S=this.g;return(S||x=="file")&&(h.push("//"),(x=this.o)&&h.push(Bn(x,Qc,!0),"@"),h.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&h.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&h.push("/"),h.push(Bn(S,S.charAt(0)=="/"?ah:Kr,!0))),(S=this.i.toString())&&h.push("?",S),(S=this.m)&&h.push("#",Bn(S,ch)),h.join("")};function gr(h){return new ys(h)}function No(h,x,S){h.j=S?hn(x,!0):x,h.j&&(h.j=h.j.replace(/:$/,""))}function Js(h,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);h.s=x}else h.s=null}function Kc(h,x,S){x instanceof ki?(h.i=x,wl(h.i,h.h)):(S||(x=Bn(x,lh)),h.i=new ki(x,h.h))}function Ge(h,x,S){h.i.set(x,S)}function Gr(h){return Ge(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function hn(h,x){return h?x?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Bn(h,x,S){return typeof h=="string"?(h=encodeURI(h).replace(x,vs),S&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function vs(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Qc=/[#\/\?@]/g,Kr=/[#\?:]/g,ah=/[#\?]/g,lh=/[#\?@]/g,ch=/#/g;function ki(h,x){this.h=this.g=null,this.i=h||null,this.j=!!x}function yr(h){h.g||(h.g=new Map,h.h=0,h.i&&oh(h.i,function(x,S){h.add(decodeURIComponent(x.replace(/\+/g," ")),S)}))}t=ki.prototype,t.add=function(h,x){yr(this),this.i=null,h=vr(this,h);var S=this.g.get(h);return S||this.g.set(h,S=[]),S.push(x),this.h+=1,this};function tn(h,x){yr(h),x=vr(h,x),h.g.has(x)&&(h.i=null,h.h-=h.g.get(x).length,h.g.delete(x))}function yl(h,x){return yr(h),x=vr(h,x),h.g.has(x)}t.forEach=function(h,x){yr(this),this.g.forEach(function(S,k){S.forEach(function(B){h.call(x,B,k,this)},this)},this)},t.na=function(){yr(this);const h=Array.from(this.g.values()),x=Array.from(this.g.keys()),S=[];for(let k=0;k<x.length;k++){const B=h[k];for(let q=0;q<B.length;q++)S.push(x[k])}return S},t.V=function(h){yr(this);let x=[];if(typeof h=="string")yl(this,h)&&(x=x.concat(this.g.get(vr(this,h))));else{h=Array.from(this.g.values());for(let S=0;S<h.length;S++)x=x.concat(h[S])}return x},t.set=function(h,x){return yr(this),this.i=null,h=vr(this,h),yl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[x]),this.h+=1,this},t.get=function(h,x){return h?(h=this.V(h),0<h.length?String(h[0]):x):x};function vl(h,x,S){tn(h,x),0<S.length&&(h.i=null,h.g.set(vr(h,x),m(S)),h.h+=S.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],x=Array.from(this.g.keys());for(var S=0;S<x.length;S++){var k=x[S];const q=encodeURIComponent(String(k)),ee=this.V(k);for(k=0;k<ee.length;k++){var B=q;ee[k]!==""&&(B+="="+encodeURIComponent(String(ee[k]))),h.push(B)}}return this.i=h.join("&")};function vr(h,x){return x=String(x),h.j&&(x=x.toLowerCase()),x}function wl(h,x){x&&!h.j&&(yr(h),h.i=null,h.g.forEach(function(S,k){var B=k.toLowerCase();k!=B&&(tn(this,k),vl(this,B,S))},h)),h.j=x}function ko(h,x){const S=new Ri;if(a.Image){const k=new Image;k.onload=p(wr,S,"TestLoadImage: loaded",!0,x,k),k.onerror=p(wr,S,"TestLoadImage: error",!1,x,k),k.onabort=p(wr,S,"TestLoadImage: abort",!1,x,k),k.ontimeout=p(wr,S,"TestLoadImage: timeout",!1,x,k),a.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=h}else x(!1)}function uh(h,x){const S=new Ri,k=new AbortController,B=setTimeout(()=>{k.abort(),wr(S,"TestPingServer: timeout",!1,x)},1e4);fetch(h,{signal:k.signal}).then(q=>{clearTimeout(B),q.ok?wr(S,"TestPingServer: ok",!0,x):wr(S,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(B),wr(S,"TestPingServer: error",!1,x)})}function wr(h,x,S,k,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),k(S)}catch{}}function _l(){this.g=new Ys}function Yc(h,x,S){const k=S||"";try{ml(h,function(B,q){let ee=B;c(B)&&(ee=Br(B)),x.push(k+q+"="+encodeURIComponent(ee))})}catch(B){throw x.push(k+"type="+encodeURIComponent("_badmap")),B}}function Un(h){this.l=h.Ub||null,this.j=h.eb||!1}g(Un,mr),Un.prototype.g=function(){return new Di(this.l,this.j)},Un.prototype.i=function(h){return function(){return h}}({});function Di(h,x){St.call(this),this.D=h,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(Di,St),t=Di.prototype,t.open=function(h,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=x,this.readyState=1,Li(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const x={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(x.body=h),(this.D||a).fetch(new Request(this.A,x)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Oi(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Li(this)),this.g&&(this.readyState=3,Li(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Do(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Do(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var x=h.value?h.value:new Uint8Array(0);(x=this.v.decode(x,{stream:!h.done}))&&(this.response=this.responseText+=x)}h.done?Oi(this):Li(this),this.readyState==3&&Do(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Oi(this))},t.Qa=function(h){this.g&&(this.response=h,Oi(this))},t.ga=function(){this.g&&Oi(this)};function Oi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Li(h)}t.setRequestHeader=function(h,x){this.u.append(h,x)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],x=this.h.entries();for(var S=x.next();!S.done;)S=S.value,h.push(S[0]+": "+S[1]),S=x.next();return h.join(`\r
`)};function Li(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Di.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function T(h){let x="";return O(h,function(S,k){x+=k,x+=":",x+=S,x+=`\r
`}),x}function N(h,x,S){e:{for(k in S){var k=!1;break e}k=!0}k||(S=T(S),typeof h=="string"?S!=null&&encodeURIComponent(String(S)):Ge(h,x,S))}function j(h){St.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(j,St);var z=/^https?$/i,Se=["POST","PUT"];t=j.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,x,S,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);x=x?x.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ll.g(),this.v=this.o?cn(this.o):cn(ll),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(x,String(h),!0),this.B=!1}catch(q){me(this,q);return}if(h=S||"",S=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var B in k)S.set(B,k[B]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const q of k.keys())S.set(q,k.get(q));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(S.keys()).find(q=>q.toLowerCase()=="content-type"),B=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Se,x,void 0))||k||B||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ee]of S)this.g.setRequestHeader(q,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ue(this),this.u=!0,this.g.send(h),this.u=!1}catch(q){me(this,q)}};function me(h,x){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=x,h.m=5,je(h),at(h)}function je(h){h.A||(h.A=!0,et(h,"complete"),et(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,et(this,"complete"),et(this,"abort"),at(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),at(this,!0)),j.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Oe(this):this.bb())},t.bb=function(){Oe(this)};function Oe(h){if(h.h&&typeof o<"u"&&(!h.v[1]||tt(h)!=4||h.Z()!=2)){if(h.u&&tt(h)==4)Fr(h.Ea,0,h);else if(et(h,"readystatechange"),tt(h)==4){h.h=!1;try{const ee=h.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var S;if(!(S=x)){var k;if(k=ee===0){var B=String(h.D).match(gl)[1]||null;!B&&a.self&&a.self.location&&(B=a.self.location.protocol.slice(0,-1)),k=!z.test(B?B.toLowerCase():"")}S=k}if(S)et(h,"complete"),et(h,"success");else{h.m=6;try{var q=2<tt(h)?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.Z()+"]",je(h)}}finally{at(h)}}}}function at(h,x){if(h.g){Ue(h);const S=h.g,k=h.v[0]?()=>{}:null;h.g=null,h.v=null,x||et(h,"ready");try{S.onreadystatechange=k}catch{}}}function Ue(h){h.I&&(a.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function tt(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<tt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var x=this.g.responseText;return h&&x.indexOf(h)==0&&(x=x.substring(h.length)),Io(x)}};function fn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function kt(h){const x={};h=(h.g&&2<=tt(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<h.length;k++){if(E(h[k]))continue;var S=M(h[k]);const B=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const q=x[B]||[];x[B]=q,q.push(S)}I(x,function(k){return k.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function At(h,x,S){return S&&S.internalChannelParams&&S.internalChannelParams[h]||x}function Ft(h){this.Aa=0,this.i=[],this.j=new Ri,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=At("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=At("baseRetryDelayMs",5e3,h),this.cb=At("retryDelaySeedMs",1e4,h),this.Wa=At("forwardChannelMaxRetries",2,h),this.wa=At("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Po(h&&h.concurrentRequestLimit),this.Da=new _l,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ft.prototype,t.la=8,t.G=1,t.connect=function(h,x,S,k){ot(0),this.W=h,this.H=x||{},S&&k!==void 0&&(this.H.OSID=S,this.H.OAID=k),this.F=this.X,this.I=II(this,null,this.W),El(this)};function Qr(h){if(Zs(h),h.G==3){var x=h.U++,S=gr(h.I);if(Ge(S,"SID",h.K),Ge(S,"RID",x),Ge(S,"TYPE","terminate"),dh(h,S),x=new qr(h,h.j,x),x.L=2,x.v=Gr(gr(S)),S=!1,a.navigator&&a.navigator.sendBeacon)try{S=a.navigator.sendBeacon(x.v.toString(),"")}catch{}!S&&a.Image&&(new Image().src=x.v,S=!0),S||(x.g=AI(x.j,null),x.g.ea(x.v)),x.F=Date.now(),Ro(x)}SI(h)}function sr(h){h.g&&(z0(h),h.g.cancel(),h.g=null)}function Zs(h){sr(h),h.u&&(a.clearTimeout(h.u),h.u=null),Em(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function El(h){if(!Wc(h.h)&&!h.s){h.s=!0;var x=h.Ga;Z||G(),U||(Z(),U=!0),Y.add(x,h),h.B=0}}function Xc(h,x){return Hc(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=x.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ci(f(h.Ga,h,x),TI(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const B=new qr(this,this.j,h);let q=this.o;if(this.S&&(q?(q=A(q),D(q,this.S)):q=this.S),this.m!==null||this.O||(B.H=q,q=null),this.P)e:{for(var x=0,S=0;S<this.i.length;S++){t:{var k=this.i[S];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(x+=k,4096<x){x=S;break e}if(x===4096||S===this.i.length-1){x=S+1;break e}}x=1e3}else x=1e3;x=_I(this,B,x),S=gr(this.I),Ge(S,"RID",h),Ge(S,"CVER",22),this.D&&Ge(S,"X-HTTP-Session-Id",this.D),dh(this,S),q&&(this.O?x="headers="+encodeURIComponent(String(T(q)))+"&"+x:this.m&&N(S,this.m,q)),fl(this.h,B),this.Ua&&Ge(S,"TYPE","init"),this.P?(Ge(S,"$req",x),Ge(S,"SID","null"),B.T=!0,ul(B,S,null)):ul(B,S,x),this.G=2}}else this.G==3&&(h?xl(this,h):this.i.length==0||Wc(this.h)||xl(this))};function xl(h,x){var S;x?S=x.l:S=h.U++;const k=gr(h.I);Ge(k,"SID",h.K),Ge(k,"RID",S),Ge(k,"AID",h.T),dh(h,k),h.m&&h.o&&N(k,h.m,h.o),S=new qr(h,h.j,S,h.B+1),h.m===null&&(S.H=h.o),x&&(h.i=x.D.concat(h.i)),x=_I(h,S,1e3),S.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),fl(h.h,S),ul(S,k,x)}function dh(h,x){h.H&&O(h.H,function(S,k){Ge(x,k,S)}),h.l&&ml({},function(S,k){Ge(x,k,S)})}function _I(h,x,S){S=Math.min(h.i.length,S);var k=h.l?f(h.l.Na,h.l,h):null;e:{var B=h.i;let q=-1;for(;;){const ee=["count="+S];q==-1?0<S?(q=B[0].g,ee.push("ofs="+q)):q=0:ee.push("ofs="+q);let Ze=!0;for(let pn=0;pn<S;pn++){let qe=B[pn].g;const Tn=B[pn].map;if(qe-=q,0>qe)q=Math.max(0,B[pn].g-100),Ze=!1;else try{Yc(Tn,ee,"req"+qe+"_")}catch{k&&k(Tn)}}if(Ze){k=ee.join("&");break e}}}return h=h.i.splice(0,S),x.D=h,k}function EI(h){if(!h.g&&!h.u){h.Y=1;var x=h.Fa;Z||G(),U||(Z(),U=!0),Y.add(x,h),h.v=0}}function q0(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ci(f(h.Fa,h),TI(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,xI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ci(f(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),sr(this),xI(this))};function z0(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function xI(h){h.g=new qr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var x=gr(h.qa);Ge(x,"RID","rpc"),Ge(x,"SID",h.K),Ge(x,"AID",h.T),Ge(x,"CI",h.F?"0":"1"),!h.F&&h.ja&&Ge(x,"TO",h.ja),Ge(x,"TYPE","xmlhttp"),dh(h,x),h.m&&h.o&&N(x,h.m,h.o),h.L&&(h.g.I=h.L);var S=h.g;h=h.ia,S.L=1,S.v=Gr(gr(x)),S.m=null,S.P=!0,dn(S,h)}t.Za=function(){this.C!=null&&(this.C=null,sr(this),q0(this),ot(19))};function Em(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function bI(h,x){var S=null;if(h.g==x){Em(h),z0(h),h.g=null;var k=2}else if(hl(h.h,x))S=x.D,Gc(h.h,x),k=1;else return;if(h.G!=0){if(x.o)if(k==1){S=x.m?x.m.length:0,x=Date.now()-x.F;var B=h.B;k=$r(),et(k,new jc(k,S)),El(h)}else EI(h);else if(B=x.s,B==3||B==0&&0<x.X||!(k==1&&Xc(h,x)||k==2&&q0(h)))switch(S&&0<S.length&&(x=h.h,x.i=x.i.concat(S)),B){case 1:bl(h,5);break;case 4:bl(h,10);break;case 3:bl(h,6);break;default:bl(h,2)}}}function TI(h,x){let S=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(S*=2),S*x}function bl(h,x){if(h.j.info("Error code "+x),x==2){var S=f(h.fb,h),k=h.Xa;const B=!k;k=new ys(k||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||No(k,"https"),Gr(k),B?ko(k.toString(),S):uh(k.toString(),S)}else ot(2);h.G=0,h.l&&h.l.sa(x),SI(h),Zs(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function SI(h){if(h.G=0,h.ka=[],h.l){const x=Pi(h.h);(x.length!=0||h.i.length!=0)&&(w(h.ka,x),w(h.ka,h.i),h.h.i.length=0,m(h.i),h.i.length=0),h.l.ra()}}function II(h,x,S){var k=S instanceof ys?gr(S):new ys(S);if(k.g!="")x&&(k.g=x+"."+k.g),Js(k,k.s);else{var B=a.location;k=B.protocol,x=x?x+"."+B.hostname:B.hostname,B=+B.port;var q=new ys(null);k&&No(q,k),x&&(q.g=x),B&&Js(q,B),S&&(q.l=S),k=q}return S=h.D,x=h.ya,S&&x&&Ge(k,S,x),Ge(k,"VER",h.la),dh(h,k),k}function AI(h,x,S){if(x&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return x=h.Ca&&!h.pa?new j(new Un({eb:S})):new j(h.pa),x.Ha(h.J),x}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function CI(){}t=CI.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function xm(){}xm.prototype.g=function(h,x){return new _r(h,x)};function _r(h,x){St.call(this),this.g=new Ft(x),this.l=h,this.h=x&&x.messageUrlParams||null,h=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(h?h["X-WebChannel-Content-Type"]=x.messageContentType:h={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.va&&(h?h["X-WebChannel-Client-Profile"]=x.va:h={"X-WebChannel-Client-Profile":x.va}),this.g.S=h,(h=x&&x.Sb)&&!E(h)&&(this.g.m=h),this.v=x&&x.supportsCrossDomainXhr||!1,this.u=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!E(x)&&(this.g.D=x,h=this.h,h!==null&&x in h&&(h=this.h,x in h&&delete h[x])),this.j=new Jc(this)}g(_r,St),_r.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_r.prototype.close=function(){Qr(this.g)},_r.prototype.o=function(h){var x=this.g;if(typeof h=="string"){var S={};S.__data__=h,h=S}else this.u&&(S={},S.__data__=Br(h),h=S);x.i.push(new Hr(x.Ya++,h)),x.G==3&&El(x)},_r.prototype.N=function(){this.g.l=null,delete this.j,Qr(this.g),delete this.g,_r.aa.N.call(this)};function RI(h){nr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var x=h.__sm__;if(x){e:{for(const S in x){h=S;break e}h=void 0}(this.i=h)&&(h=this.i,x=x!==null&&h in x?x[h]:void 0),this.data=x}else this.data=h}g(RI,nr);function PI(){Ur.call(this),this.status=1}g(PI,Ur);function Jc(h){this.g=h}g(Jc,CI),Jc.prototype.ua=function(){et(this.g,"a")},Jc.prototype.ta=function(h){et(this.g,new RI(h))},Jc.prototype.sa=function(h){et(this.g,new PI)},Jc.prototype.ra=function(){et(this.g,"b")},xm.prototype.createWebChannel=xm.prototype.g,_r.prototype.send=_r.prototype.o,_r.prototype.open=_r.prototype.m,_r.prototype.close=_r.prototype.close,ZL=function(){return new xm},JL=function(){return $r()},XL=un,I1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Co.NO_ERROR=0,Co.TIMEOUT=8,Co.HTTP_ERROR=6,kg=Co,Bc.COMPLETE="complete",YL=Bc,ms.EventType=tr,tr.OPEN="a",tr.CLOSE="b",tr.ERROR="c",tr.MESSAGE="d",St.prototype.listen=St.prototype.K,Vh=ms,j.prototype.listenOnce=j.prototype.L,j.prototype.getLastError=j.prototype.Ka,j.prototype.getLastErrorCode=j.prototype.Ba,j.prototype.getStatus=j.prototype.Z,j.prototype.getResponseJson=j.prototype.Oa,j.prototype.getResponseText=j.prototype.oa,j.prototype.send=j.prototype.ea,j.prototype.setWithCredentials=j.prototype.Ha,QL=j}).apply(typeof $m<"u"?$m:typeof self<"u"?self:typeof window<"u"?window:{});const SC="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bd="11.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=new kv("@firebase/firestore");function du(){return Pa.logLevel}function CW(t){Pa.setLogLevel(t)}function Q(t,...e){if(Pa.logLevel<=Ne.DEBUG){const n=e.map(xb);Pa.debug(`Firestore (${Bd}): ${t}`,...n)}}function Lt(t,...e){if(Pa.logLevel<=Ne.ERROR){const n=e.map(xb);Pa.error(`Firestore (${Bd}): ${t}`,...n)}}function gi(t,...e){if(Pa.logLevel<=Ne.WARN){const n=e.map(xb);Pa.warn(`Firestore (${Bd}): ${t}`,...n)}}function xb(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${Bd}) INTERNAL ASSERTION FAILED: `+t;throw Lt(e),new Error(e)}function de(t,e){t||ae()}function RW(t,e){t||ae()}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Ti{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PW{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(on.UNAUTHENTICATED))}shutdown(){}}class NW{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class kW{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){de(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new _n;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new _n,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new _n)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string"),new eM(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string"),new on(e)}}class DW{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class OW{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new DW(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(on.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class LW{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MW{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){de(this.o===void 0);const r=i=>{i.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string"),this.R=n.token,new LW(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VW(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=VW(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ie(t,e){return t<e?-1:t>e?1:0}function pd(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function nM(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zt=class Dg{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Dg.fromMillis(Date.now())}static fromDate(e){return Dg.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Dg(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ge(e)}static min(){return new ge(new zt(0,0))}static max(){return new ge(new zt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(),r===void 0?r=e.length-n:r>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Qf.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qf?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Le extends Qf{construct(e,n,r){return new Le(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Le(n)}static emptyPath(){return new Le([])}}const jW=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gt extends Qf{construct(e,n,r){return new gt(e,n,r)}static isValidIdentifier(e){return jW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new gt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new K($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new K($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gt(n)}static emptyPath(){return new gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Le.fromString(e))}static fromName(e){return new te(Le.fromString(e).popFirst(5))}static empty(){return new te(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Le(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function A1(t){return t.fields.find(e=>e.kind===2)}function Rl(t){return t.fields.filter(e=>e.kind!==2)}Oy.UNKNOWN_ID=-1;class Og{constructor(e,n){this.fieldPath=e,this.kind=n}}class Yf{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Yf(0,Dr.min())}}function rM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ge.fromTimestamp(r===1e9?new zt(n+1,0):new zt(n,r));return new Dr(s,te.empty(),e)}function sM(t){return new Dr(t.readTime,t.key,-1)}class Dr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Dr(ge.min(),te.empty(),-1)}static max(){return new Dr(ge.max(),te.empty(),-1)}}function bb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:Ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==iM)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new _n,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new rf(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=Tb(r.target.error);this.V.reject(new rf(e,s))}}static open(e,n,r,s){try{return new Vv(n,e.transaction(s,r))}catch(i){throw new rf(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Q("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new BW(n)}}class ci{constructor(e,n,r){this.name=e,this.version=n,this.p=r,ci.S(Xt())===12.2&&Lt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Q("SimpleDb","Removing database:",e),kl(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!J2())return!1;if(ci.v())return!0;const e=Xt(),n=ci.S(e),r=0<n&&n<10,s=aM(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(Q("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new rf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new K($.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new K($.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new rf(e,o))},s.onupgradeneeded=i=>{Q("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.O(o,s.transaction,i.oldVersion,this.version).next(()=>{Q("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=Vv.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),F.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(Q("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function aM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class FW{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return kl(this.B.delete())}}class rf extends K{constructor(e,n){super($.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ja(t){return t.name==="IndexedDbTransactionError"}class BW{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Q("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(Q("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),kl(r)}add(e){return Q("SimpleDb","ADD",this.store.name,e,e),kl(this.store.add(e))}get(e){return kl(this.store.get(e)).next(n=>(n===void 0&&(n=null),Q("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Q("SimpleDb","DELETE",this.store.name,e),kl(this.store.delete(e))}count(){return Q("SimpleDb","COUNT",this.store.name),kl(this.store.count())}U(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new F((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.W(i,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new F((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}j(e,n){Q("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const s=this.cursor(r);return this.W(s,(i,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.W(s,n)}Y(e){const n=this.cursor({});return new F((r,s)=>{n.onerror=i=>{const o=Tb(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new F((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new FW(a),c=n(a.primaryKey,a.value,l);if(c instanceof F){const u=c.catch(d=>(l.done(),F.reject(d)));r.push(u)}l.isDone?s():l.K===null?a.continue():a.continue(l.K)}}).next(()=>F.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function kl(t){return new F((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=Tb(r.target.error);n(s)}})}let IC=!1;function Tb(t){const e=ci.S(Xt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new K("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return IC||(IC=!0,setTimeout(()=>{throw r},0)),r}}return t}class UW{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Q("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Q("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){Ja(n)?Q("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Xa(n)}await this.X(6e4)})}}class $W{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let s=n,i=!0;return F.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return Q("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(s,i)).next(a=>(Q("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=sM(i);bb(o,r)>0&&(r=o)}),new Dr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}lr.oe=-1;function zp(t){return t==null}function Xf(t){return t===0&&1/t==-1/0}function lM(t){return typeof t=="number"&&Number.isInteger(t)&&!Xf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=AC(e)),e=qW(t.get(n),e);return AC(e)}function qW(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function AC(t){return t+""}function si(t){const e=t.length;if(de(e>=2),e===2)return de(t.charAt(0)===""&&t.charAt(1)===""),Le.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>n)&&ae(),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:ae()}i=o+2}return new Le(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(t,e){return[t,Ln(e)]}function cM(t,e,n){return[t,Ln(e),n]}const zW={},WW=["prefixPath","collectionGroup","readTime","documentId"],HW=["prefixPath","collectionGroup","documentId"],GW=["collectionGroup","readTime","prefixPath","documentId"],KW=["canonicalId","targetId"],QW=["targetId","path"],YW=["path","targetId"],XW=["collectionId","parent"],JW=["indexId","uid"],ZW=["uid","sequenceNumber"],eH=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],tH=["indexId","uid","orderedDocumentKey"],nH=["userId","collectionPath","documentId"],rH=["userId","collectionPath","largestBatchId"],sH=["userId","collectionGroup","largestBatchId"],uM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],iH=[...uM,"documentOverlays"],dM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],hM=dM,Sb=[...hM,"indexConfiguration","indexState","indexEntries"],oH=Sb,aH=[...Sb,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1 extends oM{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function Zt(t,e){const n=ne(t);return ci.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Za(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n){this.comparator=e,this.root=n||gn.EMPTY}insert(e,n){return new st(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gn.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qm(this.root,e,this.comparator,!1)}getReverseIterator(){return new qm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qm(this.root,e,this.comparator,!0)}}class qm{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??gn.RED,this.left=s??gn.EMPTY,this.right=i??gn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new gn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return gn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return gn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}gn.EMPTY=null,gn.RED=!0,gn.BLACK=!1;gn.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,n,r,s,i){return this}insert(e,n,r){return new gn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new PC(this.data.getIterator())}getIteratorFrom(e){return new PC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xe(this.comparator);return n.data=e,n}}class PC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function tu(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.fields=e,e.sort(gt.comparator)}static empty(){return new cr([])}unionWith(e){let n=new Xe(gt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new cr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return pd(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lH(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new pM("Invalid base64 string: "+i):i}}(e);return new Pt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const cH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function io(t){if(de(!!t),typeof t=="string"){let e=0;const n=cH.exec(t);if(de(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(t.seconds),nanos:pt(t.nanos)}}function pt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function oo(t){return typeof t=="string"?Pt.fromBase64String(t):Pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Fv(t){const e=t.mapValue.fields.__previous_value__;return jv(e)?Fv(e):e}function Jf(t){const e=io(t.mapValue.fields.__local_write_time__.timestampValue);return new zt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uH{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Na{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Na("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Na&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Mg={nullValue:"NULL_VALUE"};function ka(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?jv(t)?4:mM(t)?9007199254740991:Bv(t)?10:11:ae()}function yi(t,e){if(t===e)return!0;const n=ka(t);if(n!==ka(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Jf(t).isEqual(Jf(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=io(s.timestampValue),a=io(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return oo(s.bytesValue).isEqual(oo(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return pt(s.geoPointValue.latitude)===pt(i.geoPointValue.latitude)&&pt(s.geoPointValue.longitude)===pt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return pt(s.integerValue)===pt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=pt(s.doubleValue),a=pt(i.doubleValue);return o===a?Xf(o)===Xf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return pd(t.arrayValue.values||[],e.arrayValue.values||[],yi);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(RC(o)!==RC(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!yi(o[l],a[l])))return!1;return!0}(t,e);default:return ae()}}function Zf(t,e){return(t.values||[]).find(n=>yi(n,e))!==void 0}function Da(t,e){if(t===e)return 0;const n=ka(t),r=ka(e);if(n!==r)return Ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ie(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=pt(i.integerValue||i.doubleValue),l=pt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return NC(t.timestampValue,e.timestampValue);case 4:return NC(Jf(t),Jf(e));case 5:return Ie(t.stringValue,e.stringValue);case 6:return function(i,o){const a=oo(i),l=oo(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Ie(a[c],l[c]);if(u!==0)return u}return Ie(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ie(pt(i.latitude),pt(o.latitude));return a!==0?a:Ie(pt(i.longitude),pt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return kC(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,u;const d=i.fields||{},f=o.fields||{},p=(a=d.value)===null||a===void 0?void 0:a.arrayValue,g=(l=f.value)===null||l===void 0?void 0:l.arrayValue,m=Ie(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0);return m!==0?m:kC(p,g)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===aa.mapValue&&o===aa.mapValue)return 0;if(i===aa.mapValue)return 1;if(o===aa.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=Ie(l[d],u[d]);if(f!==0)return f;const p=Da(a[l[d]],c[u[d]]);if(p!==0)return p}return Ie(l.length,u.length)}(t.mapValue,e.mapValue);default:throw ae()}}function NC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ie(t,e);const n=io(t),r=io(e),s=Ie(n.seconds,r.seconds);return s!==0?s:Ie(n.nanos,r.nanos)}function kC(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Da(n[s],r[s]);if(i)return i}return Ie(n.length,r.length)}function md(t){return R1(t)}function R1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=io(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return oo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=R1(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${R1(n.fields[o])}`;return s+"}"}(t.mapValue):ae()}function Vg(t){switch(ka(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fv(t);return e?16+Vg(e):16;case 5:return 2*t.stringValue.length;case 6:return oo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Vg(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Za(r.fields,(i,o)=>{s+=i.length+Vg(o)}),s}(t.mapValue);default:throw ae()}}function nc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function P1(t){return!!t&&"integerValue"in t}function ep(t){return!!t&&"arrayValue"in t}function DC(t){return!!t&&"nullValue"in t}function OC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jg(t){return!!t&&"mapValue"in t}function Bv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function sf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Za(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=sf(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sf(t.arrayValue.values[n]);return e}return Object.assign({},t)}function mM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const gM={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function dH(t){return"nullValue"in t?Mg:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?nc(Na.empty(),te.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Bv(t)?gM:{mapValue:{}}:ae()}function hH(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?nc(Na.empty(),te.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?gM:"mapValue"in t?Bv(t)?{mapValue:{}}:aa:ae()}function LC(t,e){const n=Da(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function MC(t,e){const n=Da(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!jg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sf(n)}setAll(e){let n=gt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=sf(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());jg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return yi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];jg(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Za(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new vn(sf(this.value))}}function yM(t){const e=[];return Za(t.fields,(n,r)=>{const s=new gt([n]);if(jg(r)){const i=yM(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new cr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new dt(e,0,ge.min(),ge.min(),ge.min(),vn.empty(),0)}static newFoundDocument(e,n,r,s){return new dt(e,1,n,ge.min(),r,s,0)}static newNoDocument(e,n){return new dt(e,2,n,ge.min(),ge.min(),vn.empty(),0)}static newUnknownDocument(e,n){return new dt(e,3,n,ge.min(),ge.min(),vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n){this.position=e,this.inclusive=n}}function VC(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=Da(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function jC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!yi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,n="asc"){this.field=e,this.dir=n}}function fH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{}class Me extends vM{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new pH(e,n,r):n==="array-contains"?new yH(e,r):n==="in"?new TM(e,r):n==="not-in"?new vH(e,r):n==="array-contains-any"?new wH(e,r):new Me(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new mH(e,r):new gH(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Da(n,this.value)):n!==null&&ka(this.value)===ka(n)&&this.matchesComparison(Da(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ke extends vM{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ke(e,n)}matches(e){return gd(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function gd(t){return t.op==="and"}function N1(t){return t.op==="or"}function Ib(t){return wM(t)&&gd(t)}function wM(t){for(const e of t.filters)if(e instanceof Ke)return!1;return!0}function k1(t){if(t instanceof Me)return t.field.canonicalString()+t.op.toString()+md(t.value);if(Ib(t))return t.filters.map(e=>k1(e)).join(",");{const e=t.filters.map(n=>k1(n)).join(",");return`${t.op}(${e})`}}function _M(t,e){return t instanceof Me?function(r,s){return s instanceof Me&&r.op===s.op&&r.field.isEqual(s.field)&&yi(r.value,s.value)}(t,e):t instanceof Ke?function(r,s){return s instanceof Ke&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&_M(o,s.filters[a]),!0):!1}(t,e):void ae()}function EM(t,e){const n=t.filters.concat(e);return Ke.create(n,t.op)}function xM(t){return t instanceof Me?function(n){return`${n.field.canonicalString()} ${n.op} ${md(n.value)}`}(t):t instanceof Ke?function(n){return n.op.toString()+" {"+n.getFilters().map(xM).join(" ,")+"}"}(t):"Filter"}class pH extends Me{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class mH extends Me{constructor(e,n){super(e,"in",n),this.keys=bM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class gH extends Me{constructor(e,n){super(e,"not-in",n),this.keys=bM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function bM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class yH extends Me{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ep(n)&&Zf(n.arrayValue,this.value)}}class TM extends Me{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Zf(this.value.arrayValue,n)}}class vH extends Me{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Zf(this.value.arrayValue,n)}}class wH extends Me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ep(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Zf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _H{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function D1(t,e=null,n=[],r=[],s=null,i=null,o=null){return new _H(t,e,n,r,s,i,o)}function rc(t){const e=ne(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>k1(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),zp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>md(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>md(r)).join(",")),e.ue=n}return e.ue}function Wp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!fH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_M(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jC(t.startAt,e.startAt)&&jC(t.endAt,e.endAt)}function Ly(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function My(t,e){return t.filters.filter(n=>n instanceof Me&&n.field.isEqual(e))}function FC(t,e,n){let r=Mg,s=!0;for(const i of My(t,e)){let o=Mg,a=!0;switch(i.op){case"<":case"<=":o=dH(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Mg}LC({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];LC({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function BC(t,e,n){let r=aa,s=!0;for(const i of My(t,e)){let o=aa,a=!0;switch(i.op){case">=":case">":o=hH(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=aa}MC({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];MC({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function SM(t,e,n,r,s,i,o,a){return new vo(t,e,n,r,s,i,o,a)}function Ud(t){return new vo(t)}function UC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ab(t){return t.collectionGroup!==null}function Ku(t){const e=ne(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Xe(gt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new tp(i,r))}),n.has(gt.keyField().canonicalString())||e.ce.push(new tp(gt.keyField(),r))}return e.ce}function Kn(t){const e=ne(t);return e.le||(e.le=EH(e,Ku(t))),e.le}function EH(t,e){if(t.limitType==="F")return D1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new tp(s.field,i)});const n=t.endAt?new Oa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Oa(t.startAt.position,t.startAt.inclusive):null;return D1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function O1(t,e){const n=t.filters.concat([e]);return new vo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Vy(t,e,n){return new vo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hp(t,e){return Wp(Kn(t),Kn(e))&&t.limitType===e.limitType}function IM(t){return`${rc(Kn(t))}|lt:${t.limitType}`}function hu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>xM(s)).join(", ")}]`),zp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>md(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>md(s)).join(",")),`Target(${r})`}(Kn(t))}; limitType=${t.limitType})`}function Gp(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ku(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=VC(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Ku(r),s)||r.endAt&&!function(o,a,l){const c=VC(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Ku(r),s))}(t,e)}function AM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function CM(t){return(e,n)=>{let r=!1;for(const s of Ku(t)){const i=xH(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function xH(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Da(l,c):ae()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Za(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return fM(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bH=new st(te.comparator);function ur(){return bH}const RM=new st(te.comparator);function jh(...t){let e=RM;for(const n of t)e=e.insert(n.key,n);return e}function PM(t){let e=RM;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ii(){return of()}function NM(){return of()}function of(){return new wo(t=>t.toString(),(t,e)=>t.isEqual(e))}const TH=new st(te.comparator),SH=new Xe(te.comparator);function Ae(...t){let e=SH;for(const n of t)e=e.add(n);return e}const IH=new Xe(Ie);function Cb(){return IH}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xf(e)?"-0":e}}function kM(t){return{integerValue:""+t}}function DM(t,e){return lM(e)?kM(e):Rb(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(){this._=void 0}}function AH(t,e,n){return t instanceof yd?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&jv(i)&&(i=Fv(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof sc?LM(t,e):t instanceof ic?MM(t,e):function(s,i){const o=OM(s,i),a=$C(o)+$C(s.Pe);return P1(o)&&P1(s.Pe)?kM(a):Rb(s.serializer,a)}(t,e)}function CH(t,e,n){return t instanceof sc?LM(t,e):t instanceof ic?MM(t,e):n}function OM(t,e){return t instanceof vd?function(r){return P1(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class yd extends Uv{}class sc extends Uv{constructor(e){super(),this.elements=e}}function LM(t,e){const n=VM(e);for(const r of t.elements)n.some(s=>yi(s,r))||n.push(r);return{arrayValue:{values:n}}}class ic extends Uv{constructor(e){super(),this.elements=e}}function MM(t,e){let n=VM(e);for(const r of t.elements)n=n.filter(s=>!yi(s,r));return{arrayValue:{values:n}}}class vd extends Uv{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function $C(t){return pt(t.integerValue||t.doubleValue)}function VM(t){return ep(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,n){this.field=e,this.transform=n}}function RH(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof sc&&s instanceof sc||r instanceof ic&&s instanceof ic?pd(r.elements,s.elements,yi):r instanceof vd&&s instanceof vd?yi(r.Pe,s.Pe):r instanceof yd&&s instanceof yd}(t.transform,e.transform)}class PH{constructor(e,n){this.version=e,this.transformResults=n}}class yt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yt}static exists(e){return new yt(void 0,e)}static updateTime(e){return new yt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class $v{}function jM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new qd(t.key,yt.none()):new $d(t.key,t.data,yt.none());{const n=t.data,r=vn.empty();let s=new Xe(gt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new _o(t.key,r,new cr(s.toArray()),yt.none())}}function NH(t,e,n){t instanceof $d?function(s,i,o){const a=s.value.clone(),l=zC(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof _o?function(s,i,o){if(!Fg(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=zC(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(FM(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function af(t,e,n,r){return t instanceof $d?function(i,o,a,l){if(!Fg(i.precondition,o))return a;const c=i.value.clone(),u=WC(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof _o?function(i,o,a,l){if(!Fg(i.precondition,o))return a;const c=WC(i.fieldTransforms,l,o),u=o.data;return u.setAll(FM(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(i,o,a){return Fg(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function kH(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=OM(r.transform,s||null);i!=null&&(n===null&&(n=vn.empty()),n.set(r.field,i))}return n||null}function qC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&pd(r,s,(i,o)=>RH(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class $d extends $v{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class _o extends $v{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function FM(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function zC(t,e,n){const r=new Map;de(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,CH(o,a,n[s]))}return r}function WC(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,AH(i,o,e))}return r}class qd extends $v{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Pb extends $v{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&NH(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=af(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=af(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=NM();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=jM(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&pd(this.mutations,e.mutations,(n,r)=>qC(n,r))&&pd(this.baseMutations,e.baseMutations,(n,r)=>qC(n,r))}}class kb{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){de(e.mutations.length===r.length);let s=function(){return TH}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new kb(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Db=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DH{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,Fe;function BM(t){switch(t){default:return ae();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function UM(t){if(t===void 0)return Lt("GRPC error has no .code"),$.UNKNOWN;switch(t){case Bt.OK:return $.OK;case Bt.CANCELLED:return $.CANCELLED;case Bt.UNKNOWN:return $.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return $.INTERNAL;case Bt.UNAVAILABLE:return $.UNAVAILABLE;case Bt.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Bt.NOT_FOUND:return $.NOT_FOUND;case Bt.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Bt.ABORTED:return $.ABORTED;case Bt.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Bt.DATA_LOSS:return $.DATA_LOSS;default:return ae()}}(Fe=Bt||(Bt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OH=new Hl([4294967295,4294967295],0);function HC(t){const e=$M().encode(t),n=new KL;return n.update(e),new Uint8Array(n.digest())}function GC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Hl([n,r],0),new Hl([s,i],0)]}class Ob{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Fh(`Invalid padding: ${n}`);if(r<0)throw new Fh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Fh(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Hl.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Hl.fromNumber(r)));return s.compare(OH)===1&&(s=new Hl([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=HC(e),[r,s]=GC(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Ob(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=HC(e),[r,s]=GC(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Fh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Yp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Qp(ge.min(),s,new st(Ie),ur(),Ae())}}class Yp{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Yp(r,n,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class qM{constructor(e,n){this.targetId=e,this.me=n}}class zM{constructor(e,n,r=Pt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class KC{constructor(){this.fe=0,this.ge=YC(),this.pe=Pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ae(),n=Ae(),r=Ae();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ae()}}),new Yp(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=YC()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,de(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class LH{constructor(e){this.Le=e,this.Be=new Map,this.ke=ur(),this.qe=QC(),this.Qe=new st(Ie)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Ly(i))if(r===0){const o=new te(i.path);this.Ue(n,o,dt.newNoDocument(o,ge.min()))}else de(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=oo(r).toUint8Array()}catch(l){if(l instanceof pM)return gi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Ob(o,s,i)}catch(l){return gi(l instanceof Fh?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Ly(a.target)){const l=new te(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,dt.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=Ae();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Qp(e,n,this.Qe,this.ke,r);return this.ke=ur(),this.qe=QC(),this.Qe=new st(Ie),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new KC,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Xe(Ie),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new KC),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function QC(){return new st(te.comparator)}function YC(){return new st(te.comparator)}const MH={asc:"ASCENDING",desc:"DESCENDING"},VH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jH={and:"AND",or:"OR"};class FH{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function L1(t,e){return t.useProto3Json||zp(e)?e:{value:e}}function wd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function BH(t,e){return wd(t,e.toTimestamp())}function Mt(t){return de(!!t),ge.fromTimestamp(function(n){const r=io(n);return new zt(r.seconds,r.nanos)}(t))}function Lb(t,e){return M1(t,e).canonicalString()}function M1(t,e){const n=function(s){return new Le(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function HM(t){const e=Le.fromString(t);return de(nV(e)),e}function np(t,e){return Lb(t.databaseId,e.path)}function ui(t,e){const n=HM(e);if(n.get(1)!==t.databaseId.projectId)throw new K($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(QM(n))}function GM(t,e){return Lb(t.databaseId,e)}function KM(t){const e=HM(t);return e.length===4?Le.emptyPath():QM(e)}function V1(t){return new Le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function QM(t){return de(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function XC(t,e,n){return{name:np(t,e),fields:n.value.mapValue.fields}}function YM(t,e,n){const r=ui(t,e.name),s=Mt(e.updateTime),i=e.createTime?Mt(e.createTime):ge.min(),o=new vn({mapValue:{fields:e.fields}}),a=dt.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function UH(t,e){return"found"in e?function(r,s){de(!!s.found),s.found.name,s.found.updateTime;const i=ui(r,s.found.name),o=Mt(s.found.updateTime),a=s.found.createTime?Mt(s.found.createTime):ge.min(),l=new vn({mapValue:{fields:s.found.fields}});return dt.newFoundDocument(i,o,a,l)}(t,e):"missing"in e?function(r,s){de(!!s.missing),de(!!s.readTime);const i=ui(r,s.missing),o=Mt(s.readTime);return dt.newNoDocument(i,o)}(t,e):ae()}function $H(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(de(u===void 0||typeof u=="string"),Pt.fromBase64String(u||"")):(de(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Pt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?$.UNKNOWN:UM(c.code);return new K(u,c.message||"")}(o);n=new zM(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ui(t,r.document.name),i=Mt(r.document.updateTime),o=r.document.createTime?Mt(r.document.createTime):ge.min(),a=new vn({mapValue:{fields:r.document.fields}}),l=dt.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Bg(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ui(t,r.document),i=r.readTime?Mt(r.readTime):ge.min(),o=dt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Bg([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ui(t,r.document),i=r.removedTargetIds||[];n=new Bg([],i,s,null)}else{if(!("filter"in e))return ae();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new DH(s,i),a=r.targetId;n=new qM(a,o)}}return n}function rp(t,e){let n;if(e instanceof $d)n={update:XC(t,e.key,e.value)};else if(e instanceof qd)n={delete:np(t,e.key)};else if(e instanceof _o)n={update:XC(t,e.key,e.data),updateMask:KH(e.fieldMask)};else{if(!(e instanceof Pb))return ae();n={verify:np(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof yd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof sc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ic)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof vd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ae()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:BH(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ae()}(t,e.precondition)),n}function j1(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?yt.updateTime(Mt(i.updateTime)):i.exists!==void 0?yt.exists(i.exists):yt.none()}(e.currentDocument):yt.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)de(a.setToServerValue==="REQUEST_TIME"),l=new yd;else if("appendMissingElements"in a){const u=a.appendMissingElements.values||[];l=new sc(u)}else if("removeAllFromArray"in a){const u=a.removeAllFromArray.values||[];l=new ic(u)}else"increment"in a?l=new vd(o,a.increment):ae();const c=gt.fromServerFormat(a.fieldPath);return new Kp(c,l)}(t,s)):[];if(e.update){e.update.name;const s=ui(t,e.update.name),i=new vn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new cr(c.map(u=>gt.fromServerFormat(u)))}(e.updateMask);return new _o(s,i,o,n,r)}return new $d(s,i,n,r)}if(e.delete){const s=ui(t,e.delete);return new qd(s,n)}if(e.verify){const s=ui(t,e.verify);return new Pb(s,n)}return ae()}function qH(t,e){return t&&t.length>0?(de(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Mt(s.updateTime):Mt(i);return o.isEqual(ge.min())&&(o=Mt(i)),new PH(o,s.transformResults||[])}(n,e))):[]}function XM(t,e){return{documents:[GM(t,e.path)]}}function JM(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=GM(t,s);const i=function(c){if(c.length!==0)return tV(Ke.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:fu(f.field),direction:WH(f.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=L1(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function ZM(t){let e=KM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){de(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=function(d){const f=eV(d);return f instanceof Ke&&Ib(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(g){return new tp(pu(g.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,zp(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,p=d.values||[];return new Oa(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,p=d.values||[];return new Oa(p,f)}(n.endAt)),SM(e,s,o,i,a,"F",l,c)}function zH(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function eV(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=pu(n.unaryFilter.field);return Me.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=pu(n.unaryFilter.field);return Me.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=pu(n.unaryFilter.field);return Me.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=pu(n.unaryFilter.field);return Me.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(n){return Me.create(pu(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ke.create(n.compositeFilter.filters.map(r=>eV(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(t):ae()}function WH(t){return MH[t]}function HH(t){return VH[t]}function GH(t){return jH[t]}function fu(t){return{fieldPath:t.canonicalString()}}function pu(t){return gt.fromServerFormat(t.fieldPath)}function tV(t){return t instanceof Me?function(n){if(n.op==="=="){if(OC(n.value))return{unaryFilter:{field:fu(n.field),op:"IS_NAN"}};if(DC(n.value))return{unaryFilter:{field:fu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(OC(n.value))return{unaryFilter:{field:fu(n.field),op:"IS_NOT_NAN"}};if(DC(n.value))return{unaryFilter:{field:fu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fu(n.field),op:HH(n.op),value:n.value}}}(t):t instanceof Ke?function(n){const r=n.getFilters().map(s=>tV(s));return r.length===1?r[0]:{compositeFilter:{op:GH(n.op),filters:r}}}(t):ae()}function KH(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function nV(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n,r,s,i=ge.min(),o=ge.min(),a=Pt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Hi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e){this.ct=e}}function QH(t,e){let n;if(e.document)n=YM(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=te.fromSegments(e.noDocument.path),s=ac(e.noDocument.readTime);n=dt.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ae();{const r=te.fromSegments(e.unknownDocument.path),s=ac(e.unknownDocument.version);n=dt.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new zt(s[0],s[1]);return ge.fromTimestamp(i)}(e.readTime)),n}function JC(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:jy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:np(i,o.key),fields:o.data.value.mapValue.fields,updateTime:wd(i,o.version.toTimestamp()),createTime:wd(i,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:oc(e.version)};else{if(!e.isUnknownDocument())return ae();r.unknownDocument={path:n.path.toArray(),version:oc(e.version)}}return r}function jy(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function oc(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ac(t){const e=new zt(t.seconds,t.nanoseconds);return ge.fromTimestamp(e)}function Dl(t,e){const n=(e.baseMutations||[]).map(i=>j1(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>j1(t.ct,i)),s=zt.fromMillis(e.localWriteTimeMs);return new Nb(e.batchId,s,n,r)}function Bh(t){const e=ac(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ac(t.lastLimboFreeSnapshotVersion):ge.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){return de(i.documents.length===1),Kn(Ud(KM(i.documents[0])))}(t.query):function(i){return Kn(ZM(i))}(t.query),new Hi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Pt.fromBase64String(t.resumeToken))}function sV(t,e){const n=oc(e.snapshotVersion),r=oc(e.lastLimboFreeSnapshotVersion);let s;s=Ly(e.target)?XM(t.ct,e.target):JM(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:rc(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Mb(t){const e=ZM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Vy(e,e.limit,"L"):e}function Iw(t,e){return new Db(e.largestBatchId,j1(t.ct,e.overlayMutation))}function ZC(t,e){const n=e.path.lastSegment();return[t,Ln(e.path.popLast()),n]}function eR(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:oc(r.readTime),documentKey:Ln(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YH{getBundleMetadata(e,n){return tR(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:ac(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return tR(e).put(function(s){return{bundleId:s.id,createTime:oc(Mt(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return nR(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:Mb(i.bundledQuery),readTime:ac(i.readTime)}}(r)})}saveNamedQuery(e,n){return nR(e).put(function(s){return{name:s.name,readTime:oc(Mt(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function tR(t){return Zt(t,"bundles")}function nR(t){return Zt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new qv(e,r)}getOverlay(e,n){return _h(e).get(ZC(this.userId,n)).next(r=>r?Iw(this.serializer,r):null)}getOverlays(e,n){const r=ii();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new Db(n,o);s.push(this.ht(e,a))}),F.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(Ln(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(_h(e).j("collectionPathOverlayIndex",a))}),F.waitFor(i)}getOverlaysForCollection(e,n,r){const s=ii(),i=Ln(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return _h(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=Iw(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=ii();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return _h(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const d=Iw(this.serializer,c);i.size()<s||d.largestBatchId===o?(i.set(d.getKey(),d),o=d.largestBatchId):u.done()}).next(()=>i)}ht(e,n){return _h(e).put(function(s,i,o){const[a,l,c]=ZC(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:rp(s.ct,o.mutation)}}(this.serializer,this.userId,n))}}function _h(t){return Zt(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XH{Pt(e){return Zt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?Pt.fromUint8Array(r):Pt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(pt(e.integerValue));else if("doubleValue"in e){const r=pt(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Xf(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=io(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(oo(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?mM(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Bv(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):ae()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const s of Object.keys(r))this.Vt(s,n),this.Tt(r[s],n)}wt(e,n){var r,s;const i=e.fields||{};this.dt(n,53);const o="value",a=((s=(r=i[o].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.dt(n,15),n.At(pt(a)),this.Vt(o,n),this.Tt(i[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const s of r)this.Tt(s,n)}yt(e,n){this.dt(n,37),te.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}Ol.vt=new Ol;function JH(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function rR(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=JH(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class ZH{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=n.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const s=n.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const n=this.qt(e),r=rR(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Kt(e){const n=this.qt(e),r=rR(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class eG{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class tG{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Eh{constructor(){this.jt=new ZH,this.Ht=new eG(this.jt),this.Jt=new tG(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ll(this.indexId,this.documentKey,this.arrayValue,r)}}function Mo(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=sR(t.arrayValue,e.arrayValue),n!==0?n:(n=sR(t.directionalValue,e.directionalValue),n!==0?n:te.comparator(t.documentKey,e.documentKey)))}function sR(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.Xt=new Xe((n,r)=>gt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(de(e.collectionGroup===this.collectionId),this.nn)return!1;const n=A1(e);if(n!==void 0&&!this.sn(n))return!1;const r=Rl(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.sn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Xe(gt.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Og(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Og(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Og(r.field,r.dir==="asc"?0:1)));return new Oy(Oy.UNKNOWN_ID,this.collectionId,n,Yf.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iV(t){var e,n;if(de(t instanceof Me||t instanceof Ke),t instanceof Me){if(t instanceof TM){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>Me.create(t.field,"==",i)))||[];return Ke.create(s,"or")}return t}const r=t.filters.map(s=>iV(s));return Ke.create(r,t.op)}function nG(t){if(t.getFilters().length===0)return[];const e=U1(iV(t));return de(oV(e)),F1(e)||B1(e)?[e]:e.getFilters()}function F1(t){return t instanceof Me}function B1(t){return t instanceof Ke&&Ib(t)}function oV(t){return F1(t)||B1(t)||function(n){if(n instanceof Ke&&N1(n)){for(const r of n.getFilters())if(!F1(r)&&!B1(r))return!1;return!0}return!1}(t)}function U1(t){if(de(t instanceof Me||t instanceof Ke),t instanceof Me)return t;if(t.filters.length===1)return U1(t.filters[0]);const e=t.filters.map(r=>U1(r));let n=Ke.create(e,t.op);return n=Fy(n),oV(n)?n:(de(n instanceof Ke),de(gd(n)),de(n.filters.length>1),n.filters.reduce((r,s)=>Vb(r,s)))}function Vb(t,e){let n;return de(t instanceof Me||t instanceof Ke),de(e instanceof Me||e instanceof Ke),n=t instanceof Me?e instanceof Me?function(s,i){return Ke.create([s,i],"and")}(t,e):oR(t,e):e instanceof Me?oR(e,t):function(s,i){if(de(s.filters.length>0&&i.filters.length>0),gd(s)&&gd(i))return EM(s,i.getFilters());const o=N1(s)?s:i,a=N1(s)?i:s,l=o.filters.map(c=>Vb(c,a));return Ke.create(l,"or")}(t,e),Fy(n)}function oR(t,e){if(gd(e))return EM(e,t.getFilters());{const n=e.filters.map(r=>Vb(t,r));return Ke.create(n,"or")}}function Fy(t){if(de(t instanceof Me||t instanceof Ke),t instanceof Me)return t;const e=t.getFilters();if(e.length===1)return Fy(e[0]);if(wM(t))return t;const n=e.map(s=>Fy(s)),r=[];return n.forEach(s=>{s instanceof Me?r.push(s):s instanceof Ke&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Ke.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rG{constructor(){this.un=new jb}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Dr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Dr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class jb{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Xe(Le.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Xe(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=new Uint8Array(0);class sG{constructor(e,n){this.databaseId=n,this.cn=new jb,this.ln=new wo(r=>rc(r),(r,s)=>Wp(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const i={collectionId:r,parent:Ln(s)};return aR(e).put(i)}return F.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[nM(n),""],!1,!0);return aR(e).U(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(si(o.parent))}return r})}addFieldIndex(e,n){const r=xh(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=ru(e);return i.next(a=>{o.put(eR(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=xh(e),s=ru(e),i=nu(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=xh(e),r=nu(e),s=ru(e);return n.j().next(()=>r.j()).next(()=>s.j())}createTargetIndexes(e,n){return F.forEach(this.hn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new iR(r).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=nu(e);let s=!0;const i=new Map;return F.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=Ae();const a=[];return F.forEach(i,(l,c)=>{Q("IndexedDbIndexManager",`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(C=>`${C.fieldPath}:${C.kind}`).join(",")}`}(l)} to execute ${rc(n)}`);const u=function(b,C){const R=A1(C);if(R===void 0)return null;for(const O of My(b,R.fieldPath))switch(O.op){case"array-contains-any":return O.value.arrayValue.values||[];case"array-contains":return[O.value]}return null}(c,l),d=function(b,C){const R=new Map;for(const O of Rl(C))for(const I of My(b,O.fieldPath))switch(I.op){case"==":case"in":R.set(O.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return R.set(O.fieldPath.canonicalString(),I.value),Array.from(R.values())}return null}(c,l),f=function(b,C){const R=[];let O=!0;for(const I of Rl(C)){const A=I.kind===0?FC(b,I.fieldPath,b.startAt):BC(b,I.fieldPath,b.startAt);R.push(A.value),O&&(O=A.inclusive)}return new Oa(R,O)}(c,l),p=function(b,C){const R=[];let O=!0;for(const I of Rl(C)){const A=I.kind===0?BC(b,I.fieldPath,b.endAt):FC(b,I.fieldPath,b.endAt);R.push(A.value),O&&(O=A.inclusive)}return new Oa(R,O)}(c,l),g=this.In(l,c,f),m=this.In(l,c,p),w=this.Tn(l,c,d),v=this.En(l.indexId,u,g,f.inclusive,m,p.inclusive,w);return F.forEach(v,E=>r.G(E,n.limit).next(b=>{b.forEach(C=>{const R=te.fromSegments(C.documentKey);o.has(R)||(o=o.add(R),a.push(R))})}))}).next(()=>a)}return F.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=nG(Ke.create(e.filters,"and")).map(r=>D1(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),u=[];for(let d=0;d<l;++d){const f=n?this.dn(n[d/c]):zm,p=this.An(e,f,r[d%c],s),g=this.Rn(e,f,i[d%c],o),m=a.map(w=>this.An(e,f,w,!0));u.push(...this.createRange(p,g,m))}return u}An(e,n,r,s){const i=new Ll(e,te.empty(),n,r);return s?i:i.Zt()}Rn(e,n,r,s){const i=new Ll(e,te.empty(),n,r);return s?i.Zt():i}Pn(e,n){const r=new iR(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.hn(n);return F.forEach(s,i=>this.Pn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new Xe(gt.comparator),u=!1;for(const d of l.filters)for(const f of d.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?u=!0:c=c.add(f.field));for(const d of l.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(u?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Vn(e,n){const r=new Eh;for(const s of Rl(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Yt(s.kind);Ol.vt.It(i,o)}return r.zt()}dn(e){const n=new Eh;return Ol.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new Eh;return Ol.vt.It(nc(this.databaseId,n),r.Yt(function(i){const o=Rl(i);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let s=[];s.push(new Eh);let i=0;for(const o of Rl(e)){const a=r[i++];for(const l of s)if(this.fn(n,o.fieldPath)&&ep(a))s=this.gn(s,o,a);else{const c=l.Yt(o.kind);Ol.vt.It(a,c)}}return this.pn(s)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new Eh;l.seed(a.zt()),Ol.vt.It(o,l.Yt(n.kind)),i.push(l)}return i}fn(e,n){return!!e.filters.find(r=>r instanceof Me&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=xh(e),s=ru(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(i=>{const o=[];return F.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(u,d){const f=d?new Yf(d.sequenceNumber,new Dr(ac(d.readTime),new te(si(d.documentKey)),d.largestBatchId)):Yf.empty(),p=u.fields.map(([g,m])=>new Og(gt.fromServerFormat(g),m));return new Oy(u.indexId,u.collectionGroup,p,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:Ie(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=xh(e),i=ru(e);return this.yn(e).next(o=>s.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>F.forEach(a,l=>i.put(eR(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return F.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?F.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),F.forEach(a,l=>this.wn(e,s,l).next(c=>{const u=this.Sn(i,l);return c.isEqual(u)?F.resolve():this.bn(e,i,l,c,u)}))))})}Dn(e,n,r,s){return nu(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,s){return nu(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const s=nu(e);let i=new Xe(Mo);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{i=i.add(new Ll(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>i)}Sn(e,n){let r=new Xe(Mo);const s=this.Vn(n,e);if(s==null)return r;const i=A1(n);if(i!=null){const o=e.data.field(i.fieldPath);if(ep(o))for(const a of o.arrayValue.values||[])r=r.add(new Ll(n.indexId,e.key,this.dn(a),s))}else r=r.add(new Ll(n.indexId,e.key,zm,s));return r}bn(e,n,r,s,i){Q("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,c,u,d,f){const p=l.getIterator(),g=c.getIterator();let m=tu(p),w=tu(g);for(;m||w;){let v=!1,E=!1;if(m&&w){const b=u(m,w);b<0?E=!0:b>0&&(v=!0)}else m!=null?E=!0:v=!0;v?(d(w),w=tu(g)):E?(f(m),m=tu(p)):(m=tu(p),w=tu(g))}}(s,i,Mo,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),F.waitFor(o)}yn(e){let n=1;return ru(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Mo(o,a)).filter((o,a,l)=>!a||Mo(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=Mo(o,e),l=Mo(o,n);if(a===0)s[0]=e.Zt();else if(a>0&&l<0)s.push(o),s.push(o.Zt());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Cn(s[o],s[o+1]))return[];const a=[s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,zm,[]],l=[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,zm,[]];i.push(IDBKeyRange.bound(a,l))}return i}Cn(e,n){return Mo(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(lR)}getMinOffset(e,n){return F.mapArray(this.hn(n),r=>this.Pn(e,r).next(s=>s||ae())).next(lR)}}function aR(t){return Zt(t,"collectionParents")}function nu(t){return Zt(t,"indexEntries")}function xh(t){return Zt(t,"indexConfiguration")}function ru(t){return Zt(t,"indexState")}function lR(t){de(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;bb(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Dr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Pn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(u,d,f)=>(a++,f.delete()));i.push(l.next(()=>{de(a===1)}));const c=[];for(const u of n.mutations){const d=cM(e,u.key.path,n.batchId);i.push(s.delete(d)),c.push(u.key)}return F.waitFor(i).next(()=>c)}function By(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ae();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(41943040,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);class zv{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Fn={}}static lt(e,n,r,s){de(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new zv(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vo(e).J({index:"userMutationsIndex",range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=mu(e),o=Vo(e);return o.add({}).next(a=>{de(typeof a=="number");const l=new Nb(a,n,r,s),c=function(p,g,m){const w=m.baseMutations.map(E=>rp(p.ct,E)),v=m.mutations.map(E=>rp(p.ct,E));return{userId:g,batchId:m.batchId,localWriteTimeMs:m.localWriteTime.toMillis(),baseMutations:w,mutations:v}}(this.serializer,this.userId,l),u=[];let d=new Xe((f,p)=>Ie(f.canonicalString(),p.canonicalString()));for(const f of s){const p=cM(this.userId,f.key.path,a);d=d.add(f.key.path.popLast()),u.push(o.put(c)),u.push(i.put(p,zW))}return d.forEach(f=>{u.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),F.waitFor(u).next(()=>l)})}lookupMutationBatch(e,n){return Vo(e).get(n).next(r=>r?(de(r.userId===this.userId),Dl(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?F.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Fn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Vo(e).J({index:"userMutationsIndex",range:s},(o,a,l)=>{a.userId===this.userId&&(de(a.batchId>=r),i=Dl(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Vo(e).J({index:"userMutationsIndex",range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vo(e).U("userMutationsIndex",n).next(r=>r.map(s=>Dl(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Lg(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return mu(e).J({range:s},(o,a,l)=>{const[c,u,d]=o,f=si(u);if(c===this.userId&&n.path.isEqual(f))return Vo(e).get(d).next(p=>{if(!p)throw ae();de(p.userId===this.userId),i.push(Dl(this.serializer,p))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xe(Ie);const s=[];return n.forEach(i=>{const o=Lg(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=mu(e).J({range:a},(c,u,d)=>{const[f,p,g]=c,m=si(p);f===this.userId&&i.path.isEqual(m)?r=r.add(g):d.done()});s.push(l)}),F.waitFor(s).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Lg(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Xe(Ie);return mu(e).J({range:o},(l,c,u)=>{const[d,f,p]=l,g=si(f);d===this.userId&&r.isPrefixOf(g)?g.length===s&&(a=a.add(p)):u.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],s=[];return n.forEach(i=>{s.push(Vo(e).get(i).next(o=>{if(o===null)throw ae();de(o.userId===this.userId),r.push(Dl(this.serializer,o))}))}),F.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return aV(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),F.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return F.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return mu(e).J({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=si(i[1]);s.push(l)}else a.done()}).next(()=>{de(s.length===0)})})}containsKey(e,n){return lV(e,this.userId,n)}Nn(e){return cV(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function lV(t,e,n){const r=Lg(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return mu(t).J({range:i,H:!0},(a,l,c)=>{const[u,d,f]=a;u===e&&d===s&&(o=!0),c.done()}).next(()=>o)}function Vo(t){return Zt(t,"mutations")}function mu(t){return Zt(t,"documentMutations")}function cV(t){return Zt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new lc(0)}static kn(){return new lc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iG{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new lc(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>ge.fromTimestamp(new zt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Qn(e,s)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>su(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(de(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return su(e).J((o,a)=>{const l=Bh(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>F.waitFor(i)).next(()=>s)}forEachTarget(e,n){return su(e).J((r,s)=>{const i=Bh(s);n(i)})}qn(e){return uR(e).get("targetGlobalKey").next(n=>(de(n!==null),n))}Qn(e,n){return uR(e).put("targetGlobalKey",n)}Kn(e,n){return su(e).put(sV(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=rc(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return su(e).J({range:s,index:"queryTargetsIndex"},(o,a,l)=>{const c=Bh(a);Wp(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=ta(e);return n.forEach(o=>{const a=Ln(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),F.waitFor(s)}removeMatchingKeys(e,n,r){const s=ta(e);return F.forEach(n,i=>{const o=Ln(i.path);return F.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=ta(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=ta(e);let i=Ae();return s.J({range:r,H:!0},(o,a,l)=>{const c=si(o[1]),u=new te(c);i=i.add(u)}).next(()=>i)}containsKey(e,n){const r=Ln(n.path),s=IDBKeyRange.bound([r],[nM(r)],!1,!0);let i=0;return ta(e).J({index:"documentTargetsIndex",H:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}ot(e,n){return su(e).get(n).next(r=>r?Bh(r):null)}}function su(t){return Zt(t,"targets")}function uR(t){return Zt(t,"targetGlobal")}function ta(t){return Zt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR([t,e],[n,r]){const s=Ie(t,n);return s===0?Ie(e,r):s}class oG{constructor(e){this.Un=e,this.buffer=new Xe(dR),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();dR(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class uV{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Q("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ja(n)?Q("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Xa(n)}await this.Hn(3e5)})}}class aG{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(lr.oe);const r=new oG(n);return this.Jn.forEachTarget(e,s=>r.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>r.zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(cR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cR):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,s,i,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,o=Date.now(),this.nthSequenceNumber(e,s))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(i=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),du()<=Ne.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:d})))}}function dV(t,e){return new aG(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lG{constructor(e,n){this.db=e,this.garbageCollector=dV(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,s)=>n(s))}addReference(e,n,r){return Wm(e,r)}removeReference(e,n,r){return Wm(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Wm(e,n)}nr(e,n){return function(s,i){let o=!1;return cV(s).Y(a=>lV(s,a,i).next(l=>(l&&(o=!0),F.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,(o,a)=>{if(a<=n){const l=this.nr(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ge.min()),ta(e).delete(function(d){return[0,Ln(d.path)]}(o))))});s.push(l)}}).next(()=>F.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Wm(e,n)}tr(e,n){const r=ta(e);let s,i=lr.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==lr.oe&&n(new te(si(s)),i),i=c,s=l):i=lr.oe}).next(()=>{i!==lr.oe&&n(new te(si(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Wm(t,e){return ta(t).put(function(r,s){return{targetId:0,path:Ln(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(){this.changes=new wo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cG{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Tl(e).put(r)}removeEntry(e,n,r){return Tl(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],jy(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=dt.newInvalidDocument(n);return Tl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(bh(n))},(s,i)=>{r=this.ir(n,i)}).next(()=>r)}sr(e,n){let r={size:0,document:dt.newInvalidDocument(n)};return Tl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(bh(n))},(s,i)=>{r={document:this.ir(n,i),size:By(i)}}).next(()=>r)}getEntries(e,n){let r=ur();return this._r(e,n,(s,i)=>{const o=this.ir(s,i);r=r.insert(s,o)}).next(()=>r)}ar(e,n){let r=ur(),s=new st(te.comparator);return this._r(e,n,(i,o)=>{const a=this.ir(i,o);r=r.insert(i,a),s=s.insert(i,By(o))}).next(()=>({documents:r,ur:s}))}_r(e,n,r){if(n.isEmpty())return F.resolve();let s=new Xe(pR);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(bh(s.first()),bh(s.last())),o=s.getIterator();let a=o.getNext();return Tl(e).J({index:"documentKeyIndex",range:i},(l,c,u)=>{const d=te.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&pR(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?u.$(bh(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),jy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Tl(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let u=ur();for(const d of c){const f=this.ir(te.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);f.isFoundDocument()&&(Gp(n,f)||s.has(f.key))&&(u=u.insert(f.key,f))}return u})}getAllFromCollectionGroup(e,n,r,s){let i=ur();const o=fR(n,r),a=fR(n,Dr.max());return Tl(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const d=this.ir(te.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(d.key,d),i.size===s&&u.done()}).next(()=>i)}newChangeBuffer(e){return new uG(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return hR(e).get("remoteDocumentGlobalKey").next(n=>(de(!!n),n))}rr(e,n){return hR(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=QH(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ge.min())))return r}return dt.newInvalidDocument(e)}}function fV(t){return new cG(t)}class uG extends hV{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new wo(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new Xe((i,o)=>Ie(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.lr.get(i);if(n.push(this.cr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=JC(this.cr.serializer,o);s=s.add(i.path.popLast());const c=By(l);r+=c-a.size,n.push(this.cr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=JC(this.cr.serializer,o.convertToNoDocument(ge.min()));n.push(this.cr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.cr.updateMetadata(e,r)),F.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:s})=>(s.forEach((i,o)=>{this.lr.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function hR(t){return Zt(t,"remoteDocumentGlobal")}function Tl(t){return Zt(t,"remoteDocumentsV14")}function bh(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function fR(t,e){const n=e.documentKey.path.toArray();return[t,jy(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function pR(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=Ie(n[i],r[i]),s)return s;return s=Ie(n.length,r.length),s||(s=Ie(n[n.length-2],r[r.length-2]),s||Ie(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dG{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&af(r.mutation,s,cr.empty(),zt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ae()){const s=ii();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=jh();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ii();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=ur();const o=of(),a=function(){return of()}();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof _o)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),af(u.mutation,c,u.mutation.getFieldMask(),zt.now())):o.set(c.key,cr.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new dG(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=of();let s=new st((o,a)=>o-a),i=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||cr.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(s.get(a.batchId)||Ae()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=NM();u.forEach(f=>{if(!i.has(f)){const p=jM(n.get(f),r.get(f));p!==null&&d.set(f,p),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ab(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(ii());let a=-1,l=i;return o.next(c=>F.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(u)?F.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Ae())).next(u=>({batchId:a,changes:PM(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=jh();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=jh();return this.indexManager.getCollectionParents(e,i).next(a=>F.forEach(a,l=>{const c=function(d,f){return new vo(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(u=>{u.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,dt.newInvalidDocument(u)))});let a=jh();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&af(u.mutation,c,cr.empty(),zt.now()),Gp(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hG{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Mt(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:Mb(s.bundledQuery),readTime:Mt(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fG{constructor(){this.overlays=new st(te.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ii();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=ii(),i=n.length+1,o=new te(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new st((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=ii(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=ii(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return F.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Db(n,r));let i=this.Ir.get(n);i===void 0&&(i=Ae(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pG{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(){this.Tr=new Xe(rn.Er),this.dr=new Xe(rn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new rn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new rn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new te(new Le([])),r=new rn(n,e),s=new rn(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new te(new Le([])),r=new rn(n,e),s=new rn(n,e+1);let i=Ae();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new rn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class rn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return te.comparator(e.key,n.key)||Ie(e.wr,n.wr)}static Ar(e,n){return Ie(e.wr,n.wr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mG{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Xe(rn.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Nb(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new rn(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rn(n,0),s=new rn(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xe(Ie);return n.forEach(s=>{const i=new rn(s,0),o=new rn(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const o=new rn(new te(i),0);let a=new Xe(Ie);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),F.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){de(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new rn(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new rn(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gG{constructor(e){this.Mr=e,this.docs=function(){return new st(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():dt.newInvalidDocument(n))}getEntries(e,n){let r=ur();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():dt.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ur();const o=n.path,a=new te(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||bb(sM(u),r)<=0||(s.has(u.key)||Gp(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ae()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new yG(this)}getSize(e){return F.resolve(this.size)}}class yG extends hV{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vG{constructor(e){this.persistence=e,this.Nr=new wo(n=>rc(n),Wp),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Fb,this.targetCount=0,this.kr=lc.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new lc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n){this.qr={},this.overlays={},this.Qr=new lr(0),this.Kr=!1,this.Kr=!0,this.$r=new pG,this.referenceDelegate=e(this),this.Ur=new vG(this),this.indexManager=new rG,this.remoteDocumentCache=function(s){return new gG(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new rV(n),this.Gr=new hG(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new fG,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new mG(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const s=new wG(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class wG extends oM{constructor(e){super(),this.currentSequenceNumber=e}}class Wv{constructor(e){this.persistence=e,this.Jr=new Fb,this.Yr=null}static Zr(e){return new Wv(e)}get Xr(){if(this.Yr)return this.Yr;throw ae()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=te.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ge.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}class Uy{constructor(e,n){this.persistence=e,this.ti=new wo(r=>Ln(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=dV(this,n)}static Zr(e,n){return new Uy(e,n)}zr(){}jr(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Yn(e){const n=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}Zn(e,n){return F.forEach(this.ti,(r,s)=>this.nr(e,r,s).next(i=>i?F.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.Or(e,o=>this.nr(e,o,n).next(a=>{a||(r++,i.removeEntry(o,ge.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ti.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ti.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.ti.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.ti.set(n,e.currentSequenceNumber),F.resolve()}Wr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Vg(e.data.value)),n}nr(e,n,r){return F.or([()=>this.persistence.Hr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.ti.get(n);return F.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _G{constructor(e){this.serializer=e}O(e,n,r,s){const i=new Vv("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",CC,{unique:!0}),l.createObjectStore("documentMutations")}(e),mR(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=F.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),mR(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ge.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",CC,{unique:!0});const d=c.store("mutations"),f=u.map(p=>d.put(p));return F.waitFor(f)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.ni(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),r<7&&s>=7&&(o=o.next(()=>this.ii(i))),r<8&&s>=8&&(o=o.next(()=>this.si(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.oi(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:nH});c.createIndex("collectionPathOverlayIndex",rH,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",sH,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:WW});c.createIndex("documentKeyIndex",HW),c.createIndex("collectionGroupIndex",GW)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(o=o.next(()=>this.ai(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:JW}).createIndex("sequenceNumberIndex",ZW,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:eH}).createIndex("documentKeyIndex",tH,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,s)=>{n+=By(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(s=>F.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>F.forEach(a,l=>{de(l.userId===i.userId);const c=Dl(this.serializer,l);return aV(e,i.userId,c).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return r.J((o,a)=>{const l=new Le(o),c=function(d){return[0,Ln(d)]}(l);i.push(n.get(c).next(u=>u?F.resolve():(d=>n.put({targetId:0,path:Ln(d),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>F.waitFor(i))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:XW});const r=n.store("collectionParents"),s=new jb,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Ln(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new Le(o);return i(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],c)=>{const u=si(a);return i(u.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,s)=>{const i=Bh(s),o=sV(this.serializer,i);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),s=[];return r.J((i,o)=>{const a=n.store("remoteDocumentsV14"),l=function(d){return d.document?new te(Le.fromString(d.document.name).popFirst(5)):d.noDocument?te.fromSegments(d.noDocument.path):d.unknownDocument?te.fromSegments(d.unknownDocument.path):ae()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>F.waitFor(s))}ai(e,n){const r=n.store("mutations"),s=fV(this.serializer),i=new Bb(Wv.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=(c=a.get(l.userId))!==null&&c!==void 0?c:Ae();Dl(this.serializer,l).keys().forEach(d=>u=u.add(d)),a.set(l.userId,u)}),F.forEach(a,(l,c)=>{const u=new on(c),d=qv.lt(this.serializer,u),f=i.getIndexManager(u),p=zv.lt(u,this.serializer,f,i.referenceDelegate);return new pV(s,p,d,f).recalculateAndSaveOverlaysForDocumentKeys(new C1(n,lr.oe),l).next()})})}}function mR(t){t.createObjectStore("targetDocuments",{keyPath:QW}).createIndex("documentTargetsIndex",YW,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",KW,{unique:!0}),t.createObjectStore("targetGlobal")}const Aw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ub{constructor(e,n,r,s,i,o,a,l,c,u,d=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=i,this.window=o,this.document=a,this.ci=c,this.li=u,this.hi=d,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!Ub.D())throw new K($.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lG(this,s),this.Ai=n+"main",this.serializer=new rV(l),this.Ri=new ci(this.Ai,this.hi,new _G(this.serializer)),this.$r=new XH,this.Ur=new iG(this.referenceDelegate,this.serializer),this.remoteDocumentCache=fV(this.serializer),this.Gr=new YH,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,u===!1&&Lt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new K($.FAILED_PRECONDITION,Aw);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new lr(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Hm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(Ja(e))return Q("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Q("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Th(e).get("owner").next(n=>F.resolve(this.vi(n)))}Ci(e){return Hm(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Zt(n,"clientMetadata");return r.U().next(s=>{const i=this.xi(s,18e5),o=s.filter(a=>i.indexOf(a)===-1);return F.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?F.resolve(!0):Th(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new K($.FAILED_PRECONDITION,Aw);return!1}}return!(!this.networkEnabled||!this.inForeground)||Hm(e).U().next(r=>this.xi(r,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&Q("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new C1(e,lr.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Hm(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return zv.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new sG(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return qv.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){Q("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===17?aH:l===16?oH:l===15?Sb:l===14?hM:l===13?dM:l===12?iH:l===11?uM:void ae()}(this.hi);let o;return this.Ri.runTransaction(e,s,i,a=>(o=new C1(a,this.Qr?this.Qr.next():lr.oe),n==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw Lt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new K($.FAILED_PRECONDITION,iM);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Th(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new K($.FAILED_PRECONDITION,Aw)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Th(e).put("owner",n)}static D(){return ci.D()}bi(e){const n=Th(e);return n.get("owner").next(r=>this.vi(r)?(Q("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):F.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Lt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;X2()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return Q("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Lt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Lt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Th(t){return Zt(t,"owner")}function Hm(t){return Zt(t,"clientMetadata")}function $b(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Ae(),s=Ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new qb(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EG{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return X2()?8:aM(Xt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new EG;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(du()<=Ne.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",hu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(du()<=Ne.DEBUG&&Q("QueryEngine","Query:",hu(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(du()<=Ne.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",hu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kn(n))):F.resolve())}Yi(e,n){if(UC(n))return F.resolve(null);let r=Kn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Vy(n,null,"F"),r=Kn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ae(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Vy(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return UC(n)||s.isEqual(ge.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?F.resolve(null):(du()<=Ne.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),hu(n)),this.rs(e,o,n,rM(s,-1)).next(a=>a))})}ts(e,n){let r=new Xe(CM(e));return n.forEach((s,i)=>{Gp(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return du()<=Ne.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",hu(n)),this.Ji.getDocumentsMatchingQuery(e,n,Dr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xG{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new st(Ie),this._s=new wo(i=>rc(i),Wp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pV(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function gV(t,e,n,r){return new xG(t,e,n,r)}async function yV(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Ae();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function bG(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const d=c.batch,f=d.keys();let p=F.resolve();return f.forEach(g=>{p=p.next(()=>u.getEntry(l,g)).next(m=>{const w=c.docVersions.get(g);de(w!==null),m.version.compareTo(w)<0&&(d.applyToRemoteDocument(m,c),m.isValidDocument()&&(m.setReadTime(c.commitVersion),u.addEntry(m)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ae();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function vV(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function TG(t,e){const n=ne(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((u,d)=>{const f=s.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(i,u.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(i,u.addedDocuments,d)));let p=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(Pt.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),s=s.insert(d,p),function(m,w,v){return m.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(f,p,u)&&a.push(n.Ur.updateTargetData(i,p))});let l=ur(),c=Ae();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(wV(i,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(ge.min())){const u=n.Ur.getLastRemoteSnapshotVersion(i).next(d=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return F.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function wV(t,e,n){let r=Ae(),s=Ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ur();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ge.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function SG(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _d(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Hi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Ed(t,e,n){const r=ne(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ja(o))throw o;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function $y(t,e,n){const r=ne(t);let s=ge.min(),i=Ae();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=ne(l),f=d._s.get(u);return f!==void 0?F.resolve(d.os.get(f)):d.Ur.getTargetData(c,u)}(r,o,Kn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ge.min(),n?i:Ae())).next(a=>(xV(r,AM(e),a),{documents:a,Ts:i})))}function _V(t,e){const n=ne(t),r=ne(n.Ur),s=n.os.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.ot(i,e).next(o=>o?o.target:null))}function EV(t,e){const n=ne(t),r=n.us.get(e)||ge.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.cs.getAllFromCollectionGroup(s,e,rM(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(xV(n,e,s),s))}function xV(t,e,n){let r=t.us.get(e)||ge.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}async function IG(t,e,n,r){const s=ne(t);let i=Ae(),o=ur();for(const c of n){const u=e.Es(c.metadata.name);c.document&&(i=i.add(u));const d=e.ds(c);d.setReadTime(e.As(c.metadata.readTime)),o=o.insert(u,d)}const a=s.cs.newChangeBuffer({trackRemovals:!0}),l=await _d(s,function(u){return Kn(Ud(Le.fromString(`__bundle__/docs/${u}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",c=>wV(c,a,o).next(u=>(a.apply(c),u)).next(u=>s.Ur.removeMatchingKeysForTargetId(c,l.targetId).next(()=>s.Ur.addMatchingKeys(c,i,l.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(c,u.Ps,u.Is)).next(()=>u.Ps)))}async function AG(t,e,n=Ae()){const r=await _d(t,Kn(Mb(e.bundledQuery))),s=ne(t);return s.persistence.runTransaction("Save named query","readwrite",i=>{const o=Mt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return s.Gr.saveNamedQuery(i,e);const a=r.withResumeToken(Pt.EMPTY_BYTE_STRING,o);return s.os=s.os.insert(a.targetId,a),s.Ur.updateTargetData(i,a).next(()=>s.Ur.removeMatchingKeysForTargetId(i,r.targetId)).next(()=>s.Ur.addMatchingKeys(i,n,r.targetId)).next(()=>s.Gr.saveNamedQuery(i,e))})}function gR(t,e){return`firestore_clients_${t}_${e}`}function yR(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Cw(t,e){return`firestore_targets_${t}_${e}`}class qy{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Rs(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new K(s.error.code,s.error.message))),o?new qy(e,n,s.state,i):(Lt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lf{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new K(r.error.code,r.error.message))),i?new lf(e,r.state,s):(Lt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zy{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=Cb();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=lM(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new zy(e,i):(Lt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class zb{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new zb(n.clientId,n.onlineState):(Lt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class $1{constructor(){this.activeTargetIds=Cb()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Rw{constructor(e,n,r,s,i){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new st(Ie),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=gR(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new $1),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const s=this.getItem(gR(this.persistenceKey,r));if(s){const i=zy.Rs(r,s);i&&(this.Ss=this.Ss.insert(i.clientId,i))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Cw(this.persistenceKey,e));if(s){const i=lf.Rs(e,s);i&&(r=i.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Cw(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Qs(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Q("SharedClientState","READ",e,n),n}setItem(e,n){Q("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Q("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(Q("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void Lt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(i){let o=lr.oe;if(i!=null)try{const a=JSON.parse(i);de(typeof a=="number"),o=a}catch(a){Lt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==lr.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(s=>this.syncEngine.eo(s)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const s=new qy(this.currentUser,e,n,r),i=yR(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Vs())}Qs(e){const n=yR(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const s=Cw(this.persistenceKey,e),i=new lf(e,n,r);this.setItem(s,i.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return zy.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return qy.Rs(new on(i),s,n)}Ys(e,n){const r=this.Ms.exec(e),s=Number(r[1]);return lf.Rs(s,n)}Ls(e){return zb.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);Q("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),s=this.ks(this.Ss),i=this.ks(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=Cb();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class bV{constructor(){this.so=new $1,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new $1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CG{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gm=null;function Pw(){return Gm===null?Gm=function(){return 268435456+Math.round(2147483648*Math.random())}():Gm++,"0x"+Gm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PG{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="WebChannelConnection";class NG extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=Pw(),l=this.xo(n,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(u=>(Q("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw gi("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bd}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=RG[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Pw();return new Promise((o,a)=>{const l=new QL;l.setWithCredentials(!0),l.listenOnce(YL.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case kg.NO_ERROR:const u=l.getResponseJson();Q(Cn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),o(u);break;case kg.TIMEOUT:Q(Cn,`RPC '${e}' ${i} timed out`),a(new K($.DEADLINE_EXCEEDED,"Request time out"));break;case kg.HTTP_ERROR:const d=l.getStatus();if(Q(Cn,`RPC '${e}' ${i} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const p=f==null?void 0:f.error;if(p&&p.status&&p.message){const g=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(v)>=0?v:$.UNKNOWN}(p.status);a(new K(g,p.message))}else a(new K($.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new K($.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{Q(Cn,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);Q(Cn,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=Pw(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ZL(),a=JL(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");Q(Cn,`Creating RPC '${e}' stream ${s}: ${u}`,l);const d=o.createWebChannel(u,l);let f=!1,p=!1;const g=new PG({Io:w=>{p?Q(Cn,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(f||(Q(Cn,`Opening RPC '${e}' stream ${s} transport.`),d.open(),f=!0),Q(Cn,`RPC '${e}' stream ${s} sending:`,w),d.send(w))},To:()=>d.close()}),m=(w,v,E)=>{w.listen(v,b=>{try{E(b)}catch(C){setTimeout(()=>{throw C},0)}})};return m(d,Vh.EventType.OPEN,()=>{p||(Q(Cn,`RPC '${e}' stream ${s} transport opened.`),g.yo())}),m(d,Vh.EventType.CLOSE,()=>{p||(p=!0,Q(Cn,`RPC '${e}' stream ${s} transport closed`),g.So())}),m(d,Vh.EventType.ERROR,w=>{p||(p=!0,gi(Cn,`RPC '${e}' stream ${s} transport errored:`,w),g.So(new K($.UNAVAILABLE,"The operation could not be completed")))}),m(d,Vh.EventType.MESSAGE,w=>{var v;if(!p){const E=w.data[0];de(!!E);const b=E,C=b.error||((v=b[0])===null||v===void 0?void 0:v.error);if(C){Q(Cn,`RPC '${e}' stream ${s} received error:`,C);const R=C.status;let O=function(P){const D=Bt[P];if(D!==void 0)return UM(D)}(R),I=C.message;O===void 0&&(O=$.INTERNAL,I="Unknown error status: "+R+" with message "+C.message),p=!0,g.So(new K(O,I)),d.close()}else Q(Cn,`RPC '${e}' stream ${s} received:`,E),g.bo(E)}}),m(a,XL.STAT_EVENT,w=>{w.stat===I1.PROXY?Q(Cn,`RPC '${e}' stream ${s} detected buffering proxy`):w.stat===I1.NOPROXY&&Q(Cn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{g.wo()},0),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TV(){return typeof window<"u"?window:null}function Ug(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(t){return new FH(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Wb(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Lt(n.toString()),Lt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new K($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kG extends SV{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=$H(this.serializer,e),r=function(i){if(!("targetChange"in i))return ge.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ge.min():o.readTime?Mt(o.readTime):ge.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=V1(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Ly(l)?{documents:XM(i,l)}:{query:JM(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=WM(i,o.resumeToken);const c=L1(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ge.min())>0){a.readTime=wd(i,o.snapshotVersion.toTimestamp());const c=L1(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=zH(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=V1(this.serializer),n.removeTarget=e,this.a_(n)}}class DG extends SV{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return de(!!e.streamToken),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){de(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=qH(e.writeResults,e.commitTime),r=Mt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=V1(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>rp(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OG extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new K($.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,M1(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K($.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,M1(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K($.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class LG{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Lt(n),this.D_=!1):Q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MG{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{el(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ne(l);c.L_.add(4),await zd(c),c.q_.set("Unknown"),c.L_.delete(4),await Jp(c)}(this))})}),this.q_=new LG(r,s)}}async function Jp(t){if(el(t))for(const e of t.B_)await e(!0)}async function zd(t){for(const e of t.B_)await e(!1)}function Hv(t,e){const n=ne(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Kb(n)?Gb(n):Hd(n).r_()&&Hb(n,e))}function xd(t,e){const n=ne(t),r=Hd(n);n.N_.delete(e),r.r_()&&IV(n,e),n.N_.size===0&&(r.r_()?r.o_():el(n)&&n.q_.set("Unknown"))}function Hb(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hd(t).A_(e)}function IV(t,e){t.Q_.xe(e),Hd(t).R_(e)}function Gb(t){t.Q_=new LH({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Hd(t).start(),t.q_.v_()}function Kb(t){return el(t)&&!Hd(t).n_()&&t.N_.size>0}function el(t){return ne(t).L_.size===0}function AV(t){t.Q_=void 0}async function VG(t){t.q_.set("Online")}async function jG(t){t.N_.forEach((e,n)=>{Hb(t,e)})}async function FG(t,e){AV(t),Kb(t)?(t.q_.M_(e),Gb(t)):t.q_.set("Unknown")}async function BG(t,e,n){if(t.q_.set("Online"),e instanceof zM&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wy(t,r)}else if(e instanceof Bg?t.Q_.Ke(e):e instanceof qM?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ge.min()))try{const r=await vV(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.N_.get(c);u&&i.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.N_.get(l);if(!u)return;i.N_.set(l,u.withResumeToken(Pt.EMPTY_BYTE_STRING,u.snapshotVersion)),IV(i,l);const d=new Hi(u.target,l,c,u.sequenceNumber);Hb(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),await Wy(t,r)}}async function Wy(t,e,n){if(!Ja(e))throw e;t.L_.add(1),await zd(t),t.q_.set("Offline"),n||(n=()=>vV(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Jp(t)})}function CV(t,e){return e().catch(n=>Wy(t,n,e))}async function Wd(t){const e=ne(t),n=La(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;UG(e);)try{const s=await SG(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,$G(e,s)}catch(s){await Wy(e,s)}RV(e)&&PV(e)}function UG(t){return el(t)&&t.O_.length<10}function $G(t,e){t.O_.push(e);const n=La(t);n.r_()&&n.V_&&n.m_(e.mutations)}function RV(t){return el(t)&&!La(t).n_()&&t.O_.length>0}function PV(t){La(t).start()}async function qG(t){La(t).p_()}async function zG(t){const e=La(t);for(const n of t.O_)e.m_(n.mutations)}async function WG(t,e,n){const r=t.O_.shift(),s=kb.from(r,e,n);await CV(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Wd(t)}async function HG(t,e){e&&La(t).V_&&await async function(r,s){if(function(o){return BM(o)&&o!==$.ABORTED}(s.code)){const i=r.O_.shift();La(r).s_(),await CV(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Wd(r)}}(t,e),RV(t)&&PV(t)}async function wR(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=el(n);n.L_.add(3),await zd(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Jp(n)}async function q1(t,e){const n=ne(t);e?(n.L_.delete(2),await Jp(n)):e||(n.L_.add(2),await zd(n),n.q_.set("Unknown"))}function Hd(t){return t.K_||(t.K_=function(n,r,s){const i=ne(n);return i.w_(),new kG(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:VG.bind(null,t),Ro:jG.bind(null,t),mo:FG.bind(null,t),d_:BG.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Kb(t)?Gb(t):t.q_.set("Unknown")):(await t.K_.stop(),AV(t))})),t.K_}function La(t){return t.U_||(t.U_=function(n,r,s){const i=ne(n);return i.w_(),new DG(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:qG.bind(null,t),mo:HG.bind(null,t),f_:zG.bind(null,t),g_:WG.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Wd(t)):(await t.U_.stop(),t.O_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new _n,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Qb(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gd(t,e){if(Lt("AsyncQueue",`${e}: ${t}`),Ja(t))return new K($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=jh(),this.sortedSet=new st(this.comparator)}static emptySet(e){return new Qu(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Qu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Qu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(){this.W_=new st(te.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ae():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class bd{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new bd(e,n,Qu.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GG{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class KG{constructor(){this.queries=ER(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ne(n),i=s.queries;s.queries=ER(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new K($.ABORTED,"Firestore shutting down"))}}function ER(){return new wo(t=>IM(t),Hp)}async function Yb(t,e){const n=ne(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new GG,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Gd(o,`Initialization of query '${hu(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Jb(n)}async function Xb(t,e){const n=ne(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function QG(t,e){const n=ne(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&Jb(n)}function YG(t,e,n){const r=ne(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Jb(t){t.Y_.forEach(e=>{e.next()})}var z1,xR;(xR=z1||(z1={})).ea="default",xR.Cache="cache";class Zb{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new bd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=bd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==z1.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XG{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e){this.serializer=e}Es(e){return ui(this.serializer,e)}ds(e){return e.metadata.exists?YM(this.serializer,e.document,!1):dt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Mt(e)}}class JG{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=NV(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=Le.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new bR(this.serializer);for(const s of e)if(s.metadata.queries){const i=r.Es(s.metadata.name);for(const o of s.metadata.queries){const a=(n.get(o)||Ae()).add(i);n.set(o,a)}}return n}async complete(){const e=await IG(this.localStore,new bR(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const r of this.queries)await AG(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function NV(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e){this.key=e}}class DV{constructor(e){this.key=e}}class OV{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ae(),this.mutatedKeys=Ae(),this.Aa=CM(e),this.Ra=new Qu(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new _R,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,d)=>{const f=s.get(u),p=Gp(this.query,d)?d:null,g=!!f&&this.mutatedKeys.has(f.key),m=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let w=!1;f&&p?f.data.isEqual(p.data)?g!==m&&(r.track({type:3,doc:p}),w=!0):this.ga(f,p)||(r.track({type:2,doc:p}),w=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),w=!0):f&&!p&&(r.track({type:1,doc:f}),w=!0,(l||c)&&(a=!0)),w&&(p?(o=o.add(p),i=m?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,d)=>function(p,g){const m=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return m(p)-m(g)}(u.type,d.type)||this.Aa(u.doc,d.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new bd(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new _R,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ae(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new DV(r))}),this.da.forEach(r=>{e.has(r)||n.push(new kV(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ae();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return bd.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class ZG{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class eK{constructor(e){this.key=e,this.va=!1}}class tK{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new wo(a=>IM(a),Hp),this.Ma=new Map,this.xa=new Set,this.Oa=new st(te.comparator),this.Na=new Map,this.La=new Fb,this.Ba={},this.ka=new Map,this.qa=lc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function nK(t,e,n=!0){const r=Gv(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await LV(r,e,n,!0),s}async function rK(t,e){const n=Gv(t);await LV(n,e,!0,!1)}async function LV(t,e,n,r){const s=await _d(t.localStore,Kn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await eT(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Hv(t.remoteStore,s),a}async function eT(t,e,n,r,s){t.Ka=(d,f,p)=>async function(m,w,v,E){let b=w.view.ma(v);b.ns&&(b=await $y(m.localStore,w.query,!1).then(({documents:I})=>w.view.ma(I,b)));const C=E&&E.targetChanges.get(w.targetId),R=E&&E.targetMismatches.get(w.targetId)!=null,O=w.view.applyChanges(b,m.isPrimaryClient,C,R);return W1(m,w.targetId,O.wa),O.snapshot}(t,d,f,p);const i=await $y(t.localStore,e,!0),o=new OV(e,i.Ts),a=o.ma(i.documents),l=Yp.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);W1(t,n,c.wa);const u=new ZG(e,n,o);return t.Fa.set(e,u),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function sK(t,e,n){const r=ne(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Hp(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ed(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&xd(r.remoteStore,s.targetId),Td(r,s.targetId)}).catch(Xa)):(Td(r,s.targetId),await Ed(r.localStore,s.targetId,!0))}async function iK(t,e){const n=ne(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),xd(n.remoteStore,r.targetId))}async function oK(t,e,n){const r=sT(t);try{const s=await function(o,a){const l=ne(o),c=zt.now(),u=a.reduce((p,g)=>p.add(g.key),Ae());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=ur(),m=Ae();return l.cs.getEntries(p,u).next(w=>{g=w,g.forEach((v,E)=>{E.isValidDocument()||(m=m.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,g)).next(w=>{d=w;const v=[];for(const E of a){const b=kH(E,d.get(E.key).overlayedDocument);b!=null&&v.push(new _o(E.key,b,yM(b.value.mapValue),yt.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,v,a)}).next(w=>{f=w;const v=w.applyToLocalDocumentSet(d,m);return l.documentOverlayCache.saveOverlays(p,w.batchId,v)})}).then(()=>({batchId:f.batchId,changes:PM(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new st(Ie)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await Eo(r,s.changes),await Wd(r.remoteStore)}catch(s){const i=Gd(s,"Failed to persist write");n.reject(i)}}async function MV(t,e){const n=ne(t);try{const r=await TG(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(de(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?de(o.va):s.removedDocuments.size>0&&(de(o.va),o.va=!1))}),await Eo(n,r,e)}catch(r){await Xa(r)}}function TR(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ne(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.j_)f.Z_(a)&&(c=!0)}),c&&Jb(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function aK(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new st(te.comparator);o=o.insert(i,dt.newNoDocument(i,ge.min()));const a=Ae().add(i),l=new Qp(ge.min(),new Map,new st(Ie),o,a);await MV(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),rT(r)}else await Ed(r.localStore,e,!1).then(()=>Td(r,e,n)).catch(Xa)}async function lK(t,e){const n=ne(t),r=e.batch.batchId;try{const s=await bG(n.localStore,e);nT(n,r,null),tT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Eo(n,s)}catch(s){await Xa(s)}}async function cK(t,e,n){const r=ne(t);try{const s=await function(o,a){const l=ne(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(de(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);nT(r,e,n),tT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Eo(r,s)}catch(s){await Xa(s)}}async function uK(t,e){const n=ne(t);el(n.remoteStore)||Q("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=ne(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===-1)return void e.resolve();const s=n.ka.get(r)||[];s.push(e),n.ka.set(r,s)}catch(r){const s=Gd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function tT(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function nT(t,e,n){const r=ne(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Td(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||VV(t,r)})}function VV(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(xd(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),rT(t))}function W1(t,e,n){for(const r of n)r instanceof kV?(t.La.addReference(r.key,e),dK(t,r)):r instanceof DV?(Q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||VV(t,r.key)):ae()}function dK(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Q("SyncEngine","New document in limbo: "+n),t.xa.add(r),rT(t))}function rT(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new te(Le.fromString(e)),r=t.qa.next();t.Na.set(r,new eK(n)),t.Oa=t.Oa.insert(n,r),Hv(t.remoteStore,new Hi(Kn(Ud(n.path)),r,"TargetPurposeLimboResolution",lr.oe))}}async function Eo(t,e,n){const r=ne(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){s.push(c);const d=qb.Wi(l.targetId,c);i.push(d)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const u=ne(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>F.forEach(c,f=>F.forEach(f.$i,p=>u.persistence.referenceDelegate.addReference(d,f.targetId,p)).next(()=>F.forEach(f.Ui,p=>u.persistence.referenceDelegate.removeReference(d,f.targetId,p)))))}catch(d){if(!Ja(d))throw d;Q("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const p=u.os.get(f),g=p.snapshotVersion,m=p.withLastLimboFreeSnapshotVersion(g);u.os=u.os.insert(f,m)}}}(r.localStore,i))}async function hK(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await yV(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new K($.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Eo(n,r.hs)}}function fK(t,e){const n=ne(t),r=n.Na.get(e);if(r&&r.va)return Ae().add(r.key);{let s=Ae();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}async function pK(t,e){const n=ne(t),r=await $y(n.localStore,e.query,!0),s=e.view.ba(r);return n.isPrimaryClient&&W1(n,e.targetId,s.wa),s}async function mK(t,e){const n=ne(t);return EV(n.localStore,e).then(r=>Eo(n,r))}async function gK(t,e,n,r){const s=ne(t),i=await function(a,l){const c=ne(a),u=ne(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.Mn(d,l).next(f=>f?c.localDocuments.getDocuments(d,f):F.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await Wd(s.remoteStore):n==="acknowledged"||n==="rejected"?(nT(s,e,r||null),tT(s,e),function(a,l){ne(ne(a).mutationQueue).On(l)}(s.localStore,e)):ae(),await Eo(s,i)):Q("SyncEngine","Cannot apply mutation batch with id: "+e)}async function yK(t,e){const n=ne(t);if(Gv(n),sT(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await SR(n,r.toArray());n.Qa=!0,await q1(n.remoteStore,!0);for(const i of s)Hv(n.remoteStore,i)}else if(e===!1&&n.Qa!==!1){const r=[];let s=Promise.resolve();n.Ma.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(Td(n,o),Ed(n.localStore,o,!0))),xd(n.remoteStore,o)}),await s,await SR(n,r),function(o){const a=ne(o);a.Na.forEach((l,c)=>{xd(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new st(te.comparator)}(n),n.Qa=!1,await q1(n.remoteStore,!1)}}async function SR(t,e,n){const r=ne(t),s=[],i=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&l.length!==0){a=await _d(r.localStore,Kn(l[0]));for(const c of l){const u=r.Fa.get(c),d=await pK(r,u);d.snapshot&&i.push(d.snapshot)}}else{const c=await _V(r.localStore,o);a=await _d(r.localStore,c),await eT(r,jV(c),o,!1,a.resumeToken)}s.push(a)}return r.Ca.d_(i),s}function jV(t){return SM(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function vK(t){return function(n){return ne(ne(n).persistence).Qi()}(ne(t).localStore)}async function wK(t,e,n,r){const s=ne(t);if(s.Qa)return void Q("SyncEngine","Ignoring unexpected query state notification.");const i=s.Ma.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await EV(s.localStore,AM(i[0])),a=Qp.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Pt.EMPTY_BYTE_STRING);await Eo(s,o,a);break}case"rejected":await Ed(s.localStore,e,!0),Td(s,e,r);break;default:ae()}}async function _K(t,e,n){const r=Gv(t);if(r.Qa){for(const s of e){if(r.Ma.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){Q("SyncEngine","Adding an already active target "+s);continue}const i=await _V(r.localStore,s),o=await _d(r.localStore,i);await eT(r,jV(i),o.targetId,!1,o.resumeToken),Hv(r.remoteStore,o)}for(const s of n)r.Ma.has(s)&&await Ed(r.localStore,s,!1).then(()=>{xd(r.remoteStore,s),Td(r,s)}).catch(Xa)}}function Gv(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=MV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aK.bind(null,e),e.Ca.d_=QG.bind(null,e.eventManager),e.Ca.$a=YG.bind(null,e.eventManager),e}function sT(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cK.bind(null,e),e}function EK(t,e,n){const r=ne(t);(async function(i,o,a){try{const l=await o.getMetadata();if(await function(p,g){const m=ne(p),w=Mt(g.createTime);return m.persistence.runTransaction("hasNewerBundle","readonly",v=>m.Gr.getBundleMetadata(v,g.id)).then(v=>!!v&&v.createTime.compareTo(w)>=0)}(i.localStore,l))return await o.close(),a._completeWith(function(p){return{taskState:"Success",documentsLoaded:p.totalDocuments,bytesLoaded:p.totalBytes,totalDocuments:p.totalDocuments,totalBytes:p.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(NV(l));const c=new JG(l,i.localStore,o.serializer);let u=await o.Ua();for(;u;){const f=await c.la(u);f&&a._updateProgress(f),u=await o.Ua()}const d=await c.complete();return await Eo(i,d.Ia,void 0),await function(p,g){const m=ne(p);return m.persistence.runTransaction("Save bundle","readwrite",w=>m.Gr.saveBundleMetadata(w,g))}(i.localStore,l),a._completeWith(d.progress),Promise.resolve(d.Pa)}catch(l){return gi("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}class sp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xp(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return gV(this.persistence,new mV,e.initialUser,this.serializer)}Ga(e){return new Bb(Wv.Zr,this.serializer)}Wa(e){return new bV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sp.provider={build:()=>new sp};class xK extends sp{constructor(e){super(),this.cacheSizeBytes=e}ja(e,n){de(this.persistence.referenceDelegate instanceof Uy);const r=this.persistence.referenceDelegate.garbageCollector;return new uV(r,e.asyncQueue,n)}Ga(e){const n=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new Bb(r=>Uy.Zr(r,n),this.serializer)}}class FV extends sp{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await sT(this.Ja.syncEngine),await Wd(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return gV(this.persistence,new mV,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new uV(r,e.asyncQueue,n)}Ha(e,n){const r=new $W(n,this.persistence);return new UW(e.asyncQueue,r)}Ga(e){const n=$b(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new Ub(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,TV(),Ug(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new bV}}class bK extends FV{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof Rw&&(this.sharedClientState.syncEngine={no:gK.bind(null,n),ro:wK.bind(null,n),io:_K.bind(null,n),Qi:vK.bind(null,n),eo:mK.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await yK(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=TV();if(!Rw.D(n))throw new K($.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=$b(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Rw(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class ip{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>TR(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=hK.bind(null,this.syncEngine),await q1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new KG}()}createDatastore(e){const n=Xp(e.databaseInfo.databaseId),r=function(i){return new NG(i)}(e.databaseInfo);return function(i,o,a,l){return new OG(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new MG(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>TR(this.syncEngine,n,0),function(){return vR.D()?new vR:new CG}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,u){const d=new tK(s,i,o,a,l,c);return u&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ne(s);Q("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await zd(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ip.provider={build:()=>new ip};function IR(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Lt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TK{constructor(e,n){this.Xa=e,this.serializer=n,this.metadata=new _n,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const n=this.eu.decode(e),r=Number(n);isNaN(r)&&this.ru(`length string (${n}) is not valid number`);const s=await this.iu(r);return new XG(JSON.parse(s),e.length+r)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const n=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SK{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new K($.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,i){const o=ne(s),a={documents:i.map(d=>np(o.serializer,d))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Le.emptyPath(),a,i.length),c=new Map;l.forEach(d=>{const f=UH(o.serializer,d);c.set(f.key.toString(),f)});const u=[];return i.forEach(d=>{const f=c.get(d.toString());de(!!f),u.push(f)}),u}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new qd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=te.fromPath(r);this.mutations.push(new Pb(s,this.precondition(s)))}),await async function(r,s){const i=ne(r),o={writes:s.map(a=>rp(i.serializer,a))};await i.Mo("Commit",i.serializer.databaseId,Le.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ae();n=ge.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new K($.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ge.min())?yt.exists(!1):yt.updateTime(n):yt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ge.min()))throw new K($.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yt.updateTime(n)}return yt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IK{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this._u=r.maxAttempts,this.t_=new Wb(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new SK(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.lu(s)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!zp(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!BM(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AK{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=on.UNAUTHENTICATED,this.clientId=tM.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _n;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Gd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Nw(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await yV(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function AR(t,e){t.asyncQueue.verifyOperationInProgress();const n=await iT(t);Q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>wR(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>wR(e.remoteStore,s)),t._onlineComponents=e}async function iT(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Nw(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===$.FAILED_PRECONDITION||s.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;gi("Error using user provided cache. Falling back to memory cache: "+n),await Nw(t,new sp)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await Nw(t,new xK(void 0));return t._offlineComponents}async function Qv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await AR(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await AR(t,new ip))),t._onlineComponents}function BV(t){return iT(t).then(e=>e.persistence)}function oT(t){return iT(t).then(e=>e.localStore)}function UV(t){return Qv(t).then(e=>e.remoteStore)}function aT(t){return Qv(t).then(e=>e.syncEngine)}function CK(t){return Qv(t).then(e=>e.datastore)}async function Sd(t){const e=await Qv(t),n=e.eventManager;return n.onListen=nK.bind(null,e.syncEngine),n.onUnlisten=sK.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=rK.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=iK.bind(null,e.syncEngine),n}function RK(t){return t.asyncQueue.enqueue(async()=>{const e=await BV(t),n=await UV(t);return e.setNetworkEnabled(!0),function(s){const i=ne(s);return i.L_.delete(0),Jp(i)}(n)})}function PK(t){return t.asyncQueue.enqueue(async()=>{const e=await BV(t),n=await UV(t);return e.setNetworkEnabled(!1),async function(s){const i=ne(s);i.L_.add(0),await zd(i),i.q_.set("Offline")}(n)})}function NK(t,e){const n=new _n;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(c,u){const d=ne(c);return d.persistence.runTransaction("read document","readonly",f=>d.localDocuments.getDocument(f,u))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new K($.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Gd(a,`Failed to get document '${i} from cache`);o.reject(l)}}(await oT(t),e,n)),n.promise}function $V(t,e,n={}){const r=new _n;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new Kv({next:f=>{u.Za(),o.enqueueAndForget(()=>Xb(i,d));const p=f.docs.has(a);!p&&f.fromCache?c.reject(new K($.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new K($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new Zb(Ud(a.path),u,{includeMetadataChanges:!0,_a:!0});return Yb(i,d)}(await Sd(t),t.asyncQueue,e,n,r)),r.promise}function kK(t,e){const n=new _n;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await $y(s,i,!0),l=new OV(i,a.Ts),c=l.ma(a.documents),u=l.applyChanges(c,!1);o.resolve(u.snapshot)}catch(a){const l=Gd(a,`Failed to execute query '${i} against cache`);o.reject(l)}}(await oT(t),e,n)),n.promise}function qV(t,e,n={}){const r=new _n;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new Kv({next:f=>{u.Za(),o.enqueueAndForget(()=>Xb(i,d)),f.fromCache&&l.source==="server"?c.reject(new K($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new Zb(a,u,{includeMetadataChanges:!0,_a:!0});return Yb(i,d)}(await Sd(t),t.asyncQueue,e,n,r)),r.promise}function DK(t,e){const n=new Kv(e);return t.asyncQueue.enqueueAndForget(async()=>function(s,i){ne(s).Y_.add(i),i.next()}(await Sd(t),n)),()=>{n.Za(),t.asyncQueue.enqueueAndForget(async()=>function(s,i){ne(s).Y_.delete(i)}(await Sd(t),n))}}function OK(t,e,n,r){const s=function(o,a){let l;return l=typeof o=="string"?$M().encode(o):o,function(u,d){return new TK(u,d)}(function(u,d){if(u instanceof Uint8Array)return IR(u,d);if(u instanceof ArrayBuffer)return IR(new Uint8Array(u),d);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,Xp(e));t.asyncQueue.enqueueAndForget(async()=>{EK(await aT(t),s,r)})}function LK(t,e){return t.asyncQueue.enqueue(async()=>function(r,s){const i=ne(r);return i.persistence.runTransaction("Get named query","readonly",o=>i.Gr.getNamedQuery(o,s))}(await oT(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(t,e,n){if(!n)throw new K($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function WV(t,e,n,r){if(e===!0&&r===!0)throw new K($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function RR(t){if(!te.isDocumentKey(t))throw new K($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function PR(t){if(te.isDocumentKey(t))throw new K($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Yv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function ze(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Yv(t);throw new K($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function HV(t,e){if(e<=0)throw new K($.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zV((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NR({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NR(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new PW;switch(r.type){case"firstParty":return new OW(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=CR.get(n);r&&(Q("ComponentProvider","Removing Datastore"),CR.delete(n),r.terminate())}(this),Promise.resolve()}}function MK(t,e,n,r={}){var s;const i=(t=ze(t,Zp))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&gi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=on.MOCK_USER;else{a=Dq(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new K($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new on(c)}t._authCredentials=new NW(new eM(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yn=class GV{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new GV(this.firestore,e,this._query)}},xt=class KV{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _a(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new KV(this.firestore,e,this._key)}},_a=class QV extends Yn{constructor(e,n,r){super(e,n,Ud(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new te(e))}withConverter(e){return new QV(this.firestore,e,this._path)}};function YV(t,e,...n){if(t=Je(t),lT("collection","path",e),t instanceof Zp){const r=Le.fromString(e,...n);return PR(r),new _a(t,null,r)}{if(!(t instanceof xt||t instanceof _a))throw new K($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return PR(r),new _a(t.firestore,null,r)}}function VK(t,e){if(t=ze(t,Zp),lT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new K($.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Yn(t,null,function(r){return new vo(Le.emptyPath(),r)}(e))}function Hy(t,e,...n){if(t=Je(t),arguments.length===1&&(e=tM.newId()),lT("doc","path",e),t instanceof Zp){const r=Le.fromString(e,...n);return RR(r),new xt(t,null,new te(r))}{if(!(t instanceof xt||t instanceof _a))throw new K($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return RR(r),new xt(t.firestore,t instanceof _a?t.converter:null,new te(r))}}function XV(t,e){return t=Je(t),e=Je(e),(t instanceof xt||t instanceof _a)&&(e instanceof xt||e instanceof _a)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function JV(t,e){return t=Je(t),e=Je(e),t instanceof Yn&&e instanceof Yn&&t.firestore===e.firestore&&Hp(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Wb(this,"async_queue_retry"),this.Vu=()=>{const r=Ug();r&&Q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Ug();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Ug();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new _n;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ja(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Lt("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Qb.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ae()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function H1(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class jK{constructor(){this._progressObserver={},this._taskCompletionResolver=new _n,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FK=-1;let Vt=class extends Zp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new kR,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new kR(e),this._firestoreClient=void 0,await e}}};function jn(t){if(t._terminated)throw new K($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ZV(t),t._firestoreClient}function ZV(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,u){return new uH(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,zV(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new AK(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function BK(t,e){gi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return ej(t,ip.provider,{build:r=>new FV(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function UK(t){gi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();ej(t,ip.provider,{build:n=>new bK(n,e.cacheSizeBytes)})}function ej(t,e,n){if((t=ze(t,Vt))._firestoreClient||t._terminated)throw new K($.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new K($.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},ZV(t)}function $K(t){if(t._initialized&&!t._terminated)throw new K($.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new _n;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!ci.D())return Promise.resolve();const s=r+"main";await ci.delete(s)}($b(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function qK(t){return function(n){const r=new _n;return n.asyncQueue.enqueueAndForget(async()=>uK(await aT(n),r)),r.promise}(jn(t=ze(t,Vt)))}function zK(t){return RK(jn(t=ze(t,Vt)))}function WK(t){return PK(jn(t=ze(t,Vt)))}function HK(t,e){const n=jn(t=ze(t,Vt)),r=new jK;return OK(n,t._databaseId,e,r),r}function GK(t,e){return LK(jn(t=ze(t,Vt)),e).then(n=>n?new Yn(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vi(Pt.fromBase64String(e))}catch(n){throw new K($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new vi(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ma=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ic=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KK=/^__.*__$/;class QK{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new _o(e,this.data,this.fieldMask,n,this.fieldTransforms):new $d(e,this.data,n,this.fieldTransforms)}}class tj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new _o(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function nj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class Jv{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Jv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Gy(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(nj(this.Cu)&&KK.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class YK{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Xp(e)}Qu(e,n,r,s=!1){return new Jv({Cu:e,methodName:n,qu:r,path:gt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ac(t){const e=t._freezeSettings(),n=Xp(t._databaseId);return new YK(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Zv(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);gT("Data must be an object, but it was:",o,r);const a=ij(r,o);let l,c;if(i.merge)l=new cr(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const d of i.mergeFields){const f=G1(e,d,n);if(!o.contains(f))throw new K($.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);aj(u,f)||u.push(f)}l=new cr(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new QK(new vn(a),l,c)}class em extends Ic{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof em}}function rj(t,e,n){return new Jv({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class uT extends Ic{_toFieldTransform(e){return new Kp(e.path,new yd)}isEqual(e){return e instanceof uT}}class dT extends Ic{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=rj(this,e,!0),r=this.Ku.map(i=>Cc(i,n)),s=new sc(r);return new Kp(e.path,s)}isEqual(e){return e instanceof dT&&dd(this.Ku,e.Ku)}}class hT extends Ic{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=rj(this,e,!0),r=this.Ku.map(i=>Cc(i,n)),s=new ic(r);return new Kp(e.path,s)}isEqual(e){return e instanceof hT&&dd(this.Ku,e.Ku)}}class fT extends Ic{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new vd(e.serializer,DM(e.serializer,this.$u));return new Kp(e.path,n)}isEqual(e){return e instanceof fT&&this.$u===e.$u}}function pT(t,e,n,r){const s=t.Qu(1,e,n);gT("Data must be an object, but it was:",s,r);const i=[],o=vn.empty();Za(r,(l,c)=>{const u=yT(e,l,n);c=Je(c);const d=s.Nu(u);if(c instanceof em)i.push(u);else{const f=Cc(c,d);f!=null&&(i.push(u),o.set(u,f))}});const a=new cr(i);return new tj(o,a,s.fieldTransforms)}function mT(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[G1(e,r,n)],l=[s];if(i.length%2!=0)throw new K($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(G1(e,i[f])),l.push(i[f+1]);const c=[],u=vn.empty();for(let f=a.length-1;f>=0;--f)if(!aj(c,a[f])){const p=a[f];let g=l[f];g=Je(g);const m=o.Nu(p);if(g instanceof em)c.push(p);else{const w=Cc(g,m);w!=null&&(c.push(p),u.set(p,w))}}const d=new cr(c);return new tj(u,d,o.fieldTransforms)}function sj(t,e,n,r=!1){return Cc(n,t.Qu(r?4:3,e))}function Cc(t,e){if(oj(t=Je(t)))return gT("Unsupported field value:",e,t),ij(t,e);if(t instanceof Ic)return function(r,s){if(!nj(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Cc(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return DM(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=zt.fromDate(r);return{timestampValue:wd(s.serializer,i)}}if(r instanceof zt){const i=new zt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wd(s.serializer,i)}}if(r instanceof Xv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vi)return{bytesValue:WM(s.serializer,r._byteString)};if(r instanceof xt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Lb(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof cT)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Rb(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Yv(r)}`)}(t,e)}function ij(t,e){const n={};return fM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Za(t,(r,s)=>{const i=Cc(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function oj(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof zt||t instanceof Xv||t instanceof vi||t instanceof xt||t instanceof Ic||t instanceof cT)}function gT(t,e,n){if(!oj(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Yv(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function G1(t,e,n){if((e=Je(e))instanceof Ma)return e._internalPath;if(typeof e=="string")return yT(t,e);throw Gy("Field path arguments must be of type string or ",t,!1,void 0,n)}const XK=new RegExp("[~\\*/\\[\\]]");function yT(t,e,n){if(e.search(XK)>=0)throw Gy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ma(...e.split("."))._internalPath}catch{throw Gy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Gy(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new K($.INVALID_ARGUMENT,a+t+l)}function aj(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JK(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(e0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class JK extends op{data(){return super.data()}}function e0(t,e){return typeof e=="string"?yT(t,e):e instanceof Ma?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vT{}class tm extends vT{}function jo(t,e,...n){let r=[];e instanceof vT&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof wT).length,a=i.filter(l=>l instanceof t0).length;if(o>1||o>0&&a>0)throw new K($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class t0 extends tm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t0(e,n,r)}_apply(e){const n=this._parse(e);return uj(e._query,n),new Yn(e.firestore,e.converter,O1(e._query,n))}_parse(e){const n=Ac(e.firestore);return function(i,o,a,l,c,u,d){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new K($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){OR(d,u);const p=[];for(const g of d)p.push(DR(l,i,g));f={arrayValue:{values:p}}}else f=DR(l,i,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||OR(d,u),f=sj(a,o,d,u==="in"||u==="not-in");return Me.create(c,u,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ZK(t,e,n){const r=e,s=e0("where",t);return t0._create(s,r,n)}class wT extends vT{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new wT(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ke.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)uj(o,l),o=O1(o,l)}(e._query,n),new Yn(e.firestore,e.converter,O1(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _T extends tm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new _T(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new K($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new K($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new tp(i,o)}(e._query,this._field,this._direction);return new Yn(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new vo(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function eQ(t,e="asc"){const n=e,r=e0("orderBy",t);return _T._create(r,n)}class n0 extends tm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new n0(e,n,r)}_apply(e){return new Yn(e.firestore,e.converter,Vy(e._query,this._limit,this._limitType))}}function tQ(t){return HV("limit",t),n0._create("limit",t,"F")}function nQ(t){return HV("limitToLast",t),n0._create("limitToLast",t,"L")}class r0 extends tm{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new r0(e,n,r)}_apply(e){const n=cj(e,this.type,this._docOrFields,this._inclusive);return new Yn(e.firestore,e.converter,function(s,i){return new vo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function rQ(...t){return r0._create("startAt",t,!0)}function sQ(...t){return r0._create("startAfter",t,!1)}class s0 extends tm{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new s0(e,n,r)}_apply(e){const n=cj(e,this.type,this._docOrFields,this._inclusive);return new Yn(e.firestore,e.converter,function(s,i){return new vo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,i)}(e._query,n))}}function iQ(...t){return s0._create("endBefore",t,!1)}function oQ(...t){return s0._create("endAt",t,!0)}function cj(t,e,n,r){if(n[0]=Je(n[0]),n[0]instanceof op)return function(i,o,a,l,c){if(!l)throw new K($.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const u=[];for(const d of Ku(i))if(d.field.isKeyField())u.push(nc(o,l.key));else{const f=l.data.field(d.field);if(jv(f))throw new K($.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const p=d.field.canonicalString();throw new K($.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}u.push(f)}return new Oa(u,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Ac(t.firestore);return function(o,a,l,c,u,d){const f=o.explicitOrderBy;if(u.length>f.length)throw new K($.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let g=0;g<u.length;g++){const m=u[g];if(f[g].field.isKeyField()){if(typeof m!="string")throw new K($.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof m}`);if(!Ab(o)&&m.indexOf("/")!==-1)throw new K($.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${m}' contains a slash.`);const w=o.path.child(Le.fromString(m));if(!te.isDocumentKey(w))throw new K($.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${w}' is not because it contains an odd number of segments.`);const v=new te(w);p.push(nc(a,v))}else{const w=sj(l,c,m);p.push(w)}}return new Oa(p,d)}(t._query,t.firestore._databaseId,s,e,n,r)}}function DR(t,e,n){if(typeof(n=Je(n))=="string"){if(n==="")throw new K($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ab(e)&&n.indexOf("/")!==-1)throw new K($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Le.fromString(n));if(!te.isDocumentKey(r))throw new K($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return nc(t,new te(r))}if(n instanceof xt)return nc(t,n._key);throw new K($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yv(n)}.`)}function OR(t,e){if(!Array.isArray(t)||t.length===0)throw new K($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uj(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ET{convertValue(e,n="none"){switch(ka(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(oo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Za(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>pt(o.doubleValue));return new cT(i)}convertGeoPoint(e){return new Xv(pt(e.latitude),pt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Fv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Jf(e));default:return null}}convertTimestamp(e){const n=io(e);return new zt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Le.fromString(e);de(nV(r));const s=new Na(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||Lt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class aQ extends ET{constructor(e){super(),this.firestore=e}convertBytes(e){return new vi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let ao=class extends op{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new cf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(e0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},cf=class extends ao{data(e={}){return super.data(e)}},Va=class{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ul(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new cf(this._firestore,this._userDataWriter,r.key,r,new Ul(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new cf(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ul(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new cf(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ul(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:lQ(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function lQ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}function dj(t,e){return t instanceof ao&&e instanceof ao?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Va&&e instanceof Va&&t._firestore===e._firestore&&JV(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cQ(t){t=ze(t,xt);const e=ze(t.firestore,Vt);return $V(jn(e),t._key).then(n=>xT(e,t,n))}class Rc extends ET{constructor(e){super(),this.firestore=e}convertBytes(e){return new vi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function uQ(t){t=ze(t,xt);const e=ze(t.firestore,Vt),n=jn(e),r=new Rc(e);return NK(n,t._key).then(s=>new ao(e,r,t._key,s,new Ul(s!==null&&s.hasLocalMutations,!0),t.converter))}function dQ(t){t=ze(t,xt);const e=ze(t.firestore,Vt);return $V(jn(e),t._key,{source:"server"}).then(n=>xT(e,t,n))}function hQ(t){t=ze(t,Yn);const e=ze(t.firestore,Vt),n=jn(e),r=new Rc(e);return lj(t._query),qV(n,t._query).then(s=>new Va(e,r,t,s))}function fQ(t){t=ze(t,Yn);const e=ze(t.firestore,Vt),n=jn(e),r=new Rc(e);return kK(n,t._query).then(s=>new Va(e,r,t,s))}function pQ(t){t=ze(t,Yn);const e=ze(t.firestore,Vt),n=jn(e),r=new Rc(e);return qV(n,t._query,{source:"server"}).then(s=>new Va(e,r,t,s))}function LR(t,e,n){t=ze(t,xt);const r=ze(t.firestore,Vt),s=i0(t.converter,e,n);return nm(r,[Zv(Ac(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,yt.none())])}function MR(t,e,n,...r){t=ze(t,xt);const s=ze(t.firestore,Vt),i=Ac(s);let o;return o=typeof(e=Je(e))=="string"||e instanceof Ma?mT(i,"updateDoc",t._key,e,n,r):pT(i,"updateDoc",t._key,e),nm(s,[o.toMutation(t._key,yt.exists(!0))])}function mQ(t){return nm(ze(t.firestore,Vt),[new qd(t._key,yt.none())])}function gQ(t,e){const n=ze(t.firestore,Vt),r=Hy(t),s=i0(t.converter,e);return nm(n,[Zv(Ac(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,yt.exists(!1))]).then(()=>r)}function hj(t,...e){var n,r,s;t=Je(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||H1(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(H1(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(s=d.complete)===null||s===void 0?void 0:s.bind(d)}let l,c,u;if(t instanceof xt)c=ze(t.firestore,Vt),u=Ud(t._key.path),l={next:d=>{e[o]&&e[o](xT(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=ze(t,Yn);c=ze(d.firestore,Vt),u=d._query;const f=new Rc(c);l={next:p=>{e[o]&&e[o](new Va(c,f,d,p))},error:e[o+1],complete:e[o+2]},lj(t._query)}return function(f,p,g,m){const w=new Kv(m),v=new Zb(p,w,g);return f.asyncQueue.enqueueAndForget(async()=>Yb(await Sd(f),v)),()=>{w.Za(),f.asyncQueue.enqueueAndForget(async()=>Xb(await Sd(f),v))}}(jn(c),u,a,l)}function yQ(t,e){return DK(jn(t=ze(t,Vt)),H1(e)?e:{next:e})}function nm(t,e){return function(r,s){const i=new _n;return r.asyncQueue.enqueueAndForget(async()=>oK(await aT(r),s,i)),i.promise}(jn(t),e)}function xT(t,e,n){const r=n.docs.get(e._key),s=new Rc(t);return new ao(t,s,e._key,r,new Ul(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vQ={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wQ=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ac(e)}set(e,n,r){this._verifyNotCommitted();const s=na(e,this._firestore),i=i0(s.converter,n,r),o=Zv(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,yt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=na(e,this._firestore);let o;return o=typeof(n=Je(n))=="string"||n instanceof Ma?mT(this._dataReader,"WriteBatch.update",i._key,n,r,s):pT(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,yt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=na(e,this._firestore);return this._mutations=this._mutations.concat(new qd(n._key,yt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new K($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function na(t,e){if((t=Je(t)).firestore!==e)throw new K($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _Q=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Ac(n)}get(n){const r=na(n,this._firestore),s=new aQ(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return ae();const o=i[0];if(o.isFoundDocument())return new op(this._firestore,s,o.key,o,r.converter);if(o.isNoDocument())return new op(this._firestore,s,r._key,null,r.converter);throw ae()})}set(n,r,s){const i=na(n,this._firestore),o=i0(i.converter,r,s),a=Zv(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,s);return this._transaction.set(i._key,a),this}update(n,r,s,...i){const o=na(n,this._firestore);let a;return a=typeof(r=Je(r))=="string"||r instanceof Ma?mT(this._dataReader,"Transaction.update",o._key,r,s,i):pT(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=na(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=na(e,this._firestore),r=new Rc(this._firestore);return super.get(e).then(s=>new ao(this._firestore,r,n._key,s._document,new Ul(!1,!1),n.converter))}};function EQ(t,e,n){t=ze(t,Vt);const r=Object.assign(Object.assign({},vQ),n);return function(i){if(i.maxAttempts<1)throw new K($.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,a){const l=new _n;return i.asyncQueue.enqueueAndForget(async()=>{const c=await CK(i);new IK(i.asyncQueue,c,a,o,l).au()}),l.promise}(jn(t),s=>e(new _Q(t,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xQ(){return new em("deleteField")}function bQ(){return new uT("serverTimestamp")}function TQ(...t){return new dT("arrayUnion",t)}function SQ(...t){return new hT("arrayRemove",t)}function IQ(t){return new fT("increment",t)}(function(e,n=!0){(function(s){Bd=s})(Ga),Ra(new no("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Vt(new kW(r.getProvider("auth-internal")),new MW(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new K($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Na(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),ks(SC,"4.7.4",e),ks(SC,"4.7.4","esm2017")})();const AQ="@firebase/firestore-compat",CQ="0.3.39";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new K("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(){if(typeof Uint8Array>"u")throw new K("unimplemented","Uint8Arrays are not available in this environment.")}function jR(){if(!lH())throw new K("unimplemented","Blobs are unavailable in Firestore in this environment.")}class ap{constructor(e){this._delegate=e}static fromBase64String(e){return jR(),new ap(vi.fromBase64String(e))}static fromUint8Array(e){return VR(),new ap(vi.fromUint8Array(e))}toBase64(){return jR(),this._delegate.toBase64()}toUint8Array(){return VR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(t){return RQ(t,["next","error","complete"])}function RQ(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PQ{enableIndexedDbPersistence(e,n){return BK(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return UK(e._delegate)}clearIndexedDbPersistence(e){return $K(e._delegate)}}class fj{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Na||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&gi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){MK(this._delegate,e,n,r)}enableNetwork(){return zK(this._delegate)}disableNetwork(){return WK(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,WV("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return qK(this._delegate)}onSnapshotsInSync(e){return yQ(this._delegate,e)}get app(){if(!this._appCompat)throw new K("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Id(this,YV(this._delegate,e))}catch(n){throw zn(n,"collection()","Firestore.collection()")}}doc(e){try{return new os(this,Hy(this._delegate,e))}catch(n){throw zn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new qn(this,VK(this._delegate,e))}catch(n){throw zn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return EQ(this._delegate,n=>e(new pj(this,n)))}batch(){return jn(this._delegate),new mj(new wQ(this._delegate,e=>nm(this._delegate,e)))}loadBundle(e){return HK(this._delegate,e)}namedQuery(e){return GK(this._delegate,e).then(n=>n?new qn(this,n):null)}}class o0 extends ET{constructor(e){super(),this.firestore=e}convertBytes(e){return new ap(new vi(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return os.forKey(n,this.firestore,null)}}function NQ(t){CW(t)}class pj{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new o0(e)}get(e){const n=$l(e);return this._delegate.get(n).then(r=>new lp(this._firestore,new ao(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const s=$l(e);return r?(bT("Transaction.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const i=$l(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,r,...s),this}delete(e){const n=$l(e);return this._delegate.delete(n),this}}class mj{constructor(e){this._delegate=e}set(e,n,r){const s=$l(e);return r?(bT("WriteBatch.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const i=$l(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,r,...s),this}delete(e){const n=$l(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class cc{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new cf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new cp(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=cc.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let i=s.get(n);return i||(i=new cc(e,new o0(e),n),s.set(n,i)),i}}cc.INSTANCES=new WeakMap;class os{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new o0(e)}static forPath(e,n,r){if(e.length%2!==0)throw new K("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new os(n,new xt(n._delegate,r,new te(e)))}static forKey(e,n,r){return new os(n,new xt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Id(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Id(this.firestore,YV(this._delegate,e))}catch(n){throw zn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Je(e),e instanceof xt?XV(this._delegate,e):!1}set(e,n){n=bT("DocumentReference.set",n);try{return n?LR(this._delegate,e,n):LR(this._delegate,e)}catch(r){throw zn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?MR(this._delegate,e):MR(this._delegate,e,n,...r)}catch(s){throw zn(s,"updateDoc()","DocumentReference.update()")}}delete(){return mQ(this._delegate)}onSnapshot(...e){const n=gj(e),r=yj(e,s=>new lp(this.firestore,new ao(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return hj(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=uQ(this._delegate):(e==null?void 0:e.source)==="server"?n=dQ(this._delegate):n=cQ(this._delegate),n.then(r=>new lp(this.firestore,new ao(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new os(this.firestore,e?this._delegate.withConverter(cc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function zn(t,e,n){return t.message=t.message.replace(e,n),t}function gj(t){for(const e of t)if(typeof e=="object"&&!K1(e))return e;return{}}function yj(t,e){var n,r;let s;return K1(t[0])?s=t[0]:K1(t[1])?s=t[1]:typeof t[0]=="function"?s={next:t[0],error:t[1],complete:t[2]}:s={next:t[1],error:t[2],complete:t[3]},{next:i=>{s.next&&s.next(e(i))},error:(n=s.error)===null||n===void 0?void 0:n.bind(s),complete:(r=s.complete)===null||r===void 0?void 0:r.bind(s)}}class lp{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new os(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return dj(this._delegate,e._delegate)}}class cp extends lp{data(e){const n=this._delegate.data(e);return this._delegate._converter||RW(n!==void 0),n}}class qn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new o0(e)}where(e,n,r){try{return new qn(this.firestore,jo(this._delegate,ZK(e,n,r)))}catch(s){throw zn(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new qn(this.firestore,jo(this._delegate,eQ(e,n)))}catch(r){throw zn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new qn(this.firestore,jo(this._delegate,tQ(e)))}catch(n){throw zn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new qn(this.firestore,jo(this._delegate,nQ(e)))}catch(n){throw zn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new qn(this.firestore,jo(this._delegate,rQ(...e)))}catch(n){throw zn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new qn(this.firestore,jo(this._delegate,sQ(...e)))}catch(n){throw zn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new qn(this.firestore,jo(this._delegate,iQ(...e)))}catch(n){throw zn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new qn(this.firestore,jo(this._delegate,oQ(...e)))}catch(n){throw zn(n,"endAt()","Query.endAt()")}}isEqual(e){return JV(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=fQ(this._delegate):(e==null?void 0:e.source)==="server"?n=pQ(this._delegate):n=hQ(this._delegate),n.then(r=>new Q1(this.firestore,new Va(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=gj(e),r=yj(e,s=>new Q1(this.firestore,new Va(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return hj(this._delegate,n,r)}withConverter(e){return new qn(this.firestore,e?this._delegate.withConverter(cc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class kQ{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new cp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Q1{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new qn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new cp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new kQ(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new cp(this._firestore,r))})}isEqual(e){return dj(this._delegate,e._delegate)}}class Id extends qn{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new os(this.firestore,e):null}doc(e){try{return e===void 0?new os(this.firestore,Hy(this._delegate)):new os(this.firestore,Hy(this._delegate,e))}catch(n){throw zn(n,"doc()","CollectionReference.doc()")}}add(e){return gQ(this._delegate,e).then(n=>new os(this.firestore,n))}isEqual(e){return XV(this._delegate,e._delegate)}withConverter(e){return new Id(this.firestore,e?this._delegate.withConverter(cc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function $l(t){return ze(t,xt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(...e){this._delegate=new Ma(...e)}static documentId(){return new TT(gt.keyField().canonicalString())}isEqual(e){return e=Je(e),e instanceof Ma?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e){this._delegate=e}static serverTimestamp(){const e=bQ();return e._methodName="FieldValue.serverTimestamp",new Ml(e)}static delete(){const e=xQ();return e._methodName="FieldValue.delete",new Ml(e)}static arrayUnion(...e){const n=TQ(...e);return n._methodName="FieldValue.arrayUnion",new Ml(n)}static arrayRemove(...e){const n=SQ(...e);return n._methodName="FieldValue.arrayRemove",new Ml(n)}static increment(e){const n=IQ(e);return n._methodName="FieldValue.increment",new Ml(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DQ={Firestore:fj,GeoPoint:Xv,Timestamp:zt,Blob:ap,Transaction:pj,WriteBatch:mj,DocumentReference:os,DocumentSnapshot:lp,Query:qn,QueryDocumentSnapshot:cp,QuerySnapshot:Q1,CollectionReference:Id,FieldPath:TT,FieldValue:Ml,setLogLevel:NQ,CACHE_SIZE_UNLIMITED:FK};function OQ(t,e){t.INTERNAL.registerComponent(new no("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),s=n.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},DQ)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LQ(t){OQ(t,(e,n)=>new fj(e,n,new PQ)),t.registerVersion(AQ,CQ)}LQ(Os);const MQ={apiKey:"AIzaSyDRyFSLBHW0YFUerFAI9jaRvfULlZzUrEg",authDomain:"story-gen-ee464.firebaseapp.com",projectId:"story-gen-ee464",storageBucket:"story-gen-ee464.firebasestorage.app",messagingSenderId:"270691858672",appId:"1:270691858672:web:71e038d6ed91d786912a35"};Os.apps.length?Os.app():Os.initializeApp(MQ);const VQ=new Bi,uf=yW(),Pe=Os.firestore(),vj=_.createContext(void 0),jQ=({children:t})=>{const[e,n]=_.useState(null);return _.useEffect(()=>{const r=uf.onAuthStateChanged(async s=>{if(s){n(s);const i=s.uid;(await Pe.collection("user").doc(i).get()).exists||await Pe.collection("user").doc(i).set({name:e!=null&&e.email?e.email.split("@")[0]:"",PhotoUrl:e!=null&&e.photoURL?e.photoURL:"",likes:0,desc:"",score:0})}else n(null)});return()=>r()},[e]),y.jsx(vj.Provider,{value:{currentUser:e},children:t})},$s=()=>{const t=_.useContext(vj);if(!t)throw new Error("useUser must be used within a UserProvider");return t},wj=t=>{const[e,n]=_.useState([]);return _.useEffect(()=>{let r;async function s(){try{r=Pe.collection("WrittenStories").where("author","==",t).onSnapshot(o=>{const a=[];o.forEach(l=>{const c=l.data();a.push({id:l.id,...c})}),n(a)})}catch(i){console.log(i)}}return s(),()=>{r&&r()}},[t]),{Data:e,setData:n}},rm=t=>{const[e,n]=_.useState();return _.useEffect(()=>{async function r(){try{const i=(await Pe.collection("user").doc(t).get()).data();i&&n(i)}catch(s){console.log(s)}}r().then(()=>{})},[t]),{author:e,setAuthor:n}},ST=_.createContext({});function a0(t){const e=_.useRef(null);return e.current===null&&(e.current=t()),e.current}const l0=_.createContext(null),IT=_.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class FQ extends _.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=r instanceof HTMLElement&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function BQ({children:t,isPresent:e,anchorX:n}){const r=_.useId(),s=_.useRef(null),i=_.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=_.useContext(IT);return _.useInsertionEffect(()=>{const{width:a,height:l,top:c,left:u,right:d}=i.current;if(e||!s.current||!a||!l)return;const f=n==="left"?`left: ${u}`:`right: ${d}`;s.current.dataset.motionPopId=r;const p=document.createElement("style");return o&&(p.nonce=o),document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${l}px !important;
            ${f}px !important;
            top: ${c}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[e]),y.jsx(FQ,{isPresent:e,childRef:s,sizeRef:i,children:_.cloneElement(t,{ref:s})})}const UQ=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o,anchorX:a})=>{const l=a0($Q),c=_.useId(),u=_.useCallback(f=>{l.set(f,!0);for(const p of l.values())if(!p)return;r&&r()},[l,r]),d=_.useMemo(()=>({id:c,initial:e,isPresent:n,custom:s,onExitComplete:u,register:f=>(l.set(f,!1),()=>l.delete(f))}),i?[Math.random(),u]:[n,u]);return _.useMemo(()=>{l.forEach((f,p)=>l.set(p,!1))},[n]),_.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),o==="popLayout"&&(t=y.jsx(BQ,{isPresent:n,anchorX:a,children:t})),y.jsx(l0.Provider,{value:d,children:t})};function $Q(){return new Map}function _j(t=!0){const e=_.useContext(l0);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=_.useId();_.useEffect(()=>{t&&s(i)},[t]);const o=_.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,o]:[!0]}const Km=t=>t.key||"";function FR(t){const e=[];return _.Children.forEach(t,n=>{_.isValidElement(n)&&e.push(n)}),e}const AT=typeof window<"u",CT=AT?_.useLayoutEffect:_.useEffect,Ej=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:a="left"})=>{const[l,c]=_j(o),u=_.useMemo(()=>FR(t),[t]),d=o&&!l?[]:u.map(Km),f=_.useRef(!0),p=_.useRef(u),g=a0(()=>new Map),[m,w]=_.useState(u),[v,E]=_.useState(u);CT(()=>{f.current=!1,p.current=u;for(let R=0;R<v.length;R++){const O=Km(v[R]);d.includes(O)?g.delete(O):g.get(O)!==!0&&g.set(O,!1)}},[v,d.length,d.join("-")]);const b=[];if(u!==m){let R=[...u];for(let O=0;O<v.length;O++){const I=v[O],A=Km(I);d.includes(A)||(R.splice(O,0,I),b.push(I))}i==="wait"&&b.length&&(R=b),E(FR(R)),w(u);return}const{forceRender:C}=_.useContext(ST);return y.jsx(y.Fragment,{children:v.map(R=>{const O=Km(R),I=o&&!l?!1:u===v||d.includes(O),A=()=>{if(g.has(O))g.set(O,!0);else return;let P=!0;g.forEach(D=>{D||(P=!1)}),P&&(C==null||C(),E(p.current),o&&(c==null||c()),r&&r())};return y.jsx(UQ,{isPresent:I,initial:!f.current||n?void 0:!1,custom:I?void 0:e,presenceAffectsLayout:s,mode:i,onExitComplete:I?void 0:A,anchorX:a,children:R},O)})})},Qn=t=>t;let qQ=Qn,Y1=Qn;function RT(t){let e;return()=>(e===void 0&&(e=t()),e)}const uc=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Yi=t=>t*1e3,Xi=t=>t/1e3,zQ={skipAnimations:!1,useManualTiming:!1};function WQ(t){let e=new Set,n=new Set,r=!1,s=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){i.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,u=!1,d=!1)=>{const p=d&&r?e:n;return u&&i.add(c),p.has(c)||p.add(c),c},cancel:c=>{n.delete(c),i.delete(c)},process:c=>{if(o=c,r){s=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,s&&(s=!1,l.process(c))}};return l}const Qm=["read","resolveKeyframes","update","preRender","render","postRender"],HQ=40;function xj(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=Qm.reduce((v,E)=>(v[E]=WQ(i),v),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:d,postRender:f}=o,p=()=>{const v=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(v-s.timestamp,HQ),1),s.timestamp=v,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),u.process(s),d.process(s),f.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(p))},g=()=>{n=!0,r=!0,s.isProcessing||t(p)};return{schedule:Qm.reduce((v,E)=>{const b=o[E];return v[E]=(C,R=!1,O=!1)=>(n||g(),b.schedule(C,R,O)),v},{}),cancel:v=>{for(let E=0;E<Qm.length;E++)o[Qm[E]].cancel(v)},state:s,steps:o}}const{schedule:He,cancel:wi,state:nn,steps:kw}=xj(typeof requestAnimationFrame<"u"?requestAnimationFrame:Qn,!0),bj=_.createContext({strict:!1}),BR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ad={};for(const t in BR)Ad[t]={isEnabled:e=>BR[t].some(n=>!!e[n])};function GQ(t){for(const e in t)Ad[e]={...Ad[e],...t[e]}}const KQ=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ky(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||KQ.has(t)}let Tj=t=>!Ky(t);function QQ(t){t&&(Tj=e=>e.startsWith("on")?!Ky(e):t(e))}try{QQ(require("@emotion/is-prop-valid").default)}catch{}function YQ(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(Tj(s)||n===!0&&Ky(s)||!e&&!Ky(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function XQ(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const c0=_.createContext({});function up(t){return typeof t=="string"||Array.isArray(t)}function u0(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const PT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],NT=["initial",...PT];function d0(t){return u0(t.animate)||NT.some(e=>up(t[e]))}function Sj(t){return!!(d0(t)||t.variants)}function JQ(t,e){if(d0(t)){const{initial:n,animate:r}=t;return{initial:n===!1||up(n)?n:void 0,animate:up(r)?r:void 0}}return t.inherit!==!1?e:{}}function ZQ(t){const{initial:e,animate:n}=JQ(t,_.useContext(c0));return _.useMemo(()=>({initial:e,animate:n}),[UR(e),UR(n)])}function UR(t){return Array.isArray(t)?t.join(" "):t}const eY=Symbol.for("motionComponentSymbol");function Ou(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function tY(t,e,n){return _.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ou(n)&&(n.current=r))},[e])}const kT=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),nY="framerAppearId",Ij="data-"+kT(nY),{schedule:DT,cancel:wge}=xj(queueMicrotask,!1),Aj=_.createContext({});function rY(t,e,n,r,s){var i,o;const{visualElement:a}=_.useContext(c0),l=_.useContext(bj),c=_.useContext(l0),u=_.useContext(IT).reducedMotion,d=_.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const f=d.current,p=_.useContext(Aj);f&&!f.projection&&s&&(f.type==="html"||f.type==="svg")&&sY(d.current,n,s,p);const g=_.useRef(!1);_.useInsertionEffect(()=>{f&&g.current&&f.update(n,c)});const m=n[Ij],w=_.useRef(!!m&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,m))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,m)));return CT(()=>{f&&(g.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),DT.render(f.render),w.current&&f.animationState&&f.animationState.animateChanges())}),_.useEffect(()=>{f&&(!w.current&&f.animationState&&f.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,m)}),w.current=!1))}),f}function sY(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Cj(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&Ou(a),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function Cj(t){if(t)return t.options.allowProjection!==!1?t.projection:Cj(t.parent)}function iY({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){var i,o;t&&GQ(t);function a(c,u){let d;const f={..._.useContext(IT),...c,layoutId:oY(c)},{isStatic:p}=f,g=ZQ(c),m=r(c,p);if(!p&&AT){aY();const w=lY(f);d=w.MeasureLayout,g.visualElement=rY(s,m,f,e,w.ProjectionNode)}return y.jsxs(c0.Provider,{value:g,children:[d&&g.visualElement?y.jsx(d,{visualElement:g.visualElement,...f}):null,n(s,c,tY(m,g.visualElement,u),m,p,g.visualElement)]})}a.displayName=`motion.${typeof s=="string"?s:`create(${(o=(i=s.displayName)!==null&&i!==void 0?i:s.name)!==null&&o!==void 0?o:""})`}`;const l=_.forwardRef(a);return l[eY]=s,l}function oY({layoutId:t}){const e=_.useContext(ST).id;return e&&t!==void 0?e+"-"+t:t}function aY(t,e){_.useContext(bj).strict}function lY(t){const{drag:e,layout:n}=Ad;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const cY=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function OT(t){return typeof t!="string"||t.includes("-")?!1:!!(cY.indexOf(t)>-1||/[A-Z]/u.test(t))}function $R(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function LT(t,e,n,r){if(typeof e=="function"){const[s,i]=$R(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=$R(r);e=e(n!==void 0?n:t.custom,s,i)}return e}const X1=t=>Array.isArray(t),uY=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),dY=t=>X1(t)?t[t.length-1]||0:t,On=t=>!!(t&&t.getVelocity);function $g(t){const e=On(t)?t.get():t;return uY(e)?e.toValue():e}function hY({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,s,i){const o={latestValues:fY(r,s,i,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const Rj=t=>(e,n)=>{const r=_.useContext(c0),s=_.useContext(l0),i=()=>hY(t,e,r,s);return n?i():a0(i)};function fY(t,e,n,r){const s={},i=r(t,{});for(const f in i)s[f]=$g(i[f]);let{initial:o,animate:a}=t;const l=d0(t),c=Sj(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const d=u?a:o;if(d&&typeof d!="boolean"&&!u0(d)){const f=Array.isArray(d)?d:[d];for(let p=0;p<f.length;p++){const g=LT(t,f[p]);if(g){const{transitionEnd:m,transition:w,...v}=g;for(const E in v){let b=v[E];if(Array.isArray(b)){const C=u?b.length-1:0;b=b[C]}b!==null&&(s[E]=b)}for(const E in m)s[E]=m[E]}}}return s}const Kd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Pc=new Set(Kd),Pj=t=>e=>typeof e=="string"&&e.startsWith(t),MT=Pj("--"),pY=Pj("var(--"),VT=t=>pY(t)?mY.test(t.split("/*")[0].trim()):!1,mY=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Nj=(t,e)=>e&&typeof t=="number"?e.transform(t):t,_i=(t,e,n)=>n>e?e:n<t?t:n,Qd={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},dp={...Qd,transform:t=>_i(0,1,t)},Ym={...Qd,default:1},sm=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),$o=sm("deg"),di=sm("%"),Ee=sm("px"),gY=sm("vh"),yY=sm("vw"),qR={...di,parse:t=>di.parse(t)/100,transform:t=>di.transform(t*100)},vY={borderWidth:Ee,borderTopWidth:Ee,borderRightWidth:Ee,borderBottomWidth:Ee,borderLeftWidth:Ee,borderRadius:Ee,radius:Ee,borderTopLeftRadius:Ee,borderTopRightRadius:Ee,borderBottomRightRadius:Ee,borderBottomLeftRadius:Ee,width:Ee,maxWidth:Ee,height:Ee,maxHeight:Ee,top:Ee,right:Ee,bottom:Ee,left:Ee,padding:Ee,paddingTop:Ee,paddingRight:Ee,paddingBottom:Ee,paddingLeft:Ee,margin:Ee,marginTop:Ee,marginRight:Ee,marginBottom:Ee,marginLeft:Ee,backgroundPositionX:Ee,backgroundPositionY:Ee},wY={rotate:$o,rotateX:$o,rotateY:$o,rotateZ:$o,scale:Ym,scaleX:Ym,scaleY:Ym,scaleZ:Ym,skew:$o,skewX:$o,skewY:$o,distance:Ee,translateX:Ee,translateY:Ee,translateZ:Ee,x:Ee,y:Ee,z:Ee,perspective:Ee,transformPerspective:Ee,opacity:dp,originX:qR,originY:qR,originZ:Ee},zR={...Qd,transform:Math.round},jT={...vY,...wY,zIndex:zR,size:Ee,fillOpacity:dp,strokeOpacity:dp,numOctaves:zR},_Y={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},EY=Kd.length;function xY(t,e,n){let r="",s=!0;for(let i=0;i<EY;i++){const o=Kd[i],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=Nj(a,jT[o]);if(!l){s=!1;const u=_Y[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function FT(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(Pc.has(l)){o=!0;continue}else if(MT(l)){s[l]=c;continue}else{const u=Nj(c,jT[l]);l.startsWith("origin")?(a=!0,i[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=xY(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=i;r.transformOrigin=`${l} ${c} ${u}`}}const bY={offset:"stroke-dashoffset",array:"stroke-dasharray"},TY={offset:"strokeDashoffset",array:"strokeDasharray"};function SY(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?bY:TY;t[i.offset]=Ee.transform(-r);const o=Ee.transform(e),a=Ee.transform(n);t[i.array]=`${o} ${a}`}function WR(t,e,n){return typeof t=="string"?t:Ee.transform(e+n*t)}function IY(t,e,n){const r=WR(e,t.x,t.width),s=WR(n,t.y,t.height);return`${r} ${s}`}function BT(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d){if(FT(t,c,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:p,dimensions:g}=t;f.transform&&(g&&(p.transform=f.transform),delete f.transform),g&&(s!==void 0||i!==void 0||p.transform)&&(p.transformOrigin=IY(g,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),o!==void 0&&SY(f,o,a,l,!1)}const UT=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),kj=()=>({...UT(),attrs:{}}),$T=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Dj(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const Oj=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Lj(t,e,n,r){Dj(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(Oj.has(s)?s:kT(s),e.attrs[s])}const hp={};function AY(t){for(const e in t)hp[e]=t[e],MT(e)&&(hp[e].isCSSVariable=!0)}function Mj(t,{layout:e,layoutId:n}){return Pc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!hp[t]||t==="opacity")}function qT(t,e,n){var r;const{style:s}=t,i={};for(const o in s)(On(s[o])||e.style&&On(e.style[o])||Mj(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(i[o]=s[o]);return i}function Vj(t,e,n){const r=qT(t,e,n);for(const s in t)if(On(t[s])||On(e[s])){const i=Kd.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}function CY(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const HR=["x","y","width","height","cx","cy","r"],RY={useVisualState:Rj({scrapeMotionValuesFromProps:Vj,createRenderState:kj,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:s})=>{if(!n)return;let i=!!t.drag;if(!i){for(const a in s)if(Pc.has(a)){i=!0;break}}if(!i)return;let o=!e;if(e)for(let a=0;a<HR.length;a++){const l=HR[a];t[l]!==e[l]&&(o=!0)}o&&He.read(()=>{CY(n,r),He.render(()=>{BT(r,s,$T(n.tagName),t.transformTemplate),Lj(n,r)})})}})},PY={useVisualState:Rj({scrapeMotionValuesFromProps:qT,createRenderState:UT})};function jj(t,e,n){for(const r in e)!On(e[r])&&!Mj(r,n)&&(t[r]=e[r])}function NY({transformTemplate:t},e){return _.useMemo(()=>{const n=UT();return FT(n,e,t),Object.assign({},n.vars,n.style)},[e])}function kY(t,e){const n=t.style||{},r={};return jj(r,n,t),Object.assign(r,NY(t,e)),r}function DY(t,e){const n={},r=kY(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function OY(t,e,n,r){const s=_.useMemo(()=>{const i=kj();return BT(i,e,$T(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};jj(i,t.style,t),s.style={...i,...s.style}}return s}function LY(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(OT(n)?OY:DY)(r,i,o,n),c=YQ(r,typeof n=="string",t),u=n!==_.Fragment?{...c,...l,ref:s}:{},{children:d}=r,f=_.useMemo(()=>On(d)?d.get():d,[d]);return _.createElement(n,{...u,children:f})}}function MY(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...OT(r)?RY:PY,preloadedFeatures:t,useRender:LY(s),createVisualElement:e,Component:r};return iY(o)}}function Fj(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function h0(t,e,n){const r=t.getProps();return LT(r,e,n!==void 0?n:r.custom,t)}const Bj=RT(()=>window.ScrollTimeline!==void 0);class VY{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>{if(Bj()&&s.attachTimeline)return s.attachTimeline(e);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class jY extends VY{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function zT(t,e){return t?t[e]||t.default||t:void 0}const J1=2e4;function Uj(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<J1;)e+=n,r=t.next(e);return e>=J1?1/0:e}function WT(t){return typeof t=="function"}function GR(t,e){t.timeline=e,t.onfinish=null}const HT=t=>Array.isArray(t)&&typeof t[0]=="number",FY={linearEasing:void 0};function BY(t,e){const n=RT(t);return()=>{var r;return(r=FY[e])!==null&&r!==void 0?r:n()}}const Qy=BY(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),$j=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=t(uc(0,s-1,i))+", ";return`linear(${r.substring(0,r.length-2)})`};function qj(t){return!!(typeof t=="function"&&Qy()||!t||typeof t=="string"&&(t in Z1||Qy())||HT(t)||Array.isArray(t)&&t.every(qj))}const Uh=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Z1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Uh([0,.65,.55,1]),circOut:Uh([.55,0,1,.45]),backIn:Uh([.31,.01,.66,-.59]),backOut:Uh([.33,1.53,.69,.99])};function zj(t,e){if(t)return typeof t=="function"&&Qy()?$j(t,e):HT(t)?Uh(t):Array.isArray(t)?t.map(n=>zj(n,e)||Z1.easeOut):Z1[t]}const xs={x:!1,y:!1};function Wj(){return xs.x||xs.y}function Hj(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let s=document;const i=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function Gj(t,e){const n=Hj(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function KR(t){return!(t.pointerType==="touch"||Wj())}function UY(t,e,n={}){const[r,s,i]=Gj(t,n),o=a=>{if(!KR(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const u=d=>{KR(d)&&(c(d),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,s)};return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const Kj=(t,e)=>e?t===e?!0:Kj(t,e.parentElement):!1,GT=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,$Y=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function qY(t){return $Y.has(t.tagName)||t.tabIndex!==-1}const $h=new WeakSet;function QR(t){return e=>{e.key==="Enter"&&t(e)}}function Dw(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const zY=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=QR(()=>{if($h.has(n))return;Dw(n,"down");const s=QR(()=>{Dw(n,"up")}),i=()=>Dw(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function YR(t){return GT(t)&&!Wj()}function WY(t,e,n={}){const[r,s,i]=Gj(t,n),o=a=>{const l=a.currentTarget;if(!YR(a)||$h.has(l))return;$h.add(l);const c=e(l,a),u=(p,g)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),!(!YR(p)||!$h.has(l))&&($h.delete(l),typeof c=="function"&&c(p,{success:g}))},d=p=>{u(p,n.useGlobalTarget||Kj(l,p.target))},f=p=>{u(p,!1)};window.addEventListener("pointerup",d,s),window.addEventListener("pointercancel",f,s)};return r.forEach(a=>{!qY(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),a.addEventListener("focus",c=>zY(c,s),s)}),i}function HY(t){return t==="x"||t==="y"?xs[t]?null:(xs[t]=!0,()=>{xs[t]=!1}):xs.x||xs.y?null:(xs.x=xs.y=!0,()=>{xs.x=xs.y=!1})}const Qj=new Set(["width","height","top","left","right","bottom",...Kd]);let qg;function GY(){qg=void 0}const hi={now:()=>(qg===void 0&&hi.set(nn.isProcessing||zQ.useManualTiming?nn.timestamp:performance.now()),qg),set:t=>{qg=t,queueMicrotask(GY)}};function KT(t,e){t.indexOf(e)===-1&&t.push(e)}function QT(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class YT{constructor(){this.subscriptions=[]}add(e){return KT(this.subscriptions,e),()=>QT(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function XT(t,e){return e?t*(1e3/e):0}const XR=30,KY=t=>!isNaN(parseFloat(t));class QY{constructor(e,n={}){this.version="12.0.6",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const i=hi.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=hi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=KY(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new YT);const r=this.events[e].add(n);return e==="change"?()=>{r(),He.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=hi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>XR)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,XR);return XT(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Gi(t,e){return new QY(t,e)}function YY(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Gi(n))}function XY(t,e){const n=h0(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=dY(i[o]);YY(t,o,a)}}function JY(t){return!!(On(t)&&t.add)}function eE(t,e){const n=t.getValue("willChange");if(JY(n))return n.add(e)}function Yj(t){return t.props[Ij]}const Xj=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,ZY=1e-7,eX=12;function tX(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=Xj(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>ZY&&++a<eX);return o}function im(t,e,n,r){if(t===e&&n===r)return Qn;const s=i=>tX(i,0,1,t,n);return i=>i===0||i===1?i:Xj(s(i),e,r)}const Jj=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Zj=t=>e=>1-t(1-e),eF=im(.33,1.53,.69,.99),JT=Zj(eF),tF=Jj(JT),nF=t=>(t*=2)<1?.5*JT(t):.5*(2-Math.pow(2,-10*(t-1))),ZT=t=>1-Math.sin(Math.acos(t)),rF=Zj(ZT),sF=Jj(ZT),iF=t=>/^0[^.\s]+$/u.test(t);function nX(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||iF(t):!0}const df=t=>Math.round(t*1e5)/1e5,eS=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function rX(t){return t==null}const sX=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,tS=(t,e)=>n=>!!(typeof n=="string"&&sX.test(n)&&n.startsWith(t)||e&&!rX(n)&&Object.prototype.hasOwnProperty.call(n,e)),oF=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(eS);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},iX=t=>_i(0,255,t),Ow={...Qd,transform:t=>Math.round(iX(t))},ql={test:tS("rgb","red"),parse:oF("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Ow.transform(t)+", "+Ow.transform(e)+", "+Ow.transform(n)+", "+df(dp.transform(r))+")"};function oX(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const tE={test:tS("#"),parse:oX,transform:ql.transform},Lu={test:tS("hsl","hue"),parse:oF("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+di.transform(df(e))+", "+di.transform(df(n))+", "+df(dp.transform(r))+")"},Rn={test:t=>ql.test(t)||tE.test(t)||Lu.test(t),parse:t=>ql.test(t)?ql.parse(t):Lu.test(t)?Lu.parse(t):tE.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ql.transform(t):Lu.transform(t)},aX=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function lX(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(eS))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(aX))===null||n===void 0?void 0:n.length)||0)>0}const aF="number",lF="color",cX="var",uX="var(",JR="${}",dX=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function fp(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=e.replace(dX,l=>(Rn.test(l)?(r.color.push(i),s.push(lF),n.push(Rn.parse(l))):l.startsWith(uX)?(r.var.push(i),s.push(cX),n.push(l)):(r.number.push(i),s.push(aF),n.push(parseFloat(l))),++i,JR)).split(JR);return{values:n,split:a,indexes:r,types:s}}function cF(t){return fp(t).values}function uF(t){const{split:e,types:n}=fp(t),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const a=n[o];a===aF?i+=df(s[o]):a===lF?i+=Rn.transform(s[o]):i+=s[o]}return i}}const hX=t=>typeof t=="number"?0:t;function fX(t){const e=cF(t);return uF(t)(e.map(hX))}const ja={test:lX,parse:cF,createTransformer:uF,getAnimatableNone:fX},pX=new Set(["brightness","contrast","saturate","opacity"]);function mX(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(eS)||[];if(!r)return t;const s=n.replace(r,"");let i=pX.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const gX=/\b([a-z-]*)\(.*?\)/gu,nE={...ja,getAnimatableNone:t=>{const e=t.match(gX);return e?e.map(mX).join(" "):t}},yX={...jT,color:Rn,backgroundColor:Rn,outlineColor:Rn,fill:Rn,stroke:Rn,borderColor:Rn,borderTopColor:Rn,borderRightColor:Rn,borderBottomColor:Rn,borderLeftColor:Rn,filter:nE,WebkitFilter:nE},nS=t=>yX[t];function dF(t,e){let n=nS(t);return n!==nE&&(n=ja),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const vX=new Set(["auto","none","0"]);function wX(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!vX.has(i)&&fp(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=dF(n,s)}const ZR=t=>t===Qd||t===Ee,eP=(t,e)=>parseFloat(t.split(", ")[e]),tP=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return eP(s[1],e);{const i=r.match(/^matrix\((.+)\)$/u);return i?eP(i[1],t):0}},_X=new Set(["x","y","z"]),EX=Kd.filter(t=>!_X.has(t));function xX(t){const e=[];return EX.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Cd={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:tP(4,13),y:tP(5,14)};Cd.translateX=Cd.x;Cd.translateY=Cd.y;const Gl=new Set;let rE=!1,sE=!1;function hF(){if(sE){const t=Array.from(Gl).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=xX(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}sE=!1,rE=!1,Gl.forEach(t=>t.complete()),Gl.clear()}function fF(){Gl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(sE=!0)})}function bX(){fF(),hF()}class rS{constructor(e,n,r,s,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Gl.add(this),rE||(rE=!0,He.read(fF),He.resolveKeyframes(hF))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const o=s==null?void 0:s.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&o===void 0&&s.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Gl.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Gl.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const pF=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),TX=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function SX(t){const e=TX.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function mF(t,e,n=1){const[r,s]=SX(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return pF(o)?parseFloat(o):o}return VT(s)?mF(s,e,n+1):s}const gF=t=>e=>e.test(t),IX={test:t=>t==="auto",parse:t=>t},yF=[Qd,Ee,di,$o,yY,gY,IX],nP=t=>yF.find(gF(t));class vF extends rS{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),VT(c))){const u=mF(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!Qj.has(r)||e.length!==2)return;const[s,i]=e,o=nP(s),a=nP(i);if(o!==a)if(ZR(o)&&ZR(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)nX(e[s])&&r.push(s);r.length&&wX(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Cd[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const i=n.getValue(r);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=Cd[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const rP=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ja.test(t)||t==="0")&&!t.startsWith("url("));function AX(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function CX(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=rP(s,e),a=rP(i,e);return!o||!a?!1:AX(t)||(n==="spring"||WT(n))&&r}const RX=t=>t!==null;function f0(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(RX),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const PX=40;class wF{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=hi.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>PX?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&bX(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=hi.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:i,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!CX(e,r,s,i))if(o)this.options.duration=0;else{l&&l(f0(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const wt=(t,e,n)=>t+(e-t)*n;function Lw(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function NX({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=Lw(l,a,t+1/3),i=Lw(l,a,t),o=Lw(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function Yy(t,e){return n=>n>0?e:t}const Mw=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},kX=[tE,ql,Lu],DX=t=>kX.find(e=>e.test(t));function sP(t){const e=DX(t);if(!e)return!1;let n=e.parse(t);return e===Lu&&(n=NX(n)),n}const iP=(t,e)=>{const n=sP(t),r=sP(e);if(!n||!r)return Yy(t,e);const s={...n};return i=>(s.red=Mw(n.red,r.red,i),s.green=Mw(n.green,r.green,i),s.blue=Mw(n.blue,r.blue,i),s.alpha=wt(n.alpha,r.alpha,i),ql.transform(s))},OX=(t,e)=>n=>e(t(n)),om=(...t)=>t.reduce(OX),iE=new Set(["none","hidden"]);function LX(t,e){return iE.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function MX(t,e){return n=>wt(t,e,n)}function sS(t){return typeof t=="number"?MX:typeof t=="string"?VT(t)?Yy:Rn.test(t)?iP:FX:Array.isArray(t)?_F:typeof t=="object"?Rn.test(t)?iP:VX:Yy}function _F(t,e){const n=[...t],r=n.length,s=t.map((i,o)=>sS(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function VX(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=sS(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function jX(t,e){var n;const r=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],a=t.indexes[o][s[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[i]=l,s[o]++}return r}const FX=(t,e)=>{const n=ja.createTransformer(e),r=fp(t),s=fp(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?iE.has(t)&&!s.values.length||iE.has(e)&&!r.values.length?LX(t,e):om(_F(jX(r,s),s.values),n):Yy(t,e)};function EF(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?wt(t,e,n):sS(t)(t,e)}const BX=5;function xF(t,e,n){const r=Math.max(e-BX,0);return XT(n-t(r),e-r)}const Ct={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Vw=.001;function UX({duration:t=Ct.duration,bounce:e=Ct.bounce,velocity:n=Ct.velocity,mass:r=Ct.mass}){let s,i,o=1-e;o=_i(Ct.minDamping,Ct.maxDamping,o),t=_i(Ct.minDuration,Ct.maxDuration,Xi(t)),o<1?(s=c=>{const u=c*o,d=u*t,f=u-n,p=oE(c,o),g=Math.exp(-d);return Vw-f/p*g},i=c=>{const d=c*o*t,f=d*n+n,p=Math.pow(o,2)*Math.pow(c,2)*t,g=Math.exp(-d),m=oE(Math.pow(c,2),o);return(-s(c)+Vw>0?-1:1)*((f-p)*g)/m}):(s=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-Vw+u*d},i=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const a=5/t,l=qX(s,i,a);if(t=Yi(t),isNaN(l))return{stiffness:Ct.stiffness,damping:Ct.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const $X=12;function qX(t,e,n){let r=n;for(let s=1;s<$X;s++)r=r-t(r)/e(r);return r}function oE(t,e){return t*Math.sqrt(1-e*e)}const zX=["duration","bounce"],WX=["stiffness","damping","mass"];function oP(t,e){return e.some(n=>t[n]!==void 0)}function HX(t){let e={velocity:Ct.velocity,stiffness:Ct.stiffness,damping:Ct.damping,mass:Ct.mass,isResolvedFromDuration:!1,...t};if(!oP(t,WX)&&oP(t,zX))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*_i(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Ct.mass,stiffness:s,damping:i}}else{const n=UX(t);e={...e,...n,mass:Ct.mass},e.isResolvedFromDuration=!0}return e}function bF(t=Ct.visualDuration,e=Ct.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:d,velocity:f,isResolvedFromDuration:p}=HX({...n,velocity:-Xi(n.velocity||0)}),g=f||0,m=c/(2*Math.sqrt(l*u)),w=o-i,v=Xi(Math.sqrt(l/u)),E=Math.abs(w)<5;r||(r=E?Ct.restSpeed.granular:Ct.restSpeed.default),s||(s=E?Ct.restDelta.granular:Ct.restDelta.default);let b;if(m<1){const R=oE(v,m);b=O=>{const I=Math.exp(-m*v*O);return o-I*((g+m*v*w)/R*Math.sin(R*O)+w*Math.cos(R*O))}}else if(m===1)b=R=>o-Math.exp(-v*R)*(w+(g+v*w)*R);else{const R=v*Math.sqrt(m*m-1);b=O=>{const I=Math.exp(-m*v*O),A=Math.min(R*O,300);return o-I*((g+m*v*w)*Math.sinh(A)+R*w*Math.cosh(A))/R}}const C={calculatedDuration:p&&d||null,next:R=>{const O=b(R);if(p)a.done=R>=d;else{let I=0;m<1&&(I=R===0?Yi(g):xF(b,R,O));const A=Math.abs(I)<=r,P=Math.abs(o-O)<=s;a.done=A&&P}return a.value=a.done?o:O,a},toString:()=>{const R=Math.min(Uj(C),J1),O=$j(I=>C.next(R*I).value,R,30);return R+"ms "+O}};return C}function aP({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],f={done:!1,value:d},p=A=>a!==void 0&&A<a||l!==void 0&&A>l,g=A=>a===void 0?l:l===void 0||Math.abs(a-A)<Math.abs(l-A)?a:l;let m=n*e;const w=d+m,v=o===void 0?w:o(w);v!==w&&(m=v-d);const E=A=>-m*Math.exp(-A/r),b=A=>v+E(A),C=A=>{const P=E(A),D=b(A);f.done=Math.abs(P)<=c,f.value=f.done?v:D};let R,O;const I=A=>{p(f.value)&&(R=A,O=bF({keyframes:[f.value,g(f.value)],velocity:xF(b,A,f.value),damping:s,stiffness:i,restDelta:c,restSpeed:u}))};return I(0),{calculatedDuration:null,next:A=>{let P=!1;return!O&&R===void 0&&(P=!0,C(A),I(A)),R!==void 0&&A>=R?O.next(A-R):(!P&&C(A),f)}}}const GX=im(.42,0,1,1),KX=im(0,0,.58,1),TF=im(.42,0,.58,1),QX=t=>Array.isArray(t)&&typeof t[0]!="number",lP={linear:Qn,easeIn:GX,easeInOut:TF,easeOut:KX,circIn:ZT,circInOut:sF,circOut:rF,backIn:JT,backInOut:tF,backOut:eF,anticipate:nF},cP=t=>{if(HT(t)){Y1(t.length===4);const[e,n,r,s]=t;return im(e,n,r,s)}else if(typeof t=="string")return Y1(lP[t]!==void 0),lP[t];return t};function YX(t,e,n){const r=[],s=n||EF,i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Qn:e;a=om(l,a)}r.push(a)}return r}function SF(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(Y1(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=YX(e,r,s),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const f=uc(t[d],t[d+1],u);return a[d](f)};return n?u=>c(_i(t[0],t[i-1],u)):c}function XX(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=uc(0,e,r);t.push(wt(n,1,s))}}function IF(t){const e=[0];return XX(e,t.length-1),e}function JX(t,e){return t.map(n=>n*e)}function ZX(t,e){return t.map(()=>e||TF).splice(0,t.length-1)}function Xy({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=QX(r)?r.map(cP):cP(r),i={done:!1,value:e[0]},o=JX(n&&n.length===e.length?n:IF(e),t),a=SF(o,e,{ease:Array.isArray(s)?s:ZX(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}const eJ=t=>{const e=({timestamp:n})=>t(n);return{start:()=>He.update(e,!0),stop:()=>wi(e),now:()=>nn.isProcessing?nn.timestamp:hi.now()}},tJ={decay:aP,inertia:aP,tween:Xy,keyframes:Xy,spring:bF},nJ=t=>t/100;class iS extends wF{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:s,keyframes:i}=this.options,o=(s==null?void 0:s.KeyframeResolver)||rS,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(i,a,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=this.options,a=WT(n)?n:tJ[n]||Xy;let l,c;a!==Xy&&typeof e[0]!="number"&&(l=om(nJ,EF(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});i==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=Uj(u));const{calculatedDuration:d}=u,f=d+s,p=f*(r+1)-s;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:A}=this.options;return{done:!0,value:A[A.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:d}=r;if(this.startTime===null)return i.next(0);const{delay:f,repeat:p,repeatType:g,repeatDelay:m,onUpdate:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-f*(this.speed>=0?1:-1),E=this.speed>=0?v<0:v>u;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let b=this.currentTime,C=i;if(p){const A=Math.min(this.currentTime,u)/d;let P=Math.floor(A),D=A%1;!D&&A>=1&&(D=1),D===1&&P--,P=Math.min(P,p+1),!!(P%2)&&(g==="reverse"?(D=1-D,m&&(D-=m/d)):g==="mirror"&&(C=o)),b=_i(0,1,D)*d}const R=E?{done:!1,value:l[0]}:C.next(b);a&&(R.value=a(R.value));let{done:O}=R;!E&&c!==null&&(O=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return I&&s!==void 0&&(R.value=f0(l,this.options,s)),w&&w(R.value),I&&this.finish(),R}get duration(){const{resolved:e}=this;return e?Xi(e.calculatedDuration):0}get time(){return Xi(this.currentTime)}set time(e){e=Yi(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Xi(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=eJ,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const rJ=new Set(["opacity","clipPath","filter","transform"]);function sJ(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=zj(a,s);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const iJ=RT(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Jy=10,oJ=2e4;function aJ(t){return WT(t.type)||t.type==="spring"||!qj(t.ease)}function lJ(t,e){const n=new iS({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let i=0;for(;!r.done&&i<oJ;)r=n.sample(i),s.push(r.value),i+=Jy;return{times:void 0,keyframes:s,duration:i-Jy,ease:"linear"}}const AF={anticipate:nF,backInOut:tF,circInOut:sF};function cJ(t){return t in AF}class uP extends wF{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:i}=this.options;this.resolver=new vF(i,(o,a)=>this.onKeyframesResolved(o,a),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:s,ease:i,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof i=="string"&&Qy()&&cJ(i)&&(i=AF[i]),aJ(this.options)){const{onComplete:d,onUpdate:f,motionValue:p,element:g,...m}=this.options,w=lJ(e,m);e=w.keyframes,e.length===1&&(e[1]=e[0]),r=w.duration,s=w.times,i=w.ease,o="keyframes"}const u=sJ(a.owner.current,l,e,{...this.options,duration:r,times:s,ease:i});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(GR(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:d}=this.options;a.set(f0(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:s,type:o,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Xi(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Xi(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Yi(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Qn;const{animation:r}=n;GR(r,e)}return Qn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:i,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:d,element:f,...p}=this.options,g=new iS({...p,keyframes:r,duration:s,type:i,ease:o,times:a,isGenerator:!0}),m=Yi(this.time);c.setWithVelocity(g.sample(m-Jy).value,g.sample(m).value,Jy)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:i,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return iJ()&&r&&rJ.has(r)&&!l&&!c&&!s&&i!=="mirror"&&o!==0&&a!=="inertia"}}const uJ={type:"spring",stiffness:500,damping:25,restSpeed:10},dJ=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),hJ={type:"keyframes",duration:.8},fJ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},pJ=(t,{keyframes:e})=>e.length>2?hJ:Pc.has(t)?t.startsWith("scale")?dJ(e[1]):uJ:fJ;function mJ({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const oS=(t,e,n,r={},s,i)=>o=>{const a=zT(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Yi(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:s};mJ(a)||(u={...u,...pJ(t,u)}),u.duration&&(u.duration=Yi(u.duration)),u.repeatDelay&&(u.repeatDelay=Yi(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(d=!0)),d&&!i&&e.get()!==void 0){const f=f0(u.keyframes,a);if(f!==void 0)return He.update(()=>{u.onUpdate(f),u.onComplete()}),new jY([])}return!i&&uP.supports(u)?new uP(u):new iS(u)};function gJ({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function CF(t,e,{delay:n=0,transitionOverride:r,type:s}={}){var i;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const d in l){const f=t.getValue(d,(i=t.latestValues[d])!==null&&i!==void 0?i:null),p=l[d];if(p===void 0||u&&gJ(u,d))continue;const g={delay:n,...zT(o||{},d)};let m=!1;if(window.MotionHandoffAnimation){const v=Yj(t);if(v){const E=window.MotionHandoffAnimation(v,d,He);E!==null&&(g.startTime=E,m=!0)}}eE(t,d),f.start(oS(d,f,p,t.shouldReduceMotion&&Qj.has(d)?{type:!1}:g,t,m));const w=f.animation;w&&c.push(w)}return a&&Promise.all(c).then(()=>{He.update(()=>{a&&XY(t,a)})}),c}function aE(t,e,n={}){var r;const s=h0(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const o=s?()=>Promise.all(CF(t,s,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=i;return yJ(t,e,u+c,d,f,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(n.delay)])}function yJ(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(vJ).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(aE(c,e,{...i,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function vJ(t,e){return t.sortNodePosition(e)}function wJ(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>aE(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=aE(t,e,n);else{const s=typeof e=="function"?h0(t,e,n.custom):e;r=Promise.all(CF(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const _J=NT.length;function RF(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?RF(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<_J;n++){const r=NT[n],s=t.props[r];(up(s)||s===!1)&&(e[r]=s)}return e}const EJ=[...PT].reverse(),xJ=PT.length;function bJ(t){return e=>Promise.all(e.map(({animation:n,options:r})=>wJ(t,n,r)))}function TJ(t){let e=bJ(t),n=dP(),r=!0;const s=l=>(c,u)=>{var d;const f=h0(t,u,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:p,transitionEnd:g,...m}=f;c={...c,...m,...g}}return c};function i(l){e=l(t)}function o(l){const{props:c}=t,u=RF(t.parent)||{},d=[],f=new Set;let p={},g=1/0;for(let w=0;w<xJ;w++){const v=EJ[w],E=n[v],b=c[v]!==void 0?c[v]:u[v],C=up(b),R=v===l?E.isActive:null;R===!1&&(g=w);let O=b===u[v]&&b!==c[v]&&C;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),E.protectedKeys={...p},!E.isActive&&R===null||!b&&!E.prevProp||u0(b)||typeof b=="boolean")continue;const I=SJ(E.prevProp,b);let A=I||v===l&&E.isActive&&!O&&C||w>g&&C,P=!1;const D=Array.isArray(b)?b:[b];let M=D.reduce(s(v),{});R===!1&&(M={});const{prevResolvedValues:V={}}=E,L={...V,...M},W=Z=>{A=!0,f.has(Z)&&(P=!0,f.delete(Z)),E.needsAnimating[Z]=!0;const U=t.getValue(Z);U&&(U.liveStyle=!1)};for(const Z in L){const U=M[Z],Y=V[Z];if(p.hasOwnProperty(Z))continue;let G=!1;X1(U)&&X1(Y)?G=!Fj(U,Y):G=U!==Y,G?U!=null?W(Z):f.add(Z):U!==void 0&&f.has(Z)?W(Z):E.protectedKeys[Z]=!0}E.prevProp=b,E.prevResolvedValues=M,E.isActive&&(p={...p,...M}),r&&t.blockInitialAnimation&&(A=!1),A&&(!(O&&I)||P)&&d.push(...D.map(Z=>({animation:Z,options:{type:v}})))}if(f.size){const w={};f.forEach(v=>{const E=t.getBaseTarget(v),b=t.getValue(v);b&&(b.liveStyle=!0),w[v]=E??null}),d.push({animation:w})}let m=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(m=!1),r=!1,m?e(d):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(f=>{var p;return(p=f.animationState)===null||p===void 0?void 0:p.setActive(l,c)}),n[l].isActive=c;const d=o(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=dP(),r=!0}}}function SJ(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Fj(e,t):!1}function Sl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function dP(){return{animate:Sl(!0),whileInView:Sl(),whileHover:Sl(),whileTap:Sl(),whileDrag:Sl(),whileFocus:Sl(),exit:Sl()}}class tl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class IJ extends tl{constructor(e){super(e),e.animationState||(e.animationState=TJ(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();u0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let AJ=0;class CJ extends tl{constructor(){super(...arguments),this.id=AJ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const RJ={animation:{Feature:IJ},exit:{Feature:CJ}};function pp(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function am(t){return{point:{x:t.pageX,y:t.pageY}}}const PJ=t=>e=>GT(e)&&t(e,am(e));function hf(t,e,n,r){return pp(t,e,PJ(n),r)}const hP=(t,e)=>Math.abs(t-e);function NJ(t,e){const n=hP(t.x,e.x),r=hP(t.y,e.y);return Math.sqrt(n**2+r**2)}class PF{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Fw(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=NJ(d.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:g}=d,{timestamp:m}=nn;this.history.push({...g,timestamp:m});const{onStart:w,onMove:v}=this.handlers;f||(w&&w(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=jw(f,this.transformPagePoint),He.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:p,onSessionEnd:g,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Fw(d.type==="pointercancel"?this.lastMoveEventInfo:jw(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,w),g&&g(d,w)},!GT(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=am(e),a=jw(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=nn;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,Fw(a,this.history)),this.removeListeners=om(hf(this.contextWindow,"pointermove",this.handlePointerMove),hf(this.contextWindow,"pointerup",this.handlePointerUp),hf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),wi(this.updatePoint)}}function jw(t,e){return e?{point:e(t.point)}:t}function fP(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Fw({point:t},e){return{point:t,delta:fP(t,NF(e)),offset:fP(t,kJ(e)),velocity:DJ(e,.1)}}function kJ(t){return t[0]}function NF(t){return t[t.length-1]}function DJ(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=NF(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Yi(e)));)n--;if(!r)return{x:0,y:0};const i=Xi(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const kF=1e-4,OJ=1-kF,LJ=1+kF,DF=.01,MJ=0-DF,VJ=0+DF;function Wn(t){return t.max-t.min}function jJ(t,e,n){return Math.abs(t-e)<=n}function pP(t,e,n,r=.5){t.origin=r,t.originPoint=wt(e.min,e.max,t.origin),t.scale=Wn(n)/Wn(e),t.translate=wt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=OJ&&t.scale<=LJ||isNaN(t.scale))&&(t.scale=1),(t.translate>=MJ&&t.translate<=VJ||isNaN(t.translate))&&(t.translate=0)}function ff(t,e,n,r){pP(t.x,e.x,n.x,r?r.originX:void 0),pP(t.y,e.y,n.y,r?r.originY:void 0)}function mP(t,e,n){t.min=n.min+e.min,t.max=t.min+Wn(e)}function FJ(t,e,n){mP(t.x,e.x,n.x),mP(t.y,e.y,n.y)}function gP(t,e,n){t.min=e.min-n.min,t.max=t.min+Wn(e)}function pf(t,e,n){gP(t.x,e.x,n.x),gP(t.y,e.y,n.y)}function BJ(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?wt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?wt(n,t,r.max):Math.min(t,n)),t}function yP(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function UJ(t,{top:e,left:n,bottom:r,right:s}){return{x:yP(t.x,n,s),y:yP(t.y,e,r)}}function vP(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function $J(t,e){return{x:vP(t.x,e.x),y:vP(t.y,e.y)}}function qJ(t,e){let n=.5;const r=Wn(t),s=Wn(e);return s>r?n=uc(e.min,e.max-r,t.min):r>s&&(n=uc(t.min,t.max-s,e.min)),_i(0,1,n)}function zJ(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const lE=.35;function WJ(t=lE){return t===!1?t=0:t===!0&&(t=lE),{x:wP(t,"left","right"),y:wP(t,"top","bottom")}}function wP(t,e,n){return{min:_P(t,e),max:_P(t,n)}}function _P(t,e){return typeof t=="number"?t:t[e]||0}const EP=()=>({translate:0,scale:1,origin:0,originPoint:0}),Mu=()=>({x:EP(),y:EP()}),xP=()=>({min:0,max:0}),Dt=()=>({x:xP(),y:xP()});function Xr(t){return[t("x"),t("y")]}function OF({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function HJ({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function GJ(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Bw(t){return t===void 0||t===1}function cE({scale:t,scaleX:e,scaleY:n}){return!Bw(t)||!Bw(e)||!Bw(n)}function Pl(t){return cE(t)||LF(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function LF(t){return bP(t.x)||bP(t.y)}function bP(t){return t&&t!=="0%"}function Zy(t,e,n){const r=t-n,s=e*r;return n+s}function TP(t,e,n,r,s){return s!==void 0&&(t=Zy(t,s,r)),Zy(t,n,r)+e}function uE(t,e=0,n=1,r,s){t.min=TP(t.min,e,n,r,s),t.max=TP(t.max,e,n,r,s)}function MF(t,{x:e,y:n}){uE(t.x,e.translate,e.scale,e.originPoint),uE(t.y,n.translate,n.scale,n.originPoint)}const SP=.999999999999,IP=1.0000000000001;function KJ(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ju(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,MF(t,o)),r&&Pl(i.latestValues)&&ju(t,i.latestValues))}e.x<IP&&e.x>SP&&(e.x=1),e.y<IP&&e.y>SP&&(e.y=1)}function Vu(t,e){t.min=t.min+e,t.max=t.max+e}function AP(t,e,n,r,s=.5){const i=wt(t.min,t.max,s);uE(t,e,n,i,r)}function ju(t,e){AP(t.x,e.x,e.scaleX,e.scale,e.originX),AP(t.y,e.y,e.scaleY,e.scale,e.originY)}function VF(t,e){return OF(GJ(t.getBoundingClientRect(),e))}function QJ(t,e,n){const r=VF(t,n),{scroll:s}=e;return s&&(Vu(r.x,s.offset.x),Vu(r.y,s.offset.y)),r}const jF=({current:t})=>t?t.ownerDocument.defaultView:null,YJ=new WeakMap;class XJ{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Dt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(am(u).point)},i=(u,d)=>{const{drag:f,dragPropagation:p,onDragStart:g}=this.getProps();if(f&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=HY(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Xr(w=>{let v=this.getAxisMotionValue(w).get()||0;if(di.test(v)){const{projection:E}=this.visualElement;if(E&&E.layout){const b=E.layout.layoutBox[w];b&&(v=Wn(b)*(parseFloat(v)/100))}}this.originPoint[w]=v}),g&&He.postRender(()=>g(u,d)),eE(this.visualElement,"transform");const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},o=(u,d)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:g,onDrag:m}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:w}=d;if(p&&this.currentDirection===null){this.currentDirection=JJ(w),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",d.point,w),this.updateAxis("y",d.point,w),this.visualElement.render(),m&&m(u,d)},a=(u,d)=>this.stop(u,d),l=()=>Xr(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new PF(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:jF(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&He.postRender(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Xm(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=BJ(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&Ou(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=UJ(s.layoutBox,n):this.constraints=!1,this.elastic=WJ(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Xr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=zJ(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ou(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=QJ(r,s.root,this.visualElement.getTransformPagePoint());let o=$J(s.layout.layoutBox,i);if(n){const a=n(HJ(o));this.hasMutatedConstraints=!!a,a&&(o=OF(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Xr(u=>{if(!Xm(u,n,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,g={type:"inertia",velocity:r?e[u]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return eE(this.visualElement,e),r.start(oS(e,r,0,n,this.visualElement,!1))}stopAnimation(){Xr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Xr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Xr(n=>{const{drag:r}=this.getProps();if(!Xm(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-wt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ou(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Xr(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=qJ({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Xr(o=>{if(!Xm(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(wt(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;YJ.set(this.visualElement,this);const e=this.visualElement.current,n=hf(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ou(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),He.read(r);const o=pp(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Xr(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=lE,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Xm(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function JJ(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class ZJ extends tl{constructor(e){super(e),this.removeGroupControls=Qn,this.removeListeners=Qn,this.controls=new XJ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Qn}unmount(){this.removeGroupControls(),this.removeListeners()}}const CP=t=>(e,n)=>{t&&He.postRender(()=>t(e,n))};class eZ extends tl{constructor(){super(...arguments),this.removePointerDownListener=Qn}onPointerDown(e){this.session=new PF(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:jF(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:CP(e),onStart:CP(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&He.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=hf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const zg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function RP(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Sh={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ee.test(t))t=parseFloat(t);else return t;const n=RP(t,e.target.x),r=RP(t,e.target.y);return`${n}% ${r}%`}},tZ={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=ja.parse(t);if(s.length>5)return r;const i=ja.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=wt(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class nZ extends _.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;AY(rZ),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),zg.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||He.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),DT.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function FF(t){const[e,n]=_j(),r=_.useContext(ST);return y.jsx(nZ,{...t,layoutGroup:r,switchLayoutGroup:_.useContext(Aj),isPresent:e,safeToRemove:n})}const rZ={borderRadius:{...Sh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Sh,borderTopRightRadius:Sh,borderBottomLeftRadius:Sh,borderBottomRightRadius:Sh,boxShadow:tZ};function sZ(t,e,n){const r=On(t)?t:Gi(t);return r.start(oS("",r,e,n)),r.animation}function iZ(t){return t instanceof SVGElement&&t.tagName!=="svg"}const oZ=(t,e)=>t.depth-e.depth;class aZ{constructor(){this.children=[],this.isDirty=!1}add(e){KT(this.children,e),this.isDirty=!0}remove(e){QT(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(oZ),this.isDirty=!1,this.children.forEach(e)}}function lZ(t,e){const n=hi.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(wi(r),t(i-e))};return He.read(r,!0),()=>wi(r)}const BF=["TopLeft","TopRight","BottomLeft","BottomRight"],cZ=BF.length,PP=t=>typeof t=="string"?parseFloat(t):t,NP=t=>typeof t=="number"||Ee.test(t);function uZ(t,e,n,r,s,i){s?(t.opacity=wt(0,n.opacity!==void 0?n.opacity:1,dZ(r)),t.opacityExit=wt(e.opacity!==void 0?e.opacity:1,0,hZ(r))):i&&(t.opacity=wt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<cZ;o++){const a=`border${BF[o]}Radius`;let l=kP(e,a),c=kP(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||NP(l)===NP(c)?(t[a]=Math.max(wt(PP(l),PP(c),r),0),(di.test(c)||di.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=wt(e.rotate||0,n.rotate||0,r))}function kP(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const dZ=UF(0,.5,rF),hZ=UF(.5,.95,Qn);function UF(t,e,n){return r=>r<t?0:r>e?1:n(uc(t,e,r))}function DP(t,e){t.min=e.min,t.max=e.max}function Yr(t,e){DP(t.x,e.x),DP(t.y,e.y)}function OP(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function LP(t,e,n,r,s){return t-=e,t=Zy(t,1/n,r),s!==void 0&&(t=Zy(t,1/s,r)),t}function fZ(t,e=0,n=1,r=.5,s,i=t,o=t){if(di.test(e)&&(e=parseFloat(e),e=wt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=wt(i.min,i.max,r);t===i&&(a-=e),t.min=LP(t.min,e,n,a,s),t.max=LP(t.max,e,n,a,s)}function MP(t,e,[n,r,s],i,o){fZ(t,e[n],e[r],e[s],e.scale,i,o)}const pZ=["x","scaleX","originX"],mZ=["y","scaleY","originY"];function VP(t,e,n,r){MP(t.x,e,pZ,n?n.x:void 0,r?r.x:void 0),MP(t.y,e,mZ,n?n.y:void 0,r?r.y:void 0)}function jP(t){return t.translate===0&&t.scale===1}function $F(t){return jP(t.x)&&jP(t.y)}function FP(t,e){return t.min===e.min&&t.max===e.max}function gZ(t,e){return FP(t.x,e.x)&&FP(t.y,e.y)}function BP(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function qF(t,e){return BP(t.x,e.x)&&BP(t.y,e.y)}function UP(t){return Wn(t.x)/Wn(t.y)}function $P(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class yZ{constructor(){this.members=[]}add(e){KT(this.members,e),e.scheduleRender()}remove(e){if(QT(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function vZ(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:f,skewX:p,skewY:g}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),g&&(r+=`skewY(${g}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Nl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},qh=typeof window<"u"&&window.MotionDebug!==void 0,Uw=["","X","Y","Z"],wZ={visibility:"hidden"},qP=1e3;let _Z=0;function $w(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function zF(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Yj(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",He,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&zF(r)}function WF({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=_Z++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,qh&&(Nl.totalNodes=Nl.resolvedTargetDeltas=Nl.recalculatedProjection=0),this.nodes.forEach(bZ),this.nodes.forEach(CZ),this.nodes.forEach(RZ),this.nodes.forEach(TZ),qh&&window.MotionDebug.record(Nl)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new aZ)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new YT),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=iZ(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=lZ(f,250),zg.hasAnimatedSinceResize&&(zg.hasAnimatedSinceResize=!1,this.nodes.forEach(WP))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||OZ,{onLayoutAnimationStart:w,onLayoutAnimationComplete:v}=u.getProps(),E=!this.targetLayout||!qF(this.targetLayout,g),b=!f&&p;if(this.options.layoutRoot||this.resumeFrom||b||f&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,b);const C={...zT(m,"layout"),onPlay:w,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else f||WP(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,wi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(PZ),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&zF(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(zP);return}this.isUpdating||this.nodes.forEach(IZ),this.isUpdating=!1,this.nodes.forEach(AZ),this.nodes.forEach(EZ),this.nodes.forEach(xZ),this.clearAllSnapshots();const a=hi.now();nn.delta=_i(0,1e3/60,a-nn.timestamp),nn.timestamp=a,nn.isProcessing=!0,kw.update.process(nn),kw.preRender.process(nn),kw.render.process(nn),nn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,DT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(SZ),this.sharedNodes.forEach(NZ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,He.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){He.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Wn(this.snapshot.measuredBox.x)&&!Wn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!$F(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||Pl(this.latestValues)||u)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),LZ(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Dt();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(MZ))){const{scroll:u}=this.root;u&&(Vu(l.x,u.offset.x),Vu(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=Dt();if(Yr(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:f}=u;u!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&Yr(l,o),Vu(l.x,d.offset.x),Vu(l.y,d.offset.y))}return l}applyTransform(o,a=!1){const l=Dt();Yr(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&ju(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Pl(u.latestValues)&&ju(l,u.latestValues)}return Pl(this.latestValues)&&ju(l,this.latestValues),l}removeTransform(o){const a=Dt();Yr(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Pl(c.latestValues))continue;cE(c.latestValues)&&c.updateSnapshot();const u=Dt(),d=c.measurePageBox();Yr(u,d),VP(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Pl(this.latestValues)&&VP(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==nn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=nn.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),pf(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Yr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Dt(),this.targetWithTransforms=Dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),FJ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Yr(this.target,this.layout.layoutBox),MF(this.target,this.targetDelta)):Yr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),pf(this.relativeTargetOrigin,this.target,p.target),Yr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}qh&&Nl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||cE(this.parent.latestValues)||LF(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===nn.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Yr(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;KJ(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Dt());const{target:g}=a;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(OP(this.prevProjectionDelta.x,this.projectionDelta.x),OP(this.prevProjectionDelta.y,this.projectionDelta.y)),ff(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!$P(this.projectionDelta.x,this.prevProjectionDelta.x)||!$P(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),qh&&Nl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Mu(),this.projectionDelta=Mu(),this.projectionDeltaWithTransform=Mu()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=Mu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Dt(),p=l?l.source:void 0,g=this.layout?this.layout.source:void 0,m=p!==g,w=this.getStack(),v=!w||w.members.length<=1,E=!!(m&&!v&&this.options.crossfade===!0&&!this.path.some(DZ));this.animationProgress=0;let b;this.mixTargetDelta=C=>{const R=C/1e3;HP(d.x,o.x,R),HP(d.y,o.y,R),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(pf(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),kZ(this.relativeTarget,this.relativeTargetOrigin,f,R),b&&gZ(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Dt()),Yr(b,this.relativeTarget)),m&&(this.animationValues=u,uZ(u,c,this.latestValues,R,E,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(wi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=He.update(()=>{zg.hasAnimatedSinceResize=!0,this.currentAnimation=sZ(0,qP,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(qP),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&HF(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Dt();const d=Wn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=Wn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}Yr(a,l),ju(a,u),ff(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new yZ),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&$w("z",o,c,this.animationValues);for(let u=0;u<Uw.length;u++)$w(`rotate${Uw[u]}`,o,c,this.animationValues),$w(`skew${Uw[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return wZ;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=$g(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=$g(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Pl(this.latestValues)&&(m.transform=u?u({},""):"none",this.hasProjected=!1),m}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=vZ(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:p,y:g}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const m in hp){if(f[m]===void 0)continue;const{correct:w,applyTo:v,isCSSVariable:E}=hp[m],b=c.transform==="none"?f[m]:w(f[m],d);if(v){const C=v.length;for(let R=0;R<C;R++)c[v[R]]=b}else E?this.options.visualElement.renderState.vars[m]=b:c[m]=b}return this.options.layoutId&&(c.pointerEvents=d===this?$g(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(zP),this.root.sharedNodes.clear()}}}function EZ(t){t.updateLayout()}function xZ(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?Xr(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],p=Wn(f);f.min=r[d].min,f.max=f.min+p}):HF(i,n.layoutBox,r)&&Xr(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],p=Wn(r[d]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+p)});const a=Mu();ff(a,r,n.layoutBox);const l=Mu();o?ff(l,t.applyTransform(s,!0),n.measuredBox):ff(l,r,n.layoutBox);const c=!$F(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:p}=d;if(f&&p){const g=Dt();pf(g,n.layoutBox,f.layoutBox);const m=Dt();pf(m,r,p.layoutBox),qF(g,m)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=g,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function bZ(t){qh&&Nl.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function TZ(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function SZ(t){t.clearSnapshot()}function zP(t){t.clearMeasurements()}function IZ(t){t.isLayoutDirty=!1}function AZ(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function WP(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function CZ(t){t.resolveTargetDelta()}function RZ(t){t.calcProjection()}function PZ(t){t.resetSkewAndRotation()}function NZ(t){t.removeLeadSnapshot()}function HP(t,e,n){t.translate=wt(e.translate,0,n),t.scale=wt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function GP(t,e,n,r){t.min=wt(e.min,n.min,r),t.max=wt(e.max,n.max,r)}function kZ(t,e,n,r){GP(t.x,e.x,n.x,r),GP(t.y,e.y,n.y,r)}function DZ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const OZ={duration:.45,ease:[.4,0,.1,1]},KP=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),QP=KP("applewebkit/")&&!KP("chrome/")?Math.round:Qn;function YP(t){t.min=QP(t.min),t.max=QP(t.max)}function LZ(t){YP(t.x),YP(t.y)}function HF(t,e,n){return t==="position"||t==="preserve-aspect"&&!jJ(UP(e),UP(n),.2)}function MZ(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const VZ=WF({attachResizeListener:(t,e)=>pp(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),qw={current:void 0},GF=WF({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!qw.current){const t=new VZ({});t.mount(window),t.setOptions({layoutScroll:!0}),qw.current=t}return qw.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),jZ={pan:{Feature:eZ},drag:{Feature:ZJ,ProjectionNode:GF,MeasureLayout:FF}};function XP(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&He.postRender(()=>i(e,am(e)))}class FZ extends tl{mount(){const{current:e}=this.node;e&&(this.unmount=UY(e,(n,r)=>(XP(this.node,r,"Start"),s=>XP(this.node,s,"End"))))}unmount(){}}class BZ extends tl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=om(pp(this.node.current,"focus",()=>this.onFocus()),pp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function JP(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&He.postRender(()=>i(e,am(e)))}class UZ extends tl{mount(){const{current:e}=this.node;e&&(this.unmount=WY(e,(n,r)=>(JP(this.node,r,"Start"),(s,{success:i})=>JP(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const dE=new WeakMap,zw=new WeakMap,$Z=t=>{const e=dE.get(t.target);e&&e(t)},qZ=t=>{t.forEach($Z)};function zZ({root:t,...e}){const n=t||document;zw.has(n)||zw.set(n,{});const r=zw.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(qZ,{root:t,...e})),r[s]}function WZ(t,e,n){const r=zZ(e);return dE.set(t,n),r.observe(t),()=>{dE.delete(t),r.unobserve(t)}}const HZ={some:0,all:1};class GZ extends tl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:HZ[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),f=c?u:d;f&&f(l)};return WZ(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(KZ(e,n))&&this.startObserver()}unmount(){}}function KZ({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const QZ={inView:{Feature:GZ},tap:{Feature:UZ},focus:{Feature:BZ},hover:{Feature:FZ}},YZ={layout:{ProjectionNode:GF,MeasureLayout:FF}},hE={current:null},KF={current:!1};function XZ(){if(KF.current=!0,!!AT)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>hE.current=t.matches;t.addListener(e),e()}else hE.current=!1}const JZ=[...yF,Rn,ja],ZZ=t=>JZ.find(gF(t)),ZP=new WeakMap;function eee(t,e,n){for(const r in e){const s=e[r],i=n[r];if(On(s))t.addValue(r,s);else if(On(i))t.addValue(r,Gi(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,Gi(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const eN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class tee{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=rS,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=hi.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,He.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=d0(n),this.isVariantNode=Sj(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const g=f[p];l[p]!==void 0&&On(g)&&g.set(l[p],!1)}}mount(e){this.current=e,ZP.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),KF.current||XZ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:hE.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ZP.delete(this.current),this.projection&&this.projection.unmount(),wi(this.notifyUpdate),wi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Pc.has(e),s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&He.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ad){const n=Ad[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Dt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<eN.length;r++){const s=eN[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=eee(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Gi(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(pF(s)||iF(s))?s=parseFloat(s):!ZZ(s)&&ja.test(n)&&(s=dF(e,n)),this.setBaseTarget(e,On(s)?s.get():s)),On(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const o=LT(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(s=o[e])}if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!On(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new YT),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class QF extends tee{constructor(){super(...arguments),this.KeyframeResolver=vF}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;On(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function nee(t){return window.getComputedStyle(t)}class ree extends QF{constructor(){super(...arguments),this.type="html",this.renderInstance=Dj}readValueFromInstance(e,n){if(Pc.has(n)){const r=nS(n);return r&&r.default||0}else{const r=nee(e),s=(MT(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return VF(e,n)}build(e,n,r){FT(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return qT(e,n,r)}}class see extends QF{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Dt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Pc.has(n)){const r=nS(n);return r&&r.default||0}return n=Oj.has(n)?n:kT(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Vj(e,n,r)}build(e,n,r){BT(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){Lj(e,n,r,s)}mount(e){this.isSVGTag=$T(e.tagName),super.mount(e)}}const iee=(t,e)=>OT(t)?new see(e):new ree(e,{allowProjection:t!==_.Fragment}),oee=MY({...RJ,...QZ,...jZ,...YZ},iee),js=XQ(oee);function YF(t,e){let n;const r=()=>{const{currentTime:s}=e,o=(s===null?0:s.value)/100;n!==o&&t(o),n=o};return He.update(r,!0),()=>wi(r)}const Wg=new WeakMap;let qo;function aee(t,e){if(e){const{inlineSize:n,blockSize:r}=e[0];return{width:n,height:r}}else return t instanceof SVGElement&&"getBBox"in t?t.getBBox():{width:t.offsetWidth,height:t.offsetHeight}}function lee({target:t,contentRect:e,borderBoxSize:n}){var r;(r=Wg.get(t))===null||r===void 0||r.forEach(s=>{s({target:t,contentSize:e,get size(){return aee(t,n)}})})}function cee(t){t.forEach(lee)}function uee(){typeof ResizeObserver>"u"||(qo=new ResizeObserver(cee))}function dee(t,e){qo||uee();const n=Hj(t);return n.forEach(r=>{let s=Wg.get(r);s||(s=new Set,Wg.set(r,s)),s.add(e),qo==null||qo.observe(r)}),()=>{n.forEach(r=>{const s=Wg.get(r);s==null||s.delete(e),s!=null&&s.size||qo==null||qo.unobserve(r)})}}const Hg=new Set;let mf;function hee(){mf=()=>{const t={width:window.innerWidth,height:window.innerHeight},e={target:window,size:t,contentSize:t};Hg.forEach(n=>n(e))},window.addEventListener("resize",mf)}function fee(t){return Hg.add(t),mf||hee(),()=>{Hg.delete(t),!Hg.size&&mf&&(mf=void 0)}}function pee(t,e){return typeof t=="function"?fee(t):dee(t,e)}const mee=50,tN=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),gee=()=>({time:0,x:tN(),y:tN()}),yee={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function nN(t,e,n,r){const s=n[e],{length:i,position:o}=yee[e],a=s.current,l=n.time;s.current=t[`scroll${o}`],s.scrollLength=t[`scroll${i}`]-t[`client${i}`],s.offset.length=0,s.offset[0]=0,s.offset[1]=s.scrollLength,s.progress=uc(0,s.scrollLength,s.current);const c=r-l;s.velocity=c>mee?0:XT(s.current-a,c)}function vee(t,e,n){nN(t,"x",e,n),nN(t,"y",e,n),e.time=n}function wee(t,e){const n={x:0,y:0};let r=t;for(;r&&r!==e;)if(r instanceof HTMLElement)n.x+=r.offsetLeft,n.y+=r.offsetTop,r=r.offsetParent;else if(r.tagName==="svg"){const s=r.getBoundingClientRect();r=r.parentElement;const i=r.getBoundingClientRect();n.x+=s.left-i.left,n.y+=s.top-i.top}else if(r instanceof SVGGraphicsElement){const{x:s,y:i}=r.getBBox();n.x+=s,n.y+=i;let o=null,a=r.parentNode;for(;!o;)a.tagName==="svg"&&(o=a),a=r.parentNode;r=o}else break;return n}const fE={start:0,center:.5,end:1};function rN(t,e,n=0){let r=0;if(t in fE&&(t=fE[t]),typeof t=="string"){const s=parseFloat(t);t.endsWith("px")?r=s:t.endsWith("%")?t=s/100:t.endsWith("vw")?r=s/100*document.documentElement.clientWidth:t.endsWith("vh")?r=s/100*document.documentElement.clientHeight:t=s}return typeof t=="number"&&(r=e*t),n+r}const _ee=[0,0];function Eee(t,e,n,r){let s=Array.isArray(t)?t:_ee,i=0,o=0;return typeof t=="number"?s=[t,t]:typeof t=="string"&&(t=t.trim(),t.includes(" ")?s=t.split(" "):s=[t,fE[t]?t:"0"]),i=rN(s[0],n,r),o=rN(s[1],e),i-o}const xee={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},bee={x:0,y:0};function Tee(t){return"getBBox"in t&&t.tagName!=="svg"?t.getBBox():{width:t.clientWidth,height:t.clientHeight}}function See(t,e,n){const{offset:r=xee.All}=n,{target:s=t,axis:i="y"}=n,o=i==="y"?"height":"width",a=s!==t?wee(s,t):bee,l=s===t?{width:t.scrollWidth,height:t.scrollHeight}:Tee(s),c={width:t.clientWidth,height:t.clientHeight};e[i].offset.length=0;let u=!e[i].interpolate;const d=r.length;for(let f=0;f<d;f++){const p=Eee(r[f],c[o],l[o],a[i]);!u&&p!==e[i].interpolatorOffsets[f]&&(u=!0),e[i].offset[f]=p}u&&(e[i].interpolate=SF(e[i].offset,IF(r),{clamp:!1}),e[i].interpolatorOffsets=[...e[i].offset]),e[i].progress=_i(0,1,e[i].interpolate(e[i].current))}function Iee(t,e=t,n){if(n.x.targetOffset=0,n.y.targetOffset=0,e!==t){let r=e;for(;r&&r!==t;)n.x.targetOffset+=r.offsetLeft,n.y.targetOffset+=r.offsetTop,r=r.offsetParent}n.x.targetLength=e===t?e.scrollWidth:e.clientWidth,n.y.targetLength=e===t?e.scrollHeight:e.clientHeight,n.x.containerLength=t.clientWidth,n.y.containerLength=t.clientHeight}function Aee(t,e,n,r={}){return{measure:()=>Iee(t,r.target,n),update:s=>{vee(t,n,s),(r.offset||r.target)&&See(t,n,r)},notify:()=>e(n)}}const Ih=new WeakMap,sN=new WeakMap,Ww=new WeakMap,iN=t=>t===document.documentElement?window:t;function aS(t,{container:e=document.documentElement,...n}={}){let r=Ww.get(e);r||(r=new Set,Ww.set(e,r));const s=gee(),i=Aee(e,t,s,n);if(r.add(i),!Ih.has(e)){const a=()=>{for(const f of r)f.measure()},l=()=>{for(const f of r)f.update(nn.timestamp)},c=()=>{for(const f of r)f.notify()},u=()=>{He.read(a,!1,!0),He.read(l,!1,!0),He.update(c,!1,!0)};Ih.set(e,u);const d=iN(e);window.addEventListener("resize",u,{passive:!0}),e!==document.documentElement&&sN.set(e,pee(e,u)),d.addEventListener("scroll",u,{passive:!0})}const o=Ih.get(e);return He.read(o,!1,!0),()=>{var a;wi(o);const l=Ww.get(e);if(!l||(l.delete(i),l.size))return;const c=Ih.get(e);Ih.delete(e),c&&(iN(e).removeEventListener("scroll",c),(a=sN.get(e))===null||a===void 0||a(),window.removeEventListener("resize",c))}}function Cee({source:t,container:e,axis:n="y"}){t&&(e=t);const r={value:0},s=aS(i=>{r.value=i[n].progress*100},{container:e,axis:n});return{currentTime:r,cancel:s}}const Hw=new Map;function XF({source:t,container:e=document.documentElement,axis:n="y"}={}){t&&(e=t),Hw.has(e)||Hw.set(e,{});const r=Hw.get(e);return r[n]||(r[n]=Bj()?new ScrollTimeline({source:e,axis:n}):Cee({source:e,axis:n})),r[n]}function Ree(t){return t.length===2}function JF(t){return t&&(t.target||t.offset)}function Pee(t,e){return Ree(t)||JF(e)?aS(n=>{t(n[e.axis].progress,n)},e):YF(t,XF(e))}function Nee(t,e){if(t.flatten(),JF(e))return t.pause(),aS(n=>{t.time=t.duration*n[e.axis].progress},e);{const n=XF(e);return t.attachTimeline?t.attachTimeline(n,r=>(r.pause(),YF(s=>{r.time=r.duration*s},n))):Qn}}function kee(t,{axis:e="y",...n}={}){const r={axis:e,...n};return typeof t=="function"?Pee(t,r):Nee(t,r)}function oN(t,e){qQ(!!(!e||e.current))}const Dee=()=>({scrollX:Gi(0),scrollY:Gi(0),scrollXProgress:Gi(0),scrollYProgress:Gi(0)});function Oee({container:t,target:e,layoutEffect:n=!0,...r}={}){const s=a0(Dee);return(n?CT:_.useEffect)(()=>(oN("target",e),oN("container",t),kee((o,{x:a,y:l})=>{s.scrollX.set(a.current),s.scrollXProgress.set(a.progress),s.scrollY.set(l.current),s.scrollYProgress.set(l.progress)},{...r,container:(t==null?void 0:t.current)||void 0,target:(e==null?void 0:e.current)||void 0})),[t,e,JSON.stringify(r.offset)]),s}var ZF={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var i="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(i=s(i,r(a)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var o="";for(var a in i)e.call(i,a)&&i[a]&&(o=s(o,a));return o}function s(i,o){return o?i?i+" "+o:i+o:i}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(ZF);var Lee=ZF.exports;const dc=Np(Lee),mp=({items:t,truncatedStr:e,searchItem:n})=>{const{title:r,ImgUrl:s,id:i}=t,{author:o}=rm(t.author),a=fs();return y.jsx(Ej,{children:y.jsxs(js.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{delay:1.4},onClick:()=>a(`/story/${i}`),className:" p-3 w-fit flex flex-col gap-2 hover:bg-orange-2 transition-colors cursor-pointer rounded-md",children:[y.jsx("img",{src:s,alt:r,className:dc("h-[230px] rounded-md shadow-md w-[220px] shadow-black-2",{"max-md:w-[200px] max-md:h-[210px] max-sm:h-[190px] max-sm:w-[180px]":n})}),y.jsxs("div",{className:"flex flex-col gap-2",children:[y.jsx("h1",{className:"text-black-2 font-semibold max-sm:text-sm",children:e}),y.jsx("h2",{className:dc("text-white-2 font-bold break-words w-[220px] ",{"max-md:w-[200px] max-sm:w-[180px] max-sm:text-sm":n}),children:o?o.name:""})]})]})})},Mee=({Color:t,handleClick:e})=>y.jsx("div",{onClick:()=>e(),className:"w-[20px] cursor-pointer",children:y.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[y.jsx("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),y.jsx("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),y.jsx("g",{id:"SVGRepo_iconCarrier",children:y.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 6.00019C10.2006 3.90317 7.19377 3.2551 4.93923 5.17534C2.68468 7.09558 2.36727 10.3061 4.13778 12.5772C5.60984 14.4654 10.0648 18.4479 11.5249 19.7369C11.6882 19.8811 11.7699 19.9532 11.8652 19.9815C11.9483 20.0062 12.0393 20.0062 12.1225 19.9815C12.2178 19.9532 12.2994 19.8811 12.4628 19.7369C13.9229 18.4479 18.3778 14.4654 19.8499 12.5772C21.6204 10.3061 21.3417 7.07538 19.0484 5.17534C16.7551 3.2753 13.7994 3.90317 12 6.00019Z",stroke:t,"stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})})]})}),Vee=({clicked:t})=>y.jsx("div",{children:t?y.jsx("svg",{className:"w-7 h-7 text-black-2  dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{d:"M17.133 12.632v-1.8a5.406 5.406 0 0 0-4.154-5.262.955.955 0 0 0 .021-.106V3.1a1 1 0 0 0-2 0v2.364a.955.955 0 0 0 .021.106 5.406 5.406 0 0 0-4.154 5.262v1.8C6.867 15.018 5 15.614 5 16.807 5 17.4 5 18 5.538 18h12.924C19 18 19 17.4 19 16.807c0-1.193-1.867-1.789-1.867-4.175ZM8.823 19a3.453 3.453 0 0 0 6.354 0H8.823Z"})}):y.jsx("svg",{className:"w-7 h-7 text-black-2 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:y.jsx("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M12 5.365V3m0 2.365a5.338 5.338 0 0 1 5.133 5.368v1.8c0 2.386 1.867 2.982 1.867 4.175 0 .593 0 1.292-.538 1.292H5.538C5 18 5 17.301 5 16.708c0-1.193 1.867-1.789 1.867-4.175v-1.8A5.338 5.338 0 0 1 12 5.365ZM8.733 18c.094.852.306 1.54.944 2.112a3.48 3.48 0 0 0 4.646 0c.638-.572 1.236-1.26 1.33-2.112h-6.92Z"})})}),jee=({clicked:t,handleClick:e})=>y.jsx("div",{className:" w-[10px] cursor-pointer",onClick:e,children:t?y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"20",height:"20",viewBox:"0 0 48 48",children:y.jsx("path",{d:"M 16.5 5 C 12.928062 5 10 7.9280619 10 11.5 L 10 41.5 A 1.50015 1.50015 0 0 0 12.376953 42.716797 L 24 34.347656 L 35.623047 42.716797 A 1.50015 1.50015 0 0 0 38 41.5 L 38 11.5 C 38 7.9280619 35.071938 5 31.5 5 L 16.5 5 z M 16.5 8 L 31.5 8 C 33.450062 8 35 9.5499381 35 11.5 L 35 38.572266 L 24.876953 31.283203 A 1.50015 1.50015 0 0 0 23.123047 31.283203 L 13 38.572266 L 13 11.5 C 13 9.5499381 14.549938 8 16.5 8 z"})}):y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"20",height:"20",viewBox:"0 0 30 30",children:y.jsx("path",{d:"M23,27l-8-7l-8,7V5c0-1.105,0.895-2,2-2h12c1.105,0,2,0.895,2,2V27z"})})}),Fee=({Color:t,classes:e})=>y.jsx("div",{className:`cursor-pointer ${e} `,children:y.jsxs("svg",{viewBox:"0 -0.5 21 21",version:"1.1",xmlns:"http://www.w3.org/2000/svg",fill:"#000000",children:[y.jsx("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),y.jsx("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),y.jsxs("g",{id:"SVGRepo_iconCarrier",children:[" ",y.jsx("title",{children:"plus [#1512]"})," ",y.jsx("desc",{children:"Created with Sketch."})," ",y.jsx("defs",{children:" "})," ",y.jsxs("g",{id:"Page-1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd",children:[" ",y.jsxs("g",{id:"Dribbble-Light-Preview",transform:"translate(-379.000000, -240.000000)",fill:t,children:[" ",y.jsxs("g",{id:"icons",transform:"translate(56.000000, 160.000000)",children:[" ",y.jsx("polygon",{id:"plus-[#1512]",points:"344 89 344 91 334.55 91 334.55 100 332.45 100 332.45 91 323 91 323 89 332.45 89 332.45 80 334.55 80 334.55 89",children:" "})," "]})," "]})," "]})," "]})]})}),Bee=({direction:t,CloseOpen:e})=>y.jsx("div",{className:" w-[40px] cursor-pointer p-2 rounded-full hover:bg-orange-2 hover:border hover:border-orange-1  transition-colors",onClick:e,children:t=="right"?y.jsxs("svg",{viewBox:"-3 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",fill:"#242424",children:[y.jsx("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),y.jsx("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),y.jsxs("g",{id:"SVGRepo_iconCarrier",children:[" ",y.jsx("g",{id:"icomoon-ignore",children:" "})," ",y.jsx("path",{d:"M13.11 29.113c7.243 0 13.113-5.871 13.113-13.113s-5.87-13.113-13.113-13.113c-7.242 0-13.113 5.871-13.113 13.113s5.871 13.113 13.113 13.113zM13.11 3.936c6.652 0 12.064 5.412 12.064 12.064s-5.412 12.064-12.064 12.064c-6.653 0-12.064-5.412-12.064-12.064s5.411-12.064 12.064-12.064z",fill:"#242424",children:" "})," ",y.jsx("path",{d:"M13.906 21.637l0.742 0.742 6.378-6.379-6.378-6.379-0.742 0.742 5.112 5.112h-12.727v1.049h12.727z",fill:"#242424",children:" "})," "]})]}):y.jsxs("svg",{viewBox:"-3 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",fill:"#242424",transform:"rotate(180)",children:[y.jsx("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),y.jsx("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),y.jsxs("g",{id:"SVGRepo_iconCarrier",children:[" ",y.jsx("g",{id:"icomoon-ignore",children:" "})," ",y.jsx("path",{d:"M13.11 29.113c7.243 0 13.113-5.871 13.113-13.113s-5.87-13.113-13.113-13.113c-7.242 0-13.113 5.871-13.113 13.113s5.871 13.113 13.113 13.113zM13.11 3.936c6.652 0 12.064 5.412 12.064 12.064s-5.412 12.064-12.064 12.064c-6.653 0-12.064-5.412-12.064-12.064s5.411-12.064 12.064-12.064z",fill:"#000000",children:" "})," ",y.jsx("path",{d:"M13.906 21.637l0.742 0.742 6.378-6.379-6.378-6.379-0.742 0.742 5.112 5.112h-12.727v1.049h12.727z",fill:"#000000",children:" "})," "]})]})}),Kl={heart:Mee,plus:Fee,bell:Vee,save:jee,arrow:Bee};function Uee(t){return Object.prototype.toString.call(t)==="[object Object]"}function aN(t){return Uee(t)||Array.isArray(t)}function $ee(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function lS(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;const s=JSON.stringify(Object.keys(t.breakpoints||{})),i=JSON.stringify(Object.keys(e.breakpoints||{}));return s!==i?!1:n.every(o=>{const a=t[o],l=e[o];return typeof a=="function"?`${a}`==`${l}`:!aN(a)||!aN(l)?a===l:lS(a,l)})}function lN(t){return t.concat().sort((e,n)=>e.name>n.name?1:-1).map(e=>e.options)}function qee(t,e){if(t.length!==e.length)return!1;const n=lN(t),r=lN(e);return n.every((s,i)=>{const o=r[i];return lS(s,o)})}function cS(t){return typeof t=="number"}function pE(t){return typeof t=="string"}function p0(t){return typeof t=="boolean"}function cN(t){return Object.prototype.toString.call(t)==="[object Object]"}function _t(t){return Math.abs(t)}function uS(t){return Math.sign(t)}function gf(t,e){return _t(t-e)}function zee(t,e){if(t===0||e===0||_t(t)<=_t(e))return 0;const n=gf(_t(t),_t(e));return _t(n/t)}function Wee(t){return Math.round(t*100)/100}function gp(t){return yp(t).map(Number)}function Ls(t){return t[lm(t)]}function lm(t){return Math.max(0,t.length-1)}function dS(t,e){return e===lm(t)}function uN(t,e=0){return Array.from(Array(t),(n,r)=>e+r)}function yp(t){return Object.keys(t)}function e4(t,e){return[t,e].reduce((n,r)=>(yp(r).forEach(s=>{const i=n[s],o=r[s],a=cN(i)&&cN(o);n[s]=a?e4(i,o):o}),n),{})}function mE(t,e){return typeof e.MouseEvent<"u"&&t instanceof e.MouseEvent}function Hee(t,e){const n={start:r,center:s,end:i};function r(){return 0}function s(l){return i(l)/2}function i(l){return e-l}function o(l,c){return pE(t)?n[t](l):t(e,l,c)}return{measure:o}}function vp(){let t=[];function e(s,i,o,a={passive:!0}){let l;if("addEventListener"in s)s.addEventListener(i,o,a),l=()=>s.removeEventListener(i,o,a);else{const c=s;c.addListener(o),l=()=>c.removeListener(o)}return t.push(l),r}function n(){t=t.filter(s=>s())}const r={add:e,clear:n};return r}function Gee(t,e,n,r){const s=vp(),i=1e3/60;let o=null,a=0,l=0;function c(){s.add(t,"visibilitychange",()=>{t.hidden&&g()})}function u(){p(),s.clear()}function d(w){if(!l)return;o||(o=w,n(),n());const v=w-o;for(o=w,a+=v;a>=i;)n(),a-=i;const E=a/i;r(E),l&&(l=e.requestAnimationFrame(d))}function f(){l||(l=e.requestAnimationFrame(d))}function p(){e.cancelAnimationFrame(l),o=null,a=0,l=0}function g(){o=null,a=0}return{init:c,destroy:u,start:f,stop:p,update:n,render:r}}function Kee(t,e){const n=e==="rtl",r=t==="y",s=r?"y":"x",i=r?"x":"y",o=!r&&n?-1:1,a=u(),l=d();function c(g){const{height:m,width:w}=g;return r?m:w}function u(){return r?"top":n?"right":"left"}function d(){return r?"bottom":n?"left":"right"}function f(g){return g*o}return{scroll:s,cross:i,startEdge:a,endEdge:l,measureSize:c,direction:f}}function hc(t=0,e=0){const n=_t(t-e);function r(c){return c<t}function s(c){return c>e}function i(c){return r(c)||s(c)}function o(c){return i(c)?r(c)?t:e:c}function a(c){return n?c-n*Math.ceil((c-e)/n):c}return{length:n,max:e,min:t,constrain:o,reachedAny:i,reachedMax:s,reachedMin:r,removeOffset:a}}function t4(t,e,n){const{constrain:r}=hc(0,t),s=t+1;let i=o(e);function o(f){return n?_t((s+f)%s):r(f)}function a(){return i}function l(f){return i=o(f),d}function c(f){return u().set(a()+f)}function u(){return t4(t,a(),n)}const d={get:a,set:l,add:c,clone:u};return d}function Qee(t,e,n,r,s,i,o,a,l,c,u,d,f,p,g,m,w,v,E){const{cross:b,direction:C}=t,R=["INPUT","SELECT","TEXTAREA"],O={passive:!1},I=vp(),A=vp(),P=hc(50,225).constrain(p.measure(20)),D={mouse:300,touch:400},M={mouse:500,touch:600},V=g?43:25;let L=!1,W=0,oe=0,re=!1,Z=!1,U=!1,Y=!1;function G(X){if(!E)return;function be(We){(p0(E)||E(X,We))&&Ye(We)}const Ce=e;I.add(Ce,"dragstart",We=>We.preventDefault(),O).add(Ce,"touchmove",()=>{},O).add(Ce,"touchend",()=>{}).add(Ce,"touchstart",be).add(Ce,"mousedown",be).add(Ce,"touchcancel",ye).add(Ce,"contextmenu",ye).add(Ce,"click",Be,!0)}function he(){I.clear(),A.clear()}function we(){const X=Y?n:e;A.add(X,"touchmove",se,O).add(X,"touchend",ye).add(X,"mousemove",se,O).add(X,"mouseup",ye)}function ve(X){const be=X.nodeName||"";return R.includes(be)}function De(){return(g?M:D)[Y?"mouse":"touch"]}function _e(X,be){const Ce=d.add(uS(X)*-1),We=u.byDistance(X,!g).distance;return g||_t(X)<P?We:w&&be?We*.5:u.byIndex(Ce.get(),0).distance}function Ye(X){const be=mE(X,r);Y=be,U=g&&be&&!X.buttons&&L,L=gf(s.get(),o.get())>=2,!(be&&X.button!==0)&&(ve(X.target)||(re=!0,i.pointerDown(X),c.useFriction(0).useDuration(0),s.set(o),we(),W=i.readPoint(X),oe=i.readPoint(X,b),f.emit("pointerDown")))}function se(X){if(!mE(X,r)&&X.touches.length>=2)return ye(X);const Ce=i.readPoint(X),We=i.readPoint(X,b),it=gf(Ce,W),Tt=gf(We,oe);if(!Z&&!Y&&(!X.cancelable||(Z=it>Tt,!Z)))return ye(X);const Fn=i.pointerMove(X);it>m&&(U=!0),c.useFriction(.3).useDuration(.75),a.start(),s.add(C(Fn)),X.preventDefault()}function ye(X){const Ce=u.byDistance(0,!1).index!==d.get(),We=i.pointerUp(X)*De(),it=_e(C(We),Ce),Tt=zee(We,it),Fn=V-10*Tt,jt=v+Tt/50;Z=!1,re=!1,A.clear(),c.useDuration(Fn).useFriction(jt),l.distance(it,!g),Y=!1,f.emit("pointerUp")}function Be(X){U&&(X.stopPropagation(),X.preventDefault(),U=!1)}function xe(){return re}return{init:G,destroy:he,pointerDown:xe}}function Yee(t,e){let r,s;function i(d){return d.timeStamp}function o(d,f){const g=`client${(f||t.scroll)==="x"?"X":"Y"}`;return(mE(d,e)?d:d.touches[0])[g]}function a(d){return r=d,s=d,o(d)}function l(d){const f=o(d)-o(s),p=i(d)-i(r)>170;return s=d,p&&(r=d),f}function c(d){if(!r||!s)return 0;const f=o(s)-o(r),p=i(d)-i(r),g=i(d)-i(s)>170,m=f/p;return p&&!g&&_t(m)>.1?m:0}return{pointerDown:a,pointerMove:l,pointerUp:c,readPoint:o}}function Xee(){function t(n){const{offsetTop:r,offsetLeft:s,offsetWidth:i,offsetHeight:o}=n;return{top:r,right:s+i,bottom:r+o,left:s,width:i,height:o}}return{measure:t}}function Jee(t){function e(r){return t*(r/100)}return{measure:e}}function Zee(t,e,n,r,s,i,o){const a=[t].concat(r);let l,c,u=[],d=!1;function f(w){return s.measureSize(o.measure(w))}function p(w){if(!i)return;c=f(t),u=r.map(f);function v(E){for(const b of E){if(d)return;const C=b.target===t,R=r.indexOf(b.target),O=C?c:u[R],I=f(C?t:r[R]);if(_t(I-O)>=.5){w.reInit(),e.emit("resize");break}}}l=new ResizeObserver(E=>{(p0(i)||i(w,E))&&v(E)}),n.requestAnimationFrame(()=>{a.forEach(E=>l.observe(E))})}function g(){d=!0,l&&l.disconnect()}return{init:p,destroy:g}}function ete(t,e,n,r,s,i){let o=0,a=0,l=s,c=i,u=t.get(),d=0;function f(){const O=r.get()-t.get(),I=!l;let A=0;return I?(o=0,n.set(r),t.set(r),A=O):(n.set(t),o+=O/l,o*=c,u+=o,t.add(o),A=u-d),a=uS(A),d=u,R}function p(){const O=r.get()-e.get();return _t(O)<.001}function g(){return l}function m(){return a}function w(){return o}function v(){return b(s)}function E(){return C(i)}function b(O){return l=O,R}function C(O){return c=O,R}const R={direction:m,duration:g,velocity:w,seek:f,settled:p,useBaseFriction:E,useBaseDuration:v,useFriction:C,useDuration:b};return R}function tte(t,e,n,r,s){const i=s.measure(10),o=s.measure(50),a=hc(.1,.99);let l=!1;function c(){return!(l||!t.reachedAny(n.get())||!t.reachedAny(e.get()))}function u(p){if(!c())return;const g=t.reachedMin(e.get())?"min":"max",m=_t(t[g]-e.get()),w=n.get()-e.get(),v=a.constrain(m/o);n.subtract(w*v),!p&&_t(w)<i&&(n.set(t.constrain(n.get())),r.useDuration(25).useBaseFriction())}function d(p){l=!p}return{shouldConstrain:c,constrain:u,toggleActive:d}}function nte(t,e,n,r,s){const i=hc(-e+t,0),o=d(),a=u(),l=f();function c(g,m){return gf(g,m)<=1}function u(){const g=o[0],m=Ls(o),w=o.lastIndexOf(g),v=o.indexOf(m)+1;return hc(w,v)}function d(){return n.map((g,m)=>{const{min:w,max:v}=i,E=i.constrain(g),b=!m,C=dS(n,m);return b?v:C||c(w,E)?w:c(v,E)?v:E}).map(g=>parseFloat(g.toFixed(3)))}function f(){if(e<=t+s)return[i.max];if(r==="keepSnaps")return o;const{min:g,max:m}=a;return o.slice(g,m)}return{snapsContained:l,scrollContainLimit:a}}function rte(t,e,n){const r=e[0],s=n?r-t:Ls(e);return{limit:hc(s,r)}}function ste(t,e,n,r){const i=e.min+.1,o=e.max+.1,{reachedMin:a,reachedMax:l}=hc(i,o);function c(f){return f===1?l(n.get()):f===-1?a(n.get()):!1}function u(f){if(!c(f))return;const p=t*(f*-1);r.forEach(g=>g.add(p))}return{loop:u}}function ite(t){const{max:e,length:n}=t;function r(i){const o=i-e;return n?o/-n:0}return{get:r}}function ote(t,e,n,r,s){const{startEdge:i,endEdge:o}=t,{groupSlides:a}=s,l=d().map(e.measure),c=f(),u=p();function d(){return a(r).map(m=>Ls(m)[o]-m[0][i]).map(_t)}function f(){return r.map(m=>n[i]-m[i]).map(m=>-_t(m))}function p(){return a(c).map(m=>m[0]).map((m,w)=>m+l[w])}return{snaps:c,snapsAligned:u}}function ate(t,e,n,r,s,i){const{groupSlides:o}=s,{min:a,max:l}=r,c=u();function u(){const f=o(i),p=!t||e==="keepSnaps";return n.length===1?[i]:p?f:f.slice(a,l).map((g,m,w)=>{const v=!m,E=dS(w,m);if(v){const b=Ls(w[0])+1;return uN(b)}if(E){const b=lm(i)-Ls(w)[0]+1;return uN(b,Ls(w)[0])}return g})}return{slideRegistry:c}}function lte(t,e,n,r,s){const{reachedAny:i,removeOffset:o,constrain:a}=r;function l(g){return g.concat().sort((m,w)=>_t(m)-_t(w))[0]}function c(g){const m=t?o(g):a(g),w=e.map((E,b)=>({diff:u(E-m,0),index:b})).sort((E,b)=>_t(E.diff)-_t(b.diff)),{index:v}=w[0];return{index:v,distance:m}}function u(g,m){const w=[g,g+n,g-n];if(!t)return g;if(!m)return l(w);const v=w.filter(E=>uS(E)===m);return v.length?l(v):Ls(w)-n}function d(g,m){const w=e[g]-s.get(),v=u(w,m);return{index:g,distance:v}}function f(g,m){const w=s.get()+g,{index:v,distance:E}=c(w),b=!t&&i(w);if(!m||b)return{index:v,distance:g};const C=e[v]-E,R=g+u(C,0);return{index:v,distance:R}}return{byDistance:f,byIndex:d,shortcut:u}}function cte(t,e,n,r,s,i,o){function a(d){const f=d.distance,p=d.index!==e.get();i.add(f),f&&(r.duration()?t.start():(t.update(),t.render(1),t.update())),p&&(n.set(e.get()),e.set(d.index),o.emit("select"))}function l(d,f){const p=s.byDistance(d,f);a(p)}function c(d,f){const p=e.clone().set(d),g=s.byIndex(p.get(),f);a(g)}return{distance:l,index:c}}function ute(t,e,n,r,s,i,o,a){const l={passive:!0,capture:!0};let c=0;function u(p){if(!a)return;function g(m){if(new Date().getTime()-c>10)return;o.emit("slideFocusStart"),t.scrollLeft=0;const E=n.findIndex(b=>b.includes(m));cS(E)&&(s.useDuration(0),r.index(E,0),o.emit("slideFocus"))}i.add(document,"keydown",d,!1),e.forEach((m,w)=>{i.add(m,"focus",v=>{(p0(a)||a(p,v))&&g(w)},l)})}function d(p){p.code==="Tab"&&(c=new Date().getTime())}return{init:u}}function zh(t){let e=t;function n(){return e}function r(l){e=o(l)}function s(l){e+=o(l)}function i(l){e-=o(l)}function o(l){return cS(l)?l:l.get()}return{get:n,set:r,add:s,subtract:i}}function n4(t,e){const n=t.scroll==="x"?o:a,r=e.style;let s=null,i=!1;function o(f){return`translate3d(${f}px,0px,0px)`}function a(f){return`translate3d(0px,${f}px,0px)`}function l(f){if(i)return;const p=Wee(t.direction(f));p!==s&&(r.transform=n(p),s=p)}function c(f){i=!f}function u(){i||(r.transform="",e.getAttribute("style")||e.removeAttribute("style"))}return{clear:u,to:l,toggleActive:c}}function dte(t,e,n,r,s,i,o,a,l){const u=gp(s),d=gp(s).reverse(),f=v().concat(E());function p(I,A){return I.reduce((P,D)=>P-s[D],A)}function g(I,A){return I.reduce((P,D)=>p(P,A)>0?P.concat([D]):P,[])}function m(I){return i.map((A,P)=>({start:A-r[P]+.5+I,end:A+e-.5+I}))}function w(I,A,P){const D=m(A);return I.map(M=>{const V=P?0:-n,L=P?n:0,W=P?"end":"start",oe=D[M][W];return{index:M,loopPoint:oe,slideLocation:zh(-1),translate:n4(t,l[M]),target:()=>a.get()>oe?V:L}})}function v(){const I=o[0],A=g(d,I);return w(A,n,!1)}function E(){const I=e-o[0]-1,A=g(u,I);return w(A,-n,!0)}function b(){return f.every(({index:I})=>{const A=u.filter(P=>P!==I);return p(A,e)<=.1})}function C(){f.forEach(I=>{const{target:A,translate:P,slideLocation:D}=I,M=A();M!==D.get()&&(P.to(M),D.set(M))})}function R(){f.forEach(I=>I.translate.clear())}return{canLoop:b,clear:R,loop:C,loopPoints:f}}function hte(t,e,n){let r,s=!1;function i(l){if(!n)return;function c(u){for(const d of u)if(d.type==="childList"){l.reInit(),e.emit("slidesChanged");break}}r=new MutationObserver(u=>{s||(p0(n)||n(l,u))&&c(u)}),r.observe(t,{childList:!0})}function o(){r&&r.disconnect(),s=!0}return{init:i,destroy:o}}function fte(t,e,n,r){const s={};let i=null,o=null,a,l=!1;function c(){a=new IntersectionObserver(g=>{l||(g.forEach(m=>{const w=e.indexOf(m.target);s[w]=m}),i=null,o=null,n.emit("slidesInView"))},{root:t.parentElement,threshold:r}),e.forEach(g=>a.observe(g))}function u(){a&&a.disconnect(),l=!0}function d(g){return yp(s).reduce((m,w)=>{const v=parseInt(w),{isIntersecting:E}=s[v];return(g&&E||!g&&!E)&&m.push(v),m},[])}function f(g=!0){if(g&&i)return i;if(!g&&o)return o;const m=d(g);return g&&(i=m),g||(o=m),m}return{init:c,destroy:u,get:f}}function pte(t,e,n,r,s,i){const{measureSize:o,startEdge:a,endEdge:l}=t,c=n[0]&&s,u=g(),d=m(),f=n.map(o),p=w();function g(){if(!c)return 0;const E=n[0];return _t(e[a]-E[a])}function m(){if(!c)return 0;const E=i.getComputedStyle(Ls(r));return parseFloat(E.getPropertyValue(`margin-${l}`))}function w(){return n.map((E,b,C)=>{const R=!b,O=dS(C,b);return R?f[b]+u:O?f[b]+d:C[b+1][a]-E[a]}).map(_t)}return{slideSizes:f,slideSizesWithGaps:p,startGap:u,endGap:d}}function mte(t,e,n,r,s,i,o,a,l){const{startEdge:c,endEdge:u,direction:d}=t,f=cS(n);function p(v,E){return gp(v).filter(b=>b%E===0).map(b=>v.slice(b,b+E))}function g(v){return v.length?gp(v).reduce((E,b,C)=>{const R=Ls(E)||0,O=R===0,I=b===lm(v),A=s[c]-i[R][c],P=s[c]-i[b][u],D=!r&&O?d(o):0,M=!r&&I?d(a):0,V=_t(P-M-(A+D));return C&&V>e+l&&E.push(b),I&&E.push(v.length),E},[]).map((E,b,C)=>{const R=Math.max(C[b-1]||0);return v.slice(R,E)}):[]}function m(v){return f?p(v,n):g(v)}return{groupSlides:m}}function gte(t,e,n,r,s,i,o){const{align:a,axis:l,direction:c,startIndex:u,loop:d,duration:f,dragFree:p,dragThreshold:g,inViewThreshold:m,slidesToScroll:w,skipSnaps:v,containScroll:E,watchResize:b,watchSlides:C,watchDrag:R,watchFocus:O}=i,I=2,A=Xee(),P=A.measure(e),D=n.map(A.measure),M=Kee(l,c),V=M.measureSize(P),L=Jee(V),W=Hee(a,V),oe=!d&&!!E,re=d||!!E,{slideSizes:Z,slideSizesWithGaps:U,startGap:Y,endGap:G}=pte(M,P,D,n,re,s),he=mte(M,V,w,d,P,D,Y,G,I),{snaps:we,snapsAligned:ve}=ote(M,W,P,D,he),De=-Ls(we)+Ls(U),{snapsContained:_e,scrollContainLimit:Ye}=nte(V,De,ve,E,I),se=oe?_e:ve,{limit:ye}=rte(De,se,d),Be=t4(lm(se),u,d),xe=Be.clone(),ue=gp(n),X=({dragHandler:It,scrollBody:Ks,scrollBounds:er,options:{loop:ps}})=>{ps||er.constrain(It.pointerDown()),Ks.seek()},be=({scrollBody:It,translate:Ks,location:er,offsetLocation:ps,previousLocation:Qs,scrollLooper:Br,slideLooper:Io,dragHandler:Ys,animation:mr,eventHandler:cn,scrollBounds:ms,options:{loop:tr}},nr)=>{const Ur=It.settled(),un=!ms.shouldConstrain(),gs=tr?Ur:Ur&&un;gs&&!Ys.pointerDown()&&(mr.stop(),cn.emit("settle")),gs||cn.emit("scroll");const $r=er.get()*nr+Qs.get()*(1-nr);ps.set($r),tr&&(Br.loop(It.direction()),Io.loop()),Ks.to(ps.get())},Ce=Gee(r,s,()=>X(Fr),It=>be(Fr,It)),We=.68,it=se[Be.get()],Tt=zh(it),Fn=zh(it),jt=zh(it),en=zh(it),Zn=ete(Tt,jt,Fn,en,f,We),Gs=lte(d,se,De,ye,en),Vr=cte(Ce,Be,xe,Zn,Gs,en,o),ln=ite(ye),jr=vp(),St=fte(e,n,o,m),{slideRegistry:et}=ate(oe,E,se,Ye,he,ue),pr=ute(t,n,et,Vr,Zn,jr,o,O),Fr={ownerDocument:r,ownerWindow:s,eventHandler:o,containerRect:P,slideRects:D,animation:Ce,axis:M,dragHandler:Qee(M,t,r,s,en,Yee(M,s),Tt,Ce,Vr,Zn,Gs,Be,o,L,p,g,v,We,R),eventStore:jr,percentOfView:L,index:Be,indexPrevious:xe,limit:ye,location:Tt,offsetLocation:jt,previousLocation:Fn,options:i,resizeHandler:Zee(e,o,s,n,M,b,A),scrollBody:Zn,scrollBounds:tte(ye,jt,en,Zn,L),scrollLooper:ste(De,ye,jt,[Tt,jt,Fn,en]),scrollProgress:ln,scrollSnapList:se.map(ln.get),scrollSnaps:se,scrollTarget:Gs,scrollTo:Vr,slideLooper:dte(M,V,De,Z,U,we,se,jt,n),slideFocus:pr,slidesHandler:hte(e,o,C),slidesInView:St,slideIndexes:ue,slideRegistry:et,slidesToScroll:he,target:en,translate:n4(M,e)};return Fr}function yte(){let t={},e;function n(c){e=c}function r(c){return t[c]||[]}function s(c){return r(c).forEach(u=>u(e,c)),l}function i(c,u){return t[c]=r(c).concat([u]),l}function o(c,u){return t[c]=r(c).filter(d=>d!==u),l}function a(){t={}}const l={init:n,emit:s,off:o,on:i,clear:a};return l}const vte={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function wte(t){function e(i,o){return e4(i,o||{})}function n(i){const o=i.breakpoints||{},a=yp(o).filter(l=>t.matchMedia(l).matches).map(l=>o[l]).reduce((l,c)=>e(l,c),{});return e(i,a)}function r(i){return i.map(o=>yp(o.breakpoints||{})).reduce((o,a)=>o.concat(a),[]).map(t.matchMedia)}return{mergeOptions:e,optionsAtMedia:n,optionsMediaQueries:r}}function _te(t){let e=[];function n(i,o){return e=o.filter(({options:a})=>t.optionsAtMedia(a).active!==!1),e.forEach(a=>a.init(i,t)),o.reduce((a,l)=>Object.assign(a,{[l.name]:l}),{})}function r(){e=e.filter(i=>i.destroy())}return{init:n,destroy:r}}function ev(t,e,n){const r=t.ownerDocument,s=r.defaultView,i=wte(s),o=_te(i),a=vp(),l=yte(),{mergeOptions:c,optionsAtMedia:u,optionsMediaQueries:d}=i,{on:f,off:p,emit:g}=l,m=M;let w=!1,v,E=c(vte,ev.globalOptions),b=c(E),C=[],R,O,I;function A(){const{container:ue,slides:X}=b;O=(pE(ue)?t.querySelector(ue):ue)||t.children[0];const Ce=pE(X)?O.querySelectorAll(X):X;I=[].slice.call(Ce||O.children)}function P(ue){const X=gte(t,O,I,r,s,ue,l);if(ue.loop&&!X.slideLooper.canLoop()){const be=Object.assign({},ue,{loop:!1});return P(be)}return X}function D(ue,X){w||(E=c(E,ue),b=u(E),C=X||C,A(),v=P(b),d([E,...C.map(({options:be})=>be)]).forEach(be=>a.add(be,"change",M)),b.active&&(v.translate.to(v.location.get()),v.animation.init(),v.slidesInView.init(),v.slideFocus.init(xe),v.eventHandler.init(xe),v.resizeHandler.init(xe),v.slidesHandler.init(xe),v.options.loop&&v.slideLooper.loop(),O.offsetParent&&I.length&&v.dragHandler.init(xe),R=o.init(xe,C)))}function M(ue,X){const be=he();V(),D(c({startIndex:be},ue),X),l.emit("reInit")}function V(){v.dragHandler.destroy(),v.eventStore.clear(),v.translate.clear(),v.slideLooper.clear(),v.resizeHandler.destroy(),v.slidesHandler.destroy(),v.slidesInView.destroy(),v.animation.destroy(),o.destroy(),a.clear()}function L(){w||(w=!0,a.clear(),V(),l.emit("destroy"),l.clear())}function W(ue,X,be){!b.active||w||(v.scrollBody.useBaseFriction().useDuration(X===!0?0:b.duration),v.scrollTo.index(ue,be||0))}function oe(ue){const X=v.index.add(1).get();W(X,ue,-1)}function re(ue){const X=v.index.add(-1).get();W(X,ue,1)}function Z(){return v.index.add(1).get()!==he()}function U(){return v.index.add(-1).get()!==he()}function Y(){return v.scrollSnapList}function G(){return v.scrollProgress.get(v.location.get())}function he(){return v.index.get()}function we(){return v.indexPrevious.get()}function ve(){return v.slidesInView.get()}function De(){return v.slidesInView.get(!1)}function _e(){return R}function Ye(){return v}function se(){return t}function ye(){return O}function Be(){return I}const xe={canScrollNext:Z,canScrollPrev:U,containerNode:ye,internalEngine:Ye,destroy:L,off:p,on:f,emit:g,plugins:_e,previousScrollSnap:we,reInit:m,rootNode:se,scrollNext:oe,scrollPrev:re,scrollProgress:G,scrollSnapList:Y,scrollTo:W,selectedScrollSnap:he,slideNodes:Be,slidesInView:ve,slidesNotInView:De};return D(e,n),setTimeout(()=>l.emit("init"),0),xe}ev.globalOptions=void 0;function hS(t={},e=[]){const n=_.useRef(t),r=_.useRef(e),[s,i]=_.useState(),[o,a]=_.useState(),l=_.useCallback(()=>{s&&s.reInit(n.current,r.current)},[s]);return _.useEffect(()=>{lS(n.current,t)||(n.current=t,l())},[t,l]),_.useEffect(()=>{qee(r.current,e)||(r.current=e,l())},[e,l]),_.useEffect(()=>{if($ee()&&o){ev.globalOptions=hS.globalOptions;const c=ev(o,n.current,r.current);return i(c),()=>c.destroy()}else i(void 0)},[o,i]),[a,s]}hS.globalOptions=void 0;/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ete=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r4=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xte={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bte=_.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>_.createElement("svg",{ref:l,...xte,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:r4("lucide",s),...a},[...o.map(([c,u])=>_.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=(t,e)=>{const n=_.forwardRef(({className:r,...s},i)=>_.createElement(bte,{ref:i,iconNode:e,className:r4(`lucide-${Ete(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tte=Yd("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ste=Yd("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ite=Yd("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=Yd("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ate=Yd("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=Yd("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function o4(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=o4(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Cte(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=o4(t))&&(r&&(r+=" "),r+=e);return r}const fS="-",Rte=t=>{const e=Nte(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(fS);return a[0]===""&&a.length!==1&&a.shift(),a4(a,e)||Pte(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},a4=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?a4(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(fS);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},dN=/^\[(.+)\]$/,Pte=t=>{if(dN.test(t)){const e=dN.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Nte=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return Dte(Object.entries(t.classGroups),n).forEach(([i,o])=>{gE(o,r,i,e)}),r},gE=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:hN(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(kte(s)){gE(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{gE(o,hN(e,i),n,r)})})},hN=(t,e)=>{let n=t;return e.split(fS).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},kte=t=>t.isThemeGetter,Dte=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,Ote=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},l4="!",Lte=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,u=0,d;for(let w=0;w<a.length;w++){let v=a[w];if(c===0){if(v===s&&(r||a.slice(w,w+i)===e)){l.push(a.slice(u,w)),u=w+i;continue}if(v==="/"){d=w;continue}}v==="["?c++:v==="]"&&c--}const f=l.length===0?a:a.substring(u),p=f.startsWith(l4),g=p?f.substring(1):f,m=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:m}};return n?a=>n({className:a,parseClassName:o}):o},Mte=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},Vte=t=>({cache:Ote(t.cacheSize),parseClassName:Lte(t),...Rte(t)}),jte=/\s+/,Fte=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(jte);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:p}=n(c);let g=!!p,m=r(g?f.substring(0,p):f);if(!m){if(!g){a=c+(a.length>0?" "+a:a);continue}if(m=r(f),!m){a=c+(a.length>0?" "+a:a);continue}g=!1}const w=Mte(u).join(":"),v=d?w+l4:w,E=v+m;if(i.includes(E))continue;i.push(E);const b=s(m,g);for(let C=0;C<b.length;++C){const R=b[C];i.push(v+R)}a=c+(a.length>0?" "+a:a)}return a};function Bte(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=c4(e))&&(r&&(r+=" "),r+=n);return r}const c4=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=c4(t[r]))&&(n&&(n+=" "),n+=e);return n};function Ute(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((u,d)=>d(u),t());return n=Vte(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=Fte(l,n);return s(l,u),u}return function(){return i(Bte.apply(null,arguments))}}const lt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},u4=/^\[(?:([a-z-]+):)?(.+)\]$/i,$te=/^\d+\/\d+$/,qte=new Set(["px","full","screen"]),zte=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Wte=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Hte=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Gte=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Kte=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Mi=t=>Yu(t)||qte.has(t)||$te.test(t),Fo=t=>Xd(t,"length",nne),Yu=t=>!!t&&!Number.isNaN(Number(t)),Gw=t=>Xd(t,"number",Yu),Ah=t=>!!t&&Number.isInteger(Number(t)),Qte=t=>t.endsWith("%")&&Yu(t.slice(0,-1)),Re=t=>u4.test(t),Bo=t=>zte.test(t),Yte=new Set(["length","size","percentage"]),Xte=t=>Xd(t,Yte,d4),Jte=t=>Xd(t,"position",d4),Zte=new Set(["image","url"]),ene=t=>Xd(t,Zte,sne),tne=t=>Xd(t,"",rne),Ch=()=>!0,Xd=(t,e,n)=>{const r=u4.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},nne=t=>Wte.test(t)&&!Hte.test(t),d4=()=>!1,rne=t=>Gte.test(t),sne=t=>Kte.test(t),ine=()=>{const t=lt("colors"),e=lt("spacing"),n=lt("blur"),r=lt("brightness"),s=lt("borderColor"),i=lt("borderRadius"),o=lt("borderSpacing"),a=lt("borderWidth"),l=lt("contrast"),c=lt("grayscale"),u=lt("hueRotate"),d=lt("invert"),f=lt("gap"),p=lt("gradientColorStops"),g=lt("gradientColorStopPositions"),m=lt("inset"),w=lt("margin"),v=lt("opacity"),E=lt("padding"),b=lt("saturate"),C=lt("scale"),R=lt("sepia"),O=lt("skew"),I=lt("space"),A=lt("translate"),P=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto",Re,e],V=()=>[Re,e],L=()=>["",Mi,Fo],W=()=>["auto",Yu,Re],oe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],re=()=>["solid","dashed","dotted","double","none"],Z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],Y=()=>["","0",Re],G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],he=()=>[Yu,Re];return{cacheSize:500,separator:":",theme:{colors:[Ch],spacing:[Mi,Fo],blur:["none","",Bo,Re],brightness:he(),borderColor:[t],borderRadius:["none","","full",Bo,Re],borderSpacing:V(),borderWidth:L(),contrast:he(),grayscale:Y(),hueRotate:he(),invert:Y(),gap:V(),gradientColorStops:[t],gradientColorStopPositions:[Qte,Fo],inset:M(),margin:M(),opacity:he(),padding:V(),saturate:he(),scale:he(),sepia:Y(),skew:he(),space:V(),translate:V()},classGroups:{aspect:[{aspect:["auto","square","video",Re]}],container:["container"],columns:[{columns:[Bo]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...oe(),Re]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ah,Re]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Re]}],grow:[{grow:Y()}],shrink:[{shrink:Y()}],order:[{order:["first","last","none",Ah,Re]}],"grid-cols":[{"grid-cols":[Ch]}],"col-start-end":[{col:["auto",{span:["full",Ah,Re]},Re]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[Ch]}],"row-start-end":[{row:["auto",{span:[Ah,Re]},Re]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Re]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Re]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[E]}],px:[{px:[E]}],py:[{py:[E]}],ps:[{ps:[E]}],pe:[{pe:[E]}],pt:[{pt:[E]}],pr:[{pr:[E]}],pb:[{pb:[E]}],pl:[{pl:[E]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Re,e]}],"min-w":[{"min-w":[Re,e,"min","max","fit"]}],"max-w":[{"max-w":[Re,e,"none","full","min","max","fit","prose",{screen:[Bo]},Bo]}],h:[{h:[Re,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Re,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Re,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Re,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Bo,Fo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Gw]}],"font-family":[{font:[Ch]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Re]}],"line-clamp":[{"line-clamp":["none",Yu,Gw]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Mi,Re]}],"list-image":[{"list-image":["none",Re]}],"list-style-type":[{list:["none","disc","decimal",Re]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...re(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Mi,Fo]}],"underline-offset":[{"underline-offset":["auto",Mi,Re]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:V()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...oe(),Jte]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Xte]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ene]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...re(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:re()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...re()]}],"outline-offset":[{"outline-offset":[Mi,Re]}],"outline-w":[{outline:[Mi,Fo]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:L()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Mi,Fo]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Bo,tne]}],"shadow-color":[{shadow:[Ch]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...Z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Z()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Bo,Re]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Re]}],duration:[{duration:he()}],ease:[{ease:["linear","in","out","in-out",Re]}],delay:[{delay:he()}],animate:[{animate:["none","spin","ping","pulse","bounce",Re]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[Ah,Re]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Re]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Re]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":V()}],"scroll-mx":[{"scroll-mx":V()}],"scroll-my":[{"scroll-my":V()}],"scroll-ms":[{"scroll-ms":V()}],"scroll-me":[{"scroll-me":V()}],"scroll-mt":[{"scroll-mt":V()}],"scroll-mr":[{"scroll-mr":V()}],"scroll-mb":[{"scroll-mb":V()}],"scroll-ml":[{"scroll-ml":V()}],"scroll-p":[{"scroll-p":V()}],"scroll-px":[{"scroll-px":V()}],"scroll-py":[{"scroll-py":V()}],"scroll-ps":[{"scroll-ps":V()}],"scroll-pe":[{"scroll-pe":V()}],"scroll-pt":[{"scroll-pt":V()}],"scroll-pr":[{"scroll-pr":V()}],"scroll-pb":[{"scroll-pb":V()}],"scroll-pl":[{"scroll-pl":V()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Re]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Mi,Fo,Gw]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},one=Ute(ine);function Ve(...t){return one(Cte(t))}function fN(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function ane(...t){return e=>{let n=!1;const r=t.map(s=>{const i=fN(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():fN(t[s],null)}}}}var lo=_.forwardRef((t,e)=>{const{children:n,...r}=t,s=_.Children.toArray(n),i=s.find(lne);if(i){const o=i.props.children,a=s.map(l=>l===i?_.Children.count(o)>1?_.Children.only(null):_.isValidElement(o)?o.props.children:null:l);return y.jsx(yE,{...r,ref:e,children:_.isValidElement(o)?_.cloneElement(o,void 0,a):null})}return y.jsx(yE,{...r,ref:e,children:n})});lo.displayName="Slot";var yE=_.forwardRef((t,e)=>{const{children:n,...r}=t;if(_.isValidElement(n)){const s=une(n);return _.cloneElement(n,{...cne(r,n.props),ref:e?ane(e,s):s})}return _.Children.count(n)>1?_.Children.only(null):null});yE.displayName="SlotClone";var h4=({children:t})=>y.jsx(y.Fragment,{children:t});function lne(t){return _.isValidElement(t)&&t.type===h4}function cne(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{i(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function une(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function f4(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=f4(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function dne(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=f4(t))&&(r&&(r+=" "),r+=e);return r}const pN=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,mN=dne,pS=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return mN(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const u=n==null?void 0:n[c],d=i==null?void 0:i[c];if(u===null)return null;const f=pN(u)||pN(d);return s[c][f]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,f]=u;return f===void 0||(c[d]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:f,...p}=u;return Object.entries(p).every(g=>{let[m,w]=g;return Array.isArray(w)?w.includes({...i,...a}[m]):{...i,...a}[m]===w})?[...c,d,f]:c},[]);return mN(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},hne=pS("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-neutral-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 dark:ring-offset-neutral-950 dark:focus-visible:ring-neutral-300",{variants:{variant:{default:"bg-neutral-900 text-neutral-50 hover:bg-neutral-900/90 dark:bg-neutral-50 dark:text-neutral-900 dark:hover:bg-neutral-50/90",destructive:" bg-orange-1 text-neutral-50 hover:bg-orange-2 hover:border-2 hover:border-orange-1 hover:text-black-2 dark:bg-red-900 dark:text-neutral-50 dark:hover:bg-red-900/90",outline:"border border-neutral-200 bg-white hover:bg-neutral-100 hover:text-neutral-900 dark:border-neutral-800 dark:bg-neutral-950 dark:hover:bg-neutral-800 dark:hover:text-neutral-50",secondary:"bg-neutral-100 text-neutral-900 hover:bg-neutral-100/80 dark:bg-neutral-800 dark:text-neutral-50 dark:hover:bg-neutral-800/80",ghost:"hover:bg-neutral-100 hover:text-neutral-900 dark:hover:bg-neutral-800 dark:hover:text-neutral-50",link:"text-neutral-900 underline-offset-4 hover:underline dark:text-neutral-50"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Wt=_.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?lo:"button";return y.jsx(o,{className:Ve(hne({variant:e,size:n,className:t})),ref:i,...s})});Wt.displayName="Button";const p4=_.createContext(null);function m0(){const t=_.useContext(p4);if(!t)throw new Error("useCarousel must be used within a <Carousel />");return t}const g0=_.forwardRef(({orientation:t="horizontal",opts:e,setApi:n,plugins:r,className:s,children:i,...o},a)=>{const[l,c]=hS({...e,axis:t==="horizontal"?"x":"y"},r),[u,d]=_.useState(!1),[f,p]=_.useState(!1),g=_.useCallback(E=>{E&&(d(E.canScrollPrev()),p(E.canScrollNext()))},[]),m=_.useCallback(()=>{c==null||c.scrollPrev()},[c]),w=_.useCallback(()=>{c==null||c.scrollNext()},[c]),v=_.useCallback(E=>{E.key==="ArrowLeft"?(E.preventDefault(),m()):E.key==="ArrowRight"&&(E.preventDefault(),w())},[m,w]);return _.useEffect(()=>{!c||!n||n(c)},[c,n]),_.useEffect(()=>{if(c)return g(c),c.on("reInit",g),c.on("select",g),()=>{c==null||c.off("select",g)}},[c,g]),y.jsx(p4.Provider,{value:{carouselRef:l,api:c,opts:e,orientation:t||((e==null?void 0:e.axis)==="y"?"vertical":"horizontal"),scrollPrev:m,scrollNext:w,canScrollPrev:u,canScrollNext:f},children:y.jsx("div",{ref:a,onKeyDownCapture:v,className:Ve("relative",s),role:"region","aria-roledescription":"carousel",...o,children:i})})});g0.displayName="Carousel";const y0=_.forwardRef(({className:t,...e},n)=>{const{carouselRef:r,orientation:s}=m0();return y.jsx("div",{ref:r,className:"overflow-hidden",children:y.jsx("div",{ref:n,className:Ve("flex",s==="horizontal"?"-ml-4":"-mt-4 flex-col",t),...e})})});y0.displayName="CarouselContent";const fne=_.forwardRef(({className:t,...e},n)=>{const{orientation:r}=m0();return y.jsx("div",{ref:n,role:"group","aria-roledescription":"slide",className:Ve("min-w-0 shrink-0 grow-0 basis-full",r==="horizontal"?"pl-4":"pt-4",t),...e})});fne.displayName="CarouselItem";const v0=_.forwardRef(({className:t,variant:e="outline",...n},r)=>{const{orientation:s,scrollPrev:i,canScrollPrev:o}=m0();return y.jsxs(Wt,{ref:r,variant:e,className:Ve("absolute  h-12 w-12 rounded-full",s==="horizontal"?" -left-[70px] top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",t,o?"":"hidden"),onClick:i,...n,children:[y.jsx(Tte,{className:"h-4 w-4"}),y.jsx("span",{className:"sr-only",children:"Previous slide"})]})});v0.displayName="CarouselPrevious";const w0=_.forwardRef(({className:t,variant:e="outline",...n},r)=>{const{orientation:s,scrollNext:i,canScrollNext:o}=m0();return y.jsxs(Wt,{ref:r,variant:e,className:Ve("absolute h-12  w-12 rounded-full",s==="horizontal"?"-right-[70px] top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",t,o?"":"hidden"),onClick:i,...n,children:[y.jsx(Ste,{className:"h-4 w-4"}),y.jsx("span",{className:"sr-only",children:"Next slide"})]})});w0.displayName="CarouselNext";const pne={active:!0,breakpoints:{},delay:4e3,jump:!1,playOnInit:!0,stopOnFocusIn:!0,stopOnInteraction:!0,stopOnMouseEnter:!1,stopOnLastSnap:!1,rootNode:null};function mne(t,e){const n=t.scrollSnapList();return typeof e=="number"?n.map(()=>e):e(n,t)}function gne(t,e){const n=t.rootNode();return e&&e(n)||n}function cm(t={}){let e,n,r,s,i=null,o=0,a=!1,l=!1,c=!1,u=!1;function d(W,oe){n=W;const{mergeOptions:re,optionsAtMedia:Z}=oe,U=re(pne,cm.globalOptions),Y=re(U,t);if(e=Z(Y),n.scrollSnapList().length<=1)return;u=e.jump,r=!1,s=mne(n,e.delay);const{eventStore:G,ownerDocument:he}=n.internalEngine(),we=!!n.internalEngine().options.watchDrag,ve=gne(n,e.rootNode);G.add(he,"visibilitychange",v),we&&n.on("pointerDown",b),we&&!e.stopOnInteraction&&n.on("pointerUp",C),e.stopOnMouseEnter&&G.add(ve,"mouseenter",R),e.stopOnMouseEnter&&!e.stopOnInteraction&&G.add(ve,"mouseleave",O),e.stopOnFocusIn&&n.on("slideFocusStart",w),e.stopOnFocusIn&&!e.stopOnInteraction&&G.add(n.containerNode(),"focusout",m),e.playOnInit&&m()}function f(){n.off("pointerDown",b).off("pointerUp",C).off("slideFocusStart",w),w(),r=!0,a=!1}function p(){const{ownerWindow:W}=n.internalEngine();W.clearTimeout(o),o=W.setTimeout(M,s[n.selectedScrollSnap()]),i=new Date().getTime(),n.emit("autoplay:timerset")}function g(){const{ownerWindow:W}=n.internalEngine();W.clearTimeout(o),o=0,i=null,n.emit("autoplay:timerstopped")}function m(){if(!r){if(E()){c=!0;return}a||n.emit("autoplay:play"),p(),a=!0}}function w(){r||(a&&n.emit("autoplay:stop"),g(),a=!1)}function v(){if(E())return c=a,w();c&&m()}function E(){const{ownerDocument:W}=n.internalEngine();return W.visibilityState==="hidden"}function b(){l||w()}function C(){l||m()}function R(){l=!0,w()}function O(){l=!1,m()}function I(W){typeof W<"u"&&(u=W),m()}function A(){a&&w()}function P(){a&&m()}function D(){return a}function M(){const{index:W}=n.internalEngine(),oe=W.clone().add(1).get(),re=n.scrollSnapList().length-1,Z=e.stopOnLastSnap&&oe===re;if(n.canScrollNext()?n.scrollNext(u):n.scrollTo(0,u),n.emit("autoplay:select"),Z)return w();m()}function V(){if(!i)return null;const W=s[n.selectedScrollSnap()],oe=new Date().getTime()-i;return W-oe}return{name:"autoplay",options:t,init:d,destroy:f,play:I,stop:A,reset:P,isPlaying:D,timeUntilNext:V}}cm.globalOptions=void 0;const yne=()=>{const{currentUser:t}=$s(),{Data:e}=wj(t?t.uid:""),[n,r]=_.useState("#242424"),s=fs();return y.jsxs("div",{className:" flex flex-col gap-10 py-10 pb-14  max-w-[1200px]  mx-auto  px-4 md:px-10 max-md:gap-2 ",children:[y.jsxs("div",{className:"flex flex-col gap-3",children:[y.jsx("h1",{className:" text-4xl  max-lg:text-3xl max-sm:text-2xl font-semibold",children:"Your Stories"}),y.jsx("p",{className:" md:text-lg    text-white-2 ",children:"your latest stories"})]}),y.jsxs(g0,{className:" w-full lg:hidden",plugins:[cm({delay:2e3})],opts:{loop:!0},children:[y.jsx(y0,{className:" p-4 flex gap-4 max-md:gap-0",children:e.map(i=>{const{title:o}=i,a=o.length>30?o.slice(0,30)+"...":o;return y.jsx(mp,{items:i,truncatedStr:a,searchItem:!0},i.id)})}),y.jsx(v0,{className:" max-lg:hidden"}),y.jsx(w0,{className:" max-lg:hidden"})]}),y.jsxs("div",{className:"flex flex-row gap-1 flex-wrap h-fit px-4 w-full overflow-hidden max-lg:hidden",children:[y.jsx(bq,{Classname:` flex justify-center items-center border-dashed border-2 border-black-2 rounded-md\r
          w-[220px] mt-3 h-[230px]  hover:bg-orange-1 hover:border-none transition-colors duration-200 hover:text-white-1 cursor-pointer `,onClick:()=>{s("/new")},onMouseEnter:()=>r("#fff"),onMouseLeave:()=>r("#242424"),children:y.jsx(Kl.plus,{Color:n,classes:"w-[100px]"})}),e.map((i,o)=>{if(o<3){const{title:a}=i,l=a.length>30?a.slice(0,30)+"...":a;return y.jsx(mp,{items:i,truncatedStr:l,searchItem:!0},i.id)}})]})]})},vne=t=>{const[e,n]=_.useState([]);return _.useEffect(()=>{async function r(){try{return(await Pe.collection("WrittenStories").where("category","==",t).limit(10).get()).docs.map(o=>({id:o.id,...o.data()}))}catch(s){console.log(s)}}r().then(s=>{n(s)})},[t]),{Data:e,setData:n}},Kw=({Category:t})=>{const{Data:e}=vne(t),[n,r]=_.useState([]);return _.useEffect(()=>{const s=e==null?void 0:e.sort((i,o)=>o.likes-i.likes);r(s)},[e]),y.jsxs("div",{className:"flex flex-col gap-5   w-full ",children:[y.jsxs("h1",{className:"text-3xl  text-black-2 max-lg:text-2xl max-lg:font-semibold max-sm:text-xl max-sm:font-semibold",children:["Top ",y.jsx("span",{className:"text-orange-1",children:t})," Stories"]}),y.jsxs(g0,{className:" w-full",plugins:[cm({delay:2e3})],opts:{loop:!0},children:[y.jsx(y0,{className:" p-4 flex gap-4 max-md:gap-0",children:n.map(s=>{const{title:i}=s,o=i.length>30?i.slice(0,30)+"...":i;return y.jsx(mp,{items:s,truncatedStr:o,searchItem:!0},s.id)})}),y.jsx(v0,{className:" max-lg:hidden"}),y.jsx(w0,{className:" max-lg:hidden"})]})]})},wne=()=>y.jsxs("div",{className:" w-full mx-auto flex flex-col  gap-24 ",children:[y.jsx("div",{className:"w-full shadow-xl",children:y.jsx(yne,{})}),y.jsxs("div",{className:" max-w-[1000px] w-full  mx-auto flex flex-col gap-20 px-4 ",children:[y.jsx(Kw,{Category:"adventure"}),y.jsx(Kw,{Category:"fantasy"}),y.jsx(Kw,{Category:"romance"})]})]}),m4=({attributes:t})=>y.jsxs("div",{className:" flex flex-col justify-center items-center pr-3 ",children:[y.jsxs("div",{className:" text-sm text-black-2 font-light flex gap-1 items-center",children:[y.jsx("img",{src:t.img,width:15}),y.jsx("span",{children:t.title})]}),y.jsx("div",{children:y.jsx("span",{className:" text-white-2",children:t.data})})]}),_ne=[{title:"Posts",img:"../../public/list.svg"},{title:"Followers",img:"../../public/people.svg"}],Ene=[{title:"Likes",img:"../public/heart.svg"},{title:"Parts",img:"../public/list.svg"}],vE=[{genre:"Fantasy",color:"#D8BFD8",hoverColor:"#C0A0C0"},{genre:"Comedy",color:"#FFF8DC",hoverColor:"#FFE4B5"},{genre:"Adventure",color:"#C1E1C1",hoverColor:"#A0D0A0"},{genre:"Mystery",color:"#D1D9E6",hoverColor:"#B0C0D0"},{genre:"Sci-Fi",color:"#B4DDED",hoverColor:"#90C8E0"},{genre:"Romance",color:"#FADADD",hoverColor:"#F5B5C5"},{genre:"Horror",color:"#F4CCCC",hoverColor:"#E09A9A"},{genre:"Historical",color:"#F5DEB3",hoverColor:"#EEC58A"},{genre:"Thriller",color:"#C8D6E5",hoverColor:"#A8BCCF"},{genre:"Poetry",color:"#E3F2FD",hoverColor:"#B0DAF0"}];function g4(t){const e=parseInt(t.slice(1),16),n=e>>16&255,r=e>>8&255,s=e&255;return(n*299+r*587+s*114)/1e3>180?"#333333":"#FFFFFF"}function xne(t){let e="";return t.hasOwnProperty("bold")&&(e+=" font-semibold "),t.hasOwnProperty("header")&&(e+=` text-[${t.header}rem] `),t.hasOwnProperty("italic")&&(e+=" italic"),t.hasOwnProperty("underline")&&(e+=" underline "),t.hasOwnProperty("color")&&(e+=`text-[${t.color}] `),e}const bne=1,Tne=1e3;let Qw=0;function Sne(){return Qw=(Qw+1)%Number.MAX_SAFE_INTEGER,Qw.toString()}const Yw=new Map,gN=t=>{if(Yw.has(t))return;const e=setTimeout(()=>{Yw.delete(t),yf({type:"REMOVE_TOAST",toastId:t})},Tne);Yw.set(t,e)},Ine=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,bne)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?gN(n):t.toasts.forEach(r=>{gN(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Gg=[];let Kg={toasts:[]};function yf(t){Kg=Ine(Kg,t),Gg.forEach(e=>{e(Kg)})}function Pr({...t}){const e=Sne(),n=s=>yf({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>yf({type:"DISMISS_TOAST",toastId:e});return yf({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Ane(){const[t,e]=_.useState(Kg);return _.useEffect(()=>(Gg.push(e),()=>{const n=Gg.indexOf(e);n>-1&&Gg.splice(n,1)}),[t]),{...t,toast:Pr,dismiss:n=>yf({type:"DISMISS_TOAST",toastId:n})}}function Tr(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function Cne(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function mS(...t){return e=>t.forEach(n=>Cne(n,e))}function fc(...t){return _.useCallback(mS(...t),t)}function Rne(t,e=[]){let n=[];function r(i,o){const a=_.createContext(o),l=n.length;n=[...n,o];function c(d){const{scope:f,children:p,...g}=d,m=(f==null?void 0:f[t][l])||a,w=_.useMemo(()=>g,Object.values(g));return y.jsx(m.Provider,{value:w,children:p})}function u(d,f){const p=(f==null?void 0:f[t][l])||a,g=_.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,u]}const s=()=>{const i=n.map(o=>_.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return _.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,Pne(s,...e)]}function Pne(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var wE=_.forwardRef((t,e)=>{const{children:n,...r}=t,s=_.Children.toArray(n),i=s.find(kne);if(i){const o=i.props.children,a=s.map(l=>l===i?_.Children.count(o)>1?_.Children.only(null):_.isValidElement(o)?o.props.children:null:l);return y.jsx(_E,{...r,ref:e,children:_.isValidElement(o)?_.cloneElement(o,void 0,a):null})}return y.jsx(_E,{...r,ref:e,children:n})});wE.displayName="Slot";var _E=_.forwardRef((t,e)=>{const{children:n,...r}=t;if(_.isValidElement(n)){const s=One(n);return _.cloneElement(n,{...Dne(r,n.props),ref:e?mS(e,s):s})}return _.Children.count(n)>1?_.Children.only(null):null});_E.displayName="SlotClone";var Nne=({children:t})=>y.jsx(y.Fragment,{children:t});function kne(t){return _.isValidElement(t)&&t.type===Nne}function Dne(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{i(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function One(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Lne(t){const e=t+"CollectionProvider",[n,r]=Rne(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:g,children:m}=p,w=yn.useRef(null),v=yn.useRef(new Map).current;return y.jsx(s,{scope:g,itemMap:v,collectionRef:w,children:m})};o.displayName=e;const a=t+"CollectionSlot",l=yn.forwardRef((p,g)=>{const{scope:m,children:w}=p,v=i(a,m),E=fc(g,v.collectionRef);return y.jsx(wE,{ref:E,children:w})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",d=yn.forwardRef((p,g)=>{const{scope:m,children:w,...v}=p,E=yn.useRef(null),b=fc(g,E),C=i(c,m);return yn.useEffect(()=>(C.itemMap.set(E,{ref:E,...v}),()=>void C.itemMap.delete(E))),y.jsx(wE,{[u]:"",ref:b,children:w})});d.displayName=c;function f(p){const g=i(t+"CollectionConsumer",p);return yn.useCallback(()=>{const w=g.collectionRef.current;if(!w)return[];const v=Array.from(w.querySelectorAll(`[${u}]`));return Array.from(g.itemMap.values()).sort((C,R)=>v.indexOf(C.ref.current)-v.indexOf(R.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},f,r]}function Mne(t,e){const n=_.createContext(e),r=i=>{const{children:o,...a}=i,l=_.useMemo(()=>a,Object.values(a));return y.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=_.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Jd(t,e=[]){let n=[];function r(i,o){const a=_.createContext(o),l=n.length;n=[...n,o];const c=d=>{var v;const{scope:f,children:p,...g}=d,m=((v=f==null?void 0:f[t])==null?void 0:v[l])||a,w=_.useMemo(()=>g,Object.values(g));return y.jsx(m.Provider,{value:w,children:p})};c.displayName=i+"Provider";function u(d,f){var m;const p=((m=f==null?void 0:f[t])==null?void 0:m[l])||a,g=_.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[c,u]}const s=()=>{const i=n.map(o=>_.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return _.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,Vne(s,...e)]}function Vne(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var y4=_.forwardRef((t,e)=>{const{children:n,...r}=t,s=_.Children.toArray(n),i=s.find(Fne);if(i){const o=i.props.children,a=s.map(l=>l===i?_.Children.count(o)>1?_.Children.only(null):_.isValidElement(o)?o.props.children:null:l);return y.jsx(EE,{...r,ref:e,children:_.isValidElement(o)?_.cloneElement(o,void 0,a):null})}return y.jsx(EE,{...r,ref:e,children:n})});y4.displayName="Slot";var EE=_.forwardRef((t,e)=>{const{children:n,...r}=t;if(_.isValidElement(n)){const s=Une(n);return _.cloneElement(n,{...Bne(r,n.props),ref:e?mS(e,s):s})}return _.Children.count(n)>1?_.Children.only(null):null});EE.displayName="SlotClone";var jne=({children:t})=>y.jsx(y.Fragment,{children:t});function Fne(t){return _.isValidElement(t)&&t.type===jne}function Bne(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{i(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function Une(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var $ne=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Si=$ne.reduce((t,e)=>{const n=_.forwardRef((r,s)=>{const{asChild:i,...o}=r,a=i?y4:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(a,{...o,ref:s})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function v4(t,e){t&&go.flushSync(()=>t.dispatchEvent(e))}function Jt(t){const e=_.useRef(t);return _.useEffect(()=>{e.current=t}),_.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function gS(t,e=globalThis==null?void 0:globalThis.document){const n=Jt(t);_.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var qne="DismissableLayer",xE="dismissableLayer.update",zne="dismissableLayer.pointerDownOutside",Wne="dismissableLayer.focusOutside",yN,w4=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),_4=_.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=_.useContext(w4),[u,d]=_.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=_.useState({}),g=fc(e,I=>d(I)),m=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(w),E=u?m.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,C=E>=v,R=Gne(I=>{const A=I.target,P=[...c.branches].some(D=>D.contains(A));!C||P||(s==null||s(I),o==null||o(I),I.defaultPrevented||a==null||a())},f),O=Kne(I=>{const A=I.target;[...c.branches].some(D=>D.contains(A))||(i==null||i(I),o==null||o(I),I.defaultPrevented||a==null||a())},f);return gS(I=>{E===c.layers.size-1&&(r==null||r(I),!I.defaultPrevented&&a&&(I.preventDefault(),a()))},f),_.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(yN=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),vN(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=yN)}},[u,f,n,c]),_.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),vN())},[u,c]),_.useEffect(()=>{const I=()=>p({});return document.addEventListener(xE,I),()=>document.removeEventListener(xE,I)},[]),y.jsx(Si.div,{...l,ref:g,style:{pointerEvents:b?C?"auto":"none":void 0,...t.style},onFocusCapture:Tr(t.onFocusCapture,O.onFocusCapture),onBlurCapture:Tr(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:Tr(t.onPointerDownCapture,R.onPointerDownCapture)})});_4.displayName=qne;var Hne="DismissableLayerBranch",E4=_.forwardRef((t,e)=>{const n=_.useContext(w4),r=_.useRef(null),s=fc(e,r);return _.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),y.jsx(Si.div,{...t,ref:s})});E4.displayName=Hne;function Gne(t,e=globalThis==null?void 0:globalThis.document){const n=Jt(t),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){x4(zne,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Kne(t,e=globalThis==null?void 0:globalThis.document){const n=Jt(t),r=_.useRef(!1);return _.useEffect(()=>{const s=i=>{i.target&&!r.current&&x4(Wne,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function vN(){const t=new CustomEvent(xE);document.dispatchEvent(t)}function x4(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?v4(s,i):s.dispatchEvent(i)}var Qne=_4,Yne=E4,Ht=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},Xne="Portal",b4=_.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=_.useState(!1);Ht(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?sb.createPortal(y.jsx(Si.div,{...r,ref:e}),o):null});b4.displayName=Xne;function Jne(t,e){return _.useReducer((n,r)=>e[n][r]??n,t)}var T4=t=>{const{present:e,children:n}=t,r=Zne(e),s=typeof n=="function"?n({present:r.isPresent}):_.Children.only(n),i=fc(r.ref,ere(s));return typeof n=="function"||r.isPresent?_.cloneElement(s,{ref:i}):null};T4.displayName="Presence";function Zne(t){const[e,n]=_.useState(),r=_.useRef({}),s=_.useRef(t),i=_.useRef("none"),o=t?"mounted":"unmounted",[a,l]=Jne(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const c=Jm(r.current);i.current=a==="mounted"?c:"none"},[a]),Ht(()=>{const c=r.current,u=s.current;if(u!==t){const f=i.current,p=Jm(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Ht(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=p=>{const m=Jm(r.current).includes(p.animationName);if(p.target===e&&m&&(l("ANIMATION_END"),!s.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},f=p=>{p.target===e&&(i.current=Jm(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:_.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function Jm(t){return(t==null?void 0:t.animationName)||"none"}function ere(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function tv({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=tre({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,a=Jt(n),l=_.useCallback(c=>{if(i){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else s(c)},[i,t,s,a]);return[o,l]}function tre({defaultProp:t,onChange:e}){const n=_.useState(t),[r]=n,s=_.useRef(r),i=Jt(e);return _.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var nre="VisuallyHidden",yS=_.forwardRef((t,e)=>y.jsx(Si.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));yS.displayName=nre;var vS="ToastProvider",[wS,rre,sre]=Lne("Toast"),[S4,Ege]=Jd("Toast",[sre]),[ire,_0]=S4(vS),I4=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=_.useState(null),[c,u]=_.useState(0),d=_.useRef(!1),f=_.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${vS}\`. Expected non-empty \`string\`.`),y.jsx(wS.Provider,{scope:e,children:y.jsx(ire,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:_.useCallback(()=>u(p=>p+1),[]),onToastRemove:_.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:o})})};I4.displayName=vS;var A4="ToastViewport",ore=["F8"],bE="toast.viewportPause",TE="toast.viewportResume",C4=_.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=ore,label:s="Notifications ({hotkey})",...i}=t,o=_0(A4,n),a=rre(n),l=_.useRef(null),c=_.useRef(null),u=_.useRef(null),d=_.useRef(null),f=fc(e,d,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;_.useEffect(()=>{const w=v=>{var b;r.length!==0&&r.every(C=>v[C]||v.code===C)&&((b=d.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),_.useEffect(()=>{const w=l.current,v=d.current;if(g&&w&&v){const E=()=>{if(!o.isClosePausedRef.current){const O=new CustomEvent(bE);v.dispatchEvent(O),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const O=new CustomEvent(TE);v.dispatchEvent(O),o.isClosePausedRef.current=!1}},C=O=>{!w.contains(O.relatedTarget)&&b()},R=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",E),w.addEventListener("focusout",C),w.addEventListener("pointermove",E),w.addEventListener("pointerleave",R),window.addEventListener("blur",E),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",E),w.removeEventListener("focusout",C),w.removeEventListener("pointermove",E),w.removeEventListener("pointerleave",R),window.removeEventListener("blur",E),window.removeEventListener("focus",b)}}},[g,o.isClosePausedRef]);const m=_.useCallback(({tabbingDirection:w})=>{const E=a().map(b=>{const C=b.ref.current,R=[C,...wre(C)];return w==="forwards"?R:R.reverse()});return(w==="forwards"?E.reverse():E).flat()},[a]);return _.useEffect(()=>{const w=d.current;if(w){const v=E=>{var R,O,I;const b=E.altKey||E.ctrlKey||E.metaKey;if(E.key==="Tab"&&!b){const A=document.activeElement,P=E.shiftKey;if(E.target===w&&P){(R=c.current)==null||R.focus();return}const V=m({tabbingDirection:P?"backwards":"forwards"}),L=V.findIndex(W=>W===A);Xw(V.slice(L+1))?E.preventDefault():P?(O=c.current)==null||O.focus():(I=u.current)==null||I.focus()}};return w.addEventListener("keydown",v),()=>w.removeEventListener("keydown",v)}},[a,m]),y.jsxs(Yne,{ref:l,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&y.jsx(SE,{ref:c,onFocusFromOutsideViewport:()=>{const w=m({tabbingDirection:"forwards"});Xw(w)}}),y.jsx(wS.Slot,{scope:n,children:y.jsx(Si.ol,{tabIndex:-1,...i,ref:f})}),g&&y.jsx(SE,{ref:u,onFocusFromOutsideViewport:()=>{const w=m({tabbingDirection:"backwards"});Xw(w)}})]})});C4.displayName=A4;var R4="ToastFocusProxy",SE=_.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=_0(R4,n);return y.jsx(yS,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});SE.displayName=R4;var E0="Toast",are="toast.swipeStart",lre="toast.swipeMove",cre="toast.swipeCancel",ure="toast.swipeEnd",P4=_.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a=!0,l]=tv({prop:r,defaultProp:s,onChange:i});return y.jsx(T4,{present:n||a,children:y.jsx(fre,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Jt(t.onPause),onResume:Jt(t.onResume),onSwipeStart:Tr(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Tr(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:Tr(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Tr(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});P4.displayName=E0;var[dre,hre]=S4(E0,{onClose(){}}),fre=_.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:p,...g}=t,m=_0(E0,n),[w,v]=_.useState(null),E=fc(e,W=>v(W)),b=_.useRef(null),C=_.useRef(null),R=s||m.duration,O=_.useRef(0),I=_.useRef(R),A=_.useRef(0),{onToastAdd:P,onToastRemove:D}=m,M=Jt(()=>{var oe;(w==null?void 0:w.contains(document.activeElement))&&((oe=m.viewport)==null||oe.focus()),o()}),V=_.useCallback(W=>{!W||W===1/0||(window.clearTimeout(A.current),O.current=new Date().getTime(),A.current=window.setTimeout(M,W))},[M]);_.useEffect(()=>{const W=m.viewport;if(W){const oe=()=>{V(I.current),c==null||c()},re=()=>{const Z=new Date().getTime()-O.current;I.current=I.current-Z,window.clearTimeout(A.current),l==null||l()};return W.addEventListener(bE,re),W.addEventListener(TE,oe),()=>{W.removeEventListener(bE,re),W.removeEventListener(TE,oe)}}},[m.viewport,R,l,c,V]),_.useEffect(()=>{i&&!m.isClosePausedRef.current&&V(R)},[i,R,m.isClosePausedRef,V]),_.useEffect(()=>(P(),()=>D()),[P,D]);const L=_.useMemo(()=>w?V4(w):null,[w]);return m.viewport?y.jsxs(y.Fragment,{children:[L&&y.jsx(pre,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:L}),y.jsx(dre,{scope:n,onClose:M,children:go.createPortal(y.jsx(wS.ItemSlot,{scope:n,children:y.jsx(Qne,{asChild:!0,onEscapeKeyDown:Tr(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||M(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:y.jsx(Si.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":m.swipeDirection,...g,ref:E,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Tr(t.onKeyDown,W=>{W.key==="Escape"&&(a==null||a(W.nativeEvent),W.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,M()))}),onPointerDown:Tr(t.onPointerDown,W=>{W.button===0&&(b.current={x:W.clientX,y:W.clientY})}),onPointerMove:Tr(t.onPointerMove,W=>{if(!b.current)return;const oe=W.clientX-b.current.x,re=W.clientY-b.current.y,Z=!!C.current,U=["left","right"].includes(m.swipeDirection),Y=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,G=U?Y(0,oe):0,he=U?0:Y(0,re),we=W.pointerType==="touch"?10:2,ve={x:G,y:he},De={originalEvent:W,delta:ve};Z?(C.current=ve,Zm(lre,d,De,{discrete:!1})):wN(ve,m.swipeDirection,we)?(C.current=ve,Zm(are,u,De,{discrete:!1}),W.target.setPointerCapture(W.pointerId)):(Math.abs(oe)>we||Math.abs(re)>we)&&(b.current=null)}),onPointerUp:Tr(t.onPointerUp,W=>{const oe=C.current,re=W.target;if(re.hasPointerCapture(W.pointerId)&&re.releasePointerCapture(W.pointerId),C.current=null,b.current=null,oe){const Z=W.currentTarget,U={originalEvent:W,delta:oe};wN(oe,m.swipeDirection,m.swipeThreshold)?Zm(ure,p,U,{discrete:!0}):Zm(cre,f,U,{discrete:!0}),Z.addEventListener("click",Y=>Y.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),pre=t=>{const{__scopeToast:e,children:n,...r}=t,s=_0(E0,e),[i,o]=_.useState(!1),[a,l]=_.useState(!1);return yre(()=>o(!0)),_.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:y.jsx(b4,{asChild:!0,children:y.jsx(yS,{...r,children:i&&y.jsxs(y.Fragment,{children:[s.label," ",n]})})})},mre="ToastTitle",N4=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return y.jsx(Si.div,{...r,ref:e})});N4.displayName=mre;var gre="ToastDescription",k4=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return y.jsx(Si.div,{...r,ref:e})});k4.displayName=gre;var D4="ToastAction",O4=_.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?y.jsx(M4,{altText:n,asChild:!0,children:y.jsx(_S,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${D4}\`. Expected non-empty \`string\`.`),null)});O4.displayName=D4;var L4="ToastClose",_S=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=hre(L4,n);return y.jsx(M4,{asChild:!0,children:y.jsx(Si.button,{type:"button",...r,ref:e,onClick:Tr(t.onClick,s.onClose)})})});_S.displayName=L4;var M4=_.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return y.jsx(Si.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function V4(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),vre(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...V4(r))}}),e}function Zm(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?v4(s,i):s.dispatchEvent(i)}var wN=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function yre(t=()=>{}){const e=Jt(t);Ht(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function vre(t){return t.nodeType===t.ELEMENT_NODE}function wre(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Xw(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var _re=I4,j4=C4,F4=P4,B4=N4,U4=k4,$4=O4,q4=_S;const Ere=_re,z4=_.forwardRef(({className:t,...e},n)=>y.jsx(j4,{ref:n,className:Ve("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));z4.displayName=j4.displayName;const xre=pS("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border border-neutral-200 p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full dark:border-neutral-800",{variants:{variant:{default:"border bg-white text-neutral-950 dark:bg-neutral-950 dark:text-neutral-50",destructive:"destructive group border-red-500 bg-red-500 text-neutral-50 dark:border-red-900 dark:bg-red-900 dark:text-neutral-50"}},defaultVariants:{variant:"default"}}),W4=_.forwardRef(({className:t,variant:e,...n},r)=>y.jsx(F4,{ref:r,className:Ve(xre({variant:e}),t),...n}));W4.displayName=F4.displayName;const bre=_.forwardRef(({className:t,...e},n)=>y.jsx($4,{ref:n,className:Ve("inline-flex h-8 shrink-0 items-center justify-center rounded-md border border-neutral-200 bg-transparent px-3 text-sm font-medium ring-offset-white transition-colors hover:bg-neutral-100 focus:outline-none focus:ring-2 focus:ring-neutral-950 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-neutral-100/40 group-[.destructive]:hover:border-red-500/30 group-[.destructive]:hover:bg-red-500 group-[.destructive]:hover:text-neutral-50 group-[.destructive]:focus:ring-red-500 dark:border-neutral-800 dark:ring-offset-neutral-950 dark:hover:bg-neutral-800 dark:focus:ring-neutral-300 dark:group-[.destructive]:border-neutral-800/40 dark:group-[.destructive]:hover:border-red-900/30 dark:group-[.destructive]:hover:bg-red-900 dark:group-[.destructive]:hover:text-neutral-50 dark:group-[.destructive]:focus:ring-red-900",t),...e}));bre.displayName=$4.displayName;const H4=_.forwardRef(({className:t,...e},n)=>y.jsx(q4,{ref:n,className:Ve("absolute right-2 top-2 rounded-md p-1 text-neutral-950/50 opacity-0 transition-opacity hover:text-neutral-950 focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600 dark:text-neutral-50/50 dark:hover:text-neutral-50",t),"toast-close":"",...e,children:y.jsx(i4,{className:"h-4 w-4"})}));H4.displayName=q4.displayName;const G4=_.forwardRef(({className:t,...e},n)=>y.jsx(B4,{ref:n,className:Ve("text-sm font-semibold",t),...e}));G4.displayName=B4.displayName;const K4=_.forwardRef(({className:t,...e},n)=>y.jsx(U4,{ref:n,className:Ve("text-sm  font-semibold opacity-90",t),...e}));K4.displayName=U4.displayName;function um(){const{toasts:t}=Ane();return y.jsxs(Ere,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return y.jsxs(W4,{...i,className:" bg-orange-2 border border-orange-1 rounded-none text-black-2",children:[y.jsxs("div",{className:"grid gap-1 ",children:[n&&y.jsx(G4,{children:n}),r&&y.jsx(K4,{children:r})]}),s,y.jsx(H4,{})]},e)}),y.jsx(z4,{})]})}const eg=["#ff4747","#808080"],Tre=({Data:t,length:e,Parts:n})=>{const{currentUser:r}=$s(),s=fs(),{storyId:i}=Ha(),[o,a]=_.useState("#808080"),[l,c]=_.useState(!1),[u,d]=_.useState(!1),[f,p]=_.useState(0),[g,m]=_.useState("");function w(){d(!u)}_.useEffect(()=>{async function C(){if(r)try{const{uid:R}=r;(await Pe.collection("WrittenStories").doc(i).collection("likes").doc(R).get()).exists?a(eg[0]):a(eg[1])}catch(R){console.error("Error fetching like status:",R)}}C()},[i,r]);async function v(){if(l)return;c(!0);const C=Pe.collection("WrittenStories").doc(i).collection("likes");try{if(!r)return;const{uid:R}=r;(await C.doc(R).get()).exists?(await C.doc(R).delete(),await Pe.collection("WrittenStories").doc(i).update({likes:Os.firestore.FieldValue.increment(-1)}),a(eg[1]),Pr({title:"Unlike",description:"You unliked the story",variant:"destructive"})):(await C.doc(R).set({likedAt:new Date}),await Pe.collection("WrittenStories").doc(i).update({likes:Os.firestore.FieldValue.increment(1)}),a(eg[0]),Pr({title:"Like",description:"You liked the story",variant:"destructive"}))}catch(R){console.error("Error handling like functionality:",R)}finally{c(!1)}}_.useEffect(()=>{let C;function R(){C=Pe.collection("WrittenStories").doc(i).onSnapshot(I=>{const A=I.data();p(A==null?void 0:A.likes)})}return R(),()=>C()},[r,i]),_.useEffect(()=>{var R,O;if(!t)return;const C=((R=t.title)==null?void 0:R.length)>20?((O=t.title)==null?void 0:O.slice(0,20))+"...":t.title;m(C)},[t]);function E(){s(`/session/${i}`,{state:{from:"story"}})}function b(){n&&s(`/read/${n.id}`)}return y.jsxs("section",{className:" py-8 flex  justify-center items-center w-full shadow-xl pr-3",children:[y.jsxs("div",{className:"flex gap-8  w-fit max-sm:gap-4",children:[y.jsx("div",{className:" w-fit ",children:y.jsx(js.img,{initial:{scale:0},animate:{scale:1},transition:{delay:2},src:t&&t.ImgUrl,className:" rounded-md w-[330px] h-full max-lg:w-[270px] max-md:w-[230px] max-sm:[180px]"})}),y.jsxs("div",{className:"  py-10 flex flex-col gap-5  w-fit",children:[y.jsx(js.h1,{initial:{color:"#8266c9"},animate:{color:"#242424"},transition:{delay:2},className:" text-4xl font-semibold w-max max-lg:text-3xl max-md:text-2xl max-sm:text-xl",children:t&&g}),y.jsxs("div",{className:"flex flex-row gap-2 ",children:[y.jsx("span",{className:" w-fit inline-block bg-gray-100 text-gray-700 rounded-full px-3 py-1 text-sm mr-2 mb-2",children:t&&t.category}),y.jsx(Kl.heart,{Color:o,handleClick:v}),y.jsx(Kl.save,{clicked:u,handleClick:w})]}),y.jsx("div",{children:y.jsx("div",{className:"flex flex-row gap-4",children:Ene.map((C,R)=>{if(!e)return;const O=R==0?f:e,I={...C,data:O};return y.jsxs("div",{children:[R==1&&y.jsx("span",{className:"w-[1px] h-full bg-black-2"}),y.jsx(m4,{attributes:I})]},R)})})}),y.jsxs("div",{className:"flex gap-2 w-full",children:[y.jsx(Wt,{className:"  w-full bg-orange-1 hover:border-2 hover:border-orange-1 hover:bg-orange-2 hover:text-black-2",onClick:b,children:"Start Reading"}),(r==null?void 0:r.uid)==(t==null?void 0:t.author)?y.jsx(Wt,{className:"  w-fit bg-orange-1 hover:border-2 hover:border-orange-1 hover:bg-orange-2 hover:text-black-2 ",onClick:E,children:y.jsx(Kl.plus,{classes:" w-[5px] flex justify-center items-center ",Color:"#fff"})}):null]})]})]}),y.jsx(um,{})]})},Sre=({Data:t})=>{var n;const{author:e}=rm(t&&t.author);return y.jsxs("div",{className:" border-2 w-full h-fit  rounded-lg flex flex-col gap-3 p-5",children:[y.jsxs(Ia,{to:`/profile/${t&&t.author}/about`,className:"flex gap-2 items-center",children:[y.jsx("img",{alt:"User",src:e!=null&&e.PhotoUrl?e==null?void 0:e.PhotoUrl:"../public/user.svg",width:30}),y.jsx("span",{children:e!=null&&e.name?e==null?void 0:e.name:""})]}),y.jsx("div",{children:y.jsx("p",{className:" text-black-2  leading-7",children:t&&t.desc})}),y.jsx("div",{className:"flex gap-2 flex-wrap",children:t&&((n=t.tag)==null?void 0:n.map((r,s)=>y.jsx("span",{className:"inline-block bg-gray-100 text-gray-700 rounded-full px-3 py-1 text-sm mr-2 mb-2",children:r},s)))})]})},Q4=({children:t})=>y.jsx("div",{className:" max-w-[1000px] m-auto",children:t}),Ire=({Parts:t})=>y.jsxs("div",{className:" border-2 p-3 flex flex-col gap-3 rounded-lg 2xl:w-[400px] lg:w-[360px]  max-lg:w-full",children:[y.jsx("h1",{className:"text-xl font-semibold  text-black-2",children:"Table of contents"}),y.jsx("div",{className:"flex flex-col gap-5 p-3.5",children:t?t.map((e,n)=>{if(!(e!=null&&e.title))return;const r=e.title.length>20?e.title.slice(0,20)+"...":e.title;return y.jsxs("div",{className:" text-lg flex flex-row gap-3 items-center",children:[y.jsxs("span",{children:["Part-",n+1," :"]}),y.jsx("span",{children:r})]},n)}):null})]});async function Are(t,e,n,r){try{return(await Pe.collection("WrittenStories").where("category","==",e).limit(10).get()).docs.map(c=>({id:c.id,...c.data()})).filter(c=>c.id!=r).map(c=>{let u=0;u+=2;const d=c.tag.filter(f=>n.includes(f));return u+=d.length,c.title.toLowerCase().includes(t.toLowerCase())&&(u+=.5),{...c,score:u}}).sort((c,u)=>u.score-c.score)}catch(s){console.log(s)}}const Cre=({Data:t,storyId:e})=>{const[n,r]=_.useState([]);return _.useEffect(()=>{if(!t)return;const{tag:s,title:i,category:o}=t;Are(i,o,s,e).then(a=>{a&&r(a)})},[t,e]),y.jsxs("div",{className:" mt-12 flex flex-col gap-4 px-4",children:[y.jsx("div",{children:y.jsx("h1",{className:" text-2xl text-black-2 font-semibold",children:"You may also like"})}),y.jsxs(g0,{plugins:[cm({delay:2e3})],opts:{loop:!0},children:[y.jsx(y0,{className:" flex gap-4 max-md:gap-1 max-sm:gap-0 items-center p-4",children:n&&n.map(s=>{const{title:i}=s,o=i.length>30?i.slice(0,30)+"...":i;return y.jsx(mp,{items:s,truncatedStr:o,searchItem:!1},s.id)})}),y.jsx(v0,{className:" max-lg:hidden"}),y.jsx(w0,{className:"max-lg:hidden"})]})]})},Rre=async t=>{try{return(await Pe.collection("Parts").where("storyId","==",t).get()).docs.map(s=>({id:s.id,...s.data()}))}catch(e){console.error("Error fetching chapters:",e)}},Pre=()=>{const{storyId:t}=Ha(),[e,n]=_.useState({}),[r,s]=_.useState([]),[i,o]=_.useState();return _.useEffect(()=>{async function a(){try{const l=await Pe.collection("WrittenStories").doc(t).get();Rre(t||"").then(c=>{c&&(s(c),o(c.length))}),n(l.data())}catch(l){console.log(l)}}a()},[t]),y.jsxs("div",{children:[y.jsx(Tre,{Data:e,length:i,Parts:r[0]}),y.jsxs(Q4,{children:[y.jsxs("div",{className:" flex w-full flex-row gap-4 mt-10 h-fit max-lg:flex-col px-4",children:[y.jsx(Sre,{Data:e}),y.jsx(Ire,{Parts:r})]}),y.jsx(Cre,{Data:e,storyId:t})]})]})},Nre=()=>y.jsx("div",{children:"peopleStory"}),kre=(t,e)=>{const[n,r]=_.useState(!1),[s,i]=_.useState(!1);_.useEffect(()=>{async function a(){if(!(!e||!t||e.uid===t))try{const{uid:l}=e,c=await Pe.collection("user").doc(t).collection("Followers").doc(l).get();r(c.exists)}catch(l){console.error("Error fetching follow status:",l)}}a()},[t,e]);async function o(){var a,l;if(!(!e||!t)){if(e.uid===t){console.warn("You cannot follow yourself.");return}if(!s){i(!0);try{const{uid:c}=e;n?(await Pe.collection("user").doc(t).collection("Followers").doc(c).delete(),await Pe.collection("user").doc(c).collection("Following").doc(t).delete(),Pr({title:"Unfollow",description:`You unfollowed ${(a=e==null?void 0:e.email)==null?void 0:a.split("@")[0]}`,variant:"destructive"}),r(!1)):(await Pe.collection("user").doc(t).collection("Followers").doc(c).set({followedAt:new Date}),await Pe.collection("user").doc(c).collection("Following").doc(t).set({followedAt:new Date}),Pr({title:"Follow",description:`You followed ${(l=e==null?void 0:e.email)==null?void 0:l.split("@")[0]}`,variant:"destructive"}),r(!0))}catch(c){console.error("Error toggling follow state:",c)}finally{i(!1)}}}}return{toggleFollow:o,isFollow:n,isProcessing:s}},Dre=async t=>{try{return(await Pe.collection("user").doc(t==null?void 0:t.uid).collection("Followers").get()).docs.map(r=>r.id)}catch(e){console.log(e);return}},Ore=(t,e)=>Pe.collection("user").doc(t==null?void 0:t.uid).collection("Following").onSnapshot(s=>{e(s.size)}),_N=({Data:t,FollowersCount:e})=>y.jsxs("div",{className:" w-full flex flex-col items-center  px-6 gap-5 max-lg:gap-8",children:[t!=null&&t.PhotoUrl?y.jsx("img",{src:t.PhotoUrl,className:"rounded-full lg:width-[80px] max-lg:width-[100px] max-md:width-[80px]"}):y.jsx("img",{src:"../../public/user.svg",width:120,className:"rounded-full lg:width-[40px] max-lg:width-[60px] max-md:width-[50px]"}),y.jsx("h1",{className:"text-black-2 font-semibold text-center max-lg:text-xl max-md:text-lg",children:y.jsx("span",{children:t?t.name:""})}),y.jsx("div",{className:"flex flex-row gap-2 justify-center items-center",children:_ne.map((n,r)=>{if(!t)return;console.log(t.PhotoUrl);const s=r==0?t.likes:e,i={...n,data:s};return y.jsxs(y.Fragment,{children:[r==1&&y.jsx("div",{className:" w-[3px] bg-black-2 h-full mr-2"},r),y.jsx(m4,{attributes:i})]})})})]}),Lre=()=>{const{profileId:t}=Ha(),[e,n]=_.useState({}),[r,s]=_.useState(!0),[i,o]=_.useState(!1),[a,l]=_.useState(0),{currentUser:c}=$s(),{isFollow:u,toggleFollow:d,isProcessing:f}=kre(t,c);return _.useEffect(()=>{async function p(){try{const g=await Pe.collection("user").doc(t).get();if(!g.data())return;n(g.data())}catch(g){console.log(g)}}p()},[t,c]),_.useEffect(()=>{const p=Ore(c,l);return()=>p()},[c]),y.jsxs("div",{className:"max-w-[1200px] mx-auto lg:px-7",children:[y.jsxs("section",{className:"pt-16 flex flex-col gap-10 max-lg:px-5 border-b border-black-2",children:[y.jsxs("div",{className:"flex py-16 flex-col gap-8 max-lg:hidden",children:[(e==null?void 0:e.name)&&y.jsx(js.h1,{initial:{color:"#8266c9"},animate:{color:"#242424"},transition:{delay:2},className:" text-6xl text-black-2 font-semibold",children:e.name}),y.jsxs("div",{className:" flex gap-2 items-center justify-between w-fit",children:[y.jsx("h1",{className:" text-lg text-black-2 ",children:e?e.name:""}),(c==null?void 0:c.uid)!=t&&y.jsx(Wt,{disabled:f,variant:"destructive",onClick:d,children:u?y.jsx("span",{children:"unfollow"}):y.jsx("span",{children:"follow"})})]})]}),y.jsxs("div",{className:" lg:hidden",children:[y.jsx(_N,{Data:e,FollowersCount:a}),y.jsx("div",{className:"flex mt-8  items-center w-full",children:(c==null?void 0:c.uid)!=t&&y.jsx(Wt,{disabled:f,variant:"destructive",onClick:d,children:u?y.jsx("span",{children:"unfollow"}):y.jsx("span",{children:"follow"})})})]}),y.jsx("div",{children:y.jsxs("ul",{className:" text-black-2  text-sm font-semibold flex items-center gap-10",children:[y.jsx(Ia,{to:"about",children:y.jsx("li",{onClick:()=>{s(!0),o(!1)},className:dc("cursor-pointer hover:text-white-2 pb-4",{"border-b-4 border-orange-1":r}),children:"Home"})}),y.jsx(Ia,{to:"home",children:y.jsx("li",{onClick:()=>{s(!1),o(!0)},className:dc("cursor-pointer hover:text-white-2 pb-4",{"border-b-4 border-orange-1":i}),children:"About"})})]})})]}),y.jsxs("div",{className:"flex flex-row p-6 gap-4",children:[y.jsx(uq,{}),y.jsx("div",{className:" p-4 max-lg:hidden w-[30%] border-l border-black-2",children:y.jsx(_N,{Data:e,FollowersCount:a})})]}),y.jsx(um,{})]})},EN=yn.forwardRef(({children:t,open:e,...n})=>y.jsx(Ej,{children:e&&y.jsx(js.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:dc("absolute  top-10 left-0 max-sm:-left-16"),children:y.jsx("div",{className:" z-50 shadow-custom-equal w-full px-4 py-2 bg-white-1 rounded-md",...n,children:t})})})),Mre=Os.firestore.Timestamp;async function Vre(t,e){try{const n=await Dre(t);n&&n.forEach(r=>{const s=Pe.collection("user").doc(r).collection("Notification").doc().id;Pe.collection("user").doc(r).collection("Notification").doc(s).set({senderId:t==null?void 0:t.uid,type:"New Story Part",read:!1,createdAt:Mre.now(),PartId:e,message:`new story part  was published from ${t!=null&&t.email?t==null?void 0:t.email.split("@")[0]:""}`})})}catch(n){console.log(n)}}function jre(t,e){return Pe.collection("user").doc(t==null?void 0:t.uid).collection("Notification").where("read","==",!1).onSnapshot(s=>{const i=[];s.forEach(o=>{const a=o.data();i.push({id:o.id,...a})}),e(i)})}function Fre(t,e){return Pe.collection("user").doc(t==null?void 0:t.uid).collection("Notification").where("read","==",!1).onSnapshot(i=>{e(i.size)})}async function Bre(t){try{const e=Pe.collection("user").doc(t==null?void 0:t.uid).collection("Notification"),n=await e.where("read","==",!1).get();if(n.empty)return;for(const r of n.docs)await e.doc(r.id).update({read:!0});console.log("hi")}catch(e){console.log(e)}}async function Ure(t,e){if(e)try{await Pe.collection("user").doc(t==null?void 0:t.uid).collection("Notification").doc(e).update({read:!0})}catch(n){console.log(n)}}function Ea(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function xN(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function $re(...t){return e=>{let n=!1;const r=t.map(s=>{const i=xN(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():xN(t[s],null)}}}}function Nc(...t){return _.useCallback($re(...t),t)}var qre=PD.useId||(()=>{}),zre=0;function Xu(t){const[e,n]=_.useState(qre());return Ht(()=>{n(r=>r??String(zre++))},[t]),e?`radix-${e}`:""}var Wre=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],xo=Wre.reduce((t,e)=>{const n=_.forwardRef((r,s)=>{const{asChild:i,...o}=r,a=i?lo:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(a,{...o,ref:s})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Hre(t,e){t&&go.flushSync(()=>t.dispatchEvent(e))}var Gre="DismissableLayer",IE="dismissableLayer.update",Kre="dismissableLayer.pointerDownOutside",Qre="dismissableLayer.focusOutside",bN,Y4=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),X4=_.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=_.useContext(Y4),[u,d]=_.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=_.useState({}),g=Nc(e,I=>d(I)),m=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(w),E=u?m.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,C=E>=v,R=Jre(I=>{const A=I.target,P=[...c.branches].some(D=>D.contains(A));!C||P||(s==null||s(I),o==null||o(I),I.defaultPrevented||a==null||a())},f),O=Zre(I=>{const A=I.target;[...c.branches].some(D=>D.contains(A))||(i==null||i(I),o==null||o(I),I.defaultPrevented||a==null||a())},f);return gS(I=>{E===c.layers.size-1&&(r==null||r(I),!I.defaultPrevented&&a&&(I.preventDefault(),a()))},f),_.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(bN=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),TN(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=bN)}},[u,f,n,c]),_.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),TN())},[u,c]),_.useEffect(()=>{const I=()=>p({});return document.addEventListener(IE,I),()=>document.removeEventListener(IE,I)},[]),y.jsx(xo.div,{...l,ref:g,style:{pointerEvents:b?C?"auto":"none":void 0,...t.style},onFocusCapture:Ea(t.onFocusCapture,O.onFocusCapture),onBlurCapture:Ea(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:Ea(t.onPointerDownCapture,R.onPointerDownCapture)})});X4.displayName=Gre;var Yre="DismissableLayerBranch",Xre=_.forwardRef((t,e)=>{const n=_.useContext(Y4),r=_.useRef(null),s=Nc(e,r);return _.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),y.jsx(xo.div,{...t,ref:s})});Xre.displayName=Yre;function Jre(t,e=globalThis==null?void 0:globalThis.document){const n=Jt(t),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){J4(Kre,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Zre(t,e=globalThis==null?void 0:globalThis.document){const n=Jt(t),r=_.useRef(!1);return _.useEffect(()=>{const s=i=>{i.target&&!r.current&&J4(Qre,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function TN(){const t=new CustomEvent(IE);document.dispatchEvent(t)}function J4(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Hre(s,i):s.dispatchEvent(i)}var Jw="focusScope.autoFocusOnMount",Zw="focusScope.autoFocusOnUnmount",SN={bubbles:!1,cancelable:!0},ese="FocusScope",Z4=_.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=_.useState(null),c=Jt(s),u=Jt(i),d=_.useRef(null),f=Nc(e,m=>l(m)),p=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let m=function(b){if(p.paused||!a)return;const C=b.target;a.contains(C)?d.current=C:zo(d.current,{select:!0})},w=function(b){if(p.paused||!a)return;const C=b.relatedTarget;C!==null&&(a.contains(C)||zo(d.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const R of b)R.removedNodes.length>0&&zo(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",w);const E=new MutationObserver(v);return a&&E.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",w),E.disconnect()}}},[r,a,p.paused]),_.useEffect(()=>{if(a){AN.add(p);const m=document.activeElement;if(!a.contains(m)){const v=new CustomEvent(Jw,SN);a.addEventListener(Jw,c),a.dispatchEvent(v),v.defaultPrevented||(tse(ose(e5(a)),{select:!0}),document.activeElement===m&&zo(a))}return()=>{a.removeEventListener(Jw,c),setTimeout(()=>{const v=new CustomEvent(Zw,SN);a.addEventListener(Zw,u),a.dispatchEvent(v),v.defaultPrevented||zo(m??document.body,{select:!0}),a.removeEventListener(Zw,u),AN.remove(p)},0)}}},[a,c,u,p]);const g=_.useCallback(m=>{if(!n&&!r||p.paused)return;const w=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(w&&v){const E=m.currentTarget,[b,C]=nse(E);b&&C?!m.shiftKey&&v===C?(m.preventDefault(),n&&zo(b,{select:!0})):m.shiftKey&&v===b&&(m.preventDefault(),n&&zo(C,{select:!0})):v===E&&m.preventDefault()}},[n,r,p.paused]);return y.jsx(xo.div,{tabIndex:-1,...o,ref:f,onKeyDown:g})});Z4.displayName=ese;function tse(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(zo(r,{select:e}),document.activeElement!==n)return}function nse(t){const e=e5(t),n=IN(e,t),r=IN(e.reverse(),t);return[n,r]}function e5(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function IN(t,e){for(const n of t)if(!rse(n,{upTo:e}))return n}function rse(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function sse(t){return t instanceof HTMLInputElement&&"select"in t}function zo(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&sse(t)&&e&&t.select()}}var AN=ise();function ise(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=CN(t,e),t.unshift(e)},remove(e){var n;t=CN(t,e),(n=t[0])==null||n.resume()}}}function CN(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function ose(t){return t.filter(e=>e.tagName!=="A")}var ase="Portal",t5=_.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=_.useState(!1);Ht(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?sb.createPortal(y.jsx(xo.div,{...r,ref:e}),o):null});t5.displayName=ase;function lse(t,e){return _.useReducer((n,r)=>e[n][r]??n,t)}var x0=t=>{const{present:e,children:n}=t,r=cse(e),s=typeof n=="function"?n({present:r.isPresent}):_.Children.only(n),i=Nc(r.ref,use(s));return typeof n=="function"||r.isPresent?_.cloneElement(s,{ref:i}):null};x0.displayName="Presence";function cse(t){const[e,n]=_.useState(),r=_.useRef({}),s=_.useRef(t),i=_.useRef("none"),o=t?"mounted":"unmounted",[a,l]=lse(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const c=tg(r.current);i.current=a==="mounted"?c:"none"},[a]),Ht(()=>{const c=r.current,u=s.current;if(u!==t){const f=i.current,p=tg(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Ht(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=p=>{const m=tg(r.current).includes(p.animationName);if(p.target===e&&m&&(l("ANIMATION_END"),!s.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},f=p=>{p.target===e&&(i.current=tg(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:_.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function tg(t){return(t==null?void 0:t.animationName)||"none"}function use(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var e_=0;function n5(){_.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??RN()),document.body.insertAdjacentElement("beforeend",t[1]??RN()),e_++,()=>{e_===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),e_--}},[])}function RN(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var vf="right-scroll-bar-position",wf="width-before-scroll-bar",dse="with-scroll-bars-hidden",hse="--removed-body-scroll-bar-size";function t_(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function fse(t,e){var n=_.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var pse=typeof window<"u"?_.useLayoutEffect:_.useEffect,PN=new WeakMap;function r5(t,e){var n=fse(null,function(r){return t.forEach(function(s){return t_(s,r)})});return pse(function(){var r=PN.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||t_(a,null)}),i.forEach(function(a){s.has(a)||t_(a,o)})}PN.set(n,t)},[t]),n}function mse(t){return t}function gse(t,e){e===void 0&&(e=mse);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return s}function s5(t){t===void 0&&(t={});var e=gse(null);return e.options=kn({async:!0,ssr:!1},t),e}var i5=function(t){var e=t.sideCar,n=jd(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return _.createElement(r,kn({},n))};i5.isSideCarExport=!0;function o5(t,e){return t.useMedium(e),i5}var a5=s5(),n_=function(){},b0=_.forwardRef(function(t,e){var n=_.useRef(null),r=_.useState({onScrollCapture:n_,onWheelCapture:n_,onTouchMoveCapture:n_}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,p=t.noIsolation,g=t.inert,m=t.allowPinchZoom,w=t.as,v=w===void 0?"div":w,E=t.gapMode,b=jd(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=f,R=r5([n,e]),O=kn(kn({},b),s);return _.createElement(_.Fragment,null,u&&_.createElement(C,{sideCar:a5,removeScrollBar:c,shards:d,noIsolation:p,inert:g,setCallbacks:i,allowPinchZoom:!!m,lockRef:n,gapMode:E}),o?_.cloneElement(_.Children.only(a),kn(kn({},O),{ref:R})):_.createElement(v,kn({},O,{className:l,ref:R}),a))});b0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};b0.classNames={fullWidth:wf,zeroRight:vf};var yse=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function vse(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=yse();return e&&t.setAttribute("nonce",e),t}function wse(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function _se(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Ese=function(){var t=0,e=null;return{add:function(n){t==0&&(e=vse())&&(wse(e,n),_se(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},xse=function(){var t=Ese();return function(e,n){_.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},ES=function(){var t=xse(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},bse={left:0,top:0,right:0,gap:0},r_=function(t){return parseInt(t||"",10)||0},Tse=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[r_(n),r_(r),r_(s)]},Sse=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return bse;var e=Tse(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Ise=ES(),Ju="data-scroll-locked",Ase=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(dse,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Ju,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(vf,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(wf,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(vf," .").concat(vf,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(wf," .").concat(wf,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ju,`] {
    `).concat(hse,": ").concat(a,`px;
  }
`)},NN=function(){var t=parseInt(document.body.getAttribute(Ju)||"0",10);return isFinite(t)?t:0},Cse=function(){_.useEffect(function(){return document.body.setAttribute(Ju,(NN()+1).toString()),function(){var t=NN()-1;t<=0?document.body.removeAttribute(Ju):document.body.setAttribute(Ju,t.toString())}},[])},l5=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;Cse();var i=_.useMemo(function(){return Sse(s)},[s]);return _.createElement(Ise,{styles:Ase(i,!e,s,n?"":"!important")})},AE=!1;if(typeof window<"u")try{var ng=Object.defineProperty({},"passive",{get:function(){return AE=!0,!0}});window.addEventListener("test",ng,ng),window.removeEventListener("test",ng,ng)}catch{AE=!1}var iu=AE?{passive:!1}:!1,Rse=function(t){return t.tagName==="TEXTAREA"},c5=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Rse(t)&&n[e]==="visible")},Pse=function(t){return c5(t,"overflowY")},Nse=function(t){return c5(t,"overflowX")},kN=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=u5(t,r);if(s){var i=d5(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},kse=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Dse=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},u5=function(t,e){return t==="v"?Pse(e):Nse(e)},d5=function(t,e){return t==="v"?kse(e):Dse(e)},Ose=function(t,e){return t==="h"&&e==="rtl"?-1:1},Lse=function(t,e,n,r,s){var i=Ose(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{var p=d5(t,a),g=p[0],m=p[1],w=p[2],v=m-w-i*g;(g||v)&&u5(t,a)&&(d+=v,f+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(Math.abs(d)<1||!s)||!u&&(Math.abs(f)<1||!s))&&(c=!0),c},rg=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},DN=function(t){return[t.deltaX,t.deltaY]},ON=function(t){return t&&"current"in t?t.current:t},Mse=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Vse=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},jse=0,ou=[];function Fse(t){var e=_.useRef([]),n=_.useRef([0,0]),r=_.useRef(),s=_.useState(jse++)[0],i=_.useState(ES)[0],o=_.useRef(t);_.useEffect(function(){o.current=t},[t]),_.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var m=hL([t.lockRef.current],(t.shards||[]).map(ON),!0).filter(Boolean);return m.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=_.useCallback(function(m,w){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var v=rg(m),E=n.current,b="deltaX"in m?m.deltaX:E[0]-v[0],C="deltaY"in m?m.deltaY:E[1]-v[1],R,O=m.target,I=Math.abs(b)>Math.abs(C)?"h":"v";if("touches"in m&&I==="h"&&O.type==="range")return!1;var A=kN(I,O);if(!A)return!0;if(A?R=I:(R=I==="v"?"h":"v",A=kN(I,O)),!A)return!1;if(!r.current&&"changedTouches"in m&&(b||C)&&(r.current=R),!R)return!0;var P=r.current||R;return Lse(P,w,m,P==="h"?b:C,!0)},[]),l=_.useCallback(function(m){var w=m;if(!(!ou.length||ou[ou.length-1]!==i)){var v="deltaY"in w?DN(w):rg(w),E=e.current.filter(function(R){return R.name===w.type&&(R.target===w.target||w.target===R.shadowParent)&&Mse(R.delta,v)})[0];if(E&&E.should){w.cancelable&&w.preventDefault();return}if(!E){var b=(o.current.shards||[]).map(ON).filter(Boolean).filter(function(R){return R.contains(w.target)}),C=b.length>0?a(w,b[0]):!o.current.noIsolation;C&&w.cancelable&&w.preventDefault()}}},[]),c=_.useCallback(function(m,w,v,E){var b={name:m,delta:w,target:v,should:E,shadowParent:Bse(v)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(C){return C!==b})},1)},[]),u=_.useCallback(function(m){n.current=rg(m),r.current=void 0},[]),d=_.useCallback(function(m){c(m.type,DN(m),m.target,a(m,t.lockRef.current))},[]),f=_.useCallback(function(m){c(m.type,rg(m),m.target,a(m,t.lockRef.current))},[]);_.useEffect(function(){return ou.push(i),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,iu),document.addEventListener("touchmove",l,iu),document.addEventListener("touchstart",u,iu),function(){ou=ou.filter(function(m){return m!==i}),document.removeEventListener("wheel",l,iu),document.removeEventListener("touchmove",l,iu),document.removeEventListener("touchstart",u,iu)}},[]);var p=t.removeScrollBar,g=t.inert;return _.createElement(_.Fragment,null,g?_.createElement(i,{styles:Vse(s)}):null,p?_.createElement(l5,{gapMode:t.gapMode}):null)}function Bse(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Use=o5(a5,Fse);var h5=_.forwardRef(function(t,e){return _.createElement(b0,kn({},t,{ref:e,sideCar:Use}))});h5.classNames=b0.classNames;var $se=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},au=new WeakMap,sg=new WeakMap,ig={},s_=0,f5=function(t){return t&&(t.host||f5(t.parentNode))},qse=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=f5(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},zse=function(t,e,n,r){var s=qse(e,Array.isArray(t)?t:[t]);ig[n]||(ig[n]=new WeakMap);var i=ig[n],o=[],a=new Set,l=new Set(s),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};s.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(r),g=p!==null&&p!=="false",m=(au.get(f)||0)+1,w=(i.get(f)||0)+1;au.set(f,m),i.set(f,w),o.push(f),m===1&&g&&sg.set(f,!0),w===1&&f.setAttribute(n,"true"),g||f.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return u(e),a.clear(),s_++,function(){o.forEach(function(d){var f=au.get(d)-1,p=i.get(d)-1;au.set(d,f),i.set(d,p),f||(sg.has(d)||d.removeAttribute(r),sg.delete(d)),p||d.removeAttribute(n)}),s_--,s_||(au=new WeakMap,au=new WeakMap,sg=new WeakMap,ig={})}},p5=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=$se(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),zse(r,s,n,"aria-hidden")):function(){return null}},xS="Dialog",[m5,g5]=Jd(xS),[Wse,qs]=m5(xS),bS=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=_.useRef(null),l=_.useRef(null),[c=!1,u]=tv({prop:r,defaultProp:s,onChange:i});return y.jsx(Wse,{scope:e,triggerRef:a,contentRef:l,contentId:Xu(),titleId:Xu(),descriptionId:Xu(),open:c,onOpenChange:u,onOpenToggle:_.useCallback(()=>u(d=>!d),[u]),modal:o,children:n})};bS.displayName=xS;var y5="DialogTrigger",v5=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qs(y5,n),i=Nc(e,s.triggerRef);return y.jsx(xo.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":RS(s.open),...r,ref:i,onClick:Ea(t.onClick,s.onOpenToggle)})});v5.displayName=y5;var TS="DialogPortal",[Hse,w5]=m5(TS,{forceMount:void 0}),_5=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=qs(TS,e);return y.jsx(Hse,{scope:e,forceMount:n,children:_.Children.map(r,o=>y.jsx(x0,{present:n||i.open,children:y.jsx(t5,{asChild:!0,container:s,children:o})}))})};_5.displayName=TS;var nv="DialogOverlay",E5=_.forwardRef((t,e)=>{const n=w5(nv,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=qs(nv,t.__scopeDialog);return i.modal?y.jsx(x0,{present:r||i.open,children:y.jsx(Gse,{...s,ref:e})}):null});E5.displayName=nv;var Gse=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qs(nv,n);return y.jsx(h5,{as:lo,allowPinchZoom:!0,shards:[s.contentRef],children:y.jsx(xo.div,{"data-state":RS(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),pc="DialogContent",SS=_.forwardRef((t,e)=>{const n=w5(pc,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=qs(pc,t.__scopeDialog);return y.jsx(x0,{present:r||i.open,children:i.modal?y.jsx(Kse,{...s,ref:e}):y.jsx(Qse,{...s,ref:e})})});SS.displayName=pc;var Kse=_.forwardRef((t,e)=>{const n=qs(pc,t.__scopeDialog),r=_.useRef(null),s=Nc(e,n.contentRef,r);return _.useEffect(()=>{const i=r.current;if(i)return p5(i)},[]),y.jsx(x5,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ea(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ea(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Ea(t.onFocusOutside,i=>i.preventDefault())})}),Qse=_.forwardRef((t,e)=>{const n=qs(pc,t.__scopeDialog),r=_.useRef(!1),s=_.useRef(!1);return y.jsx(x5,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),x5=_.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=qs(pc,n),l=_.useRef(null),c=Nc(e,l);return n5(),y.jsxs(y.Fragment,{children:[y.jsx(Z4,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:y.jsx(X4,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":RS(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(Xse,{titleId:a.titleId}),y.jsx(Zse,{contentRef:l,descriptionId:a.descriptionId})]})]})}),IS="DialogTitle",AS=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qs(IS,n);return y.jsx(xo.h2,{id:s.titleId,...r,ref:e})});AS.displayName=IS;var b5="DialogDescription",CS=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qs(b5,n);return y.jsx(xo.p,{id:s.descriptionId,...r,ref:e})});CS.displayName=b5;var T5="DialogClose",S5=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qs(T5,n);return y.jsx(xo.button,{type:"button",...r,ref:e,onClick:Ea(t.onClick,()=>s.onOpenChange(!1))})});S5.displayName=T5;function RS(t){return t?"open":"closed"}var I5="DialogTitleWarning",[Yse,A5]=Mne(I5,{contentName:pc,titleName:IS,docsSlug:"dialog"}),Xse=({titleId:t})=>{const e=A5(I5),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return _.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Jse="DialogDescriptionWarning",Zse=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${A5(Jse).contentName}}.`;return _.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},C5=bS,eie=v5,R5=_5,PS=E5,NS=SS,kS=AS,DS=CS,OS=S5;const tie=({senderId:t})=>{const{author:e}=rm(t);return y.jsx(Ia,{to:`/profile/${t}/about`,children:y.jsx("img",{src:e==null?void 0:e.PhotoUrl,width:60,className:" rounded-full max-md:w-[40px]"})})},nie=({notification:t,clicked:e,setClicked:n})=>{const[r,s]=_.useState([]),i=fs(),{currentUser:o}=$s();_.useEffect(()=>{s(t)},[t]);async function a(l,c){try{i(`/read/${l}`),await Ure(o,c)}catch(u){console.log(u)}}return y.jsx(bS,{open:e,onOpenChange:n,children:y.jsxs(SS,{className:"absolute top-10 z-50 bg-white-1 right-0 max-sm:-right-[68px] max-xs:-right-[80px] shadow-custom-equal rounded-md ",children:[y.jsxs(AS,{className:" p-3  border-b border-black-2 flex flex-row justify-between",children:[y.jsx("div",{className:"py-2",children:"Notification"}),y.jsx("div",{className:"py-2 cursor-pointer",onClick:()=>Bre(o),children:y.jsx("img",{src:"../public/delete.svg",width:20})})]}),y.jsx(CS,{className:" p-3 w-[450px] max-md:w-[350px] max-sm:w-[300px] ",children:r==null?void 0:r.map(l=>{const d=l.createdAt.toDate().getHours();return y.jsxs("div",{className:"flex flex-row gap-3 p-3 rounded-md items-center cursor-pointer w-full hover:bg-orange-2",children:[y.jsx(tie,{senderId:l.senderId}),y.jsxs("div",{className:"flex flex-col flex-1 gap-2",onClick:()=>a(l.PartId,l.id),children:[y.jsx("span",{className:" text-black-2 max-md:text-sm",children:l==null?void 0:l.message}),y.jsxs("span",{className:" text-sm font-semibold text-white-2 max-md:text-sm",children:[d," hours ago"]})]})]},l.id)})})]})})},rie=()=>{var g;const{currentUser:t}=$s(),[e,n]=_.useState(!1),[r,s]=_.useState(!1),[i,o]=_.useState(!1),[a,l]=_.useState([]),[c,u]=_.useState(0),d=fs();async function f(){await o7(uf).then(()=>{}).catch(m=>{console.log(m)})}async function p(){o(!i)}return _.useEffect(()=>{const m=jre(t,l);return()=>m()},[t]),_.useEffect(()=>{if(!t)return;const m=Fre(t,u);return()=>m()},[t]),y.jsxs("div",{className:" sticky left-0 top-0 p-5 flex pt-4 pb-4 items-center border-b-2 z-20 bg-white-1 border-white-3 justify-between  w-full",children:[y.jsxs("div",{className:" flex flex-row items-center md:gap-4 max-md:gap-1",children:[y.jsxs(Ia,{to:"/",className:"flex flex-row items-center gap-3 pr-6 max-sm:pr-3 border-r-2 border-white-3",children:[y.jsx("img",{src:"../public/logo.svg",width:35}),y.jsx("h1",{className:" text-lg text-black-2 max-sm:hidden",children:"dz-story"})]}),y.jsx("div",{onClick:()=>d("/browse"),className:"  cursor-pointer text-black-2 p-2 hover:bg-orange-2 rounded-lg transition-colors",children:y.jsx("p",{children:"Browse"})})]}),y.jsxs("div",{className:"flex  gap-4 items-center",children:[y.jsxs("div",{className:"relative",children:[y.jsxs("div",{onClick:p,className:" relative cursor-pointer",children:[c!=0&&y.jsx("span",{className:"absolute min-w-3 h-3  text-sm text-white-1 rounded-full p-1 py-2 -right-2 top-0 bg-red-500 flex justify-center items-center font-bold",children:c}),y.jsx(Kl.bell,{clicked:i})]}),y.jsx(nie,{clicked:i,setClicked:o,notification:a})]}),y.jsxs("div",{className:"flex gap-1 relative items-center cursor-pointer",onClick:()=>{s(!r)},children:[y.jsx("img",{src:"../public/write.svg",width:30}),y.jsx("h1",{className:" text-black-2",children:"Write"}),y.jsx(EN,{open:r,children:y.jsxs("ul",{className:"flex flex-col gap-3 text-black-1 ",children:[y.jsx("li",{onClick:()=>d("/new"),className:`border-b-2\r
                    hover:text-white-2 cursor-pointer w-max border-orange-1 pb-3`,children:y.jsx("span",{children:"Write Story"})}),y.jsxs("li",{className:" cursor-not-allowed w-max hover:text-white-2 flex gap-2",children:[y.jsx("img",{src:"../public/lock.svg",width:20}),y.jsx("span",{children:"Generate Story"})]})]})})]}),y.jsxs("div",{onClick:()=>n(!e),className:"relative cursor-pointer flex h-fit items-center gap-3 border rounded-full sm:pr-3 border-black-2",children:[y.jsx("img",{src:t!=null&&t.photoURL?t==null?void 0:t.photoURL:"../../public/user.svg",width:30,className:" rounded-full"}),y.jsx("h1",{className:" max-sm:hidden",children:(g=t==null?void 0:t.email)==null?void 0:g.split("@")[0]}),y.jsx(EN,{open:e,children:y.jsxs("ul",{className:"flex flex-col gap-3 text-black-1 ",children:[y.jsxs("li",{onClick:()=>d(`/Profile/${t?t.uid:""}/about`),className:`border-b-2\r
                    hover:text-white-2 cursor-pointer border-orange-1 pb-3 flex gap-2`,children:[y.jsx("img",{src:"../public/profile.svg",width:15}),y.jsx("span",{children:"Profile"})]}),y.jsx("li",{onClick:f,className:"cursor-pointer hover:text-white-2",children:y.jsx("span",{children:"Log_Out"})})]})})]})]})]})},P5=_.createContext(void 0),N5=({children:t})=>{const[e,n]=_.useState(""),[r,s]=_.useState(""),[i,o]=_.useState(!1);return y.jsx(P5.Provider,{value:{storyId:e,partId:r,setStoryId:n,setPartId:s,isDialog:i,setIsDialog:o},children:t})},sie=()=>{const t=_.useContext(P5);if(!t)throw new Error("useUser must be used within a UserProvider");return t},Uo=({children:t})=>{const{currentUser:e}=$s(),n=fs();return _.useEffect(()=>{e||n("/signin")},[e]),y.jsx(N5,{children:y.jsxs("div",{className:"flex flex-col w-full",children:[y.jsx(rie,{}),y.jsx("div",{className:" w-full",children:t})]})})},LS=pS("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-neutral-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 dark:ring-offset-neutral-950 dark:focus-visible:ring-neutral-300",{variants:{variant:{default:"bg-neutral-900 text-neutral-50 hover:bg-neutral-900/90 dark:bg-neutral-50 dark:text-neutral-900 dark:hover:bg-neutral-50/90",destructive:"bg-red-500 text-neutral-50 hover:bg-red-500/90 dark:bg-red-900 dark:text-neutral-50 dark:hover:bg-red-900/90",outline:"border border-neutral-200 bg-white hover:bg-neutral-100 hover:text-neutral-900 dark:border-neutral-800 dark:bg-neutral-950 dark:hover:bg-neutral-800 dark:hover:text-neutral-50",secondary:"bg-neutral-100 text-neutral-900 hover:bg-neutral-100/80 dark:bg-neutral-800 dark:text-neutral-50 dark:hover:bg-neutral-800/80",ghost:"hover:bg-neutral-100 hover:text-neutral-900 dark:hover:bg-neutral-800 dark:hover:text-neutral-50",link:"text-neutral-900 underline-offset-4 hover:underline dark:text-neutral-50"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),CE=_.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?lo:"button";return y.jsx(o,{className:Ve(LS({variant:e,size:n,className:t})),ref:i,...s})});CE.displayName="Button";const k5=C5,iie=R5,D5=_.forwardRef(({className:t,...e},n)=>y.jsx(PS,{ref:n,className:Ve("fixed inset-0 z-100 bg-black-1/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));D5.displayName=PS.displayName;const MS=_.forwardRef(({className:t,children:e,...n},r)=>y.jsxs(iie,{children:[y.jsx(D5,{}),y.jsxs(NS,{ref:r,className:Ve("fixed left-[50%] top-[50%] z-50 grid w-full p-8  max-w-4xl translate-x-[-50%] translate-y-[-50%] gap-4 border border-neutral-200 bg-white-1  shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg dark:border-neutral-800 dark:bg-neutral-950",t),...n,children:[e,y.jsxs(OS,{className:"absolute right-4 top-4  p-1 text-black-1 font-extrabold opacity-70 ring-offset-white transition-opacity hover:opacity-100  bg-white-2 rounded-full",children:[y.jsx(i4,{className:"h-6 w-6"}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));MS.displayName=NS.displayName;const O5=({className:t,...e})=>y.jsx("div",{className:Ve("flex flex-col space-y-1.5 text-center max-sm:text-left  ",t),...e});O5.displayName="DialogHeader";const L5=({className:t,...e})=>y.jsx("div",{className:Ve("flex flex-col-reverse sm:flex-row sm:justify-end ",t),...e});L5.displayName="DialogFooter";const M5=_.forwardRef(({className:t,...e},n)=>y.jsx(kS,{ref:n,className:Ve("text-lg font-semibold leading-none tracking-tight",t),...e}));M5.displayName=kS.displayName;const oie=_.forwardRef(({className:t,...e},n)=>y.jsx(DS,{ref:n,className:Ve("text-sm text-neutral-500 dark:text-neutral-400",t),...e}));oie.displayName=DS.displayName;const _f=_.forwardRef(({className:t,type:e,...n},r)=>y.jsx("input",{type:e,className:Ve("flex h-10 w-full rounded-md border border-neutral-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-neutral-950 placeholder:text-neutral-500 focus-visible:outline-none  disabled:cursor-not-allowed disabled:opacity-50 dark:border-neutral-800 dark:bg-neutral-950 dark:ring-offset-neutral-950 dark:file:text-neutral-50 dark:placeholder:text-neutral-400 dark:focus-visible:ring-neutral-300",t),ref:r,...n}));_f.displayName="Input";const aie=({isLogin:t,setIsLogin:e,setIsopen:n,isopen:r})=>{const[s,i]=_.useState(""),[o,a]=_.useState(""),[l,c]=_.useState(""),[u,d]=_.useState(!1),[f,p]=_.useState(""),g=fs();function m(){I7(uf,VQ).then(v=>{v&&g("/")}).catch(v=>{console.log(v)})}const w=async()=>{d(!0),p("");try{if(t)await r7(uf,s,o),g("/");else{if(o!==l){p("Passwords do not match"),d(!1);return}await n7(uf,s,o),g("/")}}catch(v){p(v.message)}d(!1)};return y.jsx(k5,{open:r,onOpenChange:n,children:y.jsxs(MS,{children:[y.jsx("h2",{className:"text-lg font-semibold mb-4",children:t?"Login":"Sign Up"}),f&&y.jsx("p",{className:"text-red-500 text-sm",children:f}),y.jsx(_f,{type:"email",placeholder:"Email",value:s,onChange:v=>i(v.target.value)}),y.jsx(_f,{type:"password",placeholder:"Password",value:o,onChange:v=>a(v.target.value)}),!t&&y.jsx(_f,{type:"password",placeholder:"Confirm Password",value:l,onChange:v=>c(v.target.value)}),y.jsx(CE,{onClick:w,disabled:u,className:" bg-orange-1 text-white-1 border border-orange-1 hover:bg-orange-2 hover:text-black-1 ",children:u?"Processing...":t?"Login":"Sign Up"}),y.jsx(CE,{onClick:m,className:" bg-orange-1 text-white-1 border border-orange-1 hover:bg-orange-2 hover:text-black-1",children:"Sign in with Google"}),y.jsx("p",{className:"text-sm mt-2 cursor-pointer text-blue-500",onClick:()=>e(!t),children:t?"Don't have an account? Sign up":"Already have an account? Login"})]})})},lie=()=>{const[t,e]=_.useState(!1),[n,r]=_.useState(!1);return y.jsxs("div",{className:" w-full  h-screen bg-orange-2",children:[y.jsx("header",{className:"w-full px-5 py-3 border-b border-white-2 ",children:y.jsxs("ul",{className:" w-full flex flex-row justify-between items-center",children:[y.jsx("img",{src:"../public/logo.svg",width:35}),y.jsx("p",{className:"text-black-2 cursor-pointer font-semibold hover:text-white-2",onClick:()=>{e(!0),r(!0)},children:"LogIn"})]})}),y.jsx("main",{className:" max-w-[1200px] mx-auto px-8",children:y.jsxs("div",{className:"flex flex-row gap-20 max-xl:gap-14 max-lg:gap-10 py-32 items-center",children:[y.jsxs("section",{className:"flex flex-col gap-10 w-full max-lg:text-center max-lg:items-center",children:[y.jsx("h1",{className:"text-4xl max-xl:text-3xl text-black-1 font-semibold leading-[80px]",children:"Hey there! Welcome to my story world"}),y.jsx("p",{className:" text-black-2 text-lg leading-10 w-[650px] max-xl:w-[550px] max-lg:w-full",children:"Hey there!  Welcome to my story cornera place where heartfelt tales come alive with a dash of digital magic. Here, every narrative is crafted with passion and a sprinkle of wonder, inviting you to explore worlds that spark your imagination. Dive in, and lets embark on this storytelling adventure together! "}),y.jsx(Wt,{onClick:()=>{r(!1),e(!0)},size:"lg",className:" w-fit bg-orange-1 text-white-1 hover:border hover:border-orange-1 hover:bg-orange-2 hover:text-black-2 max-md:w-full",children:"Start now"})]}),y.jsx("section",{className:" max-lg:hidden",children:y.jsx("img",{src:"../../public/flipped_image.png",width:600})})]})}),y.jsx(aie,{isopen:t,setIsLogin:r,setIsopen:e,isLogin:n})]})},V5=()=>({UploadImg:async e=>{e.append("upload_preset","qobo8k7v");try{return await fetch("https://api.cloudinary.com/v1_1/dkm97ic10/image/upload",{method:"POST",body:e}).then(r=>r.json())}catch(n){console.log(n)}}}),cie=({setImgUrl:t})=>{const e=_.useRef(null),[n,r]=_.useState(""),s=async i=>{var a;const o=(a=i.target.files)==null?void 0:a[0];if(o){const l=new FormData,c=URL.createObjectURL(o);r(c),l.append("file",o);const u=await V5().UploadImg(l);t(u.url)}};return y.jsxs("div",{className:"",children:[y.jsx("label",{htmlFor:"cover-image",className:"block text-lg font-semibold mb-2",children:"Cover Image"}),y.jsx("input",{ref:e,type:"file",id:"cover-image",accept:"image/*",className:" hidden",onChange:s}),y.jsxs("div",{className:" flex gap-2 items-center border-2 w-fit p-1 rounded-lg",children:[y.jsx(Wt,{className:" rounded-md bg-orange-1 text-white-1",onClick:()=>{var i;return(i=e.current)==null?void 0:i.click()},children:"Upload img"}),y.jsx("span",{className:" text-black-2 font-semibold text-lg",children:n})]})]})},LN=()=>{const[t,e]=_.useState(""),[n,r]=_.useState([]);return{item:t,addItem:()=>{t.trim()!==""&&(r([...n,t.trim()]),e(""))},itemList:n,setItem:e,setItemList:r}},uie=()=>y.jsx(um,{}),die=()=>{const[t,e]=_.useState(""),[n,r]=_.useState(""),[s,i]=_.useState(""),o=LN(),a=LN(),[l,c]=_.useState(""),u={title:t,desc:n,category:s,character:o.itemList[0],tag:a.itemList[0],ImgUrl:l};function d(){const f=[];for(const p of Object.keys(u))u[p]||f.push(p);return f.length===0?!0:(Pr({title:"Error occurred",description:f.length===1?`You have not filled in ${f[0]}`:"You have not filled in the required inputs",variant:"destructive"}),!1)}return{title:t,setTitle:e,desc:n,setDesc:r,category:s,setCategory:i,tag:a,character:o,Error:uie,handleError:d,ImgUrl:l,setImgUrl:c}};var j5={};Object.defineProperty(j5,"__esModule",{value:!0});var hie=_,i_=fie(hie);function fie(t){return t&&t.__esModule?t:{default:t}}function pie(){return{__html:"@keyframes spin { 0% { transform: rotate(0deg) } 100% { transform: rotate(360deg) }}"}}function mie(t,e,n){return{inner:{animation:"spin 0.5s linear infinite",height:t,width:t,border:e+" solid transparent",borderTopColor:n,borderRadius:"100%",boxSizing:"border-box"},outer:{height:"100%",width:"100%",display:"flex",flexFlow:"column nowrap",justifyContent:"center",alignItems:"center"}}}var gie=function(e){var n=e.size,r=n===void 0?"50px":n,s=e.stroke,i=s===void 0?"3px":s,o=e.color,a=o===void 0?"#000":o,l=mie(r,i,a);return i_.default.createElement("div",{style:l.outer},i_.default.createElement("div",{style:l.inner}),i_.default.createElement("style",{dangerouslySetInnerHTML:pie()}))},T0=j5.default=gie;const yie=Os.firestore.Timestamp,vie=async({currentUser:t,setLoading:e,setStoryId:n,Details:r,navigate:s})=>{if(t!=null&&t.email)try{const i=Pe.collection("WrittenStories").doc().id;e(!0),await Pe.collection("WrittenStories").doc(i).set({title:r.title,desc:r.desc,category:r.category,character:r.character,tag:r.tag,ImgUrl:r.ImgUrl,author:t.uid,likes:0,time:yie.now()}),n(i),s(`/session/${i}`,{state:{from:"new"}})}catch(i){Pr({variant:"destructive",title:"Uh oh! Something went wrong",description:"There was a problem with your request."}),console.log(i)}finally{e(!1)}},wie=()=>{var b;const{title:t,setTitle:e,desc:n,setDesc:r,category:s,setCategory:i,character:o,tag:a,Error:l,handleError:c,ImgUrl:u,setImgUrl:d}=die(),[f,p]=_.useState(!1),{currentUser:g}=$s(),{setStoryId:m}=sie(),w=fs(),v={title:t,desc:n,category:s,character:o.itemList,tag:a.itemList,ImgUrl:u};async function E(){c()&&await vie({currentUser:g,setLoading:p,setStoryId:m,Details:v,navigate:w})}return y.jsxs("div",{children:[y.jsxs("div",{className:"flex flex-row w-full h-fit absolute left-0",children:[y.jsx("div",{className:" flex justify-center items-center max-xl:hidden",children:y.jsx("img",{src:"../public/writeS.webp",width:500,className:"h-full"})}),y.jsxs("div",{className:" flex-1 pt-5 px-4 h-full   w-2/5 relative",children:[y.jsx("div",{className:" pb-5 border-orange-1 border-b-[6px] w-fit",children:y.jsx("h1",{className:" text-xl font-medium  text-black-2",children:"Story Details"})}),y.jsx("div",{className:" w-full h-[0.5px] bg-white-4 absolute left-0"}),y.jsxs("div",{className:" w-full p-5 flex flex-col gap-6",children:[y.jsx(cie,{setImgUrl:d}),y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsx("label",{className:"block font-semibold mb-1 text-lg",children:"Title"}),y.jsx("input",{type:"text",value:t,onChange:C=>e(C.target.value),placeholder:"Untitled Story",className:"w-full border border-gray-300 rounded p-2"})]}),y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsx("label",{className:"block font-semibold mb-1 text-lg",children:"Description"}),y.jsx("textarea",{value:n,onChange:C=>r(C.target.value),placeholder:"Write your story description...",className:"w-full border border-gray-300 rounded p-2 h-24"})]}),y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsx("label",{className:"block font-semibold mb-1 text-lg",children:"Main Characters"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("input",{value:o.item,onChange:C=>o.setItem(C.target.value),type:"text",placeholder:"Name",className:"w-full border border-gray-300 rounded p-2"}),y.jsx("button",{className:"bg-gray-200 p-2 rounded hover:bg-gray-300",onClick:()=>{o.addItem()},children:"+"})]}),y.jsx("div",{className:"mt-2",children:(b=o.itemList)==null?void 0:b.map(C=>y.jsx("span",{className:"inline-block bg-gray-100 text-gray-700 rounded-full px-3 py-1 text-sm mr-2 mb-2",children:C},C))})]}),y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsx("label",{className:"block font-semibold mb-1 text-lg",children:"Category"}),y.jsxs("select",{className:"w-full border border-gray-300 rounded p-2",value:s,onChange:C=>i(C.target.value),children:[y.jsx("option",{value:"",children:"Select a category"}),y.jsx("option",{value:"fantasy",children:"fantasy"}),y.jsx("option",{value:"adventure",children:"adventure"}),y.jsx("option",{value:"romance",children:"romance"}),y.jsx("option",{value:"comedy",children:"comedy"}),y.jsx("option",{value:"mystery",children:"mystery"}),y.jsx("option",{value:"sci-fi",children:"sci-fi"}),y.jsx("option",{value:"horror",children:"horror"}),y.jsx("option",{value:"thriller",children:"thirller"}),y.jsx("option",{value:"poetry",children:"poetry"})]})]}),y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsx("label",{className:"block font-semibold mb-1 text-lg",children:"Tags"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("input",{value:a.item,onChange:C=>a.setItem(C.target.value),type:"text",placeholder:"Add a tag",className:"w-full border border-gray-300 rounded p-2"}),y.jsx("button",{className:"bg-gray-200 p-2 rounded hover:bg-gray-300",onClick:()=>{a.addItem()},children:"+"})]}),y.jsx("div",{className:"mt-2",children:a.itemList.map(C=>y.jsx("span",{className:"inline-block bg-gray-100 text-gray-700 rounded-full px-3 py-1 text-sm mr-2 mb-2",children:C},C))})]}),y.jsx(Wt,{className:" font-light text-lg  bg-orange-1",onClick:E,children:f?y.jsx(T0,{size:"20px"}):y.jsx("span",{children:"Save"})})]})]})]}),y.jsx(l,{})]})};var F5=typeof global=="object"&&global&&global.Object===Object&&global,_ie=typeof self=="object"&&self&&self.Object===Object&&self,Ii=F5||_ie||Function("return this")(),Fa=Ii.Symbol,B5=Object.prototype,Eie=B5.hasOwnProperty,xie=B5.toString,Rh=Fa?Fa.toStringTag:void 0;function bie(t){var e=Eie.call(t,Rh),n=t[Rh];try{t[Rh]=void 0;var r=!0}catch{}var s=xie.call(t);return r&&(e?t[Rh]=n:delete t[Rh]),s}var Tie=Object.prototype,Sie=Tie.toString;function Iie(t){return Sie.call(t)}var Aie="[object Null]",Cie="[object Undefined]",MN=Fa?Fa.toStringTag:void 0;function Zd(t){return t==null?t===void 0?Cie:Aie:MN&&MN in Object(t)?bie(t):Iie(t)}function co(t){return t!=null&&typeof t=="object"}var mc=Array.isArray;function nl(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function U5(t){return t}var Rie="[object AsyncFunction]",Pie="[object Function]",Nie="[object GeneratorFunction]",kie="[object Proxy]";function VS(t){if(!nl(t))return!1;var e=Zd(t);return e==Pie||e==Nie||e==Rie||e==kie}var o_=Ii["__core-js_shared__"],VN=function(){var t=/[^.]+$/.exec(o_&&o_.keys&&o_.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Die(t){return!!VN&&VN in t}var Oie=Function.prototype,Lie=Oie.toString;function kc(t){if(t!=null){try{return Lie.call(t)}catch{}try{return t+""}catch{}}return""}var Mie=/[\\^$.*+?()[\]{}|]/g,Vie=/^\[object .+?Constructor\]$/,jie=Function.prototype,Fie=Object.prototype,Bie=jie.toString,Uie=Fie.hasOwnProperty,$ie=RegExp("^"+Bie.call(Uie).replace(Mie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function qie(t){if(!nl(t)||Die(t))return!1;var e=VS(t)?$ie:Vie;return e.test(kc(t))}function zie(t,e){return t==null?void 0:t[e]}function Dc(t,e){var n=zie(t,e);return qie(n)?n:void 0}var RE=Dc(Ii,"WeakMap"),jN=Object.create,Wie=function(){function t(){}return function(e){if(!nl(e))return{};if(jN)return jN(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function Hie(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function $5(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var Gie=800,Kie=16,Qie=Date.now;function Yie(t){var e=0,n=0;return function(){var r=Qie(),s=Kie-(r-n);if(n=r,s>0){if(++e>=Gie)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Xie(t){return function(){return t}}var rv=function(){try{var t=Dc(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Jie=rv?function(t,e){return rv(t,"toString",{configurable:!0,enumerable:!1,value:Xie(e),writable:!0})}:U5,Zie=Yie(Jie);function eoe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var toe=9007199254740991,noe=/^(?:0|[1-9]\d*)$/;function q5(t,e){var n=typeof t;return e=e??toe,!!e&&(n=="number"||n!="symbol"&&noe.test(t))&&t>-1&&t%1==0&&t<e}function jS(t,e,n){e=="__proto__"&&rv?rv(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function dm(t,e){return t===e||t!==t&&e!==e}var roe=Object.prototype,soe=roe.hasOwnProperty;function z5(t,e,n){var r=t[e];(!(soe.call(t,e)&&dm(r,n))||n===void 0&&!(e in t))&&jS(t,e,n)}function hm(t,e,n,r){var s=!n;n||(n={});for(var i=-1,o=e.length;++i<o;){var a=e[i],l=void 0;l===void 0&&(l=t[a]),s?jS(n,a,l):z5(n,a,l)}return n}var FN=Math.max;function ioe(t,e,n){return e=FN(e===void 0?t.length-1:e,0),function(){for(var r=arguments,s=-1,i=FN(r.length-e,0),o=Array(i);++s<i;)o[s]=r[e+s];s=-1;for(var a=Array(e+1);++s<e;)a[s]=r[s];return a[e]=n(o),Hie(t,this,a)}}function ooe(t,e){return Zie(ioe(t,e,U5),t+"")}var aoe=9007199254740991;function W5(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=aoe}function S0(t){return t!=null&&W5(t.length)&&!VS(t)}function loe(t,e,n){if(!nl(n))return!1;var r=typeof e;return(r=="number"?S0(n)&&q5(e,n.length):r=="string"&&e in n)?dm(n[e],t):!1}function coe(t){return ooe(function(e,n){var r=-1,s=n.length,i=s>1?n[s-1]:void 0,o=s>2?n[2]:void 0;for(i=t.length>3&&typeof i=="function"?(s--,i):void 0,o&&loe(n[0],n[1],o)&&(i=s<3?void 0:i,s=1),e=Object(e);++r<s;){var a=n[r];a&&t(e,a,r,i)}return e})}var uoe=Object.prototype;function FS(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||uoe;return t===n}function doe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var hoe="[object Arguments]";function BN(t){return co(t)&&Zd(t)==hoe}var H5=Object.prototype,foe=H5.hasOwnProperty,poe=H5.propertyIsEnumerable,PE=BN(function(){return arguments}())?BN:function(t){return co(t)&&foe.call(t,"callee")&&!poe.call(t,"callee")};function moe(){return!1}var G5=typeof Ar=="object"&&Ar&&!Ar.nodeType&&Ar,UN=G5&&typeof Cr=="object"&&Cr&&!Cr.nodeType&&Cr,goe=UN&&UN.exports===G5,$N=goe?Ii.Buffer:void 0,yoe=$N?$N.isBuffer:void 0,wp=yoe||moe,voe="[object Arguments]",woe="[object Array]",_oe="[object Boolean]",Eoe="[object Date]",xoe="[object Error]",boe="[object Function]",Toe="[object Map]",Soe="[object Number]",Ioe="[object Object]",Aoe="[object RegExp]",Coe="[object Set]",Roe="[object String]",Poe="[object WeakMap]",Noe="[object ArrayBuffer]",koe="[object DataView]",Doe="[object Float32Array]",Ooe="[object Float64Array]",Loe="[object Int8Array]",Moe="[object Int16Array]",Voe="[object Int32Array]",joe="[object Uint8Array]",Foe="[object Uint8ClampedArray]",Boe="[object Uint16Array]",Uoe="[object Uint32Array]",ut={};ut[Doe]=ut[Ooe]=ut[Loe]=ut[Moe]=ut[Voe]=ut[joe]=ut[Foe]=ut[Boe]=ut[Uoe]=!0;ut[voe]=ut[woe]=ut[Noe]=ut[_oe]=ut[koe]=ut[Eoe]=ut[xoe]=ut[boe]=ut[Toe]=ut[Soe]=ut[Ioe]=ut[Aoe]=ut[Coe]=ut[Roe]=ut[Poe]=!1;function $oe(t){return co(t)&&W5(t.length)&&!!ut[Zd(t)]}function BS(t){return function(e){return t(e)}}var K5=typeof Ar=="object"&&Ar&&!Ar.nodeType&&Ar,Ef=K5&&typeof Cr=="object"&&Cr&&!Cr.nodeType&&Cr,qoe=Ef&&Ef.exports===K5,a_=qoe&&F5.process,Rd=function(){try{var t=Ef&&Ef.require&&Ef.require("util").types;return t||a_&&a_.binding&&a_.binding("util")}catch{}}(),qN=Rd&&Rd.isTypedArray,US=qN?BS(qN):$oe,zoe=Object.prototype,Woe=zoe.hasOwnProperty;function Q5(t,e){var n=mc(t),r=!n&&PE(t),s=!n&&!r&&wp(t),i=!n&&!r&&!s&&US(t),o=n||r||s||i,a=o?doe(t.length,String):[],l=a.length;for(var c in t)(e||Woe.call(t,c))&&!(o&&(c=="length"||s&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||q5(c,l)))&&a.push(c);return a}function Y5(t,e){return function(n){return t(e(n))}}var Hoe=Y5(Object.keys,Object),Goe=Object.prototype,Koe=Goe.hasOwnProperty;function Qoe(t){if(!FS(t))return Hoe(t);var e=[];for(var n in Object(t))Koe.call(t,n)&&n!="constructor"&&e.push(n);return e}function $S(t){return S0(t)?Q5(t):Qoe(t)}function Yoe(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var Xoe=Object.prototype,Joe=Xoe.hasOwnProperty;function Zoe(t){if(!nl(t))return Yoe(t);var e=FS(t),n=[];for(var r in t)r=="constructor"&&(e||!Joe.call(t,r))||n.push(r);return n}function fm(t){return S0(t)?Q5(t,!0):Zoe(t)}var _p=Dc(Object,"create");function eae(){this.__data__=_p?_p(null):{},this.size=0}function tae(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var nae="__lodash_hash_undefined__",rae=Object.prototype,sae=rae.hasOwnProperty;function iae(t){var e=this.__data__;if(_p){var n=e[t];return n===nae?void 0:n}return sae.call(e,t)?e[t]:void 0}var oae=Object.prototype,aae=oae.hasOwnProperty;function lae(t){var e=this.__data__;return _p?e[t]!==void 0:aae.call(e,t)}var cae="__lodash_hash_undefined__";function uae(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=_p&&e===void 0?cae:e,this}function gc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}gc.prototype.clear=eae;gc.prototype.delete=tae;gc.prototype.get=iae;gc.prototype.has=lae;gc.prototype.set=uae;function dae(){this.__data__=[],this.size=0}function I0(t,e){for(var n=t.length;n--;)if(dm(t[n][0],e))return n;return-1}var hae=Array.prototype,fae=hae.splice;function pae(t){var e=this.__data__,n=I0(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():fae.call(e,n,1),--this.size,!0}function mae(t){var e=this.__data__,n=I0(e,t);return n<0?void 0:e[n][1]}function gae(t){return I0(this.__data__,t)>-1}function yae(t,e){var n=this.__data__,r=I0(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function bo(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}bo.prototype.clear=dae;bo.prototype.delete=pae;bo.prototype.get=mae;bo.prototype.has=gae;bo.prototype.set=yae;var Ep=Dc(Ii,"Map");function vae(){this.size=0,this.__data__={hash:new gc,map:new(Ep||bo),string:new gc}}function wae(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function A0(t,e){var n=t.__data__;return wae(e)?n[typeof e=="string"?"string":"hash"]:n.map}function _ae(t){var e=A0(this,t).delete(t);return this.size-=e?1:0,e}function Eae(t){return A0(this,t).get(t)}function xae(t){return A0(this,t).has(t)}function bae(t,e){var n=A0(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function Oc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Oc.prototype.clear=vae;Oc.prototype.delete=_ae;Oc.prototype.get=Eae;Oc.prototype.has=xae;Oc.prototype.set=bae;function X5(t,e){for(var n=-1,r=e.length,s=t.length;++n<r;)t[s+n]=e[n];return t}var qS=Y5(Object.getPrototypeOf,Object),Tae="[object Object]",Sae=Function.prototype,Iae=Object.prototype,J5=Sae.toString,Aae=Iae.hasOwnProperty,Cae=J5.call(Object);function Rae(t){if(!co(t)||Zd(t)!=Tae)return!1;var e=qS(t);if(e===null)return!0;var n=Aae.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&J5.call(n)==Cae}function Pae(){this.__data__=new bo,this.size=0}function Nae(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function kae(t){return this.__data__.get(t)}function Dae(t){return this.__data__.has(t)}var Oae=200;function Lae(t,e){var n=this.__data__;if(n instanceof bo){var r=n.__data__;if(!Ep||r.length<Oae-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Oc(r)}return n.set(t,e),this.size=n.size,this}function fi(t){var e=this.__data__=new bo(t);this.size=e.size}fi.prototype.clear=Pae;fi.prototype.delete=Nae;fi.prototype.get=kae;fi.prototype.has=Dae;fi.prototype.set=Lae;function Mae(t,e){return t&&hm(e,$S(e),t)}function Vae(t,e){return t&&hm(e,fm(e),t)}var Z5=typeof Ar=="object"&&Ar&&!Ar.nodeType&&Ar,zN=Z5&&typeof Cr=="object"&&Cr&&!Cr.nodeType&&Cr,jae=zN&&zN.exports===Z5,WN=jae?Ii.Buffer:void 0,HN=WN?WN.allocUnsafe:void 0;function e3(t,e){if(e)return t.slice();var n=t.length,r=HN?HN(n):new t.constructor(n);return t.copy(r),r}function Fae(t,e){for(var n=-1,r=t==null?0:t.length,s=0,i=[];++n<r;){var o=t[n];e(o,n,t)&&(i[s++]=o)}return i}function t3(){return[]}var Bae=Object.prototype,Uae=Bae.propertyIsEnumerable,GN=Object.getOwnPropertySymbols,zS=GN?function(t){return t==null?[]:(t=Object(t),Fae(GN(t),function(e){return Uae.call(t,e)}))}:t3;function $ae(t,e){return hm(t,zS(t),e)}var qae=Object.getOwnPropertySymbols,n3=qae?function(t){for(var e=[];t;)X5(e,zS(t)),t=qS(t);return e}:t3;function zae(t,e){return hm(t,n3(t),e)}function r3(t,e,n){var r=e(t);return mc(t)?r:X5(r,n(t))}function NE(t){return r3(t,$S,zS)}function Wae(t){return r3(t,fm,n3)}var kE=Dc(Ii,"DataView"),DE=Dc(Ii,"Promise"),OE=Dc(Ii,"Set"),KN="[object Map]",Hae="[object Object]",QN="[object Promise]",YN="[object Set]",XN="[object WeakMap]",JN="[object DataView]",Gae=kc(kE),Kae=kc(Ep),Qae=kc(DE),Yae=kc(OE),Xae=kc(RE),Cs=Zd;(kE&&Cs(new kE(new ArrayBuffer(1)))!=JN||Ep&&Cs(new Ep)!=KN||DE&&Cs(DE.resolve())!=QN||OE&&Cs(new OE)!=YN||RE&&Cs(new RE)!=XN)&&(Cs=function(t){var e=Zd(t),n=e==Hae?t.constructor:void 0,r=n?kc(n):"";if(r)switch(r){case Gae:return JN;case Kae:return KN;case Qae:return QN;case Yae:return YN;case Xae:return XN}return e});var Jae=Object.prototype,Zae=Jae.hasOwnProperty;function ele(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&Zae.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var sv=Ii.Uint8Array;function WS(t){var e=new t.constructor(t.byteLength);return new sv(e).set(new sv(t)),e}function tle(t,e){var n=e?WS(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var nle=/\w*$/;function rle(t){var e=new t.constructor(t.source,nle.exec(t));return e.lastIndex=t.lastIndex,e}var ZN=Fa?Fa.prototype:void 0,ek=ZN?ZN.valueOf:void 0;function sle(t){return ek?Object(ek.call(t)):{}}function s3(t,e){var n=e?WS(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var ile="[object Boolean]",ole="[object Date]",ale="[object Map]",lle="[object Number]",cle="[object RegExp]",ule="[object Set]",dle="[object String]",hle="[object Symbol]",fle="[object ArrayBuffer]",ple="[object DataView]",mle="[object Float32Array]",gle="[object Float64Array]",yle="[object Int8Array]",vle="[object Int16Array]",wle="[object Int32Array]",_le="[object Uint8Array]",Ele="[object Uint8ClampedArray]",xle="[object Uint16Array]",ble="[object Uint32Array]";function Tle(t,e,n){var r=t.constructor;switch(e){case fle:return WS(t);case ile:case ole:return new r(+t);case ple:return tle(t,n);case mle:case gle:case yle:case vle:case wle:case _le:case Ele:case xle:case ble:return s3(t,n);case ale:return new r;case lle:case dle:return new r(t);case cle:return rle(t);case ule:return new r;case hle:return sle(t)}}function i3(t){return typeof t.constructor=="function"&&!FS(t)?Wie(qS(t)):{}}var Sle="[object Map]";function Ile(t){return co(t)&&Cs(t)==Sle}var tk=Rd&&Rd.isMap,Ale=tk?BS(tk):Ile,Cle="[object Set]";function Rle(t){return co(t)&&Cs(t)==Cle}var nk=Rd&&Rd.isSet,Ple=nk?BS(nk):Rle,Nle=1,kle=2,Dle=4,o3="[object Arguments]",Ole="[object Array]",Lle="[object Boolean]",Mle="[object Date]",Vle="[object Error]",a3="[object Function]",jle="[object GeneratorFunction]",Fle="[object Map]",Ble="[object Number]",l3="[object Object]",Ule="[object RegExp]",$le="[object Set]",qle="[object String]",zle="[object Symbol]",Wle="[object WeakMap]",Hle="[object ArrayBuffer]",Gle="[object DataView]",Kle="[object Float32Array]",Qle="[object Float64Array]",Yle="[object Int8Array]",Xle="[object Int16Array]",Jle="[object Int32Array]",Zle="[object Uint8Array]",ece="[object Uint8ClampedArray]",tce="[object Uint16Array]",nce="[object Uint32Array]",nt={};nt[o3]=nt[Ole]=nt[Hle]=nt[Gle]=nt[Lle]=nt[Mle]=nt[Kle]=nt[Qle]=nt[Yle]=nt[Xle]=nt[Jle]=nt[Fle]=nt[Ble]=nt[l3]=nt[Ule]=nt[$le]=nt[qle]=nt[zle]=nt[Zle]=nt[ece]=nt[tce]=nt[nce]=!0;nt[Vle]=nt[a3]=nt[Wle]=!1;function Qg(t,e,n,r,s,i){var o,a=e&Nle,l=e&kle,c=e&Dle;if(o!==void 0)return o;if(!nl(t))return t;var u=mc(t);if(u){if(o=ele(t),!a)return $5(t,o)}else{var d=Cs(t),f=d==a3||d==jle;if(wp(t))return e3(t,a);if(d==l3||d==o3||f&&!s){if(o=l||f?{}:i3(t),!a)return l?zae(t,Vae(o,t)):$ae(t,Mae(o,t))}else{if(!nt[d])return s?t:{};o=Tle(t,d,a)}}i||(i=new fi);var p=i.get(t);if(p)return p;i.set(t,o),Ple(t)?t.forEach(function(w){o.add(Qg(w,e,n,w,t,i))}):Ale(t)&&t.forEach(function(w,v){o.set(v,Qg(w,e,n,v,t,i))});var g=c?l?Wae:NE:l?fm:$S,m=u?void 0:g(t);return eoe(m||t,function(w,v){m&&(v=w,w=t[v]),z5(o,v,Qg(w,e,n,v,t,i))}),o}var rce=1,sce=4;function Zu(t){return Qg(t,rce|sce)}var ice="__lodash_hash_undefined__";function oce(t){return this.__data__.set(t,ice),this}function ace(t){return this.__data__.has(t)}function iv(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Oc;++e<n;)this.add(t[e])}iv.prototype.add=iv.prototype.push=oce;iv.prototype.has=ace;function lce(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function cce(t,e){return t.has(e)}var uce=1,dce=2;function c3(t,e,n,r,s,i){var o=n&uce,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=i.get(t),u=i.get(e);if(c&&u)return c==e&&u==t;var d=-1,f=!0,p=n&dce?new iv:void 0;for(i.set(t,e),i.set(e,t);++d<a;){var g=t[d],m=e[d];if(r)var w=o?r(m,g,d,e,t,i):r(g,m,d,t,e,i);if(w!==void 0){if(w)continue;f=!1;break}if(p){if(!lce(e,function(v,E){if(!cce(p,E)&&(g===v||s(g,v,n,r,i)))return p.push(E)})){f=!1;break}}else if(!(g===m||s(g,m,n,r,i))){f=!1;break}}return i.delete(t),i.delete(e),f}function hce(t){var e=-1,n=Array(t.size);return t.forEach(function(r,s){n[++e]=[s,r]}),n}function fce(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var pce=1,mce=2,gce="[object Boolean]",yce="[object Date]",vce="[object Error]",wce="[object Map]",_ce="[object Number]",Ece="[object RegExp]",xce="[object Set]",bce="[object String]",Tce="[object Symbol]",Sce="[object ArrayBuffer]",Ice="[object DataView]",rk=Fa?Fa.prototype:void 0,l_=rk?rk.valueOf:void 0;function Ace(t,e,n,r,s,i,o){switch(n){case Ice:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Sce:return!(t.byteLength!=e.byteLength||!i(new sv(t),new sv(e)));case gce:case yce:case _ce:return dm(+t,+e);case vce:return t.name==e.name&&t.message==e.message;case Ece:case bce:return t==e+"";case wce:var a=hce;case xce:var l=r&pce;if(a||(a=fce),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;r|=mce,o.set(t,e);var u=c3(a(t),a(e),r,s,i,o);return o.delete(t),u;case Tce:if(l_)return l_.call(t)==l_.call(e)}return!1}var Cce=1,Rce=Object.prototype,Pce=Rce.hasOwnProperty;function Nce(t,e,n,r,s,i){var o=n&Cce,a=NE(t),l=a.length,c=NE(e),u=c.length;if(l!=u&&!o)return!1;for(var d=l;d--;){var f=a[d];if(!(o?f in e:Pce.call(e,f)))return!1}var p=i.get(t),g=i.get(e);if(p&&g)return p==e&&g==t;var m=!0;i.set(t,e),i.set(e,t);for(var w=o;++d<l;){f=a[d];var v=t[f],E=e[f];if(r)var b=o?r(E,v,f,e,t,i):r(v,E,f,t,e,i);if(!(b===void 0?v===E||s(v,E,n,r,i):b)){m=!1;break}w||(w=f=="constructor")}if(m&&!w){var C=t.constructor,R=e.constructor;C!=R&&"constructor"in t&&"constructor"in e&&!(typeof C=="function"&&C instanceof C&&typeof R=="function"&&R instanceof R)&&(m=!1)}return i.delete(t),i.delete(e),m}var kce=1,sk="[object Arguments]",ik="[object Array]",og="[object Object]",Dce=Object.prototype,ok=Dce.hasOwnProperty;function Oce(t,e,n,r,s,i){var o=mc(t),a=mc(e),l=o?ik:Cs(t),c=a?ik:Cs(e);l=l==sk?og:l,c=c==sk?og:c;var u=l==og,d=c==og,f=l==c;if(f&&wp(t)){if(!wp(e))return!1;o=!0,u=!1}if(f&&!u)return i||(i=new fi),o||US(t)?c3(t,e,n,r,s,i):Ace(t,e,l,n,r,s,i);if(!(n&kce)){var p=u&&ok.call(t,"__wrapped__"),g=d&&ok.call(e,"__wrapped__");if(p||g){var m=p?t.value():t,w=g?e.value():e;return i||(i=new fi),s(m,w,n,r,i)}}return f?(i||(i=new fi),Nce(t,e,n,r,s,i)):!1}function u3(t,e,n,r,s){return t===e?!0:t==null||e==null||!co(t)&&!co(e)?t!==t&&e!==e:Oce(t,e,n,r,u3,s)}function Lce(t){return function(e,n,r){for(var s=-1,i=Object(e),o=r(e),a=o.length;a--;){var l=o[++s];if(n(i[l],l,i)===!1)break}return e}}var Mce=Lce();function LE(t,e,n){(n!==void 0&&!dm(t[e],n)||n===void 0&&!(e in t))&&jS(t,e,n)}function Vce(t){return co(t)&&S0(t)}function ME(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function jce(t){return hm(t,fm(t))}function Fce(t,e,n,r,s,i,o){var a=ME(t,n),l=ME(e,n),c=o.get(l);if(c){LE(t,n,c);return}var u=i?i(a,l,n+"",t,e,o):void 0,d=u===void 0;if(d){var f=mc(l),p=!f&&wp(l),g=!f&&!p&&US(l);u=l,f||p||g?mc(a)?u=a:Vce(a)?u=$5(a):p?(d=!1,u=e3(l,!0)):g?(d=!1,u=s3(l,!0)):u=[]:Rae(l)||PE(l)?(u=a,PE(a)?u=jce(a):(!nl(a)||VS(a))&&(u=i3(l))):d=!1}d&&(o.set(l,u),s(u,l,r,i,o),o.delete(l)),LE(t,n,u)}function d3(t,e,n,r,s){t!==e&&Mce(e,function(i,o){if(s||(s=new fi),nl(i))Fce(t,e,o,n,d3,r,s);else{var a=r?r(ME(t,o),i,o+"",t,e,s):void 0;a===void 0&&(a=i),LE(t,o,a)}},fm)}function HS(t,e){return u3(t,e)}var xa=coe(function(t,e,n){d3(t,e,n)}),pe=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(pe||{});class Ei{constructor(e,n,r={}){this.attrName=e,this.keyName=n;const s=pe.TYPE&pe.ATTRIBUTE;this.scope=r.scope!=null?r.scope&pe.LEVEL|s:pe.ATTRIBUTE,r.whitelist!=null&&(this.whitelist=r.whitelist)}static keys(e){return Array.from(e.attributes).map(n=>n.name)}add(e,n){return this.canAdd(e,n)?(e.setAttribute(this.keyName,n),!0):!1}canAdd(e,n){return this.whitelist==null?!0:typeof n=="string"?this.whitelist.indexOf(n.replace(/["']/g,""))>-1:this.whitelist.indexOf(n)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const n=e.getAttribute(this.keyName);return this.canAdd(e,n)&&n?n:""}}class ed extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const h3=class VE{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,n=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(n){let r=null;try{r=e.parentNode}catch{return null}return this.find(r,n)}return null}create(e,n,r){const s=this.query(n);if(s==null)throw new ed(`Unable to create ${n} blot`);const i=s,o=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:i.create(r),a=new i(e,o,r);return VE.blots.set(a.domNode,a),a}find(e,n=!1){return VE.find(e,n)}query(e,n=pe.ANY){let r;return typeof e=="string"?r=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?r=this.types.text:typeof e=="number"?e&pe.LEVEL&pe.BLOCK?r=this.types.block:e&pe.LEVEL&pe.INLINE&&(r=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(s=>(r=this.classes[s],!!r)),r=r||this.tags[e.tagName]),r==null?null:"scope"in r&&n&pe.LEVEL&r.scope&&n&pe.TYPE&r.scope?r:null}register(...e){return e.map(n=>{const r="blotName"in n,s="attrName"in n;if(!r&&!s)throw new ed("Invalid definition");if(r&&n.blotName==="abstract")throw new ed("Cannot register abstract class");const i=r?n.blotName:s?n.attrName:void 0;return this.types[i]=n,s?typeof n.keyName=="string"&&(this.attributes[n.keyName]=n):r&&(n.className&&(this.classes[n.className]=n),n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map(o=>o.toUpperCase()):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(o=>{(this.tags[o]==null||n.className==null)&&(this.tags[o]=n)}))),n})}};h3.blots=new WeakMap;let Pd=h3;function ak(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(n=>n.indexOf(`${e}-`)===0)}class Bce extends Ei{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(n=>n.split("-").slice(0,-1).join("-"))}add(e,n){return this.canAdd(e,n)?(this.remove(e),e.classList.add(`${this.keyName}-${n}`),!0):!1}remove(e){ak(e,this.keyName).forEach(n=>{e.classList.remove(n)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const n=(ak(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,n)?n:""}}const zs=Bce;function c_(t){const e=t.split("-"),n=e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("");return e[0]+n}class Uce extends Ei{static keys(e){return(e.getAttribute("style")||"").split(";").map(n=>n.split(":")[0].trim())}add(e,n){return this.canAdd(e,n)?(e.style[c_(this.keyName)]=n,!0):!1}remove(e){e.style[c_(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const n=e.style[c_(this.keyName)];return this.canAdd(e,n)?n:""}}const rl=Uce;class $ce{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,n){n?e.add(this.domNode,n)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=Pd.find(this.domNode);if(e==null)return;const n=Ei.keys(this.domNode),r=zs.keys(this.domNode),s=rl.keys(this.domNode);n.concat(r).concat(s).forEach(i=>{const o=e.scroll.query(i,pe.ATTRIBUTE);o instanceof Ei&&(this.attributes[o.attrName]=o)})}copy(e){Object.keys(this.attributes).forEach(n=>{const r=this.attributes[n].value(this.domNode);e.format(n,r)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(n=>{this.attributes[n].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,n)=>(e[n]=this.attributes[n].value(this.domNode),e),{})}}const C0=$ce,f3=class{constructor(e,n){this.scroll=e,this.domNode=n,Pd.blots.set(n,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new ed("Blot definition missing tagName");let n,r;return Array.isArray(this.tagName)?(typeof e=="string"?(r=e.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof e=="number"&&(r=e),typeof r=="number"?n=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?n=document.createElement(r):n=document.createElement(this.tagName[0])):n=document.createElement(this.tagName),this.className&&n.classList.add(this.className),n}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),Pd.blots.delete(this.domNode)}deleteAt(e,n){this.isolate(e,n).remove()}formatAt(e,n,r,s){const i=this.isolate(e,n);if(this.scroll.query(r,pe.BLOT)!=null&&s)i.wrap(r,s);else if(this.scroll.query(r,pe.ATTRIBUTE)!=null){const o=this.scroll.create(this.statics.scope);i.wrap(o),o.format(r,s)}}insertAt(e,n,r){const s=r==null?this.scroll.create("text",n):this.scroll.create(n,r),i=this.split(e);this.parent.insertBefore(s,i||void 0)}isolate(e,n){const r=this.split(e);if(r==null)throw new Error("Attempt to isolate at end");return r.split(n),r}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(e,n){return e===0?this:this.next}update(e,n){}wrap(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new ed(`Cannot wrap ${e}`);return r.appendChild(this),r}};f3.blotName="abstract";let p3=f3;const m3=class extends p3{static value(e){return!0}index(e,n){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(n,1):-1}position(e,n){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};m3.scope=pe.INLINE_BLOT;let qce=m3;const Dn=qce;class zce{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const n=e.slice(1);this.append(...n)}}at(e){const n=this.iterator();let r=n();for(;r&&e>0;)e-=1,r=n();return r}contains(e){const n=this.iterator();let r=n();for(;r;){if(r===e)return!0;r=n()}return!1}indexOf(e){const n=this.iterator();let r=n(),s=0;for(;r;){if(r===e)return s;s+=1,r=n()}return-1}insertBefore(e,n){e!=null&&(this.remove(e),e.next=n,n!=null?(e.prev=n.prev,n.prev!=null&&(n.prev.next=e),n.prev=e,n===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let n=0,r=this.head;for(;r!=null;){if(r===e)return n;n+=r.length(),r=r.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const n=e;return e!=null&&(e=e.next),n}}find(e,n=!1){const r=this.iterator();let s=r();for(;s;){const i=s.length();if(e<i||n&&e===i&&(s.next==null||s.next.length()!==0))return[s,e];e-=i,s=r()}return[null,0]}forEach(e){const n=this.iterator();let r=n();for(;r;)e(r),r=n()}forEachAt(e,n,r){if(n<=0)return;const[s,i]=this.find(e);let o=e-i;const a=this.iterator(s);let l=a();for(;l&&o<e+n;){const c=l.length();e>o?r(l,e-o,Math.min(n,o+c-e)):r(l,0,Math.min(c,e+n-o)),o+=c,l=a()}}map(e){return this.reduce((n,r)=>(n.push(e(r)),n),[])}reduce(e,n){const r=this.iterator();let s=r();for(;s;)n=e(n,s),s=r();return n}}function lk(t,e){const n=e.find(t);if(n)return n;try{return e.create(t)}catch{const r=e.create(pe.INLINE);return Array.from(t.childNodes).forEach(s=>{r.domNode.appendChild(s)}),t.parentNode&&t.parentNode.replaceChild(r.domNode,t),r.attach(),r}}const g3=class Wo extends p3{constructor(e,n){super(e,n),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,Wo.uiClass&&this.uiNode.classList.add(Wo.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new zce,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const n=lk(e,this.scroll);this.insertBefore(n,this.children.head||void 0)}catch(n){if(n instanceof ed)return;throw n}})}deleteAt(e,n){if(e===0&&n===this.length())return this.remove();this.children.forEachAt(e,n,(r,s,i)=>{r.deleteAt(s,i)})}descendant(e,n=0){const[r,s]=this.children.find(n);return e.blotName==null&&e(r)||e.blotName!=null&&r instanceof e?[r,s]:r instanceof Wo?r.descendant(e,s):[null,-1]}descendants(e,n=0,r=Number.MAX_VALUE){let s=[],i=r;return this.children.forEachAt(n,r,(o,a,l)=>{(e.blotName==null&&e(o)||e.blotName!=null&&o instanceof e)&&s.push(o),o instanceof Wo&&(s=s.concat(o.descendants(e,a,i))),i-=l}),s}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(n=>{e||this.statics.allowedChildren.some(r=>n instanceof r)||(n.statics.scope===pe.BLOCK_BLOT?(n.next!=null&&this.splitAfter(n),n.prev!=null&&this.splitAfter(n.prev),n.parent.unwrap(),e=!0):n instanceof Wo?n.unwrap():n.remove())})}formatAt(e,n,r,s){this.children.forEachAt(e,n,(i,o,a)=>{i.formatAt(o,a,r,s)})}insertAt(e,n,r){const[s,i]=this.children.find(e);if(s)s.insertAt(i,n,r);else{const o=r==null?this.scroll.create("text",n):this.scroll.create(n,r);this.appendChild(o)}}insertBefore(e,n){e.parent!=null&&e.parent.children.remove(e);let r=null;this.children.insertBefore(e,n||null),e.parent=this,n!=null&&(r=n.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(e.domNode,r),e.attach()}length(){return this.children.reduce((e,n)=>e+n.length(),0)}moveChildren(e,n){this.children.forEach(r=>{e.insertBefore(r,n)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const n=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(n)}else this.remove()}path(e,n=!1){const[r,s]=this.children.find(e,n),i=[[this,e]];return r instanceof Wo?i.concat(r.path(s,n)):(r!=null&&i.push([r,s]),i)}removeChild(e){this.children.remove(e)}replaceWith(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;return r instanceof Wo&&this.moveChildren(r),super.replaceWith(r)}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(e,this.length(),(s,i,o)=>{const a=s.split(i,n);a!=null&&r.appendChild(a)}),r}splitAfter(e){const n=this.clone();for(;e.next!=null;)n.appendChild(e.next);return this.parent&&this.parent.insertBefore(n,this.next||void 0),n}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,n){const r=[],s=[];e.forEach(i=>{i.target===this.domNode&&i.type==="childList"&&(r.push(...i.addedNodes),s.push(...i.removedNodes))}),s.forEach(i=>{if(i.parentNode!=null&&i.tagName!=="IFRAME"&&document.body.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const o=this.scroll.find(i);o!=null&&(o.domNode.parentNode==null||o.domNode.parentNode===this.domNode)&&o.detach()}),r.filter(i=>i.parentNode===this.domNode&&i!==this.uiNode).sort((i,o)=>i===o?0:i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(i=>{let o=null;i.nextSibling!=null&&(o=this.scroll.find(i.nextSibling));const a=lk(i,this.scroll);(a.next!==o||a.next==null)&&(a.parent!=null&&a.parent.removeChild(this),this.insertBefore(a,o||void 0))}),this.enforceAllowedChildren()}};g3.uiClass="";let Wce=g3;const Ms=Wce;function Hce(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}const gu=class yu extends Ms{static create(e){return super.create(e)}static formats(e,n){const r=n.query(yu.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new C0(this.domNode)}format(e,n){if(e===this.statics.blotName&&!n)this.children.forEach(r=>{r instanceof yu||(r=r.wrap(yu.blotName,!0)),this.attributes.copy(r)}),this.unwrap();else{const r=this.scroll.query(e,pe.INLINE);if(r==null)return;r instanceof Ei?this.attributes.attribute(r,n):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n)}}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,r,s){this.formats()[r]!=null||this.scroll.query(r,pe.ATTRIBUTE)?this.isolate(e,n).format(r,s):super.formatAt(e,n,r,s)}optimize(e){super.optimize(e);const n=this.formats();if(Object.keys(n).length===0)return this.unwrap();const r=this.next;r instanceof yu&&r.prev===this&&Hce(n,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(e,n){const r=super.replaceWith(e,n);return this.attributes.copy(r),r}update(e,n){super.update(e,n),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}wrap(e,n){const r=super.wrap(e,n);return r instanceof yu&&this.attributes.move(r),r}};gu.allowedChildren=[gu,Dn],gu.blotName="inline",gu.scope=pe.INLINE_BLOT,gu.tagName="SPAN";let Gce=gu;const GS=Gce,vu=class jE extends Ms{static create(e){return super.create(e)}static formats(e,n){const r=n.query(jE.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new C0(this.domNode)}format(e,n){const r=this.scroll.query(e,pe.BLOCK);r!=null&&(r instanceof Ei?this.attributes.attribute(r,n):e===this.statics.blotName&&!n?this.replaceWith(jE.blotName):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n))}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,r,s){this.scroll.query(r,pe.BLOCK)!=null?this.format(r,s):super.formatAt(e,n,r,s)}insertAt(e,n,r){if(r==null||this.scroll.query(n,pe.INLINE)!=null)super.insertAt(e,n,r);else{const s=this.split(e);if(s!=null){const i=this.scroll.create(n,r);s.parent.insertBefore(i,s)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,n){const r=super.replaceWith(e,n);return this.attributes.copy(r),r}update(e,n){super.update(e,n),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}};vu.blotName="block",vu.scope=pe.BLOCK_BLOT,vu.tagName="P",vu.allowedChildren=[GS,vu,Dn];let Kce=vu;const xp=Kce,FE=class extends Ms{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,n){super.deleteAt(e,n),this.enforceAllowedChildren()}formatAt(e,n,r,s){super.formatAt(e,n,r,s),this.enforceAllowedChildren()}insertAt(e,n,r){super.insertAt(e,n,r),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};FE.blotName="container",FE.scope=pe.BLOCK_BLOT;let Qce=FE;const R0=Qce;class Yce extends Dn{static formats(e,n){}format(e,n){super.formatAt(0,this.length(),e,n)}formatAt(e,n,r,s){e===0&&n===this.length()?this.format(r,s):super.formatAt(e,n,r,s)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const Mr=Yce,Xce={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},Jce=100,wu=class extends Ms{constructor(e,n){super(null,n),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,Xce),this.attach()}create(e,n){return this.registry.create(this,e,n)}find(e,n=!1){const r=this.registry.find(e,n);return r?r.scroll===this?r:n?this.find(r.scroll.domNode.parentNode,!0):null:null}query(e,n=pe.ANY){return this.registry.query(e,n)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,n){this.update(),e===0&&n===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(e,n)}formatAt(e,n,r,s){this.update(),super.formatAt(e,n,r,s)}insertAt(e,n,r){this.update(),super.insertAt(e,n,r)}optimize(e=[],n={}){super.optimize(n);const r=n.mutationsMap||new WeakMap;let s=Array.from(this.observer.takeRecords());for(;s.length>0;)e.push(s.pop());const i=(l,c=!0)=>{l==null||l===this||l.domNode.parentNode!=null&&(r.has(l.domNode)||r.set(l.domNode,[]),c&&i(l.parent))},o=l=>{r.has(l.domNode)&&(l instanceof Ms&&l.children.forEach(o),r.delete(l.domNode),l.optimize(n))};let a=e;for(let l=0;a.length>0;l+=1){if(l>=Jce)throw new Error("[Parchment] Maximum optimize iterations reached");for(a.forEach(c=>{const u=this.find(c.target,!0);u!=null&&(u.domNode===c.target&&(c.type==="childList"?(i(this.find(c.previousSibling,!1)),Array.from(c.addedNodes).forEach(d=>{const f=this.find(d,!1);i(f,!1),f instanceof Ms&&f.children.forEach(p=>{i(p,!1)})})):c.type==="attributes"&&i(u.prev)),i(u))}),this.children.forEach(o),a=Array.from(this.observer.takeRecords()),s=a.slice();s.length>0;)e.push(s.pop())}}update(e,n={}){e=e||this.observer.takeRecords();const r=new WeakMap;e.map(s=>{const i=this.find(s.target,!0);return i==null?null:r.has(i.domNode)?(r.get(i.domNode).push(s),null):(r.set(i.domNode,[s]),i)}).forEach(s=>{s!=null&&s!==this&&r.has(s.domNode)&&s.update(r.get(s.domNode)||[],n)}),n.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),n),this.optimize(e,n)}};wu.blotName="scroll",wu.defaultChild=xp,wu.allowedChildren=[xp,R0],wu.scope=pe.BLOCK_BLOT,wu.tagName="DIV";let Zce=wu;const KS=Zce,BE=class y3 extends Dn{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,n){super(e,n),this.text=this.statics.value(this.domNode)}deleteAt(e,n){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+n)}index(e,n){return this.domNode===e?n:-1}insertAt(e,n,r){r==null?(this.text=this.text.slice(0,e)+n+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,n,r)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof y3&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,n=!1){return[this.domNode,e]}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const r=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(e,n){e.some(r=>r.type==="characterData"&&r.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};BE.blotName="text",BE.scope=pe.INLINE_BLOT;let eue=BE;const ov=eue,tue=Object.freeze(Object.defineProperty({__proto__:null,Attributor:Ei,AttributorStore:C0,BlockBlot:xp,ClassAttributor:zs,ContainerBlot:R0,EmbedBlot:Mr,InlineBlot:GS,LeafBlot:Dn,ParentBlot:Ms,Registry:Pd,Scope:pe,ScrollBlot:KS,StyleAttributor:rl,TextBlot:ov},Symbol.toStringTag,{value:"Module"}));var UE={exports:{}},Ir=-1,Hn=1,Qt=0;function bp(t,e,n,r,s){if(t===e)return t?[[Qt,t]]:[];if(n!=null){var i=uue(t,e,n);if(i)return i}var o=QS(t,e),a=t.substring(0,o);t=t.substring(o),e=e.substring(o),o=P0(t,e);var l=t.substring(t.length-o);t=t.substring(0,t.length-o),e=e.substring(0,e.length-o);var c=nue(t,e);return a&&c.unshift([Qt,a]),l&&c.push([Qt,l]),YS(c,s),r&&iue(c),c}function nue(t,e){var n;if(!t)return[[Hn,e]];if(!e)return[[Ir,t]];var r=t.length>e.length?t:e,s=t.length>e.length?e:t,i=r.indexOf(s);if(i!==-1)return n=[[Hn,r.substring(0,i)],[Qt,s],[Hn,r.substring(i+s.length)]],t.length>e.length&&(n[0][0]=n[2][0]=Ir),n;if(s.length===1)return[[Ir,t],[Hn,e]];var o=sue(t,e);if(o){var a=o[0],l=o[1],c=o[2],u=o[3],d=o[4],f=bp(a,c),p=bp(l,u);return f.concat([[Qt,d]],p)}return rue(t,e)}function rue(t,e){for(var n=t.length,r=e.length,s=Math.ceil((n+r)/2),i=s,o=2*s,a=new Array(o),l=new Array(o),c=0;c<o;c++)a[c]=-1,l[c]=-1;a[i+1]=0,l[i+1]=0;for(var u=n-r,d=u%2!==0,f=0,p=0,g=0,m=0,w=0;w<s;w++){for(var v=-w+f;v<=w-p;v+=2){var E=i+v,b;v===-w||v!==w&&a[E-1]<a[E+1]?b=a[E+1]:b=a[E-1]+1;for(var C=b-v;b<n&&C<r&&t.charAt(b)===e.charAt(C);)b++,C++;if(a[E]=b,b>n)p+=2;else if(C>r)f+=2;else if(d){var R=i+u-v;if(R>=0&&R<o&&l[R]!==-1){var O=n-l[R];if(b>=O)return ck(t,e,b,C)}}}for(var I=-w+g;I<=w-m;I+=2){var R=i+I,O;I===-w||I!==w&&l[R-1]<l[R+1]?O=l[R+1]:O=l[R-1]+1;for(var A=O-I;O<n&&A<r&&t.charAt(n-O-1)===e.charAt(r-A-1);)O++,A++;if(l[R]=O,O>n)m+=2;else if(A>r)g+=2;else if(!d){var E=i+u-I;if(E>=0&&E<o&&a[E]!==-1){var b=a[E],C=i+b-E;if(O=n-O,b>=O)return ck(t,e,b,C)}}}}return[[Ir,t],[Hn,e]]}function ck(t,e,n,r){var s=t.substring(0,n),i=e.substring(0,r),o=t.substring(n),a=e.substring(r),l=bp(s,i),c=bp(o,a);return l.concat(c)}function QS(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),s=r,i=0;n<s;)t.substring(i,s)==e.substring(i,s)?(n=s,i=n):r=s,s=Math.floor((r-n)/2+n);return v3(t.charCodeAt(s-1))&&s--,s}function uk(t,e){var n=t.length,r=e.length;if(n==0||r==0)return 0;n>r?t=t.substring(n-r):n<r&&(e=e.substring(0,n));var s=Math.min(n,r);if(t==e)return s;for(var i=0,o=1;;){var a=t.substring(s-o),l=e.indexOf(a);if(l==-1)return i;o+=l,(l==0||t.substring(s-o)==e.substring(0,o))&&(i=o,o++)}}function P0(t,e){if(!t||!e||t.slice(-1)!==e.slice(-1))return 0;for(var n=0,r=Math.min(t.length,e.length),s=r,i=0;n<s;)t.substring(t.length-s,t.length-i)==e.substring(e.length-s,e.length-i)?(n=s,i=n):r=s,s=Math.floor((r-n)/2+n);return w3(t.charCodeAt(t.length-s))&&s--,s}function sue(t,e){var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||r.length*2<n.length)return null;function s(p,g,m){for(var w=p.substring(m,m+Math.floor(p.length/4)),v=-1,E="",b,C,R,O;(v=g.indexOf(w,v+1))!==-1;){var I=QS(p.substring(m),g.substring(v)),A=P0(p.substring(0,m),g.substring(0,v));E.length<A+I&&(E=g.substring(v-A,v)+g.substring(v,v+I),b=p.substring(0,m-A),C=p.substring(m+I),R=g.substring(0,v-A),O=g.substring(v+I))}return E.length*2>=p.length?[b,C,R,O,E]:null}var i=s(n,r,Math.ceil(n.length/4)),o=s(n,r,Math.ceil(n.length/2)),a;if(!i&&!o)return null;o?i?a=i[4].length>o[4].length?i:o:a=o:a=i;var l,c,u,d;t.length>e.length?(l=a[0],c=a[1],u=a[2],d=a[3]):(u=a[0],d=a[1],l=a[2],c=a[3]);var f=a[4];return[l,c,u,d,f]}function iue(t){for(var e=!1,n=[],r=0,s=null,i=0,o=0,a=0,l=0,c=0;i<t.length;)t[i][0]==Qt?(n[r++]=i,o=l,a=c,l=0,c=0,s=t[i][1]):(t[i][0]==Hn?l+=t[i][1].length:c+=t[i][1].length,s&&s.length<=Math.max(o,a)&&s.length<=Math.max(l,c)&&(t.splice(n[r-1],0,[Ir,s]),t[n[r-1]+1][0]=Hn,r--,r--,i=r>0?n[r-1]:-1,o=0,a=0,l=0,c=0,s=null,e=!0)),i++;for(e&&YS(t),lue(t),i=1;i<t.length;){if(t[i-1][0]==Ir&&t[i][0]==Hn){var u=t[i-1][1],d=t[i][1],f=uk(u,d),p=uk(d,u);f>=p?(f>=u.length/2||f>=d.length/2)&&(t.splice(i,0,[Qt,d.substring(0,f)]),t[i-1][1]=u.substring(0,u.length-f),t[i+1][1]=d.substring(f),i++):(p>=u.length/2||p>=d.length/2)&&(t.splice(i,0,[Qt,u.substring(0,p)]),t[i-1][0]=Hn,t[i-1][1]=d.substring(0,d.length-p),t[i+1][0]=Ir,t[i+1][1]=u.substring(p),i++),i++}i++}}var dk=/[^a-zA-Z0-9]/,hk=/\s/,fk=/[\r\n]/,oue=/\n\r?\n$/,aue=/^\r?\n\r?\n/;function lue(t){function e(p,g){if(!p||!g)return 6;var m=p.charAt(p.length-1),w=g.charAt(0),v=m.match(dk),E=w.match(dk),b=v&&m.match(hk),C=E&&w.match(hk),R=b&&m.match(fk),O=C&&w.match(fk),I=R&&p.match(oue),A=O&&g.match(aue);return I||A?5:R||O?4:v&&!b&&C?3:b||C?2:v||E?1:0}for(var n=1;n<t.length-1;){if(t[n-1][0]==Qt&&t[n+1][0]==Qt){var r=t[n-1][1],s=t[n][1],i=t[n+1][1],o=P0(r,s);if(o){var a=s.substring(s.length-o);r=r.substring(0,r.length-o),s=a+s.substring(0,s.length-o),i=a+i}for(var l=r,c=s,u=i,d=e(r,s)+e(s,i);s.charAt(0)===i.charAt(0);){r+=s.charAt(0),s=s.substring(1)+i.charAt(0),i=i.substring(1);var f=e(r,s)+e(s,i);f>=d&&(d=f,l=r,c=s,u=i)}t[n-1][1]!=l&&(l?t[n-1][1]=l:(t.splice(n-1,1),n--),t[n][1]=c,u?t[n+1][1]=u:(t.splice(n+1,1),n--))}n++}}function YS(t,e){t.push([Qt,""]);for(var n=0,r=0,s=0,i="",o="",a;n<t.length;){if(n<t.length-1&&!t[n][1]){t.splice(n,1);continue}switch(t[n][0]){case Hn:s++,o+=t[n][1],n++;break;case Ir:r++,i+=t[n][1],n++;break;case Qt:var l=n-s-r-1;if(e){if(l>=0&&E3(t[l][1])){var c=t[l][1].slice(-1);if(t[l][1]=t[l][1].slice(0,-1),i=c+i,o=c+o,!t[l][1]){t.splice(l,1),n--;var u=l-1;t[u]&&t[u][0]===Hn&&(s++,o=t[u][1]+o,u--),t[u]&&t[u][0]===Ir&&(r++,i=t[u][1]+i,u--),l=u}}if(_3(t[n][1])){var c=t[n][1].charAt(0);t[n][1]=t[n][1].slice(1),i+=c,o+=c}}if(n<t.length-1&&!t[n][1]){t.splice(n,1);break}if(i.length>0||o.length>0){i.length>0&&o.length>0&&(a=QS(o,i),a!==0&&(l>=0?t[l][1]+=o.substring(0,a):(t.splice(0,0,[Qt,o.substring(0,a)]),n++),o=o.substring(a),i=i.substring(a)),a=P0(o,i),a!==0&&(t[n][1]=o.substring(o.length-a)+t[n][1],o=o.substring(0,o.length-a),i=i.substring(0,i.length-a)));var d=s+r;i.length===0&&o.length===0?(t.splice(n-d,d),n=n-d):i.length===0?(t.splice(n-d,d,[Hn,o]),n=n-d+1):o.length===0?(t.splice(n-d,d,[Ir,i]),n=n-d+1):(t.splice(n-d,d,[Ir,i],[Hn,o]),n=n-d+2)}n!==0&&t[n-1][0]===Qt?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,s=0,r=0,i="",o="";break}}t[t.length-1][1]===""&&t.pop();var f=!1;for(n=1;n<t.length-1;)t[n-1][0]===Qt&&t[n+1][0]===Qt&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)===t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),f=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),f=!0)),n++;f&&YS(t,e)}function v3(t){return t>=55296&&t<=56319}function w3(t){return t>=56320&&t<=57343}function _3(t){return w3(t.charCodeAt(0))}function E3(t){return v3(t.charCodeAt(t.length-1))}function cue(t){for(var e=[],n=0;n<t.length;n++)t[n][1].length>0&&e.push(t[n]);return e}function u_(t,e,n,r){return E3(t)||_3(r)?null:cue([[Qt,t],[Ir,e],[Hn,n],[Qt,r]])}function uue(t,e,n){var r=typeof n=="number"?{index:n,length:0}:n.oldRange,s=typeof n=="number"?null:n.newRange,i=t.length,o=e.length;if(r.length===0&&(s===null||s.length===0)){var a=r.index,l=t.slice(0,a),c=t.slice(a),u=s?s.index:null;e:{var d=a+o-i;if(u!==null&&u!==d||d<0||d>o)break e;var f=e.slice(0,d),p=e.slice(d);if(p!==c)break e;var g=Math.min(a,d),m=l.slice(0,g),w=f.slice(0,g);if(m!==w)break e;var v=l.slice(g),E=f.slice(g);return u_(m,v,E,c)}e:{if(u!==null&&u!==a)break e;var b=a,f=e.slice(0,b),p=e.slice(b);if(f!==l)break e;var C=Math.min(i-b,o-b),R=c.slice(c.length-C),O=p.slice(p.length-C);if(R!==O)break e;var v=c.slice(0,c.length-C),E=p.slice(0,p.length-C);return u_(l,v,E,R)}}if(r.length>0&&s&&s.length===0)e:{var m=t.slice(0,r.index),R=t.slice(r.index+r.length),g=m.length,C=R.length;if(o<g+C)break e;var w=e.slice(0,g),O=e.slice(o-C);if(m!==w||R!==O)break e;var v=t.slice(g,i-C),E=e.slice(g,o-C);return u_(m,v,E,R)}return null}function N0(t,e,n,r){return bp(t,e,n,r,!0)}N0.INSERT=Hn;N0.DELETE=Ir;N0.EQUAL=Qt;var due=N0,av={exports:{}};av.exports;(function(t,e){var n=200,r="__lodash_hash_undefined__",s=9007199254740991,i="[object Arguments]",o="[object Array]",a="[object Boolean]",l="[object Date]",c="[object Error]",u="[object Function]",d="[object GeneratorFunction]",f="[object Map]",p="[object Number]",g="[object Object]",m="[object Promise]",w="[object RegExp]",v="[object Set]",E="[object String]",b="[object Symbol]",C="[object WeakMap]",R="[object ArrayBuffer]",O="[object DataView]",I="[object Float32Array]",A="[object Float64Array]",P="[object Int8Array]",D="[object Int16Array]",M="[object Int32Array]",V="[object Uint8Array]",L="[object Uint8ClampedArray]",W="[object Uint16Array]",oe="[object Uint32Array]",re=/[\\^$.*+?()[\]{}|]/g,Z=/\w*$/,U=/^\[object .+?Constructor\]$/,Y=/^(?:0|[1-9]\d*)$/,G={};G[i]=G[o]=G[R]=G[O]=G[a]=G[l]=G[I]=G[A]=G[P]=G[D]=G[M]=G[f]=G[p]=G[g]=G[w]=G[v]=G[E]=G[b]=G[V]=G[L]=G[W]=G[oe]=!0,G[c]=G[u]=G[C]=!1;var he=typeof ra=="object"&&ra&&ra.Object===Object&&ra,we=typeof self=="object"&&self&&self.Object===Object&&self,ve=he||we||Function("return this")(),De=e&&!e.nodeType&&e,_e=De&&!0&&t&&!t.nodeType&&t,Ye=_e&&_e.exports===De;function se(T,N){return T.set(N[0],N[1]),T}function ye(T,N){return T.add(N),T}function Be(T,N){for(var j=-1,z=T?T.length:0;++j<z&&N(T[j],j,T)!==!1;);return T}function xe(T,N){for(var j=-1,z=N.length,Se=T.length;++j<z;)T[Se+j]=N[j];return T}function ue(T,N,j,z){for(var Se=-1,me=T?T.length:0;++Se<me;)j=N(j,T[Se],Se,T);return j}function X(T,N){for(var j=-1,z=Array(T);++j<T;)z[j]=N(j);return z}function be(T,N){return T==null?void 0:T[N]}function Ce(T){var N=!1;if(T!=null&&typeof T.toString!="function")try{N=!!(T+"")}catch{}return N}function We(T){var N=-1,j=Array(T.size);return T.forEach(function(z,Se){j[++N]=[Se,z]}),j}function it(T,N){return function(j){return T(N(j))}}function Tt(T){var N=-1,j=Array(T.size);return T.forEach(function(z){j[++N]=z}),j}var Fn=Array.prototype,jt=Function.prototype,en=Object.prototype,Zn=ve["__core-js_shared__"],Gs=function(){var T=/[^.]+$/.exec(Zn&&Zn.keys&&Zn.keys.IE_PROTO||"");return T?"Symbol(src)_1."+T:""}(),Vr=jt.toString,ln=en.hasOwnProperty,jr=en.toString,St=RegExp("^"+Vr.call(ln).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=Ye?ve.Buffer:void 0,pr=ve.Symbol,Fr=ve.Uint8Array,It=it(Object.getPrototypeOf,Object),Ks=Object.create,er=en.propertyIsEnumerable,ps=Fn.splice,Qs=Object.getOwnPropertySymbols,Br=et?et.isBuffer:void 0,Io=it(Object.keys,Object),Ys=hn(ve,"DataView"),mr=hn(ve,"Map"),cn=hn(ve,"Promise"),ms=hn(ve,"Set"),tr=hn(ve,"WeakMap"),nr=hn(Object,"create"),Ur=tn(Ys),un=tn(mr),gs=tn(cn),$r=tn(ms),Ao=tn(tr),rr=pr?pr.prototype:void 0,ol=rr?rr.valueOf:void 0;function ot(T){var N=-1,j=T?T.length:0;for(this.clear();++N<j;){var z=T[N];this.set(z[0],z[1])}}function jc(){this.__data__=nr?nr(null):{}}function Ci(T){return this.has(T)&&delete this.__data__[T]}function Ri(T){var N=this.__data__;if(nr){var j=N[T];return j===r?void 0:j}return ln.call(N,T)?N[T]:void 0}function Fc(T){var N=this.__data__;return nr?N[T]!==void 0:ln.call(N,T)}function al(T,N){var j=this.__data__;return j[T]=nr&&N===void 0?r:N,this}ot.prototype.clear=jc,ot.prototype.delete=Ci,ot.prototype.get=Ri,ot.prototype.has=Fc,ot.prototype.set=al;function ft(T){var N=-1,j=T?T.length:0;for(this.clear();++N<j;){var z=T[N];this.set(z[0],z[1])}}function rh(){this.__data__=[]}function sh(T){var N=this.__data__,j=Xs(N,T);if(j<0)return!1;var z=N.length-1;return j==z?N.pop():ps.call(N,j,1),!0}function Co(T){var N=this.__data__,j=Xs(N,T);return j<0?void 0:N[j][1]}function Bc(T){return Xs(this.__data__,T)>-1}function ll(T,N){var j=this.__data__,z=Xs(j,T);return z<0?j.push([T,N]):j[z][1]=N,this}ft.prototype.clear=rh,ft.prototype.delete=sh,ft.prototype.get=Co,ft.prototype.has=Bc,ft.prototype.set=ll;function Nt(T){var N=-1,j=T?T.length:0;for(this.clear();++N<j;){var z=T[N];this.set(z[0],z[1])}}function qr(){this.__data__={hash:new ot,map:new(mr||ft),string:new ot}}function Uc(T){return Gr(this,T).delete(T)}function $c(T){return Gr(this,T).get(T)}function cl(T){return Gr(this,T).has(T)}function ul(T,N){return Gr(this,T).set(T,N),this}Nt.prototype.clear=qr,Nt.prototype.delete=Uc,Nt.prototype.get=$c,Nt.prototype.has=cl,Nt.prototype.set=ul;function dn(T){this.__data__=new ft(T)}function qc(){this.__data__=new ft}function ih(T){return this.__data__.delete(T)}function Ro(T){return this.__data__.get(T)}function zc(T){return this.__data__.has(T)}function dl(T,N){var j=this.__data__;if(j instanceof ft){var z=j.__data__;if(!mr||z.length<n-1)return z.push([T,N]),this;j=this.__data__=new Nt(z)}return j.set(T,N),this}dn.prototype.clear=qc,dn.prototype.delete=ih,dn.prototype.get=Ro,dn.prototype.has=zc,dn.prototype.set=dl;function zr(T,N){var j=wl(T)||vr(T)?X(T.length,String):[],z=j.length,Se=!!z;for(var me in T)ln.call(T,me)&&!(Se&&(me=="length"||lh(me,z)))&&j.push(me);return j}function Wr(T,N,j){var z=T[N];(!(ln.call(T,N)&&vl(z,j))||j===void 0&&!(N in T))&&(T[N]=j)}function Xs(T,N){for(var j=T.length;j--;)if(vl(T[j][0],N))return j;return-1}function Hr(T,N){return T&&Js(N,Do(N),T)}function Po(T,N,j,z,Se,me,je){var Oe;if(z&&(Oe=me?z(T,Se,me,je):z(T)),Oe!==void 0)return Oe;if(!Un(T))return T;var at=wl(T);if(at){if(Oe=Qc(T),!N)return No(T,Oe)}else{var Ue=vs(T),tt=Ue==u||Ue==d;if(wr(T))return Pi(T,N);if(Ue==g||Ue==i||tt&&!me){if(Ce(T))return me?T:{};if(Oe=Kr(tt?{}:T),!N)return Kc(T,Hr(Oe,T))}else{if(!G[Ue])return me?T:{};Oe=ah(T,Ue,Po,N)}}je||(je=new dn);var fn=je.get(T);if(fn)return fn;if(je.set(T,Oe),!at)var kt=j?Ge(T):Do(T);return Be(kt||T,function(At,Ft){kt&&(Ft=At,At=T[Ft]),Wr(Oe,Ft,Po(At,N,j,z,Ft,T,je))}),Oe}function Wc(T){return Un(T)?Ks(T):{}}function Hc(T,N,j){var z=N(T);return wl(T)?z:xe(z,j(T))}function hl(T){return jr.call(T)}function fl(T){if(!Un(T)||ki(T))return!1;var N=_l(T)||Ce(T)?St:U;return N.test(tn(T))}function Gc(T){if(!yr(T))return Io(T);var N=[];for(var j in Object(T))ln.call(T,j)&&j!="constructor"&&N.push(j);return N}function Pi(T,N){if(N)return T.slice();var j=new T.constructor(T.length);return T.copy(j),j}function pl(T){var N=new T.constructor(T.byteLength);return new Fr(N).set(new Fr(T)),N}function Ni(T,N){var j=N?pl(T.buffer):T.buffer;return new T.constructor(j,T.byteOffset,T.byteLength)}function ml(T,N,j){var z=N?j(We(T),!0):We(T);return ue(z,se,new T.constructor)}function gl(T){var N=new T.constructor(T.source,Z.exec(T));return N.lastIndex=T.lastIndex,N}function oh(T,N,j){var z=N?j(Tt(T),!0):Tt(T);return ue(z,ye,new T.constructor)}function ys(T){return ol?Object(ol.call(T)):{}}function gr(T,N){var j=N?pl(T.buffer):T.buffer;return new T.constructor(j,T.byteOffset,T.length)}function No(T,N){var j=-1,z=T.length;for(N||(N=Array(z));++j<z;)N[j]=T[j];return N}function Js(T,N,j,z){j||(j={});for(var Se=-1,me=N.length;++Se<me;){var je=N[Se],Oe=void 0;Wr(j,je,Oe===void 0?T[je]:Oe)}return j}function Kc(T,N){return Js(T,Bn(T),N)}function Ge(T){return Hc(T,Do,Bn)}function Gr(T,N){var j=T.__data__;return ch(N)?j[typeof N=="string"?"string":"hash"]:j.map}function hn(T,N){var j=be(T,N);return fl(j)?j:void 0}var Bn=Qs?it(Qs,Object):Oi,vs=hl;(Ys&&vs(new Ys(new ArrayBuffer(1)))!=O||mr&&vs(new mr)!=f||cn&&vs(cn.resolve())!=m||ms&&vs(new ms)!=v||tr&&vs(new tr)!=C)&&(vs=function(T){var N=jr.call(T),j=N==g?T.constructor:void 0,z=j?tn(j):void 0;if(z)switch(z){case Ur:return O;case un:return f;case gs:return m;case $r:return v;case Ao:return C}return N});function Qc(T){var N=T.length,j=T.constructor(N);return N&&typeof T[0]=="string"&&ln.call(T,"index")&&(j.index=T.index,j.input=T.input),j}function Kr(T){return typeof T.constructor=="function"&&!yr(T)?Wc(It(T)):{}}function ah(T,N,j,z){var Se=T.constructor;switch(N){case R:return pl(T);case a:case l:return new Se(+T);case O:return Ni(T,z);case I:case A:case P:case D:case M:case V:case L:case W:case oe:return gr(T,z);case f:return ml(T,z,j);case p:case E:return new Se(T);case w:return gl(T);case v:return oh(T,z,j);case b:return ys(T)}}function lh(T,N){return N=N??s,!!N&&(typeof T=="number"||Y.test(T))&&T>-1&&T%1==0&&T<N}function ch(T){var N=typeof T;return N=="string"||N=="number"||N=="symbol"||N=="boolean"?T!=="__proto__":T===null}function ki(T){return!!Gs&&Gs in T}function yr(T){var N=T&&T.constructor,j=typeof N=="function"&&N.prototype||en;return T===j}function tn(T){if(T!=null){try{return Vr.call(T)}catch{}try{return T+""}catch{}}return""}function yl(T){return Po(T,!0,!0)}function vl(T,N){return T===N||T!==T&&N!==N}function vr(T){return uh(T)&&ln.call(T,"callee")&&(!er.call(T,"callee")||jr.call(T)==i)}var wl=Array.isArray;function ko(T){return T!=null&&Yc(T.length)&&!_l(T)}function uh(T){return Di(T)&&ko(T)}var wr=Br||Li;function _l(T){var N=Un(T)?jr.call(T):"";return N==u||N==d}function Yc(T){return typeof T=="number"&&T>-1&&T%1==0&&T<=s}function Un(T){var N=typeof T;return!!T&&(N=="object"||N=="function")}function Di(T){return!!T&&typeof T=="object"}function Do(T){return ko(T)?zr(T):Gc(T)}function Oi(){return[]}function Li(){return!1}t.exports=yl})(av,av.exports);var x3=av.exports,lv={exports:{}};lv.exports;(function(t,e){var n=200,r="__lodash_hash_undefined__",s=1,i=2,o=9007199254740991,a="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",u="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Function]",g="[object GeneratorFunction]",m="[object Map]",w="[object Number]",v="[object Null]",E="[object Object]",b="[object Promise]",C="[object Proxy]",R="[object RegExp]",O="[object Set]",I="[object String]",A="[object Symbol]",P="[object Undefined]",D="[object WeakMap]",M="[object ArrayBuffer]",V="[object DataView]",L="[object Float32Array]",W="[object Float64Array]",oe="[object Int8Array]",re="[object Int16Array]",Z="[object Int32Array]",U="[object Uint8Array]",Y="[object Uint8ClampedArray]",G="[object Uint16Array]",he="[object Uint32Array]",we=/[\\^$.*+?()[\]{}|]/g,ve=/^\[object .+?Constructor\]$/,De=/^(?:0|[1-9]\d*)$/,_e={};_e[L]=_e[W]=_e[oe]=_e[re]=_e[Z]=_e[U]=_e[Y]=_e[G]=_e[he]=!0,_e[a]=_e[l]=_e[M]=_e[u]=_e[V]=_e[d]=_e[f]=_e[p]=_e[m]=_e[w]=_e[E]=_e[R]=_e[O]=_e[I]=_e[D]=!1;var Ye=typeof ra=="object"&&ra&&ra.Object===Object&&ra,se=typeof self=="object"&&self&&self.Object===Object&&self,ye=Ye||se||Function("return this")(),Be=e&&!e.nodeType&&e,xe=Be&&!0&&t&&!t.nodeType&&t,ue=xe&&xe.exports===Be,X=ue&&Ye.process,be=function(){try{return X&&X.binding&&X.binding("util")}catch{}}(),Ce=be&&be.isTypedArray;function We(T,N){for(var j=-1,z=T==null?0:T.length,Se=0,me=[];++j<z;){var je=T[j];N(je,j,T)&&(me[Se++]=je)}return me}function it(T,N){for(var j=-1,z=N.length,Se=T.length;++j<z;)T[Se+j]=N[j];return T}function Tt(T,N){for(var j=-1,z=T==null?0:T.length;++j<z;)if(N(T[j],j,T))return!0;return!1}function Fn(T,N){for(var j=-1,z=Array(T);++j<T;)z[j]=N(j);return z}function jt(T){return function(N){return T(N)}}function en(T,N){return T.has(N)}function Zn(T,N){return T==null?void 0:T[N]}function Gs(T){var N=-1,j=Array(T.size);return T.forEach(function(z,Se){j[++N]=[Se,z]}),j}function Vr(T,N){return function(j){return T(N(j))}}function ln(T){var N=-1,j=Array(T.size);return T.forEach(function(z){j[++N]=z}),j}var jr=Array.prototype,St=Function.prototype,et=Object.prototype,pr=ye["__core-js_shared__"],Fr=St.toString,It=et.hasOwnProperty,Ks=function(){var T=/[^.]+$/.exec(pr&&pr.keys&&pr.keys.IE_PROTO||"");return T?"Symbol(src)_1."+T:""}(),er=et.toString,ps=RegExp("^"+Fr.call(It).replace(we,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qs=ue?ye.Buffer:void 0,Br=ye.Symbol,Io=ye.Uint8Array,Ys=et.propertyIsEnumerable,mr=jr.splice,cn=Br?Br.toStringTag:void 0,ms=Object.getOwnPropertySymbols,tr=Qs?Qs.isBuffer:void 0,nr=Vr(Object.keys,Object),Ur=Bn(ye,"DataView"),un=Bn(ye,"Map"),gs=Bn(ye,"Promise"),$r=Bn(ye,"Set"),Ao=Bn(ye,"WeakMap"),rr=Bn(Object,"create"),ol=tn(Ur),ot=tn(un),jc=tn(gs),Ci=tn($r),Ri=tn(Ao),Fc=Br?Br.prototype:void 0,al=Fc?Fc.valueOf:void 0;function ft(T){var N=-1,j=T==null?0:T.length;for(this.clear();++N<j;){var z=T[N];this.set(z[0],z[1])}}function rh(){this.__data__=rr?rr(null):{},this.size=0}function sh(T){var N=this.has(T)&&delete this.__data__[T];return this.size-=N?1:0,N}function Co(T){var N=this.__data__;if(rr){var j=N[T];return j===r?void 0:j}return It.call(N,T)?N[T]:void 0}function Bc(T){var N=this.__data__;return rr?N[T]!==void 0:It.call(N,T)}function ll(T,N){var j=this.__data__;return this.size+=this.has(T)?0:1,j[T]=rr&&N===void 0?r:N,this}ft.prototype.clear=rh,ft.prototype.delete=sh,ft.prototype.get=Co,ft.prototype.has=Bc,ft.prototype.set=ll;function Nt(T){var N=-1,j=T==null?0:T.length;for(this.clear();++N<j;){var z=T[N];this.set(z[0],z[1])}}function qr(){this.__data__=[],this.size=0}function Uc(T){var N=this.__data__,j=Pi(N,T);if(j<0)return!1;var z=N.length-1;return j==z?N.pop():mr.call(N,j,1),--this.size,!0}function $c(T){var N=this.__data__,j=Pi(N,T);return j<0?void 0:N[j][1]}function cl(T){return Pi(this.__data__,T)>-1}function ul(T,N){var j=this.__data__,z=Pi(j,T);return z<0?(++this.size,j.push([T,N])):j[z][1]=N,this}Nt.prototype.clear=qr,Nt.prototype.delete=Uc,Nt.prototype.get=$c,Nt.prototype.has=cl,Nt.prototype.set=ul;function dn(T){var N=-1,j=T==null?0:T.length;for(this.clear();++N<j;){var z=T[N];this.set(z[0],z[1])}}function qc(){this.size=0,this.__data__={hash:new ft,map:new(un||Nt),string:new ft}}function ih(T){var N=hn(this,T).delete(T);return this.size-=N?1:0,N}function Ro(T){return hn(this,T).get(T)}function zc(T){return hn(this,T).has(T)}function dl(T,N){var j=hn(this,T),z=j.size;return j.set(T,N),this.size+=j.size==z?0:1,this}dn.prototype.clear=qc,dn.prototype.delete=ih,dn.prototype.get=Ro,dn.prototype.has=zc,dn.prototype.set=dl;function zr(T){var N=-1,j=T==null?0:T.length;for(this.__data__=new dn;++N<j;)this.add(T[N])}function Wr(T){return this.__data__.set(T,r),this}function Xs(T){return this.__data__.has(T)}zr.prototype.add=zr.prototype.push=Wr,zr.prototype.has=Xs;function Hr(T){var N=this.__data__=new Nt(T);this.size=N.size}function Po(){this.__data__=new Nt,this.size=0}function Wc(T){var N=this.__data__,j=N.delete(T);return this.size=N.size,j}function Hc(T){return this.__data__.get(T)}function hl(T){return this.__data__.has(T)}function fl(T,N){var j=this.__data__;if(j instanceof Nt){var z=j.__data__;if(!un||z.length<n-1)return z.push([T,N]),this.size=++j.size,this;j=this.__data__=new dn(z)}return j.set(T,N),this.size=j.size,this}Hr.prototype.clear=Po,Hr.prototype.delete=Wc,Hr.prototype.get=Hc,Hr.prototype.has=hl,Hr.prototype.set=fl;function Gc(T,N){var j=vr(T),z=!j&&vl(T),Se=!j&&!z&&ko(T),me=!j&&!z&&!Se&&Di(T),je=j||z||Se||me,Oe=je?Fn(T.length,String):[],at=Oe.length;for(var Ue in T)It.call(T,Ue)&&!(je&&(Ue=="length"||Se&&(Ue=="offset"||Ue=="parent")||me&&(Ue=="buffer"||Ue=="byteLength"||Ue=="byteOffset")||ah(Ue,at)))&&Oe.push(Ue);return Oe}function Pi(T,N){for(var j=T.length;j--;)if(yl(T[j][0],N))return j;return-1}function pl(T,N,j){var z=N(T);return vr(T)?z:it(z,j(T))}function Ni(T){return T==null?T===void 0?P:v:cn&&cn in Object(T)?vs(T):yr(T)}function ml(T){return Un(T)&&Ni(T)==a}function gl(T,N,j,z,Se){return T===N?!0:T==null||N==null||!Un(T)&&!Un(N)?T!==T&&N!==N:oh(T,N,j,z,gl,Se)}function oh(T,N,j,z,Se,me){var je=vr(T),Oe=vr(N),at=je?l:Kr(T),Ue=Oe?l:Kr(N);at=at==a?E:at,Ue=Ue==a?E:Ue;var tt=at==E,fn=Ue==E,kt=at==Ue;if(kt&&ko(T)){if(!ko(N))return!1;je=!0,tt=!1}if(kt&&!tt)return me||(me=new Hr),je||Di(T)?Js(T,N,j,z,Se,me):Kc(T,N,at,j,z,Se,me);if(!(j&s)){var At=tt&&It.call(T,"__wrapped__"),Ft=fn&&It.call(N,"__wrapped__");if(At||Ft){var Qr=At?T.value():T,sr=Ft?N.value():N;return me||(me=new Hr),Se(Qr,sr,j,z,me)}}return kt?(me||(me=new Hr),Ge(T,N,j,z,Se,me)):!1}function ys(T){if(!Yc(T)||ch(T))return!1;var N=wr(T)?ps:ve;return N.test(tn(T))}function gr(T){return Un(T)&&_l(T.length)&&!!_e[Ni(T)]}function No(T){if(!ki(T))return nr(T);var N=[];for(var j in Object(T))It.call(T,j)&&j!="constructor"&&N.push(j);return N}function Js(T,N,j,z,Se,me){var je=j&s,Oe=T.length,at=N.length;if(Oe!=at&&!(je&&at>Oe))return!1;var Ue=me.get(T);if(Ue&&me.get(N))return Ue==N;var tt=-1,fn=!0,kt=j&i?new zr:void 0;for(me.set(T,N),me.set(N,T);++tt<Oe;){var At=T[tt],Ft=N[tt];if(z)var Qr=je?z(Ft,At,tt,N,T,me):z(At,Ft,tt,T,N,me);if(Qr!==void 0){if(Qr)continue;fn=!1;break}if(kt){if(!Tt(N,function(sr,Zs){if(!en(kt,Zs)&&(At===sr||Se(At,sr,j,z,me)))return kt.push(Zs)})){fn=!1;break}}else if(!(At===Ft||Se(At,Ft,j,z,me))){fn=!1;break}}return me.delete(T),me.delete(N),fn}function Kc(T,N,j,z,Se,me,je){switch(j){case V:if(T.byteLength!=N.byteLength||T.byteOffset!=N.byteOffset)return!1;T=T.buffer,N=N.buffer;case M:return!(T.byteLength!=N.byteLength||!me(new Io(T),new Io(N)));case u:case d:case w:return yl(+T,+N);case f:return T.name==N.name&&T.message==N.message;case R:case I:return T==N+"";case m:var Oe=Gs;case O:var at=z&s;if(Oe||(Oe=ln),T.size!=N.size&&!at)return!1;var Ue=je.get(T);if(Ue)return Ue==N;z|=i,je.set(T,N);var tt=Js(Oe(T),Oe(N),z,Se,me,je);return je.delete(T),tt;case A:if(al)return al.call(T)==al.call(N)}return!1}function Ge(T,N,j,z,Se,me){var je=j&s,Oe=Gr(T),at=Oe.length,Ue=Gr(N),tt=Ue.length;if(at!=tt&&!je)return!1;for(var fn=at;fn--;){var kt=Oe[fn];if(!(je?kt in N:It.call(N,kt)))return!1}var At=me.get(T);if(At&&me.get(N))return At==N;var Ft=!0;me.set(T,N),me.set(N,T);for(var Qr=je;++fn<at;){kt=Oe[fn];var sr=T[kt],Zs=N[kt];if(z)var El=je?z(Zs,sr,kt,N,T,me):z(sr,Zs,kt,T,N,me);if(!(El===void 0?sr===Zs||Se(sr,Zs,j,z,me):El)){Ft=!1;break}Qr||(Qr=kt=="constructor")}if(Ft&&!Qr){var Xc=T.constructor,xl=N.constructor;Xc!=xl&&"constructor"in T&&"constructor"in N&&!(typeof Xc=="function"&&Xc instanceof Xc&&typeof xl=="function"&&xl instanceof xl)&&(Ft=!1)}return me.delete(T),me.delete(N),Ft}function Gr(T){return pl(T,Do,Qc)}function hn(T,N){var j=T.__data__;return lh(N)?j[typeof N=="string"?"string":"hash"]:j.map}function Bn(T,N){var j=Zn(T,N);return ys(j)?j:void 0}function vs(T){var N=It.call(T,cn),j=T[cn];try{T[cn]=void 0;var z=!0}catch{}var Se=er.call(T);return z&&(N?T[cn]=j:delete T[cn]),Se}var Qc=ms?function(T){return T==null?[]:(T=Object(T),We(ms(T),function(N){return Ys.call(T,N)}))}:Oi,Kr=Ni;(Ur&&Kr(new Ur(new ArrayBuffer(1)))!=V||un&&Kr(new un)!=m||gs&&Kr(gs.resolve())!=b||$r&&Kr(new $r)!=O||Ao&&Kr(new Ao)!=D)&&(Kr=function(T){var N=Ni(T),j=N==E?T.constructor:void 0,z=j?tn(j):"";if(z)switch(z){case ol:return V;case ot:return m;case jc:return b;case Ci:return O;case Ri:return D}return N});function ah(T,N){return N=N??o,!!N&&(typeof T=="number"||De.test(T))&&T>-1&&T%1==0&&T<N}function lh(T){var N=typeof T;return N=="string"||N=="number"||N=="symbol"||N=="boolean"?T!=="__proto__":T===null}function ch(T){return!!Ks&&Ks in T}function ki(T){var N=T&&T.constructor,j=typeof N=="function"&&N.prototype||et;return T===j}function yr(T){return er.call(T)}function tn(T){if(T!=null){try{return Fr.call(T)}catch{}try{return T+""}catch{}}return""}function yl(T,N){return T===N||T!==T&&N!==N}var vl=ml(function(){return arguments}())?ml:function(T){return Un(T)&&It.call(T,"callee")&&!Ys.call(T,"callee")},vr=Array.isArray;function wl(T){return T!=null&&_l(T.length)&&!wr(T)}var ko=tr||Li;function uh(T,N){return gl(T,N)}function wr(T){if(!Yc(T))return!1;var N=Ni(T);return N==p||N==g||N==c||N==C}function _l(T){return typeof T=="number"&&T>-1&&T%1==0&&T<=o}function Yc(T){var N=typeof T;return T!=null&&(N=="object"||N=="function")}function Un(T){return T!=null&&typeof T=="object"}var Di=Ce?jt(Ce):gr;function Do(T){return wl(T)?Gc(T):No(T)}function Oi(){return[]}function Li(){return!1}t.exports=uh})(lv,lv.exports);var b3=lv.exports,XS={};Object.defineProperty(XS,"__esModule",{value:!0});const hue=x3,fue=b3;var $E;(function(t){function e(i={},o={},a=!1){typeof i!="object"&&(i={}),typeof o!="object"&&(o={});let l=hue(o);a||(l=Object.keys(l).reduce((c,u)=>(l[u]!=null&&(c[u]=l[u]),c),{}));for(const c in i)i[c]!==void 0&&o[c]===void 0&&(l[c]=i[c]);return Object.keys(l).length>0?l:void 0}t.compose=e;function n(i={},o={}){typeof i!="object"&&(i={}),typeof o!="object"&&(o={});const a=Object.keys(i).concat(Object.keys(o)).reduce((l,c)=>(fue(i[c],o[c])||(l[c]=o[c]===void 0?null:o[c]),l),{});return Object.keys(a).length>0?a:void 0}t.diff=n;function r(i={},o={}){i=i||{};const a=Object.keys(o).reduce((l,c)=>(o[c]!==i[c]&&i[c]!==void 0&&(l[c]=o[c]),l),{});return Object.keys(i).reduce((l,c)=>(i[c]!==o[c]&&o[c]===void 0&&(l[c]=null),l),a)}t.invert=r;function s(i,o,a=!1){if(typeof i!="object")return o;if(typeof o!="object")return;if(!a)return o;const l=Object.keys(o).reduce((c,u)=>(i[u]===void 0&&(c[u]=o[u]),c),{});return Object.keys(l).length>0?l:void 0}t.transform=s})($E||($E={}));XS.default=$E;var k0={};Object.defineProperty(k0,"__esModule",{value:!0});var qE;(function(t){function e(n){return typeof n.delete=="number"?n.delete:typeof n.retain=="number"?n.retain:typeof n.retain=="object"&&n.retain!==null?1:typeof n.insert=="string"?n.insert.length:1}t.length=e})(qE||(qE={}));k0.default=qE;var JS={};Object.defineProperty(JS,"__esModule",{value:!0});const pk=k0;class pue{constructor(e){this.ops=e,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(e){e||(e=1/0);const n=this.ops[this.index];if(n){const r=this.offset,s=pk.default.length(n);if(e>=s-r?(e=s-r,this.index+=1,this.offset=0):this.offset+=e,typeof n.delete=="number")return{delete:e};{const i={};return n.attributes&&(i.attributes=n.attributes),typeof n.retain=="number"?i.retain=e:typeof n.retain=="object"&&n.retain!==null?i.retain=n.retain:typeof n.insert=="string"?i.insert=n.insert.substr(r,e):i.insert=n.insert,i}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?pk.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const e=this.ops[this.index];return e?typeof e.delete=="number"?"delete":typeof e.retain=="number"||typeof e.retain=="object"&&e.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const e=this.offset,n=this.index,r=this.next(),s=this.ops.slice(this.index);return this.offset=e,this.index=n,[r].concat(s)}}else return[]}}JS.default=pue;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const n=due,r=x3,s=b3,i=XS;e.AttributeMap=i.default;const o=k0;e.Op=o.default;const a=JS;e.OpIterator=a.default;const l="\0",c=(d,f)=>{if(typeof d!="object"||d===null)throw new Error(`cannot retain a ${typeof d}`);if(typeof f!="object"||f===null)throw new Error(`cannot retain a ${typeof f}`);const p=Object.keys(d)[0];if(!p||p!==Object.keys(f)[0])throw new Error(`embed types not matched: ${p} != ${Object.keys(f)[0]}`);return[p,d[p],f[p]]};class u{constructor(f){Array.isArray(f)?this.ops=f:f!=null&&Array.isArray(f.ops)?this.ops=f.ops:this.ops=[]}static registerEmbed(f,p){this.handlers[f]=p}static unregisterEmbed(f){delete this.handlers[f]}static getHandler(f){const p=this.handlers[f];if(!p)throw new Error(`no handlers for embed type "${f}"`);return p}insert(f,p){const g={};return typeof f=="string"&&f.length===0?this:(g.insert=f,p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(g.attributes=p),this.push(g))}delete(f){return f<=0?this:this.push({delete:f})}retain(f,p){if(typeof f=="number"&&f<=0)return this;const g={retain:f};return p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(g.attributes=p),this.push(g)}push(f){let p=this.ops.length,g=this.ops[p-1];if(f=r(f),typeof g=="object"){if(typeof f.delete=="number"&&typeof g.delete=="number")return this.ops[p-1]={delete:g.delete+f.delete},this;if(typeof g.delete=="number"&&f.insert!=null&&(p-=1,g=this.ops[p-1],typeof g!="object"))return this.ops.unshift(f),this;if(s(f.attributes,g.attributes)){if(typeof f.insert=="string"&&typeof g.insert=="string")return this.ops[p-1]={insert:g.insert+f.insert},typeof f.attributes=="object"&&(this.ops[p-1].attributes=f.attributes),this;if(typeof f.retain=="number"&&typeof g.retain=="number")return this.ops[p-1]={retain:g.retain+f.retain},typeof f.attributes=="object"&&(this.ops[p-1].attributes=f.attributes),this}}return p===this.ops.length?this.ops.push(f):this.ops.splice(p,0,f),this}chop(){const f=this.ops[this.ops.length-1];return f&&typeof f.retain=="number"&&!f.attributes&&this.ops.pop(),this}filter(f){return this.ops.filter(f)}forEach(f){this.ops.forEach(f)}map(f){return this.ops.map(f)}partition(f){const p=[],g=[];return this.forEach(m=>{(f(m)?p:g).push(m)}),[p,g]}reduce(f,p){return this.ops.reduce(f,p)}changeLength(){return this.reduce((f,p)=>p.insert?f+o.default.length(p):p.delete?f-p.delete:f,0)}length(){return this.reduce((f,p)=>f+o.default.length(p),0)}slice(f=0,p=1/0){const g=[],m=new a.default(this.ops);let w=0;for(;w<p&&m.hasNext();){let v;w<f?v=m.next(f-w):(v=m.next(p-w),g.push(v)),w+=o.default.length(v)}return new u(g)}compose(f){const p=new a.default(this.ops),g=new a.default(f.ops),m=[],w=g.peek();if(w!=null&&typeof w.retain=="number"&&w.attributes==null){let E=w.retain;for(;p.peekType()==="insert"&&p.peekLength()<=E;)E-=p.peekLength(),m.push(p.next());w.retain-E>0&&g.next(w.retain-E)}const v=new u(m);for(;p.hasNext()||g.hasNext();)if(g.peekType()==="insert")v.push(g.next());else if(p.peekType()==="delete")v.push(p.next());else{const E=Math.min(p.peekLength(),g.peekLength()),b=p.next(E),C=g.next(E);if(C.retain){const R={};if(typeof b.retain=="number")R.retain=typeof C.retain=="number"?E:C.retain;else if(typeof C.retain=="number")b.retain==null?R.insert=b.insert:R.retain=b.retain;else{const I=b.retain==null?"insert":"retain",[A,P,D]=c(b[I],C.retain),M=u.getHandler(A);R[I]={[A]:M.compose(P,D,I==="retain")}}const O=i.default.compose(b.attributes,C.attributes,typeof b.retain=="number");if(O&&(R.attributes=O),v.push(R),!g.hasNext()&&s(v.ops[v.ops.length-1],R)){const I=new u(p.rest());return v.concat(I).chop()}}else typeof C.delete=="number"&&(typeof b.retain=="number"||typeof b.retain=="object"&&b.retain!==null)&&v.push(C)}return v.chop()}concat(f){const p=new u(this.ops.slice());return f.ops.length>0&&(p.push(f.ops[0]),p.ops=p.ops.concat(f.ops.slice(1))),p}diff(f,p){if(this.ops===f.ops)return new u;const g=[this,f].map(b=>b.map(C=>{if(C.insert!=null)return typeof C.insert=="string"?C.insert:l;const R=b===f?"on":"with";throw new Error("diff() called "+R+" non-document")}).join("")),m=new u,w=n(g[0],g[1],p,!0),v=new a.default(this.ops),E=new a.default(f.ops);return w.forEach(b=>{let C=b[1].length;for(;C>0;){let R=0;switch(b[0]){case n.INSERT:R=Math.min(E.peekLength(),C),m.push(E.next(R));break;case n.DELETE:R=Math.min(C,v.peekLength()),v.next(R),m.delete(R);break;case n.EQUAL:R=Math.min(v.peekLength(),E.peekLength(),C);const O=v.next(R),I=E.next(R);s(O.insert,I.insert)?m.retain(R,i.default.diff(O.attributes,I.attributes)):m.push(I).delete(R);break}C-=R}}),m.chop()}eachLine(f,p=`
`){const g=new a.default(this.ops);let m=new u,w=0;for(;g.hasNext();){if(g.peekType()!=="insert")return;const v=g.peek(),E=o.default.length(v)-g.peekLength(),b=typeof v.insert=="string"?v.insert.indexOf(p,E)-E:-1;if(b<0)m.push(g.next());else if(b>0)m.push(g.next(b));else{if(f(m,g.next(1).attributes||{},w)===!1)return;w+=1,m=new u}}m.length()>0&&f(m,{},w)}invert(f){const p=new u;return this.reduce((g,m)=>{if(m.insert)p.delete(o.default.length(m));else{if(typeof m.retain=="number"&&m.attributes==null)return p.retain(m.retain),g+m.retain;if(m.delete||typeof m.retain=="number"){const w=m.delete||m.retain;return f.slice(g,g+w).forEach(E=>{m.delete?p.push(E):m.retain&&m.attributes&&p.retain(o.default.length(E),i.default.invert(m.attributes,E.attributes))}),g+w}else if(typeof m.retain=="object"&&m.retain!==null){const w=f.slice(g,g+1),v=new a.default(w.ops).next(),[E,b,C]=c(m.retain,v.insert),R=u.getHandler(E);return p.retain({[E]:R.invert(b,C)},i.default.invert(m.attributes,v.attributes)),g+1}}return g},0),p.chop()}transform(f,p=!1){if(p=!!p,typeof f=="number")return this.transformPosition(f,p);const g=f,m=new a.default(this.ops),w=new a.default(g.ops),v=new u;for(;m.hasNext()||w.hasNext();)if(m.peekType()==="insert"&&(p||w.peekType()!=="insert"))v.retain(o.default.length(m.next()));else if(w.peekType()==="insert")v.push(w.next());else{const E=Math.min(m.peekLength(),w.peekLength()),b=m.next(E),C=w.next(E);if(b.delete)continue;if(C.delete)v.push(C);else{const R=b.retain,O=C.retain;let I=typeof O=="object"&&O!==null?O:E;if(typeof R=="object"&&R!==null&&typeof O=="object"&&O!==null){const A=Object.keys(R)[0];if(A===Object.keys(O)[0]){const P=u.getHandler(A);P&&(I={[A]:P.transform(R[A],O[A],p)})}}v.retain(I,i.default.transform(b.attributes,C.attributes,p))}}return v.chop()}transformPosition(f,p=!1){p=!!p;const g=new a.default(this.ops);let m=0;for(;g.hasNext()&&m<=f;){const w=g.peekLength(),v=g.peekType();if(g.next(),v==="delete"){f-=Math.min(w,f-m);continue}else v==="insert"&&(m<f||!p)&&(f+=w);m+=w}return f}}u.Op=o.default,u.OpIterator=a.default,u.AttributeMap=i.default,u.handlers={},e.default=u,t.exports=u,t.exports.default=u})(UE,UE.exports);var as=UE.exports;const fe=Np(as);class Ws extends Mr{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Ws.blotName="break";Ws.tagName="BR";let Fs=class extends ov{};const mue={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function D0(t){return t.replace(/[&<>"']/g,e=>mue[e])}const ni=class ni extends GS{static compare(e,n){const r=ni.order.indexOf(e),s=ni.order.indexOf(n);return r>=0||s>=0?r-s:e===n?0:e<n?-1:1}formatAt(e,n,r,s){if(ni.compare(this.statics.blotName,r)<0&&this.scroll.query(r,pe.BLOT)){const i=this.isolate(e,n);s&&i.wrap(r,s)}else super.formatAt(e,n,r,s)}optimize(e){if(super.optimize(e),this.parent instanceof ni&&ni.compare(this.statics.blotName,this.parent.statics.blotName)>0){const n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}};ie(ni,"allowedChildren",[ni,Ws,Mr,Fs]),ie(ni,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let xi=ni;const mk=1;class En extends xp{constructor(){super(...arguments);ie(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=T3(this)),this.cache.delta}deleteAt(n,r){super.deleteAt(n,r),this.cache={}}formatAt(n,r,s,i){r<=0||(this.scroll.query(s,pe.BLOCK)?n+r===this.length()&&this.format(s,i):super.formatAt(n,Math.min(r,this.length()-n-1),s,i),this.cache={})}insertAt(n,r,s){if(s!=null){super.insertAt(n,r,s),this.cache={};return}if(r.length===0)return;const i=r.split(`
`),o=i.shift();o.length>0&&(n<this.length()-1||this.children.tail==null?super.insertAt(Math.min(n,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});let a=this;i.reduce((l,c)=>(a=a.split(l,!0),a.insertAt(0,c),c.length),n+o.length)}insertBefore(n,r){const{head:s}=this.children;super.insertBefore(n,r),s instanceof Ws&&s.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+mk),this.cache.length}moveChildren(n,r){super.moveChildren(n,r),this.cache={}}optimize(n){super.optimize(n),this.cache={}}path(n){return super.path(n,!0)}removeChild(n){super.removeChild(n),this.cache={}}split(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r&&(n===0||n>=this.length()-mk)){const i=this.clone();return n===0?(this.parent.insertBefore(i,this),this):(this.parent.insertBefore(i,this.next),i)}const s=super.split(n,r);return this.cache={},s}}En.blotName="block";En.tagName="P";En.defaultChild=Ws;En.allowedChildren=[Ws,xi,Mr,Fs];class rs extends Mr{attach(){super.attach(),this.attributes=new C0(this.domNode)}delta(){return new fe().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,n){const r=this.scroll.query(e,pe.BLOCK_ATTRIBUTE);r!=null&&this.attributes.attribute(r,n)}formatAt(e,n,r,s){this.format(r,s)}insertAt(e,n,r){if(r!=null){super.insertAt(e,n,r);return}const s=n.split(`
`),i=s.pop(),o=s.map(l=>{const c=this.scroll.create(En.blotName);return c.insertAt(0,l),c}),a=this.split(e);o.forEach(l=>{this.parent.insertBefore(l,a)}),i&&this.parent.insertBefore(this.scroll.create("text",i),a)}}rs.scope=pe.BLOCK_BLOT;function T3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.descendants(Dn).reduce((n,r)=>r.length()===0?n:n.insert(r.value(),ts(r,{},e)),new fe).insert(`
`,ts(t))}function ts(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return t==null||("formats"in t&&typeof t.formats=="function"&&(e={...e,...t.formats()},n&&delete e["code-token"]),t.parent==null||t.parent.statics.blotName==="scroll"||t.parent.statics.scope!==t.statics.scope)?e:ts(t.parent,e,n)}const Jr=class Jr extends Mr{static value(){}constructor(e,n,r){super(e,n),this.selection=r,this.textNode=document.createTextNode(Jr.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,n){if(this.savedLength!==0){super.format(e,n);return}let r=this,s=0;for(;r!=null&&r.statics.scope!==pe.BLOCK_BLOT;)s+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=Jr.CONTENTS.length,r.optimize(),r.formatAt(s,Jr.CONTENTS.length,e,n),this.savedLength=0)}index(e,n){return e===this.textNode?0:super.index(e,n)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const n=this.prev instanceof Fs?this.prev:null,r=n?n.length():0,s=this.next instanceof Fs?this.next:null,i=s?s.text:"",{textNode:o}=this,a=o.data.split(Jr.CONTENTS).join("");o.data=Jr.CONTENTS;let l;if(n)l=n,(a||s)&&(n.insertAt(n.length(),a+i),s&&s.remove());else if(s)l=s,s.insertAt(0,a);else{const c=document.createTextNode(a);l=this.scroll.create(c),this.parent.insertBefore(l,this)}if(this.remove(),e){const c=(f,p)=>n&&f===n.domNode?p:f===o?r+p-1:s&&f===s.domNode?r+a.length+p:null,u=c(e.start.node,e.start.offset),d=c(e.end.node,e.end.offset);if(u!==null&&d!==null)return{startNode:l.domNode,startOffset:u,endNode:l.domNode,endOffset:d}}return null}update(e,n){if(e.some(r=>r.type==="characterData"&&r.target===this.textNode)){const r=this.restore();r&&(n.range=r)}}optimize(e){super.optimize(e);let{parent:n}=this;for(;n;){if(n.domNode.tagName==="A"){this.savedLength=Jr.CONTENTS.length,n.isolate(this.offset(n),this.length()).unwrap(),this.savedLength=0;break}n=n.parent}}value(){return""}};ie(Jr,"blotName","cursor"),ie(Jr,"className","ql-cursor"),ie(Jr,"tagName","span"),ie(Jr,"CONTENTS","\uFEFF");let Nd=Jr;var S3={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function i(l,c,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new s(u,d||l,f),g=n?n+c:c;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],p]:l._events[g].push(p):(l._events[g]=p,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,p=d.length,g=new Array(p);f<p;f++)g[f]=d[f].fn;return g},a.prototype.listenerCount=function(c){var u=n?n+c:c,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(c,u,d,f,p,g){var m=n?n+c:c;if(!this._events[m])return!1;var w=this._events[m],v=arguments.length,E,b;if(w.fn){switch(w.once&&this.removeListener(c,w.fn,void 0,!0),v){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,d),!0;case 4:return w.fn.call(w.context,u,d,f),!0;case 5:return w.fn.call(w.context,u,d,f,p),!0;case 6:return w.fn.call(w.context,u,d,f,p,g),!0}for(b=1,E=new Array(v-1);b<v;b++)E[b-1]=arguments[b];w.fn.apply(w.context,E)}else{var C=w.length,R;for(b=0;b<C;b++)switch(w[b].once&&this.removeListener(c,w[b].fn,void 0,!0),v){case 1:w[b].fn.call(w[b].context);break;case 2:w[b].fn.call(w[b].context,u);break;case 3:w[b].fn.call(w[b].context,u,d);break;case 4:w[b].fn.call(w[b].context,u,d,f);break;default:if(!E)for(R=1,E=new Array(v-1);R<v;R++)E[R-1]=arguments[R];w[b].fn.apply(w[b].context,E)}}return!0},a.prototype.on=function(c,u,d){return i(this,c,u,d,!1)},a.prototype.once=function(c,u,d){return i(this,c,u,d,!0)},a.prototype.removeListener=function(c,u,d,f){var p=n?n+c:c;if(!this._events[p])return this;if(!u)return o(this,p),this;var g=this._events[p];if(g.fn)g.fn===u&&(!f||g.once)&&(!d||g.context===d)&&o(this,p);else{for(var m=0,w=[],v=g.length;m<v;m++)(g[m].fn!==u||f&&!g[m].once||d&&g[m].context!==d)&&w.push(g[m]);w.length?this._events[p]=w.length===1?w[0]:w:o(this,p)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(S3);var gue=S3.exports;const yue=Np(gue),zE=new WeakMap,WE=["error","warn","log","info"];let HE="warn";function I3(t){if(HE&&WE.indexOf(t)<=WE.indexOf(HE)){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];console[t](...n)}}function To(t){return WE.reduce((e,n)=>(e[n]=I3.bind(console,n,t),e),{})}To.level=t=>{HE=t};I3.level=To.level;const d_=To("quill:events"),vue=["selectionchange","mousedown","mouseup","click"];vue.forEach(t=>{document.addEventListener(t,function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];Array.from(document.querySelectorAll(".ql-container")).forEach(s=>{const i=zE.get(s);i&&i.emitter&&i.emitter.handleDOM(...n)})})});class ce extends yue{constructor(){super(),this.domListeners={},this.on("error",d_.error)}emit(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return d_.log.call(d_,...n),super.emit(...n)}handleDOM(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];(this.domListeners[e.type]||[]).forEach(i=>{let{node:o,handler:a}=i;(e.target===o||o.contains(e.target))&&a(e,...r)})}listenDOM(e,n,r){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:n,handler:r})}}ie(ce,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),ie(ce,"sources",{API:"api",SILENT:"silent",USER:"user"});const h_=To("quill:selection");class yc{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=n}}class wue{constructor(e,n){this.emitter=n,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new yc(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,ce.sources.USER),1)}),this.emitter.on(ce.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const r=this.getNativeRange();r!=null&&r.start.node!==this.cursor.textNode&&this.emitter.once(ce.events.SCROLL_UPDATE,(s,i)=>{try{this.root.contains(r.start.node)&&this.root.contains(r.end.node)&&this.setNativeRange(r.start.node,r.start.offset,r.end.node,r.end.offset);const o=i.some(a=>a.type==="characterData"||a.type==="childList"||a.type==="attributes"&&a.target===this.root);this.update(o?ce.sources.SILENT:s)}catch{}})}),this.emitter.on(ce.events.SCROLL_OPTIMIZE,(r,s)=>{if(s.range){const{startNode:i,startOffset:o,endNode:a,endOffset:l}=s.range;this.setNativeRange(i,o,a,l),this.update(ce.sources.SILENT)}}),this.update(ce.sources.SILENT)}handleComposition(){this.emitter.on(ce.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(ce.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(ce.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,n){this.scroll.update();const r=this.getNativeRange();if(!(r==null||!r.native.collapsed||this.scroll.query(e,pe.BLOCK))){if(r.start.node!==this.cursor.textNode){const s=this.scroll.find(r.start.node,!1);if(s==null)return;if(s instanceof Dn){const i=s.split(r.start.offset);s.parent.insertBefore(this.cursor,i)}else s.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,n),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=this.scroll.length();e=Math.min(e,r-1),n=Math.min(e+n,r-1)-e;let s,[i,o]=this.scroll.leaf(e);if(i==null)return null;if(n>0&&o===i.length()){const[u]=this.scroll.leaf(e+1);if(u){const[d]=this.scroll.line(e),[f]=this.scroll.line(e+1);d===f&&(i=u,o=0)}}[s,o]=i.position(o,!0);const a=document.createRange();if(n>0)return a.setStart(s,o),[i,o]=this.scroll.leaf(e+n),i==null?null:([s,o]=i.position(o,!0),a.setEnd(s,o),a.getBoundingClientRect());let l="left",c;if(s instanceof Text){if(!s.data.length)return null;o<s.data.length?(a.setStart(s,o),a.setEnd(s,o+1)):(a.setStart(s,o-1),a.setEnd(s,o),l="right"),c=a.getBoundingClientRect()}else{if(!(i.domNode instanceof Element))return null;c=i.domNode.getBoundingClientRect(),o>0&&(l="right")}return{bottom:c.top+c.height,height:c.height,left:c[l],right:c[l],top:c.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const n=e.getRangeAt(0);if(n==null)return null;const r=this.normalizeNative(n);return h_.info("getNativeRange",r),r}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const n=this.getNativeRange();return n==null?[null,null]:[this.normalizedToRange(n),n]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&f_(this.root,document.activeElement)}normalizedToRange(e){const n=[[e.start.node,e.start.offset]];e.native.collapsed||n.push([e.end.node,e.end.offset]);const r=n.map(o=>{const[a,l]=o,c=this.scroll.find(a,!0),u=c.offset(this.scroll);return l===0?u:c instanceof Dn?u+c.index(a,l):u+c.length()}),s=Math.min(Math.max(...r),this.scroll.length()-1),i=Math.min(s,...r);return new yc(i,s-i)}normalizeNative(e){if(!f_(this.root,e.startContainer)||!e.collapsed&&!f_(this.root,e.endContainer))return null;const n={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[n.start,n.end].forEach(r=>{let{node:s,offset:i}=r;for(;!(s instanceof Text)&&s.childNodes.length>0;)if(s.childNodes.length>i)s=s.childNodes[i],i=0;else if(s.childNodes.length===i)s=s.lastChild,s instanceof Text?i=s.data.length:s.childNodes.length>0?i=s.childNodes.length:i=s.childNodes.length+1;else break;r.node=s,r.offset=i}),n}rangeToNative(e){const n=this.scroll.length(),r=(s,i)=>{s=Math.min(n-1,s);const[o,a]=this.scroll.leaf(s);return o?o.position(a,i):[null,-1]};return[...r(e.index,!1),...r(e.index+e.length,!0)]}setNativeRange(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(h_.info("setNativeRange",e,n,r,s),e!=null&&(this.root.parentNode==null||e.parentNode==null||r.parentNode==null))return;const o=document.getSelection();if(o!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:a}=this.getNativeRange()||{};if(a==null||i||e!==a.startContainer||n!==a.startOffset||r!==a.endContainer||s!==a.endOffset){e instanceof Element&&e.tagName==="BR"&&(n=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),r instanceof Element&&r.tagName==="BR"&&(s=Array.from(r.parentNode.childNodes).indexOf(r),r=r.parentNode);const l=document.createRange();l.setStart(e,n),l.setEnd(r,s),o.removeAllRanges(),o.addRange(l)}}else o.removeAllRanges(),this.root.blur()}setRange(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ce.sources.API;if(typeof n=="string"&&(r=n,n=!1),h_.info("setRange",e),e!=null){const s=this.rangeToNative(e);this.setNativeRange(...s,n)}else this.setNativeRange(null);this.update(r)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ce.sources.USER;const n=this.lastRange,[r,s]=this.getRange();if(this.lastRange=r,this.lastNative=s,this.lastRange!=null&&(this.savedRange=this.lastRange),!HS(n,this.lastRange)){if(!this.composing&&s!=null&&s.native.collapsed&&s.start.node!==this.cursor.textNode){const o=this.cursor.restore();o&&this.setNativeRange(o.startNode,o.startOffset,o.endNode,o.endOffset)}const i=[ce.events.SELECTION_CHANGE,Zu(this.lastRange),Zu(n),e];this.emitter.emit(ce.events.EDITOR_CHANGE,...i),e!==ce.sources.SILENT&&this.emitter.emit(...i)}}}function f_(t,e){try{e.parentNode}catch{return!1}return t.contains(e)}const _ue=/^[ -~]*$/;let Eue=class{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let n=this.scroll.length();this.scroll.batchStart();const r=gk(e),s=new fe;return bue(r.ops.slice()).reduce((o,a)=>{const l=as.Op.length(a);let c=a.attributes||{},u=!1,d=!1;if(a.insert!=null){if(s.retain(l),typeof a.insert=="string"){const g=a.insert;d=!g.endsWith(`
`)&&(n<=o||!!this.scroll.descendant(rs,o)[0]),this.scroll.insertAt(o,g);const[m,w]=this.scroll.line(o);let v=xa({},ts(m));if(m instanceof En){const[E]=m.descendant(Dn,w);E&&(v=xa(v,ts(E)))}c=as.AttributeMap.diff(v,c)||{}}else if(typeof a.insert=="object"){const g=Object.keys(a.insert)[0];if(g==null)return o;const m=this.scroll.query(g,pe.INLINE)!=null;if(m)(n<=o||this.scroll.descendant(rs,o)[0])&&(d=!0);else if(o>0){const[w,v]=this.scroll.descendant(Dn,o-1);w instanceof Fs?w.value()[v]!==`
`&&(u=!0):w instanceof Mr&&w.statics.scope===pe.INLINE_BLOT&&(u=!0)}if(this.scroll.insertAt(o,g,a.insert[g]),m){const[w]=this.scroll.descendant(Dn,o);if(w){const v=xa({},ts(w));c=as.AttributeMap.diff(v,c)||{}}}}n+=l}else if(s.push(a),a.retain!==null&&typeof a.retain=="object"){const g=Object.keys(a.retain)[0];if(g==null)return o;this.scroll.updateEmbedAt(o,g,a.retain[g])}Object.keys(c).forEach(g=>{this.scroll.formatAt(o,l,g,c[g])});const f=u?1:0,p=d?1:0;return n+=f+p,s.retain(f),s.delete(p),o+l+f+p},0),s.reduce((o,a)=>typeof a.delete=="number"?(this.scroll.deleteAt(o,a.delete),o):o+as.Op.length(a),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}deleteText(e,n){return this.scroll.deleteAt(e,n),this.update(new fe().retain(e).delete(n))}formatLine(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach(i=>{this.scroll.lines(e,Math.max(n,1)).forEach(o=>{o.format(i,r[i])})}),this.scroll.optimize();const s=new fe().retain(e).retain(n,Zu(r));return this.update(s)}formatText(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(r).forEach(i=>{this.scroll.formatAt(e,n,i,r[i])});const s=new fe().retain(e).retain(n,Zu(r));return this.update(s)}getContents(e,n){return this.delta.slice(e,e+n)}getDelta(){return this.scroll.lines().reduce((e,n)=>e.concat(n.delta()),new fe)}getFormat(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],s=[];n===0?this.scroll.path(e).forEach(a=>{const[l]=a;l instanceof En?r.push(l):l instanceof Dn&&s.push(l)}):(r=this.scroll.lines(e,n),s=this.scroll.descendants(Dn,e,n));const[i,o]=[r,s].map(a=>{const l=a.shift();if(l==null)return{};let c=ts(l);for(;Object.keys(c).length>0;){const u=a.shift();if(u==null)return c;c=xue(ts(u),c)}return c});return{...i,...o}}getHTML(e,n){const[r,s]=this.scroll.line(e);if(r){const i=r.length();return r.length()>=s+n&&!(s===0&&n===i)?Tp(r,s,n,!0):Tp(this.scroll,e,n,!0)}return""}getText(e,n){return this.getContents(e,n).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}insertContents(e,n){const r=gk(n),s=new fe().retain(e).concat(r);return this.scroll.insertContents(e,r),this.update(s)}insertEmbed(e,n,r){return this.scroll.insertAt(e,n,r),this.update(new fe().retain(e).insert({[n]:r}))}insertText(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,n),Object.keys(r).forEach(s=>{this.scroll.formatAt(e,n.length,s,r[s])}),this.update(new fe().retain(e).insert(n,Zu(r)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if((e==null?void 0:e.statics.blotName)!==En.blotName)return!1;const n=e;return n.children.length>1?!1:n.children.head instanceof Ws}removeFormat(e,n){const r=this.getText(e,n),[s,i]=this.scroll.line(e+n);let o=0,a=new fe;s!=null&&(o=s.length()-i,a=s.delta().slice(i,i+o-1).insert(`
`));const c=this.getContents(e,n+o).diff(new fe().insert(r).concat(a)),u=new fe().retain(e).concat(c);return this.applyDelta(u)}update(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const s=this.delta;if(n.length===1&&n[0].type==="characterData"&&n[0].target.data.match(_ue)&&this.scroll.find(n[0].target)){const i=this.scroll.find(n[0].target),o=ts(i),a=i.offset(this.scroll),l=n[0].oldValue.replace(Nd.CONTENTS,""),c=new fe().insert(l),u=new fe().insert(i.value()),d=r&&{oldRange:yk(r.oldRange,-a),newRange:yk(r.newRange,-a)};e=new fe().retain(a).concat(c.diff(u,d)).reduce((p,g)=>g.insert?p.insert(g.insert,o):p.push(g),new fe),this.delta=s.compose(e)}else this.delta=this.getDelta(),(!e||!HS(s.compose(e),this.delta))&&(e=s.diff(this.delta,r));return e}};function _u(t,e,n){if(t.length===0){const[p]=p_(n.pop());return e<=0?`</li></${p}>`:`</li></${p}>${_u([],e-1,n)}`}const[{child:r,offset:s,length:i,indent:o,type:a},...l]=t,[c,u]=p_(a);if(o>e)return n.push(a),o===e+1?`<${c}><li${u}>${Tp(r,s,i)}${_u(l,o,n)}`:`<${c}><li>${_u(t,e+1,n)}`;const d=n[n.length-1];if(o===e&&a===d)return`</li><li${u}>${Tp(r,s,i)}${_u(l,o,n)}`;const[f]=p_(n.pop());return`</li></${f}>${_u(t,e-1,n)}`}function Tp(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in t&&typeof t.html=="function")return t.html(e,n);if(t instanceof Fs)return D0(t.value().slice(e,e+n)).replaceAll(" ","&nbsp;");if(t instanceof Ms){if(t.statics.blotName==="list-container"){const c=[];return t.children.forEachAt(e,n,(u,d,f)=>{const p="formats"in u&&typeof u.formats=="function"?u.formats():{};c.push({child:u,offset:d,length:f,indent:p.indent||0,type:p.list})}),_u(c,-1,[])}const s=[];if(t.children.forEachAt(e,n,(c,u,d)=>{s.push(Tp(c,u,d))}),r||t.statics.blotName==="list")return s.join("");const{outerHTML:i,innerHTML:o}=t.domNode,[a,l]=i.split(`>${o}<`);return a==="<table"?`<table style="border: 1px solid #000;">${s.join("")}<${l}`:`${a}>${s.join("")}<${l}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function xue(t,e){return Object.keys(e).reduce((n,r)=>{if(t[r]==null)return n;const s=e[r];return s===t[r]?n[r]=s:Array.isArray(s)?s.indexOf(t[r])<0?n[r]=s.concat([t[r]]):n[r]=s:n[r]=[s,t[r]],n},{})}function p_(t){const e=t==="ordered"?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function gk(t){return t.reduce((e,n)=>{if(typeof n.insert=="string"){const r=n.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(r,n.attributes)}return e.push(n)},new fe)}function yk(t,e){let{index:n,length:r}=t;return new yc(n+e,r)}function bue(t){const e=[];return t.forEach(n=>{typeof n.insert=="string"?n.insert.split(`
`).forEach((s,i)=>{i&&e.push({insert:`
`,attributes:n.attributes}),s&&e.push({insert:s,attributes:n.attributes})}):e.push(n)}),e}class Hs{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=n}}ie(Hs,"DEFAULTS",{});const ag="\uFEFF";class ZS extends Mr{constructor(e,n){super(e,n),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(r=>{this.contentNode.appendChild(r)}),this.leftGuard=document.createTextNode(ag),this.rightGuard=document.createTextNode(ag),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,n){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,n)}restore(e){let n=null,r;const s=e.data.split(ag).join("");if(e===this.leftGuard)if(this.prev instanceof Fs){const i=this.prev.length();this.prev.insertAt(i,s),n={startNode:this.prev.domNode,startOffset:i+s.length}}else r=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(r),this),n={startNode:r,startOffset:s.length};else e===this.rightGuard&&(this.next instanceof Fs?(this.next.insertAt(0,s),n={startNode:this.next.domNode,startOffset:s.length}):(r=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(r),this.next),n={startNode:r,startOffset:s.length}));return e.data=ag,n}update(e,n){e.forEach(r=>{if(r.type==="characterData"&&(r.target===this.leftGuard||r.target===this.rightGuard)){const s=this.restore(r.target);s&&(n.range=s)}})}}class Tue{constructor(e,n){ie(this,"isComposing",!1);this.scroll=e,this.emitter=n,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const n=e.target instanceof Node?this.scroll.find(e.target,!0):null;n&&!(n instanceof ZS)&&(this.emitter.emit(ce.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(ce.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(ce.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(ce.events.COMPOSITION_END,e),this.isComposing=!1}}const Tf=class Tf{constructor(e,n){ie(this,"modules",{});this.quill=e,this.options=n}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const n=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new n(this.quill,this.options.modules[e]||{}),this.modules[e]}};ie(Tf,"DEFAULTS",{modules:{}}),ie(Tf,"themes",{default:Tf});let kd=Tf;const Sue=t=>t.parentElement||t.getRootNode().host||null,Iue=t=>{const e=t.getBoundingClientRect(),n="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,r="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*n,bottom:e.top+t.clientHeight*r,left:e.left}},lg=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e},vk=(t,e,n,r,s,i)=>t<n&&e>r?0:t<n?-(n-t+s):e>r?e-t>r-n?t+s-n:e-r+i:0,Aue=(t,e)=>{var i,o,a;const n=t.ownerDocument;let r=e,s=t;for(;s;){const l=s===n.body,c=l?{top:0,right:((i=window.visualViewport)==null?void 0:i.width)??n.documentElement.clientWidth,bottom:((o=window.visualViewport)==null?void 0:o.height)??n.documentElement.clientHeight,left:0}:Iue(s),u=getComputedStyle(s),d=vk(r.left,r.right,c.left,c.right,lg(u.scrollPaddingLeft),lg(u.scrollPaddingRight)),f=vk(r.top,r.bottom,c.top,c.bottom,lg(u.scrollPaddingTop),lg(u.scrollPaddingBottom));if(d||f)if(l)(a=n.defaultView)==null||a.scrollBy(d,f);else{const{scrollLeft:p,scrollTop:g}=s;f&&(s.scrollTop+=f),d&&(s.scrollLeft+=d);const m=s.scrollLeft-p,w=s.scrollTop-g;r={left:r.left-m,top:r.top-w,right:r.right-m,bottom:r.bottom-w}}s=l||u.position==="fixed"?null:Sue(s)}},Cue=100,Rue=["block","break","cursor","inline","scroll","text"],Pue=(t,e,n)=>{const r=new Pd;return Rue.forEach(s=>{const i=e.query(s);i&&r.register(i)}),t.forEach(s=>{let i=e.query(s);i||n.error(`Cannot register "${s}" specified in "formats" config. Are you sure it was registered?`);let o=0;for(;i;)if(r.register(i),i="blotName"in i?i.requiredContainer??null:null,o+=1,o>Cue){n.error(`Cycle detected in registering blot requiredContainer: "${s}"`);break}}),r},td=To("quill"),cg=new Pd;Ms.uiClass="ql-ui";const Ts=class Ts{static debug(e){e===!0&&(e="log"),To.level(e)}static find(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return zE.get(e)||cg.find(e,n)}static import(e){return this.imports[e]==null&&td.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],n=!!(!(arguments.length<=1)&&arguments[1]),r="attrName"in e?e.attrName:e.blotName;typeof r=="string"?this.register(`formats/${r}`,e,n):Object.keys(e).forEach(s=>{this.register(s,e[s],n)})}else{const e=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],r=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!r&&td.warn(`Overwriting ${e} with`,n),this.imports[e]=n,(e.startsWith("blots/")||e.startsWith("formats/"))&&n&&typeof n!="boolean"&&n.blotName!=="abstract"&&cg.register(n),typeof n.register=="function"&&n.register(cg)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=Nue(e,n),this.container=this.options.container,this.container==null){td.error("Invalid Quill container",e);return}this.options.debug&&Ts.debug(this.options.debug);const r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",zE.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new ce;const s=KS.blotName,i=this.options.registry.query(s);if(!i||!("blotName"in i))throw new Error(`Cannot initialize Quill without "${s}" blot`);if(this.scroll=new i(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Eue(this.scroll),this.selection=new wue(this.scroll,this.emitter),this.composition=new Tue(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(ce.events.EDITOR_CHANGE,o=>{o===ce.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(ce.events.SCROLL_UPDATE,(o,a)=>{const l=this.selection.lastRange,[c]=this.selection.getRange(),u=l&&c?{oldRange:l,newRange:c}:void 0;Es.call(this,()=>this.editor.update(null,a,u),o)}),this.emitter.on(ce.events.SCROLL_EMBED_UPDATE,(o,a)=>{const l=this.selection.lastRange,[c]=this.selection.getRange(),u=l&&c?{oldRange:l,newRange:c}:void 0;Es.call(this,()=>{const d=new fe().retain(o.offset(this)).retain({[o.statics.blotName]:a});return this.editor.update(d,[],u)},Ts.sources.USER)}),r){const o=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(o)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const r=e;e=document.createElement("div"),e.classList.add(r)}return this.container.insertBefore(e,n),e}blur(){this.selection.setRange(null)}deleteText(e,n,r){return[e,n,,r]=Vi(e,n,r),Es.call(this,()=>this.editor.deleteText(e,n),r,e,-1*n)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const n=e();return this.allowReadOnlyEdits=!1,n}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ce.sources.API;return Es.call(this,()=>{const s=this.getSelection(!0);let i=new fe;if(s==null)return i;if(this.scroll.query(e,pe.BLOCK))i=this.editor.formatLine(s.index,s.length,{[e]:n});else{if(s.length===0)return this.selection.format(e,n),i;i=this.editor.formatText(s.index,s.length,{[e]:n})}return this.setSelection(s,ce.sources.SILENT),i},r)}formatLine(e,n,r,s,i){let o;return[e,n,o,i]=Vi(e,n,r,s,i),Es.call(this,()=>this.editor.formatLine(e,n,o),i,e,0)}formatText(e,n,r,s,i){let o;return[e,n,o,i]=Vi(e,n,r,s,i),Es.call(this,()=>this.editor.formatText(e,n,o),i,e,0)}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=null;if(typeof e=="number"?r=this.selection.getBounds(e,n):r=this.selection.getBounds(e.index,e.length),!r)return null;const s=this.container.getBoundingClientRect();return{bottom:r.bottom-s.top,height:r.height,left:r.left-s.left,right:r.right-s.left,top:r.top-s.top,width:r.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,n]=Vi(e,n),this.editor.getContents(e,n)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,n):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,n)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=Vi(e,n),this.editor.getHTML(e,n)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=Vi(e,n),this.editor.getText(e,n)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Ts.sources.API;return Es.call(this,()=>this.editor.insertEmbed(e,n,r),s,e)}insertText(e,n,r,s,i){let o;return[e,,o,i]=Vi(e,0,r,s,i),Es.call(this,()=>this.editor.insertText(e,n,o),i,e,n.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,n,r){return[e,n,,r]=Vi(e,n,r),Es.call(this,()=>this.editor.removeFormat(e,n),r,e)}scrollRectIntoView(e){Aue(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,n=e&&this.selection.getBounds(e.index,e.length);n&&this.scrollRectIntoView(n)}setContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ce.sources.API;return Es.call(this,()=>{e=new fe(e);const r=this.getLength(),s=this.editor.deleteText(0,r),i=this.editor.insertContents(0,e),o=this.editor.deleteText(this.getLength()-1,1);return s.compose(i).compose(o)},n)}setSelection(e,n,r){e==null?this.selection.setRange(null,n||Ts.sources.API):([e,n,,r]=Vi(e,n,r),this.selection.setRange(new yc(Math.max(0,e),n),r),r!==ce.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ce.sources.API;const r=new fe().insert(e);return this.setContents(r,n)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ce.sources.USER;const n=this.scroll.update(e);return this.selection.update(e),n}updateContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ce.sources.API;return Es.call(this,()=>(e=new fe(e),this.editor.applyDelta(e)),n,!0)}};ie(Ts,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:cg,theme:"default"}),ie(Ts,"events",ce.events),ie(Ts,"sources",ce.sources),ie(Ts,"version","2.0.3"),ie(Ts,"imports",{delta:fe,parchment:tue,"core/module":Hs,"core/theme":kd});let H=Ts;function wk(t){return typeof t=="string"?document.querySelector(t):t}function m_(t){return Object.entries(t??{}).reduce((e,n)=>{let[r,s]=n;return{...e,[r]:s===!0?{}:s}},{})}function _k(t){return Object.fromEntries(Object.entries(t).filter(e=>e[1]!==void 0))}function Nue(t,e){const n=wk(t);if(!n)throw new Error("Invalid Quill container");const s=!e.theme||e.theme===H.DEFAULTS.theme?kd:H.import(`themes/${e.theme}`);if(!s)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:i,...o}=H.DEFAULTS,{modules:a,...l}=s.DEFAULTS;let c=m_(e.modules);c!=null&&c.toolbar&&c.toolbar.constructor!==Object&&(c={...c,toolbar:{container:c.toolbar}});const u=xa({},m_(i),m_(a),c),d={...o,..._k(l),..._k(e)};let f=e.registry;return f?e.formats&&td.warn('Ignoring "formats" option because "registry" is specified'):f=e.formats?Pue(e.formats,d.registry,td):d.registry,{...d,registry:f,container:n,theme:s,modules:Object.entries(u).reduce((p,g)=>{let[m,w]=g;if(!w)return p;const v=H.import(`modules/${m}`);return v==null?(td.error(`Cannot load ${m} module. Are you sure you registered it?`),p):{...p,[m]:xa({},v.DEFAULTS||{},w)}},{}),bounds:wk(d.bounds)}}function Es(t,e,n,r){if(!this.isEnabled()&&e===ce.sources.USER&&!this.allowReadOnlyEdits)return new fe;let s=n==null?null:this.getSelection();const i=this.editor.delta,o=t();if(s!=null&&(n===!0&&(n=s.index),r==null?s=Ek(s,o,e):r!==0&&(s=Ek(s,n,r,e)),this.setSelection(s,ce.sources.SILENT)),o.length()>0){const a=[ce.events.TEXT_CHANGE,o,i,e];this.emitter.emit(ce.events.EDITOR_CHANGE,...a),e!==ce.sources.SILENT&&this.emitter.emit(...a)}return o}function Vi(t,e,n,r,s){let i={};return typeof t.index=="number"&&typeof t.length=="number"?typeof e!="number"?(s=r,r=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):typeof e!="number"&&(s=r,r=n,n=e,e=0),typeof n=="object"?(i=n,s=r):typeof n=="string"&&(r!=null?i[n]=r:s=n),s=s||ce.sources.API,[t,e,i,s]}function Ek(t,e,n,r){const s=typeof n=="number"?n:0;if(t==null)return null;let i,o;return e&&typeof e.transformPosition=="function"?[i,o]=[t.index,t.index+t.length].map(a=>e.transformPosition(a,r!==ce.sources.USER)):[i,o]=[t.index,t.index+t.length].map(a=>a<e||a===e&&r===ce.sources.USER?a:s>=0?a+s:Math.max(e,a+s)),new yc(i,o-i)}class Lc extends R0{}function xk(t){return t instanceof En||t instanceof rs}function bk(t){return typeof t.updateContent=="function"}class Eu extends KS{constructor(e,n,r){let{emitter:s}=r;super(e,n),this.emitter=s,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",i=>this.handleDragStart(i))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(ce.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(ce.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,n){this.emitter.emit(ce.events.SCROLL_EMBED_UPDATE,e,n)}deleteAt(e,n){const[r,s]=this.line(e),[i]=this.line(e+n);if(super.deleteAt(e,n),i!=null&&r!==i&&s>0){if(r instanceof rs||i instanceof rs){this.optimize();return}const o=i.children.head instanceof Ws?null:i.children.head;r.moveChildren(i,o),r.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,n,r,s){super.formatAt(e,n,r,s),this.optimize()}insertAt(e,n,r){if(e>=this.length())if(r==null||this.scroll.query(n,pe.BLOCK)==null){const s=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(s),r==null&&n.endsWith(`
`)?s.insertAt(0,n.slice(0,-1),r):s.insertAt(0,n,r)}else{const s=this.scroll.create(n,r);this.appendChild(s)}else super.insertAt(e,n,r);this.optimize()}insertBefore(e,n){if(e.statics.scope===pe.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(e),super.insertBefore(r,n)}else super.insertBefore(e,n)}insertContents(e,n){const r=this.deltaToRenderBlocks(n.concat(new fe().insert(`
`))),s=r.pop();if(s==null)return;this.batchStart();const i=r.shift();if(i){const l=i.type==="block"&&(i.delta.length()===0||!this.descendant(rs,e)[0]&&e<this.length()),c=i.type==="block"?i.delta:new fe().insert({[i.key]:i.value});g_(this,e,c);const u=i.type==="block"?1:0,d=e+c.length()+u;l&&this.insertAt(d-1,`
`);const f=ts(this.line(e)[0]),p=as.AttributeMap.diff(f,i.attributes)||{};Object.keys(p).forEach(g=>{this.formatAt(d-1,1,g,p[g])}),e=d}let[o,a]=this.children.find(e);if(r.length&&(o&&(o=o.split(a),a=0),r.forEach(l=>{if(l.type==="block"){const c=this.createBlock(l.attributes,o||void 0);g_(c,0,l.delta)}else{const c=this.create(l.key,l.value);this.insertBefore(c,o||void 0),Object.keys(l.attributes).forEach(u=>{c.format(u,l.attributes[u])})}})),s.type==="block"&&s.delta.length()){const l=o?o.offset(o.scroll)+a:this.length();g_(this,l,s.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const n=this.path(e).pop();if(!n)return[null,-1];const[r,s]=n;return r instanceof Dn?[r,s]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(xk,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const r=(s,i,o)=>{let a=[],l=o;return s.children.forEachAt(i,o,(c,u,d)=>{xk(c)?a.push(c):c instanceof R0&&(a=a.concat(r(c,u,l))),l-=d}),a};return r(this,e,n)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,n),e.length>0&&this.emitter.emit(ce.events.SCROLL_OPTIMIZE,e,n))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let n=ce.sources.USER;typeof e=="string"&&(n=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(r=>{let{target:s}=r;const i=this.find(s,!0);return i&&!bk(i)}),e.length>0&&this.emitter.emit(ce.events.SCROLL_BEFORE_UPDATE,n,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(ce.events.SCROLL_UPDATE,n,e)}updateEmbedAt(e,n,r){const[s]=this.descendant(i=>i instanceof rs,e);s&&s.statics.blotName===n&&bk(s)&&s.updateContent(r)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const n=[];let r=new fe;return e.forEach(s=>{const i=s==null?void 0:s.insert;if(i)if(typeof i=="string"){const o=i.split(`
`);o.slice(0,-1).forEach(l=>{r.insert(l,s.attributes),n.push({type:"block",delta:r,attributes:s.attributes??{}}),r=new fe});const a=o[o.length-1];a&&r.insert(a,s.attributes)}else{const o=Object.keys(i)[0];if(!o)return;this.query(o,pe.INLINE)?r.push(s):(r.length()&&n.push({type:"block",delta:r,attributes:{}}),r=new fe,n.push({type:"blockEmbed",key:o,value:i[o],attributes:s.attributes??{}}))}}),r.length()&&n.push({type:"block",delta:r,attributes:{}}),n}createBlock(e,n){let r;const s={};Object.entries(e).forEach(a=>{let[l,c]=a;this.query(l,pe.BLOCK&pe.BLOT)!=null?r=l:s[l]=c});const i=this.create(r||this.statics.defaultChild.blotName,r?e[r]:void 0);this.insertBefore(i,n||void 0);const o=i.length();return Object.entries(s).forEach(a=>{let[l,c]=a;i.formatAt(0,o,l,c)}),i}}ie(Eu,"blotName","scroll"),ie(Eu,"className","ql-editor"),ie(Eu,"tagName","DIV"),ie(Eu,"defaultChild",En),ie(Eu,"allowedChildren",[En,rs,Lc]);function g_(t,e,n){n.reduce((r,s)=>{const i=as.Op.length(s);let o=s.attributes||{};if(s.insert!=null){if(typeof s.insert=="string"){const a=s.insert;t.insertAt(r,a);const[l]=t.descendant(Dn,r),c=ts(l);o=as.AttributeMap.diff(c,o)||{}}else if(typeof s.insert=="object"){const a=Object.keys(s.insert)[0];if(a==null)return r;if(t.insertAt(r,a,s.insert[a]),t.scroll.query(a,pe.INLINE)!=null){const[c]=t.descendant(Dn,r),u=ts(c);o=as.AttributeMap.diff(u,o)||{}}}}return Object.keys(o).forEach(a=>{t.formatAt(r,i,a,o[a])}),r+i},e)}const eI={scope:pe.BLOCK,whitelist:["right","center","justify"]},kue=new Ei("align","align",eI),A3=new zs("align","ql-align",eI),C3=new rl("align","text-align",eI);class R3 extends rl{value(e){let n=super.value(e);return n.startsWith("rgb(")?(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${n.split(",").map(s=>`00${parseInt(s,10).toString(16)}`.slice(-2)).join("")}`):n}}const Due=new zs("color","ql-color",{scope:pe.INLINE}),tI=new R3("color","color",{scope:pe.INLINE}),Oue=new zs("background","ql-bg",{scope:pe.INLINE}),nI=new R3("background","background-color",{scope:pe.INLINE});class Mc extends Lc{static create(e){const n=super.create(e);return n.setAttribute("spellcheck","false"),n}code(e,n){return this.children.map(r=>r.length()<=1?"":r.domNode.innerText).join(`
`).slice(e,e+n)}html(e,n){return`<pre>
${D0(this.code(e,n))}
</pre>`}}class Mn extends En{static register(){H.register(Mc)}}ie(Mn,"TAB","  ");class rI extends xi{}rI.blotName="code";rI.tagName="CODE";Mn.blotName="code-block";Mn.className="ql-code-block";Mn.tagName="DIV";Mc.blotName="code-block-container";Mc.className="ql-code-block-container";Mc.tagName="DIV";Mc.allowedChildren=[Mn];Mn.allowedChildren=[Fs,Ws,Nd];Mn.requiredContainer=Mc;const sI={scope:pe.BLOCK,whitelist:["rtl"]},P3=new Ei("direction","dir",sI),N3=new zs("direction","ql-direction",sI),k3=new rl("direction","direction",sI),D3={scope:pe.INLINE,whitelist:["serif","monospace"]},O3=new zs("font","ql-font",D3);class Lue extends rl{value(e){return super.value(e).replace(/["']/g,"")}}const L3=new Lue("font","font-family",D3),M3=new zs("size","ql-size",{scope:pe.INLINE,whitelist:["small","large","huge"]}),V3=new rl("size","font-size",{scope:pe.INLINE,whitelist:["10px","18px","32px"]}),Mue=To("quill:keyboard"),Vue=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class O0 extends Hs{static match(e,n){return["altKey","ctrlKey","metaKey","shiftKey"].some(r=>!!n[r]!==e[r]&&n[r]!==null)?!1:n.key===e.key||n.key===e.which}constructor(e,n){super(e,n),this.bindings={},Object.keys(this.options.bindings).forEach(r=>{this.options.bindings[r]&&this.addBinding(this.options.bindings[r])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=Fue(e);if(s==null){Mue.warn("Attempted to add invalid keyboard binding",s);return}typeof n=="function"&&(n={handler:n}),typeof r=="function"&&(r={handler:r}),(Array.isArray(s.key)?s.key:[s.key]).forEach(o=>{const a={...s,key:o,...n,...r};this.bindings[a.key]=this.bindings[a.key]||[],this.bindings[a.key].push(a)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const s=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(v=>O0.match(e,v));if(s.length===0)return;const i=H.find(e.target,!0);if(i&&i.scroll!==this.quill.scroll)return;const o=this.quill.getSelection();if(o==null||!this.quill.hasFocus())return;const[a,l]=this.quill.getLine(o.index),[c,u]=this.quill.getLeaf(o.index),[d,f]=o.length===0?[c,u]:this.quill.getLeaf(o.index+o.length),p=c instanceof ov?c.value().slice(0,u):"",g=d instanceof ov?d.value().slice(f):"",m={collapsed:o.length===0,empty:o.length===0&&a.length()<=1,format:this.quill.getFormat(o),line:a,offset:l,prefix:p,suffix:g,event:e};s.some(v=>{if(v.collapsed!=null&&v.collapsed!==m.collapsed||v.empty!=null&&v.empty!==m.empty||v.offset!=null&&v.offset!==m.offset)return!1;if(Array.isArray(v.format)){if(v.format.every(E=>m.format[E]==null))return!1}else if(typeof v.format=="object"&&!Object.keys(v.format).every(E=>v.format[E]===!0?m.format[E]!=null:v.format[E]===!1?m.format[E]==null:HS(v.format[E],m.format[E])))return!1;return v.prefix!=null&&!v.prefix.test(m.prefix)||v.suffix!=null&&!v.suffix.test(m.suffix)?!1:v.handler.call(this,o,m,v)!==!0})&&e.preventDefault()})}handleBackspace(e,n){const r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(n.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let s={};const[i]=this.quill.getLine(e.index);let o=new fe().retain(e.index-r).delete(r);if(n.offset===0){const[a]=this.quill.getLine(e.index-1);if(a&&!(a.statics.blotName==="block"&&a.length()<=1)){const c=i.formats(),u=this.quill.getFormat(e.index-1,1);if(s=as.AttributeMap.diff(c,u)||{},Object.keys(s).length>0){const d=new fe().retain(e.index+i.length()-2).retain(1,s);o=o.compose(d)}}}this.quill.updateContents(o,H.sources.USER),this.quill.focus()}handleDelete(e,n){const r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(n.suffix)?2:1;if(e.index>=this.quill.getLength()-r)return;let s={};const[i]=this.quill.getLine(e.index);let o=new fe().retain(e.index).delete(r);if(n.offset>=i.length()-1){const[a]=this.quill.getLine(e.index+1);if(a){const l=i.formats(),c=this.quill.getFormat(e.index,1);s=as.AttributeMap.diff(l,c)||{},Object.keys(s).length>0&&(o=o.retain(a.length()-1).retain(1,s))}}this.quill.updateContents(o,H.sources.USER),this.quill.focus()}handleDeleteRange(e){iI({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,n){const r=Object.keys(n.format).reduce((i,o)=>(this.quill.scroll.query(o,pe.BLOCK)&&!Array.isArray(n.format[o])&&(i[o]=n.format[o]),i),{}),s=new fe().retain(e.index).delete(e.length).insert(`
`,r);this.quill.updateContents(s,H.sources.USER),this.quill.setSelection(e.index+1,H.sources.SILENT),this.quill.focus()}}const jue={bindings:{bold:y_("bold"),italic:y_("italic"),underline:y_("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",H.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",H.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){e.format.indent!=null?this.quill.format("indent","-1",H.sources.USER):e.format.list!=null&&this.quill.format("list",!1,H.sources.USER)}},"indent code-block":Tk(!0),"outdent code-block":Tk(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,H.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return!0;this.quill.history.cutoff();const n=new fe().retain(t.index).delete(t.length).insert("	");return this.quill.updateContents(n,H.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,H.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,H.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,e){const n={list:!1};e.format.indent&&(n.indent=!1),this.quill.formatLine(t.index,t.length,n,H.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[e,n]=this.quill.getLine(t.index),r={...e.formats(),list:"checked"},s=new fe().retain(t.index).insert(`
`,r).retain(e.length()-n-1).retain(1,{list:"unchecked"});this.quill.updateContents(s,H.sources.USER),this.quill.setSelection(t.index+1,H.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,e){const[n,r]=this.quill.getLine(t.index),s=new fe().retain(t.index).insert(`
`,e.format).retain(n.length()-r-1).retain(1,{header:null});this.quill.updateContents(s,H.sources.USER),this.quill.setSelection(t.index+1,H.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[n,r,s,i]=e.getTable(t),o=Bue(n,r,s,i);if(o==null)return;let a=n.offset();if(o<0){const l=new fe().retain(a).insert(`
`);this.quill.updateContents(l,H.sources.USER),this.quill.setSelection(t.index+1,t.length,H.sources.SILENT)}else if(o>0){a+=n.length();const l=new fe().retain(a).insert(`
`);this.quill.updateContents(l,H.sources.USER),this.quill.setSelection(a,H.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:n,line:r}=e,s=r.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(s-1,H.sources.USER):this.quill.setSelection(s+r.length(),H.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(this.quill.scroll.query("list")==null)return!0;const{length:n}=e.prefix,[r,s]=this.quill.getLine(t.index);if(s>n)return!0;let i;switch(e.prefix.trim()){case"[]":case"[ ]":i="unchecked";break;case"[x]":i="checked";break;case"-":case"*":i="bullet";break;default:i="ordered"}this.quill.insertText(t.index," ",H.sources.USER),this.quill.history.cutoff();const o=new fe().retain(t.index-s).delete(n+1).retain(r.length()-2-s).retain(1,{list:i});return this.quill.updateContents(o,H.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-n,H.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,n]=this.quill.getLine(t.index);let r=2,s=e;for(;s!=null&&s.length()<=1&&s.formats()["code-block"];)if(s=s.prev,r-=1,r<=0){const i=new fe().retain(t.index+e.length()-n-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(i,H.sources.USER),this.quill.setSelection(t.index-1,H.sources.SILENT),!1}return!0}},"embed left":ug("ArrowLeft",!1),"embed left shift":ug("ArrowLeft",!0),"embed right":ug("ArrowRight",!1),"embed right shift":ug("ArrowRight",!0),"table down":Sk(!1),"table up":Sk(!0)}};O0.DEFAULTS=jue;function Tk(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(e,n){let{event:r}=n;const s=this.quill.scroll.query("code-block"),{TAB:i}=s;if(e.length===0&&!r.shiftKey){this.quill.insertText(e.index,i,H.sources.USER),this.quill.setSelection(e.index+i.length,H.sources.SILENT);return}const o=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:a,length:l}=e;o.forEach((c,u)=>{t?(c.insertAt(0,i),u===0?a+=i.length:l+=i.length):c.domNode.textContent.startsWith(i)&&(c.deleteAt(0,i.length),u===0?a-=i.length:l-=i.length)}),this.quill.update(H.sources.USER),this.quill.setSelection(a,l,H.sources.SILENT)}}}function ug(t,e){return{key:t,shiftKey:e,altKey:null,[t==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:s}=r;t==="ArrowRight"&&(s+=r.length+1);const[i]=this.quill.getLeaf(s);return i instanceof Mr?(t==="ArrowLeft"?e?this.quill.setSelection(r.index-1,r.length+1,H.sources.USER):this.quill.setSelection(r.index-1,H.sources.USER):e?this.quill.setSelection(r.index,r.length+1,H.sources.USER):this.quill.setSelection(r.index+r.length+1,H.sources.USER),!1):!0}}}function y_(t){return{key:t[0],shortKey:!0,handler(e,n){this.quill.format(t,!n.format[t],H.sources.USER)}}}function Sk(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,n){const r=t?"prev":"next",s=n.line,i=s.parent[r];if(i!=null){if(i.statics.blotName==="table-row"){let o=i.children.head,a=s;for(;a.prev!=null;)a=a.prev,o=o.next;const l=o.offset(this.quill.scroll)+Math.min(n.offset,o.length()-1);this.quill.setSelection(l,0,H.sources.USER)}}else{const o=s.table()[r];o!=null&&(t?this.quill.setSelection(o.offset(this.quill.scroll)+o.length()-1,0,H.sources.USER):this.quill.setSelection(o.offset(this.quill.scroll),0,H.sources.USER))}return!1}}}function Fue(t){if(typeof t=="string"||typeof t=="number")t={key:t};else if(typeof t=="object")t=Zu(t);else return null;return t.shortKey&&(t[Vue]=t.shortKey,delete t.shortKey),t}function iI(t){let{quill:e,range:n}=t;const r=e.getLines(n);let s={};if(r.length>1){const i=r[0].formats(),o=r[r.length-1].formats();s=as.AttributeMap.diff(o,i)||{}}e.deleteText(n,H.sources.USER),Object.keys(s).length>0&&e.formatLine(n.index,1,s,H.sources.USER),e.setSelection(n.index,H.sources.SILENT)}function Bue(t,e,n,r){return e.prev==null&&e.next==null?n.prev==null&&n.next==null?r===0?-1:1:n.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const Uue=/font-weight:\s*normal/,$ue=["P","OL","UL"],Ik=t=>t&&$ue.includes(t.tagName),que=t=>{Array.from(t.querySelectorAll("br")).filter(e=>Ik(e.previousElementSibling)&&Ik(e.nextElementSibling)).forEach(e=>{var n;(n=e.parentNode)==null||n.removeChild(e)})},zue=t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter(e=>{var n;return(n=e.getAttribute("style"))==null?void 0:n.match(Uue)}).forEach(e=>{var r;const n=t.createDocumentFragment();n.append(...e.childNodes),(r=e.parentNode)==null||r.replaceChild(n,e)})};function Wue(t){t.querySelector('[id^="docs-internal-guid-"]')&&(zue(t),que(t))}const Hue=/\bmso-list:[^;]*ignore/i,Gue=/\bmso-list:[^;]*\bl(\d+)/i,Kue=/\bmso-list:[^;]*\blevel(\d+)/i,Que=(t,e)=>{const n=t.getAttribute("style"),r=n==null?void 0:n.match(Gue);if(!r)return null;const s=Number(r[1]),i=n==null?void 0:n.match(Kue),o=i?Number(i[1]):1,a=new RegExp(`@list l${s}:level${o}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),l=e.match(a),c=l&&l[1]==="bullet"?"bullet":"ordered";return{id:s,indent:o,type:c,element:t}},Yue=t=>{var o,a;const e=Array.from(t.querySelectorAll("[style*=mso-list]")),n=[],r=[];e.forEach(l=>{(l.getAttribute("style")||"").match(Hue)?n.push(l):r.push(l)}),n.forEach(l=>{var c;return(c=l.parentNode)==null?void 0:c.removeChild(l)});const s=t.documentElement.innerHTML,i=r.map(l=>Que(l,s)).filter(l=>l);for(;i.length;){const l=[];let c=i.shift();for(;c;)l.push(c),c=i.length&&((o=i[0])==null?void 0:o.element)===c.element.nextElementSibling&&i[0].id===c.id?i.shift():null;const u=document.createElement("ul");l.forEach(p=>{const g=document.createElement("li");g.setAttribute("data-list",p.type),p.indent>1&&g.setAttribute("class",`ql-indent-${p.indent-1}`),g.innerHTML=p.element.innerHTML,u.appendChild(g)});const d=(a=l[0])==null?void 0:a.element,{parentNode:f}=d??{};d&&(f==null||f.replaceChild(u,d)),l.slice(1).forEach(p=>{let{element:g}=p;f==null||f.removeChild(g)})}};function Xue(t){t.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&Yue(t)}const Jue=[Xue,Wue],Zue=t=>{t.documentElement&&Jue.forEach(e=>{e(t)})},ede=To("quill:clipboard"),tde=[[Node.TEXT_NODE,fde],[Node.TEXT_NODE,Ck],["br",ode],[Node.ELEMENT_NODE,Ck],[Node.ELEMENT_NODE,ide],[Node.ELEMENT_NODE,sde],[Node.ELEMENT_NODE,dde],["li",cde],["ol, ul",ude],["pre",ade],["tr",hde],["b",v_("bold")],["i",v_("italic")],["strike",v_("strike")],["style",lde]],nde=[kue,P3].reduce((t,e)=>(t[e.keyName]=e,t),{}),Ak=[C3,nI,tI,k3,L3,V3].reduce((t,e)=>(t[e.keyName]=e,t),{});class j3 extends Hs{constructor(e,n){super(e,n),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],tde.concat(this.options.matchers??[]).forEach(r=>{let[s,i]=r;this.addMatcher(s,i)})}addMatcher(e,n){this.matchers.push([e,n])}convert(e){let{html:n,text:r}=e,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s[Mn.blotName])return new fe().insert(r||"",{[Mn.blotName]:s[Mn.blotName]});if(!n)return new fe().insert(r||"",s);const i=this.convertHTML(n);return pm(i,`
`)&&(i.ops[i.ops.length-1].attributes==null||s.table)?i.compose(new fe().retain(i.length()-1).delete(1)):i}normalizeHTML(e){Zue(e)}convertHTML(e){const n=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(n);const r=n.body,s=new WeakMap,[i,o]=this.prepareMatching(r,s);return oI(this.quill.scroll,r,i,o,s)}dangerouslyPasteHTML(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:H.sources.API;if(typeof e=="string"){const s=this.convert({html:e,text:""});this.quill.setContents(s,n),this.quill.setSelection(0,H.sources.SILENT)}else{const s=this.convert({html:n,text:""});this.quill.updateContents(new fe().retain(e).concat(s),r),this.quill.setSelection(e+s.length(),H.sources.SILENT)}}onCaptureCopy(e){var o,a;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[r]=this.quill.selection.getRange();if(r==null)return;const{html:s,text:i}=this.onCopy(r,n);(o=e.clipboardData)==null||o.setData("text/plain",i),(a=e.clipboardData)==null||a.setData("text/html",s),n&&iI({range:r,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(n=>n[0]!=="#").join(`
`)}onCapturePaste(e){var o,a,l,c,u;if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const n=this.quill.getSelection(!0);if(n==null)return;const r=(o=e.clipboardData)==null?void 0:o.getData("text/html");let s=(a=e.clipboardData)==null?void 0:a.getData("text/plain");if(!r&&!s){const d=(l=e.clipboardData)==null?void 0:l.getData("text/uri-list");d&&(s=this.normalizeURIList(d))}const i=Array.from(((c=e.clipboardData)==null?void 0:c.files)||[]);if(!r&&i.length>0){this.quill.uploader.upload(n,i);return}if(r&&i.length>0){const d=new DOMParser().parseFromString(r,"text/html");if(d.body.childElementCount===1&&((u=d.body.firstElementChild)==null?void 0:u.tagName)==="IMG"){this.quill.uploader.upload(n,i);return}}this.onPaste(n,{html:r,text:s})}onCopy(e){const n=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:n}}onPaste(e,n){let{text:r,html:s}=n;const i=this.quill.getFormat(e.index),o=this.convert({text:r,html:s},i);ede.log("onPaste",o,{text:r,html:s});const a=new fe().retain(e.index).delete(e.length).concat(o);this.quill.updateContents(a,H.sources.USER),this.quill.setSelection(a.length()-e.length,H.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,n){const r=[],s=[];return this.matchers.forEach(i=>{const[o,a]=i;switch(o){case Node.TEXT_NODE:s.push(a);break;case Node.ELEMENT_NODE:r.push(a);break;default:Array.from(e.querySelectorAll(o)).forEach(l=>{if(n.has(l)){const c=n.get(l);c==null||c.push(a)}else n.set(l,[a])});break}}),[r,s]}}ie(j3,"DEFAULTS",{matchers:[]});function Vc(t,e,n,r){return r.query(e)?t.reduce((s,i)=>{if(!i.insert)return s;if(i.attributes&&i.attributes[e])return s.push(i);const o=n?{[e]:n}:{};return s.insert(i.insert,{...o,...i.attributes})},new fe):t}function pm(t,e){let n="";for(let r=t.ops.length-1;r>=0&&n.length<e.length;--r){const s=t.ops[r];if(typeof s.insert!="string")break;n=s.insert+n}return n.slice(-1*e.length)===e}function la(t,e){if(!(t instanceof Element))return!1;const n=e.query(t);return n&&n.prototype instanceof Mr?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}function rde(t,e){return t.previousElementSibling&&t.nextElementSibling&&!la(t.previousElementSibling,e)&&!la(t.nextElementSibling,e)}const dg=new WeakMap;function F3(t){return t==null?!1:(dg.has(t)||(t.tagName==="PRE"?dg.set(t,!0):dg.set(t,F3(t.parentNode))),dg.get(t))}function oI(t,e,n,r,s){return e.nodeType===e.TEXT_NODE?r.reduce((i,o)=>o(e,i,t),new fe):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((i,o)=>{let a=oI(t,o,n,r,s);return o.nodeType===e.ELEMENT_NODE&&(a=n.reduce((l,c)=>c(o,l,t),a),a=(s.get(o)||[]).reduce((l,c)=>c(o,l,t),a)),i.concat(a)},new fe):new fe}function v_(t){return(e,n,r)=>Vc(n,t,!0,r)}function sde(t,e,n){const r=Ei.keys(t),s=zs.keys(t),i=rl.keys(t),o={};return r.concat(s).concat(i).forEach(a=>{let l=n.query(a,pe.ATTRIBUTE);l!=null&&(o[l.attrName]=l.value(t),o[l.attrName])||(l=nde[a],l!=null&&(l.attrName===a||l.keyName===a)&&(o[l.attrName]=l.value(t)||void 0),l=Ak[a],l!=null&&(l.attrName===a||l.keyName===a)&&(l=Ak[a],o[l.attrName]=l.value(t)||void 0))}),Object.entries(o).reduce((a,l)=>{let[c,u]=l;return Vc(a,c,u,n)},e)}function ide(t,e,n){const r=n.query(t);if(r==null)return e;if(r.prototype instanceof Mr){const s={},i=r.value(t);if(i!=null)return s[r.blotName]=i,new fe().insert(s,r.formats(t,n))}else if(r.prototype instanceof xp&&!pm(e,`
`)&&e.insert(`
`),"blotName"in r&&"formats"in r&&typeof r.formats=="function")return Vc(e,r.blotName,r.formats(t,n),n);return e}function ode(t,e){return pm(e,`
`)||e.insert(`
`),e}function ade(t,e,n){const r=n.query("code-block"),s=r&&"formats"in r&&typeof r.formats=="function"?r.formats(t,n):!0;return Vc(e,"code-block",s,n)}function lde(){return new fe}function cde(t,e,n){const r=n.query(t);if(r==null||r.blotName!=="list"||!pm(e,`
`))return e;let s=-1,i=t.parentNode;for(;i!=null;)["OL","UL"].includes(i.tagName)&&(s+=1),i=i.parentNode;return s<=0?e:e.reduce((o,a)=>a.insert?a.attributes&&typeof a.attributes.indent=="number"?o.push(a):o.insert(a.insert,{indent:s,...a.attributes||{}}):o,new fe)}function ude(t,e,n){const r=t;let s=r.tagName==="OL"?"ordered":"bullet";const i=r.getAttribute("data-checked");return i&&(s=i==="true"?"checked":"unchecked"),Vc(e,"list",s,n)}function Ck(t,e,n){if(!pm(e,`
`)){if(la(t,n)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&t.nextSibling){let r=t.nextSibling;for(;r!=null;){if(la(r,n))return e.insert(`
`);const s=n.query(r);if(s&&s.prototype instanceof rs)return e.insert(`
`);r=r.firstChild}}}return e}function dde(t,e,n){var i;const r={},s=t.style||{};return s.fontStyle==="italic"&&(r.italic=!0),s.textDecoration==="underline"&&(r.underline=!0),s.textDecoration==="line-through"&&(r.strike=!0),((i=s.fontWeight)!=null&&i.startsWith("bold")||parseInt(s.fontWeight,10)>=700)&&(r.bold=!0),e=Object.entries(r).reduce((o,a)=>{let[l,c]=a;return Vc(o,l,c,n)},e),parseFloat(s.textIndent||0)>0?new fe().insert("	").concat(e):e}function hde(t,e,n){var s,i;const r=((s=t.parentElement)==null?void 0:s.tagName)==="TABLE"?t.parentElement:(i=t.parentElement)==null?void 0:i.parentElement;if(r!=null){const a=Array.from(r.querySelectorAll("tr")).indexOf(t)+1;return Vc(e,"table",a,n)}return e}function fde(t,e,n){var s;let r=t.data;if(((s=t.parentElement)==null?void 0:s.tagName)==="O:P")return e.insert(r.trim());if(!F3(t)){if(r.trim().length===0&&r.includes(`
`)&&!rde(t,n))return e;r=r.replace(/[^\S\u00a0]/g," "),r=r.replace(/ {2,}/g," "),(t.previousSibling==null&&t.parentElement!=null&&la(t.parentElement,n)||t.previousSibling instanceof Element&&la(t.previousSibling,n))&&(r=r.replace(/^ /,"")),(t.nextSibling==null&&t.parentElement!=null&&la(t.parentElement,n)||t.nextSibling instanceof Element&&la(t.nextSibling,n))&&(r=r.replace(/ $/,"")),r=r.replaceAll(""," ")}return e.insert(r)}class B3 extends Hs{constructor(n,r){super(n,r);ie(this,"lastRecorded",0);ie(this,"ignoreChange",!1);ie(this,"stack",{undo:[],redo:[]});ie(this,"currentRange",null);this.quill.on(H.events.EDITOR_CHANGE,(s,i,o,a)=>{s===H.events.SELECTION_CHANGE?i&&a!==H.sources.SILENT&&(this.currentRange=i):s===H.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||a===H.sources.USER?this.record(i,o):this.transform(i)),this.currentRange=GE(this.currentRange,i))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",s=>{s.inputType==="historyUndo"?(this.undo(),s.preventDefault()):s.inputType==="historyRedo"&&(this.redo(),s.preventDefault())})}change(n,r){if(this.stack[n].length===0)return;const s=this.stack[n].pop();if(!s)return;const i=this.quill.getContents(),o=s.delta.invert(i);this.stack[r].push({delta:o,range:GE(s.range,o)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(s.delta,H.sources.USER),this.ignoreChange=!1,this.restoreSelection(s)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(n,r){if(n.ops.length===0)return;this.stack.redo=[];let s=n.invert(r),i=this.currentRange;const o=Date.now();if(this.lastRecorded+this.options.delay>o&&this.stack.undo.length>0){const a=this.stack.undo.pop();a&&(s=s.compose(a.delta),i=a.range)}else this.lastRecorded=o;s.length()!==0&&(this.stack.undo.push({delta:s,range:i}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(n){Rk(this.stack.undo,n),Rk(this.stack.redo,n)}undo(){this.change("undo","redo")}restoreSelection(n){if(n.range)this.quill.setSelection(n.range,H.sources.USER);else{const r=mde(this.quill.scroll,n.delta);this.quill.setSelection(r,H.sources.USER)}}}ie(B3,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function Rk(t,e){let n=e;for(let r=t.length-1;r>=0;r-=1){const s=t[r];t[r]={delta:n.transform(s.delta,!0),range:s.range&&GE(s.range,n)},n=s.delta.transform(n),t[r].delta.length()===0&&t.splice(r,1)}}function pde(t,e){const n=e.ops[e.ops.length-1];return n==null?!1:n.insert!=null?typeof n.insert=="string"&&n.insert.endsWith(`
`):n.attributes!=null?Object.keys(n.attributes).some(r=>t.query(r,pe.BLOCK)!=null):!1}function mde(t,e){const n=e.reduce((s,i)=>s+(i.delete||0),0);let r=e.length()-n;return pde(t,e)&&(r-=1),r}function GE(t,e){if(!t)return t;const n=e.transformPosition(t.index),r=e.transformPosition(t.index+t.length);return{index:n,length:r-n}}class U3 extends Hs{constructor(e,n){super(e,n),e.root.addEventListener("drop",r=>{var o;r.preventDefault();let s=null;if(document.caretRangeFromPoint)s=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const a=document.caretPositionFromPoint(r.clientX,r.clientY);s=document.createRange(),s.setStart(a.offsetNode,a.offset),s.setEnd(a.offsetNode,a.offset)}const i=s&&e.selection.normalizeNative(s);if(i){const a=e.selection.normalizedToRange(i);(o=r.dataTransfer)!=null&&o.files&&this.upload(a,r.dataTransfer.files)}})}upload(e,n){const r=[];Array.from(n).forEach(s=>{var i;s&&((i=this.options.mimetypes)!=null&&i.includes(s.type))&&r.push(s)}),r.length>0&&this.options.handler.call(this,e,r)}}U3.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image"))return;const n=e.map(r=>new Promise(s=>{const i=new FileReader;i.onload=()=>{s(i.result)},i.readAsDataURL(r)}));Promise.all(n).then(r=>{const s=r.reduce((i,o)=>i.insert({image:o}),new fe().retain(t.index).delete(t.length));this.quill.updateContents(s,ce.sources.USER),this.quill.setSelection(t.index+r.length,ce.sources.SILENT)})}};const gde=["insertText","insertReplacementText"];class yde extends Hs{constructor(e,n){super(e,n),e.root.addEventListener("beforeinput",r=>{this.handleBeforeInput(r)}),/Android/i.test(navigator.userAgent)||e.on(H.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){iI({range:e,quill:this.quill})}replaceText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(n){const r=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new fe().retain(e.index).insert(n,r),H.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+n.length,0,H.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!gde.includes(e.inputType))return;const n=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!n||n.collapsed===!0)return;const r=vde(e);if(r==null)return;const s=this.quill.selection.normalizeNative(n),i=s?this.quill.selection.normalizedToRange(s):null;i&&this.replaceText(i,r)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function vde(t){var e;return typeof t.data=="string"?t.data:(e=t.dataTransfer)!=null&&e.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}const wde=/Mac/i.test(navigator.platform),_de=100,Ede=t=>!!(t.key==="ArrowLeft"||t.key==="ArrowRight"||t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="Home"||wde&&t.key==="a"&&t.ctrlKey===!0);class xde extends Hs{constructor(n,r){super(n,r);ie(this,"isListening",!1);ie(this,"selectionChangeDeadline",0);this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(n,r){let{line:s,event:i}=r;if(!(s instanceof Ms)||!s.uiNode)return!0;const o=getComputedStyle(s.domNode).direction==="rtl";return o&&i.key!=="ArrowRight"||!o&&i.key!=="ArrowLeft"?!0:(this.quill.setSelection(n.index-1,n.length+(i.shiftKey?1:0),H.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",n=>{!n.defaultPrevented&&Ede(n)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+_de,this.isListening)return;this.isListening=!0;const n=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",n,{once:!0})}handleSelectionChange(){const n=document.getSelection();if(!n)return;const r=n.getRangeAt(0);if(r.collapsed!==!0||r.startOffset!==0)return;const s=this.quill.scroll.find(r.startContainer);if(!(s instanceof Ms)||!s.uiNode)return;const i=document.createRange();i.setStartAfter(s.uiNode),i.setEndAfter(s.uiNode),n.removeAllRanges(),n.addRange(i)}}H.register({"blots/block":En,"blots/block/embed":rs,"blots/break":Ws,"blots/container":Lc,"blots/cursor":Nd,"blots/embed":ZS,"blots/inline":xi,"blots/scroll":Eu,"blots/text":Fs,"modules/clipboard":j3,"modules/history":B3,"modules/keyboard":O0,"modules/uploader":U3,"modules/input":yde,"modules/uiNode":xde});class bde extends zs{add(e,n){let r=0;if(n==="+1"||n==="-1"){const s=this.value(e)||0;r=n==="+1"?s+1:s-1}else typeof n=="number"&&(r=n);return r===0?(this.remove(e),!0):super.add(e,r.toString())}canAdd(e,n){return super.canAdd(e,n)||super.canAdd(e,parseInt(n,10))}value(e){return parseInt(super.value(e),10)||void 0}}const Tde=new bde("indent","ql-indent",{scope:pe.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class KE extends En{}ie(KE,"blotName","blockquote"),ie(KE,"tagName","blockquote");class QE extends En{static formats(e){return this.tagName.indexOf(e.tagName)+1}}ie(QE,"blotName","header"),ie(QE,"tagName",["H1","H2","H3","H4","H5","H6"]);class mm extends Lc{}mm.blotName="list-container";mm.tagName="OL";class gm extends En{static create(e){const n=super.create();return n.setAttribute("data-list",e),n}static formats(e){return e.getAttribute("data-list")||void 0}static register(){H.register(mm)}constructor(e,n){super(e,n);const r=n.ownerDocument.createElement("span"),s=i=>{if(!e.isEnabled())return;const o=this.statics.formats(n,e);o==="checked"?(this.format("list","unchecked"),i.preventDefault()):o==="unchecked"&&(this.format("list","checked"),i.preventDefault())};r.addEventListener("mousedown",s),r.addEventListener("touchstart",s),this.attachUI(r)}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-list",n):super.format(e,n)}}gm.blotName="list";gm.tagName="LI";mm.allowedChildren=[gm];gm.requiredContainer=mm;class Sp extends xi{static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}ie(Sp,"blotName","bold"),ie(Sp,"tagName",["STRONG","B"]);class YE extends Sp{}ie(YE,"blotName","italic"),ie(YE,"tagName",["EM","I"]);class ca extends xi{static create(e){const n=super.create(e);return n.setAttribute("href",this.sanitize(e)),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}static formats(e){return e.getAttribute("href")}static sanitize(e){return $3(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,n){e!==this.statics.blotName||!n?super.format(e,n):this.domNode.setAttribute("href",this.constructor.sanitize(n))}}ie(ca,"blotName","link"),ie(ca,"tagName","A"),ie(ca,"SANITIZED_URL","about:blank"),ie(ca,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function $3(t,e){const n=document.createElement("a");n.href=t;const r=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(r)>-1}class XE extends xi{static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}ie(XE,"blotName","script"),ie(XE,"tagName",["SUB","SUP"]);class JE extends Sp{}ie(JE,"blotName","strike"),ie(JE,"tagName",["S","STRIKE"]);class ZE extends xi{}ie(ZE,"blotName","underline"),ie(ZE,"tagName","U");class Yg extends ZS{static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const n=super.create(e);return typeof e=="string"&&(window.katex.render(e,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",e)),n}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}ie(Yg,"blotName","formula"),ie(Yg,"className","ql-formula"),ie(Yg,"tagName","SPAN");const Pk=["alt","height","width"];var mg;let Sde=(mg=class extends Mr{static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("src",this.sanitize(e)),n}static formats(e){return Pk.reduce((n,r)=>(e.hasAttribute(r)&&(n[r]=e.getAttribute(r)),n),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return $3(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,n){Pk.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}},ie(mg,"blotName","image"),ie(mg,"tagName","IMG"),mg);const Nk=["height","width"];class Xg extends rs{static create(e){const n=super.create(e);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen","true"),n.setAttribute("src",this.sanitize(e)),n}static formats(e){return Nk.reduce((n,r)=>(e.hasAttribute(r)&&(n[r]=e.getAttribute(r)),n),{})}static sanitize(e){return ca.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,n){Nk.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}ie(Xg,"blotName","video"),ie(Xg,"className","ql-video"),ie(Xg,"tagName","IFRAME");const Wh=new zs("code-token","hljs",{scope:pe.INLINE});class uo extends xi{static formats(e,n){for(;e!=null&&e!==n.domNode;){if(e.classList&&e.classList.contains(Mn.className))return super.formats(e,n);e=e.parentNode}}constructor(e,n,r){super(e,n,r),Wh.add(this.domNode,r)}format(e,n){e!==uo.blotName?super.format(e,n):n?Wh.add(this.domNode,n):(Wh.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Wh.value(this.domNode)||this.unwrap()}}uo.blotName="code-token";uo.className="ql-token";class ns extends Mn{static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("data-language",e),n}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-language",n):super.format(e,n)}replaceWith(e,n){return this.formatAt(0,this.length(),uo.blotName,!1),super.replaceWith(e,n)}}class xf extends Mc{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,n){e===ns.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(e,n)}))}formatAt(e,n,r,s){r===ns.blotName&&(this.forceNext=!0),super.formatAt(e,n,r,s)}highlight(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const s=`${Array.from(this.domNode.childNodes).filter(o=>o!==this.uiNode).map(o=>o.textContent).join(`
`)}
`,i=ns.formats(this.children.head.domNode);if(n||this.forceNext||this.cachedText!==s){if(s.trim().length>0||this.cachedText==null){const o=this.children.reduce((l,c)=>l.concat(T3(c,!1)),new fe),a=e(s,i);o.diff(a).reduce((l,c)=>{let{retain:u,attributes:d}=c;return u?(d&&Object.keys(d).forEach(f=>{[ns.blotName,uo.blotName].includes(f)&&this.formatAt(l,u,f,d[f])}),l+u):l},0)}this.cachedText=s,this.forceNext=!1}}html(e,n){const[r]=this.children.find(e);return`<pre data-language="${r?ns.formats(r.domNode):"plain"}">
${D0(this.code(e,n))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const n=ns.formats(this.children.head.domNode);n!==this.uiNode.value&&(this.uiNode.value=n)}}}xf.allowedChildren=[ns];ns.requiredContainer=xf;ns.allowedChildren=[uo,Nd,Fs,Ws];const Ide=(t,e,n)=>{if(typeof t.versionString=="string"){const r=t.versionString.split(".")[0];if(parseInt(r,10)>=11)return t.highlight(n,{language:e}).value}return t.highlight(e,n).value};class q3 extends Hs{static register(){H.register(uo,!0),H.register(ns,!0),H.register(xf,!0)}constructor(e,n){if(super(e,n),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((r,s)=>{let{key:i}=s;return r[i]=!0,r},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(H.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof xf))return;const n=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(r=>{let{key:s,label:i}=r;const o=n.ownerDocument.createElement("option");o.textContent=i,o.setAttribute("value",s),n.appendChild(o)}),n.addEventListener("change",()=>{e.format(ns.blotName,n.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(n),e.children.head&&(n.value=ns.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(H.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(H.sources.USER);const r=this.quill.getSelection();(e==null?this.quill.scroll.descendants(xf):[e]).forEach(i=>{i.highlight(this.highlightBlot,n)}),this.quill.update(H.sources.SILENT),r!=null&&this.quill.setSelection(r,H.sources.SILENT)}highlightBlot(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(n=this.languages[n]?n:"plain",n==="plain")return D0(e).split(`
`).reduce((s,i,o)=>(o!==0&&s.insert(`
`,{[Mn.blotName]:n}),s.insert(i)),new fe);const r=this.quill.root.ownerDocument.createElement("div");return r.classList.add(Mn.className),r.innerHTML=Ide(this.options.hljs,n,e),oI(this.quill.scroll,r,[(s,i)=>{const o=Wh.value(s);return o?i.compose(new fe().retain(i.length(),{[uo.blotName]:o})):i}],[(s,i)=>s.data.split(`
`).reduce((o,a,l)=>(l!==0&&o.insert(`
`,{[Mn.blotName]:n}),o.insert(a)),i)],new WeakMap)}}q3.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};const Sf=class Sf extends En{static create(e){const n=super.create();return e?n.setAttribute("data-row",e):n.setAttribute("data-row",aI()),n}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,n){e===Sf.blotName&&n?this.domNode.setAttribute("data-row",n):super.format(e,n)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}};ie(Sf,"blotName","table"),ie(Sf,"tagName","TD");let Rs=Sf;class ho extends Lc{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),n=this.children.tail.formats(),r=this.next.children.head.formats(),s=this.next.children.tail.formats();return e.table===n.table&&e.table===r.table&&e.table===s.table}return!1}optimize(e){super.optimize(e),this.children.forEach(n=>{if(n.next==null)return;const r=n.formats(),s=n.next.formats();if(r.table!==s.table){const i=this.splitAfter(n);i&&i.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}ie(ho,"blotName","table-row"),ie(ho,"tagName","TR");class pi extends Lc{}ie(pi,"blotName","table-body"),ie(pi,"tagName","TBODY");class Dd extends Lc{balanceCells(){const e=this.descendants(ho),n=e.reduce((r,s)=>Math.max(s.children.length,r),0);e.forEach(r=>{new Array(n-r.children.length).fill(0).forEach(()=>{let s;r.children.head!=null&&(s=Rs.formats(r.children.head.domNode));const i=this.scroll.create(Rs.blotName,s);r.appendChild(i),i.optimize()})})}cells(e){return this.rows().map(n=>n.children.at(e))}deleteColumn(e){const[n]=this.descendant(pi);n==null||n.children.head==null||n.children.forEach(r=>{const s=r.children.at(e);s!=null&&s.remove()})}insertColumn(e){const[n]=this.descendant(pi);n==null||n.children.head==null||n.children.forEach(r=>{const s=r.children.at(e),i=Rs.formats(r.children.head.domNode),o=this.scroll.create(Rs.blotName,i);r.insertBefore(o,s)})}insertRow(e){const[n]=this.descendant(pi);if(n==null||n.children.head==null)return;const r=aI(),s=this.scroll.create(ho.blotName);n.children.head.children.forEach(()=>{const o=this.scroll.create(Rs.blotName,r);s.appendChild(o)});const i=n.children.at(e);n.insertBefore(s,i)}rows(){const e=this.children.head;return e==null?[]:e.children.map(n=>n)}}ie(Dd,"blotName","table-container"),ie(Dd,"tagName","TABLE");Dd.allowedChildren=[pi];pi.requiredContainer=Dd;pi.allowedChildren=[ho];ho.requiredContainer=pi;ho.allowedChildren=[Rs];Rs.requiredContainer=ho;function aI(){return`row-${Math.random().toString(36).slice(2,6)}`}class Ade extends Hs{static register(){H.register(Rs),H.register(ho),H.register(pi),H.register(Dd)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Dd).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,n]=this.getTable();n!=null&&(e.deleteColumn(n.cellOffset()),this.quill.update(H.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(H.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const n=e.offset();e.remove(),this.quill.update(H.sources.USER),this.quill.setSelection(n,H.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[n,r]=this.quill.getLine(e.index);if(n==null||n.statics.blotName!==Rs.blotName)return[null,null,null,-1];const s=n.parent;return[s.parent.parent,s,n,r]}insertColumn(e){const n=this.quill.getSelection();if(!n)return;const[r,s,i]=this.getTable(n);if(i==null)return;const o=i.cellOffset();r.insertColumn(o+e),this.quill.update(H.sources.USER);let a=s.rowOffset();e===0&&(a+=1),this.quill.setSelection(n.index+a,n.length,H.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const n=this.quill.getSelection();if(!n)return;const[r,s,i]=this.getTable(n);if(i==null)return;const o=s.rowOffset();r.insertRow(o+e),this.quill.update(H.sources.USER),e>0?this.quill.setSelection(n,H.sources.SILENT):this.quill.setSelection(n.index+s.children.length,n.length,H.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,n){const r=this.quill.getSelection();if(r==null)return;const s=new Array(e).fill(0).reduce(i=>{const o=new Array(n).fill(`
`).join("");return i.insert(o,{table:aI()})},new fe().retain(r.index));this.quill.updateContents(s,H.sources.USER),this.quill.setSelection(r.index,H.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(H.events.SCROLL_OPTIMIZE,e=>{e.some(n=>["TD","TR","TBODY","TABLE"].includes(n.target.tagName)?(this.quill.once(H.events.TEXT_CHANGE,(r,s,i)=>{i===H.sources.USER&&this.balanceTables()}),!0):!1)})}}const kk=To("quill:toolbar");class lI extends Hs{constructor(e,n){var r,s;if(super(e,n),Array.isArray(this.options.container)){const i=document.createElement("div");i.setAttribute("role","toolbar"),Cde(i,this.options.container),(s=(r=e.container)==null?void 0:r.parentNode)==null||s.insertBefore(i,e.container),this.container=i}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){kk.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(i=>{var a;const o=(a=this.options.handlers)==null?void 0:a[i];o&&this.addHandler(i,o)}),Array.from(this.container.querySelectorAll("button, select")).forEach(i=>{this.attach(i)}),this.quill.on(H.events.EDITOR_CHANGE,()=>{const[i]=this.quill.selection.getRange();this.update(i)})}addHandler(e,n){this.handlers[e]=n}attach(e){let n=Array.from(e.classList).find(s=>s.indexOf("ql-")===0);if(!n)return;if(n=n.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[n]==null&&this.quill.scroll.query(n)==null){kk.warn("ignoring attaching to nonexistent format",n,e);return}const r=e.tagName==="SELECT"?"change":"click";e.addEventListener(r,s=>{let i;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const a=e.options[e.selectedIndex];a.hasAttribute("selected")?i=!1:i=a.value||!1}else e.classList.contains("ql-active")?i=!1:i=e.value||!e.hasAttribute("value"),s.preventDefault();this.quill.focus();const[o]=this.quill.selection.getRange();if(this.handlers[n]!=null)this.handlers[n].call(this,i);else if(this.quill.scroll.query(n).prototype instanceof Mr){if(i=prompt(`Enter ${n}`),!i)return;this.quill.updateContents(new fe().retain(o.index).delete(o.length).insert({[n]:i}),H.sources.USER)}else this.quill.format(n,i,H.sources.USER);this.update(o)}),this.controls.push([n,e])}update(e){const n=e==null?{}:this.quill.getFormat(e);this.controls.forEach(r=>{const[s,i]=r;if(i.tagName==="SELECT"){let o=null;if(e==null)o=null;else if(n[s]==null)o=i.querySelector("option[selected]");else if(!Array.isArray(n[s])){let a=n[s];typeof a=="string"&&(a=a.replace(/"/g,'\\"')),o=i.querySelector(`option[value="${a}"]`)}o==null?(i.value="",i.selectedIndex=-1):o.selected=!0}else if(e==null)i.classList.remove("ql-active"),i.setAttribute("aria-pressed","false");else if(i.hasAttribute("value")){const o=n[s],a=o===i.getAttribute("value")||o!=null&&o.toString()===i.getAttribute("value")||o==null&&!i.getAttribute("value");i.classList.toggle("ql-active",a),i.setAttribute("aria-pressed",a.toString())}else{const o=n[s]!=null;i.classList.toggle("ql-active",o),i.setAttribute("aria-pressed",o.toString())}})}}lI.DEFAULTS={};function Dk(t,e,n){const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add(`ql-${e}`),r.setAttribute("aria-pressed","false"),n!=null?(r.value=n,r.setAttribute("aria-label",`${e}: ${n}`)):r.setAttribute("aria-label",e),t.appendChild(r)}function Cde(t,e){Array.isArray(e[0])||(e=[e]),e.forEach(n=>{const r=document.createElement("span");r.classList.add("ql-formats"),n.forEach(s=>{if(typeof s=="string")Dk(r,s);else{const i=Object.keys(s)[0],o=s[i];Array.isArray(o)?Rde(r,i,o):Dk(r,i,o)}}),t.appendChild(r)})}function Rde(t,e,n){const r=document.createElement("select");r.classList.add(`ql-${e}`),n.forEach(s=>{const i=document.createElement("option");s!==!1?i.setAttribute("value",String(s)):i.setAttribute("selected","selected"),r.appendChild(i)}),t.appendChild(r)}lI.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(t!=null)if(t.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(n=>{this.quill.scroll.query(n,pe.INLINE)!=null&&this.quill.format(n,!1,H.sources.USER)})}else this.quill.removeFormat(t.index,t.length,H.sources.USER)},direction(t){const{align:e}=this.quill.getFormat();t==="rtl"&&e==null?this.quill.format("align","right",H.sources.USER):!t&&e==="right"&&this.quill.format("align",!1,H.sources.USER),this.quill.format("direction",t,H.sources.USER)},indent(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e),r=parseInt(n.indent||0,10);if(t==="+1"||t==="-1"){let s=t==="+1"?1:-1;n.direction==="rtl"&&(s*=-1),this.quill.format("indent",r+s,H.sources.USER)}},link(t){t===!0&&(t=prompt("Enter link URL:")),this.quill.format("link",t,H.sources.USER)},list(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e);t==="check"?n.list==="checked"||n.list==="unchecked"?this.quill.format("list",!1,H.sources.USER):this.quill.format("list","unchecked",H.sources.USER):this.quill.format("list",t,H.sources.USER)}}};const Pde='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',Nde='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',kde='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',Dde='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',Ode='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',Lde='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',Mde='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',Vde='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',Ok='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',jde='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',Fde='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',Bde='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',Ude='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',$de='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',qde='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',zde='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',Wde='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',Hde='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',Gde='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',Kde='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',Qde='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',Yde='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',Xde='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',Jde='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',Zde='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',ehe='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',the='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',nhe='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',rhe='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',she='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',ihe='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',ohe='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',ahe='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',Ip={align:{"":Pde,center:Nde,right:kde,justify:Dde},background:Ode,blockquote:Lde,bold:Mde,clean:Vde,code:Ok,"code-block":Ok,color:jde,direction:{"":Fde,rtl:Bde},formula:Ude,header:{1:$de,2:qde,3:zde,4:Wde,5:Hde,6:Gde},italic:Kde,image:Qde,indent:{"+1":Yde,"-1":Xde},link:Jde,list:{bullet:Zde,check:ehe,ordered:the},script:{sub:nhe,super:rhe},strike:she,table:ihe,underline:ohe,video:ahe},lhe='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let Lk=0;function Mk(t,e){t.setAttribute(e,`${t.getAttribute(e)!=="true"}`)}class L0{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",n=>{switch(n.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),n.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),Mk(this.label,"aria-expanded"),Mk(this.options,"aria-hidden")}buildItem(e){const n=document.createElement("span");n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item");const r=e.getAttribute("value");return r&&n.setAttribute("data-value",r),e.textContent&&n.setAttribute("data-label",e.textContent),n.addEventListener("click",()=>{this.selectItem(n,!0)}),n.addEventListener("keydown",s=>{switch(s.key){case"Enter":this.selectItem(n,!0),s.preventDefault();break;case"Escape":this.escape(),s.preventDefault();break}}),n}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=lhe,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${Lk}`,Lk+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(n=>{const r=this.buildItem(n);e.appendChild(r),n.selected===!0&&this.selectItem(r)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=this.container.querySelector(".ql-selected");e!==r&&(r!=null&&r.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),n&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const r=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(r)}else this.selectItem(null);const n=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}class z3 extends L0{constructor(e,n){super(e),this.label.innerHTML=n,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(r=>{r.classList.add("ql-primary")})}buildItem(e){const n=super.buildItem(e);return n.style.backgroundColor=e.getAttribute("value")||"",n}selectItem(e,n){super.selectItem(e,n);const r=this.label.querySelector(".ql-color-label"),s=e&&e.getAttribute("data-value")||"";r&&(r.tagName==="line"?r.style.stroke=s:r.style.fill=s)}}class W3 extends L0{constructor(e,n){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(r=>{r.innerHTML=n[r.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,n){super.selectItem(e,n);const r=e||this.defaultItem;if(r!=null){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}}const che=t=>{const{overflowY:e}=getComputedStyle(t,null);return e!=="visible"&&e!=="clip"};class H3{constructor(e,n){this.quill=e,this.boundsContainer=n||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,che(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const n=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${n}px`,this.root.style.top=`${r}px`,this.root.classList.remove("ql-flip");const s=this.boundsContainer.getBoundingClientRect(),i=this.root.getBoundingClientRect();let o=0;if(i.right>s.right&&(o=s.right-i.right,this.root.style.left=`${n+o}px`),i.left<s.left&&(o=s.left-i.left,this.root.style.left=`${n+o}px`),i.bottom>s.bottom){const a=i.bottom-i.top,l=e.bottom-e.top+a;this.root.style.top=`${r-l}px`,this.root.classList.add("ql-flip")}return o}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const uhe=[!1,"center","right","justify"],dhe=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],hhe=[!1,"serif","monospace"],fhe=["1","2","3",!1],phe=["small",!1,"large","huge"];class ym extends kd{constructor(e,n){super(e,n);const r=s=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",r);return}this.tooltip!=null&&!this.tooltip.root.contains(s.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(i=>{i.container.contains(s.target)||i.close()})};e.emitter.listenDOM("click",document.body,r)}addModule(e){const n=super.addModule(e);return e==="toolbar"&&this.extendToolbar(n),n}buildButtons(e,n){Array.from(e).forEach(r=>{(r.getAttribute("class")||"").split(/\s+/).forEach(i=>{if(i.startsWith("ql-")&&(i=i.slice(3),n[i]!=null))if(i==="direction")r.innerHTML=n[i][""]+n[i].rtl;else if(typeof n[i]=="string")r.innerHTML=n[i];else{const o=r.value||"";o!=null&&n[i][o]&&(r.innerHTML=n[i][o])}})})}buildPickers(e,n){this.pickers=Array.from(e).map(s=>{if(s.classList.contains("ql-align")&&(s.querySelector("option")==null&&Ph(s,uhe),typeof n.align=="object"))return new W3(s,n.align);if(s.classList.contains("ql-background")||s.classList.contains("ql-color")){const i=s.classList.contains("ql-background")?"background":"color";return s.querySelector("option")==null&&Ph(s,dhe,i==="background"?"#ffffff":"#000000"),new z3(s,n[i])}return s.querySelector("option")==null&&(s.classList.contains("ql-font")?Ph(s,hhe):s.classList.contains("ql-header")?Ph(s,fhe):s.classList.contains("ql-size")&&Ph(s,phe)),new L0(s)});const r=()=>{this.pickers.forEach(s=>{s.update()})};this.quill.on(ce.events.EDITOR_CHANGE,r)}}ym.DEFAULTS=xa({},kd.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");t==null&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""}),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class G3 extends H3{constructor(e,n){super(e,n),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;n!=null?this.textbox.value=n:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const r=this.quill.getBounds(this.quill.selection.savedRange);r!=null&&this.position(r),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:n}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,ce.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,ce.sources.USER)),this.quill.root.scrollTop=n;break}case"video":e=mhe(e);case"formula":{if(!e)break;const n=this.quill.getSelection(!0);if(n!=null){const r=n.index+n.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),e,ce.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(r+1," ",ce.sources.USER),this.quill.setSelection(r+2,ce.sources.USER)}break}}this.textbox.value="",this.hide()}}function mhe(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:t}function Ph(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(r=>{const s=document.createElement("option");r===n?s.setAttribute("selected","selected"):s.setAttribute("value",String(r)),t.appendChild(s)})}const ghe=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class K3 extends G3{constructor(e,n){super(e,n),this.quill.on(ce.events.EDITOR_CHANGE,(r,s,i,o)=>{if(r===ce.events.SELECTION_CHANGE)if(s!=null&&s.length>0&&o===ce.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const a=this.quill.getLines(s.index,s.length);if(a.length===1){const l=this.quill.getBounds(s);l!=null&&this.position(l)}else{const l=a[a.length-1],c=this.quill.getIndex(l),u=Math.min(l.length()-1,s.index+s.length-c),d=this.quill.getBounds(new yc(c,u));d!=null&&this.position(d)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(ce.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const n=this.quill.getBounds(e);n!=null&&this.position(n)}},1)})}cancel(){this.show()}position(e){const n=super.position(e),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",n!==0&&(r.style.marginLeft=`${-1*n-r.offsetWidth/2}px`),n}}ie(K3,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class Q3 extends ym{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=ghe),super(e,n),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new K3(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),Ip),this.buildPickers(e.container.querySelectorAll("select"),Ip))}}Q3.DEFAULTS=xa({},ym.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,H.sources.USER)}}}}});const yhe=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class Y3 extends G3{constructor(){super(...arguments);ie(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",n=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),n.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",n=>{if(this.linkRange!=null){const r=this.linkRange;this.restoreFocus(),this.quill.formatText(r,"link",!1,ce.sources.USER),delete this.linkRange}n.preventDefault(),this.hide()}),this.quill.on(ce.events.SELECTION_CHANGE,(n,r,s)=>{if(n!=null){if(n.length===0&&s===ce.sources.USER){const[i,o]=this.quill.scroll.descendant(ca,n.index);if(i!=null){this.linkRange=new yc(n.index-o,i.length());const a=ca.formats(i.domNode);this.preview.textContent=a,this.preview.setAttribute("href",a),this.show();const l=this.quill.getBounds(this.linkRange);l!=null&&this.position(l);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}ie(Y3,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class X3 extends ym{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=yhe),super(e,n),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),Ip),this.buildPickers(e.container.querySelectorAll("select"),Ip),this.tooltip=new Y3(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(n,r)=>{e.handlers.link.call(e,!r.format.link)}))}}X3.DEFAULTS=xa({},ym.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const e=this.quill.getSelection();if(e==null||e.length===0)return;let n=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(n)&&n.indexOf("mailto:")!==0&&(n=`mailto:${n}`);const{tooltip:r}=this.quill.theme;r.edit("link",n)}else this.quill.format("link",!1,H.sources.USER)}}}}});H.register({"attributors/attribute/direction":P3,"attributors/class/align":A3,"attributors/class/background":Oue,"attributors/class/color":Due,"attributors/class/direction":N3,"attributors/class/font":O3,"attributors/class/size":M3,"attributors/style/align":C3,"attributors/style/background":nI,"attributors/style/color":tI,"attributors/style/direction":k3,"attributors/style/font":L3,"attributors/style/size":V3},!0);H.register({"formats/align":A3,"formats/direction":N3,"formats/indent":Tde,"formats/background":nI,"formats/color":tI,"formats/font":O3,"formats/size":M3,"formats/blockquote":KE,"formats/code-block":Mn,"formats/header":QE,"formats/list":gm,"formats/bold":Sp,"formats/code":rI,"formats/italic":YE,"formats/link":ca,"formats/script":XE,"formats/strike":JE,"formats/underline":ZE,"formats/formula":Yg,"formats/image":Sde,"formats/video":Xg,"modules/syntax":q3,"modules/table":Ade,"modules/toolbar":lI,"themes/bubble":Q3,"themes/snow":X3,"ui/icons":Ip,"ui/picker":L0,"ui/icon-picker":W3,"ui/color-picker":z3,"ui/tooltip":H3},!0);const vhe=[[{font:["serif",""]}],[{size:["large","huge"]}],[{header:[1,2,3,!1]}],["bold","italic","underline"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],[{list:"ordered"},{list:"bullet"}],["image"]],whe=({issave:t,setdata:e,setIssave:n,setWord:r})=>{const[s,i]=_.useState();_.useEffect(()=>{if(!s||!t)return;const a=s.getContents();e(a.ops),n(!1)},[t]);const o=_.useCallback(a=>{if(a==null||!a)return;a.innerHTML="";const l=document.createElement("div");l.id="editor",a.appendChild(l);const c=new H("#editor",{modules:{toolbar:{container:vhe,handlers:{image:function(){const u=document.createElement("input");u.setAttribute("type","file"),u.setAttribute("accept","image/*"),u.click(),u.onchange=async()=>{var f;const d=(f=u==null?void 0:u.files)==null?void 0:f[0];if(d){const p=new FormData;p.append("file",d);const g=await V5().UploadImg(p),m=this.quill.getSelection();m&&this.quill.insertEmbed(m.index,"image",g.url)}}}}}},theme:"snow"});i(c)},[]);return _.useEffect(()=>{const a=()=>{const l=s==null?void 0:s.getText();l!=null&&l.split(/\s+/)&&r((l==null?void 0:l.split(/\s+/).length)-1)};return s==null||s.on(H.events.TEXT_CHANGE,a),()=>{s==null||s.off(H.events.TEXT_CHANGE,a)}},[s]),y.jsx("div",{id:"container",ref:o,className:" w-full bg-white-4 flex-1 min-w-0 "})},_he=({children:t})=>y.jsx("div",{className:"  z-50 w-screen h-screen absolute top-0 left-0 flex items-center justify-center bg-black-1/40",children:t});var Vk;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(Vk||(Vk={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jk;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(jk||(jk={}));var Fk;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Fk||(Fk={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=["user","model","function","system"];var Uk;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(Uk||(Uk={}));var $k;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})($k||($k={}));var qk;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(qk||(qk={}));var zk;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(zk||(zk={}));var bf;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER"})(bf||(bf={}));var Wk;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(Wk||(Wk={}));var Hk;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(Hk||(Hk={}));var Gk;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Gk||(Gk={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class lu extends or{constructor(e,n){super(e),this.response=n}}class J3 extends or{constructor(e,n,r,s){super(e),this.status=n,this.statusText=r,this.errorDetails=s}}class ba extends or{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ehe="https://generativelanguage.googleapis.com",xhe="v1beta",bhe="0.21.0",The="genai-js";var vc;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(vc||(vc={}));class She{constructor(e,n,r,s,i){this.model=e,this.task=n,this.apiKey=r,this.stream=s,this.requestOptions=i}toString(){var e,n;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||xhe;let i=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||Ehe}/${r}/${this.model}:${this.task}`;return this.stream&&(i+="?alt=sse"),i}}function Ihe(t){const e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${The}/${bhe}`),e.join(" ")}async function Ahe(t){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",Ihe(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let r=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(s){throw new ba(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${s.message}`)}for(const[s,i]of r.entries()){if(s==="x-goog-api-key")throw new ba(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new ba(`Header name ${s} can only be set using the apiClient field`);n.append(s,i)}}return n}async function Che(t,e,n,r,s,i){const o=new She(t,e,n,r,i);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},khe(i)),{method:"POST",headers:await Ahe(o),body:s})}}async function vm(t,e,n,r,s,i={},o=fetch){const{url:a,fetchOptions:l}=await Che(t,e,n,r,s,i);return Rhe(a,l,o)}async function Rhe(t,e,n=fetch){let r;try{r=await n(t,e)}catch(s){Phe(s,t)}return r.ok||await Nhe(r,t),r}function Phe(t,e){let n=t;throw t instanceof J3||t instanceof ba||(n=new or(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function Nhe(t,e){let n="",r;try{const s=await t.json();n=s.error.message,s.error.details&&(n+=` ${JSON.stringify(s.error.details)}`,r=s.error.details)}catch{}throw new J3(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,r)}function khe(t){const e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){const n=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Jg(t.candidates[0]))throw new lu(`${Qo(t)}`,t);return Dhe(t)}else if(t.promptFeedback)throw new lu(`Text not available. ${Qo(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Jg(t.candidates[0]))throw new lu(`${Qo(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Kk(t)[0]}else if(t.promptFeedback)throw new lu(`Function call not available. ${Qo(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Jg(t.candidates[0]))throw new lu(`${Qo(t)}`,t);return Kk(t)}else if(t.promptFeedback)throw new lu(`Function call not available. ${Qo(t)}`,t)},t}function Dhe(t){var e,n,r,s;const i=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const o of(s=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||s===void 0?void 0:s.parts)o.text&&i.push(o.text),o.executableCode&&i.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&i.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return i.length>0?i.join(""):""}function Kk(t){var e,n,r,s;const i=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const o of(s=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||s===void 0?void 0:s.parts)o.functionCall&&i.push(o.functionCall);if(i.length>0)return i}const Ohe=[bf.RECITATION,bf.SAFETY,bf.LANGUAGE];function Jg(t){return!!t.finishReason&&Ohe.includes(t.finishReason)}function Qo(t){var e,n,r;let s="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)s+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(s+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((r=t.candidates)===null||r===void 0)&&r[0]){const i=t.candidates[0];Jg(i)&&(s+=`Candidate was blocked due to ${i.finishReason}`,i.finishMessage&&(s+=`: ${i.finishMessage}`))}return s}function Ap(t){return this instanceof Ap?(this.v=t,this):new Ap(t)}function Lhe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(f){r[f]&&(s[f]=function(p){return new Promise(function(g,m){i.push([f,p,g,m])>1||a(f,p)})})}function a(f,p){try{l(r[f](p))}catch(g){d(i[0][3],g)}}function l(f){f.value instanceof Ap?Promise.resolve(f.value.v).then(c,u):d(i[0][2],f)}function c(f){a("next",f)}function u(f){a("throw",f)}function d(f,p){f(p),i.shift(),i.length&&a(i[0][0],i[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Mhe(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=Fhe(e),[r,s]=n.tee();return{stream:jhe(r),response:Vhe(s)}}async function Vhe(t){const e=[],n=t.getReader();for(;;){const{done:r,value:s}=await n.read();if(r)return cI(Bhe(e));e.push(s)}}function jhe(t){return Lhe(this,arguments,function*(){const n=t.getReader();for(;;){const{value:r,done:s}=yield Ap(n.read());if(s)break;yield yield Ap(cI(r))}})}function Fhe(t){const e=t.getReader();return new ReadableStream({start(r){let s="";return i();function i(){return e.read().then(({value:o,done:a})=>{if(a){if(s.trim()){r.error(new or("Failed to parse stream"));return}r.close();return}s+=o;let l=s.match(Qk),c;for(;l;){try{c=JSON.parse(l[1])}catch{r.error(new or(`Error parsing JSON response: "${l[1]}"`));return}r.enqueue(c),s=s.substring(l[0].length),l=s.match(Qk)}return i()})}}})}function Bhe(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const r of t){if(r.candidates)for(const s of r.candidates){const i=s.index;if(n.candidates||(n.candidates=[]),n.candidates[i]||(n.candidates[i]={index:s.index}),n.candidates[i].citationMetadata=s.citationMetadata,n.candidates[i].groundingMetadata=s.groundingMetadata,n.candidates[i].finishReason=s.finishReason,n.candidates[i].finishMessage=s.finishMessage,n.candidates[i].safetyRatings=s.safetyRatings,s.content&&s.content.parts){n.candidates[i].content||(n.candidates[i].content={role:s.content.role||"user",parts:[]});const o={};for(const a of s.content.parts)a.text&&(o.text=a.text),a.functionCall&&(o.functionCall=a.functionCall),a.executableCode&&(o.executableCode=a.executableCode),a.codeExecutionResult&&(o.codeExecutionResult=a.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),n.candidates[i].content.parts.push(o)}}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z3(t,e,n,r){const s=await vm(e,vc.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),r);return Mhe(s)}async function eB(t,e,n,r){const i=await(await vm(e,vc.GENERATE_CONTENT,t,!1,JSON.stringify(n),r)).json();return{response:cI(i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tB(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function Cp(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return Uhe(e)}function Uhe(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,s=!1;for(const i of t)"functionResponse"in i?(n.parts.push(i),s=!0):(e.parts.push(i),r=!0);if(r&&s)throw new or("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!s)throw new or("No content is provided for sending chat message.");return r?e:n}function $he(t,e){var n;let r={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const s=t.generateContentRequest!=null;if(t.contents){if(s)throw new ba("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=t.contents}else if(s)r=Object.assign(Object.assign({},r),t.generateContentRequest);else{const i=Cp(t);r.contents=[i]}return{generateContentRequest:r}}function Yk(t){let e;return t.contents?e=t:e={contents:[Cp(t)]},t.systemInstruction&&(e.systemInstruction=tB(t.systemInstruction)),e}function qhe(t){return typeof t=="string"||Array.isArray(t)?{content:Cp(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],zhe={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Whe(t){let e=!1;for(const n of t){const{role:r,parts:s}=n;if(!e&&r!=="user")throw new or(`First content should be with role 'user', got ${r}`);if(!Bk.includes(r))throw new or(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(Bk)}`);if(!Array.isArray(s))throw new or("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new or("Each Content should have at least one part");const i={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const a of s)for(const l of Xk)l in a&&(i[l]+=1);const o=zhe[r];for(const a of Xk)if(!o.includes(a)&&i[a]>0)throw new or(`Content with role '${r}' can't contain '${a}' part`);e=!0}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk="SILENT_ERROR";class Hhe{constructor(e,n,r,s={}){this.model=n,this.params=r,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r!=null&&r.history&&(Whe(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var r,s,i,o,a,l;await this._sendPromise;const c=Cp(e),u={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(a=this.params)===null||a===void 0?void 0:a.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},d=Object.assign(Object.assign({},this._requestOptions),n);let f;return this._sendPromise=this._sendPromise.then(()=>eB(this._apiKey,this.model,u,d)).then(p=>{var g;if(p.response.candidates&&p.response.candidates.length>0){this._history.push(c);const m=Object.assign({parts:[],role:"model"},(g=p.response.candidates)===null||g===void 0?void 0:g[0].content);this._history.push(m)}else{const m=Qo(p.response);m&&console.warn(`sendMessage() was unsuccessful. ${m}. Inspect response object for details.`)}f=p}),await this._sendPromise,f}async sendMessageStream(e,n={}){var r,s,i,o,a,l;await this._sendPromise;const c=Cp(e),u={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(a=this.params)===null||a===void 0?void 0:a.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},d=Object.assign(Object.assign({},this._requestOptions),n),f=Z3(this._apiKey,this.model,u,d);return this._sendPromise=this._sendPromise.then(()=>f).catch(p=>{throw new Error(Jk)}).then(p=>p.response).then(p=>{if(p.candidates&&p.candidates.length>0){this._history.push(c);const g=Object.assign({},p.candidates[0].content);g.role||(g.role="model"),this._history.push(g)}else{const g=Qo(p);g&&console.warn(`sendMessageStream() was unsuccessful. ${g}. Inspect response object for details.`)}}).catch(p=>{p.message!==Jk&&console.error(p)}),f}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ghe(t,e,n,r){return(await vm(e,vc.COUNT_TOKENS,t,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Khe(t,e,n,r){return(await vm(e,vc.EMBED_CONTENT,t,!1,JSON.stringify(n),r)).json()}async function Qhe(t,e,n,r){const s=n.requests.map(o=>Object.assign(Object.assign({},o),{model:e}));return(await vm(e,vc.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:s}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,n,r={}){this.apiKey=e,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=tB(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var r;const s=Yk(e),i=Object.assign(Object.assign({},this._requestOptions),n);return eB(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},s),i)}async generateContentStream(e,n={}){var r;const s=Yk(e),i=Object.assign(Object.assign({},this._requestOptions),n);return Z3(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},s),i)}startChat(e){var n;return new Hhe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const r=$he(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),n);return Ghe(this.apiKey,this.model,r,s)}async embedContent(e,n={}){const r=qhe(e),s=Object.assign(Object.assign({},this._requestOptions),n);return Khe(this.apiKey,this.model,r,s)}async batchEmbedContents(e,n={}){const r=Object.assign(Object.assign({},this._requestOptions),n);return Qhe(this.apiKey,this.model,e,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yhe{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new or("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Zk(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,r){if(!e.name)throw new ba("Cached content must contain a `name` field.");if(!e.model)throw new ba("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const o of s)if(n!=null&&n[o]&&e[o]&&(n==null?void 0:n[o])!==e[o]){if(o==="model"){const a=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,l=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(a===l)continue}throw new ba(`Different value for "${o}" specified in modelParams (${n[o]}) and cachedContent (${e[o]})`)}const i=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new Zk(this.apiKey,i,r)}}const Xhe=new Yhe("AIzaSyBO3GPet4N0deLoXGLHsvsdQvS_AYye7zM"),Jhe=Xhe.getGenerativeModel({model:"gemini-1.5-flash"});async function Zhe(t){try{return(await Jhe.generateContent(t)).response.text()}catch(e){console.log(e)}}async function efe(t){const e=[];for(let r=0;r<4;r++){const s=`${t} (Response ${r+1})`;e.push(Zhe(s))}return await Promise.all(e)}function tfe({setData:t,selectedText:e,isopen:n,setIsopen:r}){const[s,i]=_.useState("short"),[o,a]=_.useState("next-scene"),[l,c]=_.useState("fantasy");async function u(){const d=`Generate a ${s} plot for this story: "${e}". Type: ${o}. Genre: ${l}.`,f=await efe(d);f.every(p=>p!=null)&&(t(f),console.log(f)),r(!1)}return y.jsx(y.Fragment,{children:y.jsx(k5,{open:n,onOpenChange:r,children:y.jsxs(MS,{className:"w-full max-sm:max-w-lg p-5 sm:p-6",children:[y.jsx(O5,{children:y.jsx(M5,{children:"Generate Plot Suggestions"})}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"bg-white-3 rounded-md w-fit h-fit p-5 mt-6",children:[y.jsx("span",{className:"text-black-2",children:"Selected Text :"}),y.jsx("p",{children:e})]}),y.jsxs("div",{className:"border-t-2 flex flex-col sm:flex-row gap-4 sm:gap-10 items-center p-5",children:[y.jsxs("div",{className:"space-y-2 w-full",children:[y.jsx("label",{className:"block",children:"Length"}),y.jsxs("select",{value:s,className:"w-full border-2 border-black-2 p-2 rounded-md",onChange:d=>i(d.target.value),children:[y.jsx("option",{value:"short",children:"Short"}),y.jsx("option",{value:"medium",children:"Medium"}),y.jsx("option",{value:"long",children:"Long"})]})]}),y.jsxs("div",{className:"space-y-2 w-full",children:[y.jsx("label",{className:"block",children:"Type"}),y.jsxs("select",{className:"w-full border-2 border-black-2 p-2 rounded-md",value:o,onChange:d=>a(d.target.value),children:[y.jsx("option",{value:"next-scene",children:"Next Scene"}),y.jsx("option",{value:"dialogue",children:"Character Dialogue"}),y.jsx("option",{value:"twist",children:"Plot Twist"}),y.jsx("option",{value:"subplot",children:"Subplot"})]})]}),y.jsxs("div",{className:"space-y-2 w-full",children:[y.jsx("label",{className:"block",children:"Genre"}),y.jsxs("select",{className:"w-full border-2 border-black-2 p-2 rounded-md",value:l,onChange:d=>c(d.target.value),children:[y.jsx("option",{value:"fantasy",children:"Fantasy"}),y.jsx("option",{value:"adventure",children:"Adventure"}),y.jsx("option",{value:"romance",children:"Romance"}),y.jsx("option",{value:"mystery",children:"Mystery"}),y.jsx("option",{value:"sci-fi",children:"Sci-Fi"})]})]})]})]}),y.jsxs(L5,{className:"flex justify-end space-x-4",children:[y.jsx(Wt,{onClick:()=>r(!1),children:"Cancel"}),y.jsx(Wt,{variant:"outline",onClick:u,children:"Generate"})]})]})})})}const nfe=({selectedText:t,setSelectedText:e})=>{const n=_.useRef(null),[r,s]=_.useState(!1),[i,o]=_.useState([]),[a,l]=_.useState(!0);async function c(){var g;const p=(g=window.getSelection())==null?void 0:g.toString();if(!p){Pr({title:"Select Text",description:"You need to select a text or a paragraph"});return}e(p),s(!0)}function u(){o([])}function d(){l(!a)}function f(){var g;const p=document.createElement("textarea");n&&(p.value=((g=n.current)==null?void 0:g.textContent)||"",document.body.appendChild(p),p.select(),p.setSelectionRange(0,99999),navigator.clipboard.writeText(p.value).then(()=>{Pr({description:"Text copied to clipboard"})}).catch(()=>{Pr({description:"Failed to copy text:"})}),document.body.removeChild(p))}return y.jsxs("div",{className:dc(" h-[500px] max-h-[500px] pb-2   bg-white-1 border border-[#ccc] flex flex-col gap-3 rounded-tl-[20px] rounded-tr-[20px]",{"w-[400px] max-lg:w-[320px] max-md:w-full":a,"w-fit":!a}),children:[y.jsxs("div",{className:"py-3  px-4  w-full flex flex-row justify-between  items-center ",children:[y.jsx(Kl.arrow,{direction:a?"left":"right",CloseOpen:d}),a?y.jsx("span",{className:"text-lg font-semibold text-black-2 ",children:"History"}):"",a?y.jsx("div",{className:" p-2 rounded-full cursor-pointer hover:border hover:bg-orange-2 hover:border-orange-1 transition-colors",onClick:u,children:y.jsx("img",{src:"../public/delete.svg",width:"20px"})}):""]}),a?y.jsx("div",{className:dc("px-2 flex-1  overflow-auto flex flex-col gap-4",{" justify-center items-center":a}),children:i.length>0?i.map((p,g)=>y.jsxs("div",{className:" bg-white-3 px-4 py-3 rounded-lg flex flex-col gap-3",children:[y.jsx("div",{className:" w-full flex flex-row justify-end",children:y.jsx("div",{className:" p-2 rounded-full w-fit hover:bg-orange-2 hover:border hover:border-orange-1  cursor-pointer transition-colors",onClick:f,children:y.jsx("img",{src:"../public/copy.svg",width:"20px"})})}),y.jsx("p",{ref:n,className:" text-black-2",children:p})]},g)):y.jsxs("div",{className:" flex flex-row gap-3 items-center",children:[y.jsx("img",{src:"../public/clock.svg",width:"40px"}),y.jsx("span",{className:" text-lg text-white-2 font-semibold",children:"Empty"})]})}):"",a?y.jsx("div",{className:" w-full px-2",children:y.jsx(Wt,{className:" rounded-none  w-full bg-orange-1 text-white-1 border border-orange-1 hover:bg-orange-2 hover:text-black-2 ",onClick:c,children:"Generate"})}):"",y.jsx(um,{}),y.jsx(tfe,{setData:o,selectedText:t,isopen:r,setIsopen:s})]})};function rfe({setTitle:t}){const e=_.useRef(null),n=()=>{const r=e.current;r&&(r.style.height="auto",r.style.height=`${r.scrollHeight}px`)};return y.jsx("textarea",{ref:e,onInput:n,onChange:r=>t(r.target.value),className:" border-b-2 border-[#ccc] outline-none   text-3xl w-full bg-white-3",style:{minHeight:"40px",overflow:"hidden",resize:"none"},placeholder:"Title..."})}const sfe=Os.firestore.Timestamp,ife=()=>{const{currentUser:t}=$s(),[e,n]=_.useState(0),[r,s]=_.useState(""),[i,o]=_.useState(!1),[a,l]=_.useState([]),[c,u]=_.useState(!1),[d,f]=_.useState(""),{sessionId:p}=Ha(),g=jp(),[m,w]=_.useState(""),v=fs();function E(){o(!0)}async function b(){if(p&&m&&(m=="story"&&v("/"),m=="new"))try{u(!0),await Pe.collection("WrittenStories").doc(p).delete(),v("/")}catch(C){console.log(C)}}return _.useEffect(()=>{var R;const C=(R=g==null?void 0:g.state)==null?void 0:R.from;w(C)},[g]),_.useEffect(()=>{async function C(){var R;if(!r){Pr({description:"Give a title please"});return}if(typeof a[0].insert=="string"&&((R=a[0].insert)==null?void 0:R.length)<10){Pr({description:"first line over 10 words please"});return}try{u(!0);const O=Pe.collection("Parts").doc().id;await Pe.collection("Parts").doc(O).set({title:r,data:a,storyId:p,time:sfe.now()}),await Vre(t,O)}catch(O){console.log(O)}finally{u(!1),v("/")}}C()},[a]),y.jsxs("div",{className:" w-full bg-white-3 ",children:[y.jsx("header",{className:" m-auto max-w-[1400px] px-5",children:y.jsxs("div",{className:" py-4 flex",children:[y.jsxs("div",{className:" flex flex-row gap-3 flex-1",children:[y.jsx("img",{src:"../public/logo.svg",width:40,height:40}),y.jsxs("div",{className:"flex flex-col ",children:[y.jsx("h1",{className:" text-lg",children:r}),y.jsxs("div",{className:`\r
                    flex flex-row\r
                      text-black-2 gap-1  items-end\r
                    `,children:[y.jsx("span",{children:e}),y.jsx("span",{children:"words"})]})]})]}),y.jsxs("div",{className:"flex flex-row-reverse gap-3",children:[y.jsx("div",{children:y.jsx("img",{src:t!=null&&t.photoURL?t==null?void 0:t.photoURL:"",className:" rounded-full w-[40px]"})}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx(Wt,{variant:"outline",onClick:b,children:"cancel"}),y.jsx(Wt,{variant:"default",onClick:E,children:"Save"})]})]})]})}),y.jsxs("main",{className:"m-auto mt-4  max-w-[1300px] px-5",children:[y.jsx(rfe,{setTitle:s}),y.jsxs("div",{className:" flex flex-row w-full gap-3 mt-4 max-md:flex-col",children:[y.jsx(whe,{issave:i,setdata:l,setIssave:o,setWord:n}),y.jsx(nfe,{selectedText:d,setSelectedText:f})]})]}),c?y.jsx(_he,{children:y.jsx("div",{className:" flex gap-3 text-xl",children:y.jsx(T0,{size:"60px"})})}):"",y.jsx(um,{})]})},ofe=({Data:t})=>{const[e,n]=_.useState([]);return _.useEffect(()=>{if(t){const{data:r}=t;n(r),console.log(r)}},[t]),y.jsx("div",{className:" text-lg leading-relaxed",children:e.map(r=>{let s="";if(r.hasOwnProperty("attributes")&&(s=xne(r.attributes)),typeof r.insert=="object"){const i=r.insert;return y.jsx("div",{className:"flex border-2 border-black-2 rounded-md mt-4 mb-4 justify-center items-center h-fit py-6 px-2.5",children:y.jsx("img",{src:i.image,width:400,alt:"img",className:" rounded-md"})})}return y.jsx("div",{className:`${s}`,children:r.insert})})})},afe=({owner:t})=>{const{author:e}=rm(t);return y.jsxs("div",{className:"flex  items-center gap-3",children:[y.jsx("img",{src:e?e.PhotoUrl:"",alt:"profile",width:"50px",className:" rounded-full"}),y.jsx("h1",{className:" text-lg text-black-2",children:e?e.name:""})]})};function eD(t,[e,n]){return Math.min(n,Math.max(e,t))}function Ut(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function tD(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function lfe(...t){return e=>{let n=!1;const r=t.map(s=>{const i=tD(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():tD(t[s],null)}}}}function bn(...t){return _.useCallback(lfe(...t),t)}function cfe(t){const e=t+"CollectionProvider",[n,r]=Jd(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:g,children:m}=p,w=yn.useRef(null),v=yn.useRef(new Map).current;return y.jsx(s,{scope:g,itemMap:v,collectionRef:w,children:m})};o.displayName=e;const a=t+"CollectionSlot",l=yn.forwardRef((p,g)=>{const{scope:m,children:w}=p,v=i(a,m),E=bn(g,v.collectionRef);return y.jsx(lo,{ref:E,children:w})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",d=yn.forwardRef((p,g)=>{const{scope:m,children:w,...v}=p,E=yn.useRef(null),b=bn(g,E),C=i(c,m);return yn.useEffect(()=>(C.itemMap.set(E,{ref:E,...v}),()=>void C.itemMap.delete(E))),y.jsx(lo,{[u]:"",ref:b,children:w})});d.displayName=c;function f(p){const g=i(t+"CollectionConsumer",p);return yn.useCallback(()=>{const w=g.collectionRef.current;if(!w)return[];const v=Array.from(w.querySelectorAll(`[${u}]`));return Array.from(g.itemMap.values()).sort((C,R)=>v.indexOf(C.ref.current)-v.indexOf(R.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},f,r]}var ufe=_.createContext(void 0);function dfe(t){const e=_.useContext(ufe);return t||e||"ltr"}var hfe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Gt=hfe.reduce((t,e)=>{const n=_.forwardRef((r,s)=>{const{asChild:i,...o}=r,a=i?lo:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(a,{...o,ref:s})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function ffe(t,e){t&&go.flushSync(()=>t.dispatchEvent(e))}var pfe="DismissableLayer",ex="dismissableLayer.update",mfe="dismissableLayer.pointerDownOutside",gfe="dismissableLayer.focusOutside",nD,nB=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),rB=_.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=_.useContext(nB),[u,d]=_.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=_.useState({}),g=bn(e,I=>d(I)),m=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(w),E=u?m.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,C=E>=v,R=wfe(I=>{const A=I.target,P=[...c.branches].some(D=>D.contains(A));!C||P||(s==null||s(I),o==null||o(I),I.defaultPrevented||a==null||a())},f),O=_fe(I=>{const A=I.target;[...c.branches].some(D=>D.contains(A))||(i==null||i(I),o==null||o(I),I.defaultPrevented||a==null||a())},f);return gS(I=>{E===c.layers.size-1&&(r==null||r(I),!I.defaultPrevented&&a&&(I.preventDefault(),a()))},f),_.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(nD=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),rD(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=nD)}},[u,f,n,c]),_.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),rD())},[u,c]),_.useEffect(()=>{const I=()=>p({});return document.addEventListener(ex,I),()=>document.removeEventListener(ex,I)},[]),y.jsx(Gt.div,{...l,ref:g,style:{pointerEvents:b?C?"auto":"none":void 0,...t.style},onFocusCapture:Ut(t.onFocusCapture,O.onFocusCapture),onBlurCapture:Ut(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:Ut(t.onPointerDownCapture,R.onPointerDownCapture)})});rB.displayName=pfe;var yfe="DismissableLayerBranch",vfe=_.forwardRef((t,e)=>{const n=_.useContext(nB),r=_.useRef(null),s=bn(e,r);return _.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),y.jsx(Gt.div,{...t,ref:s})});vfe.displayName=yfe;function wfe(t,e=globalThis==null?void 0:globalThis.document){const n=Jt(t),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){sB(mfe,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function _fe(t,e=globalThis==null?void 0:globalThis.document){const n=Jt(t),r=_.useRef(!1);return _.useEffect(()=>{const s=i=>{i.target&&!r.current&&sB(gfe,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function rD(){const t=new CustomEvent(ex);document.dispatchEvent(t)}function sB(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?ffe(s,i):s.dispatchEvent(i)}var w_="focusScope.autoFocusOnMount",__="focusScope.autoFocusOnUnmount",sD={bubbles:!1,cancelable:!0},Efe="FocusScope",iB=_.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=_.useState(null),c=Jt(s),u=Jt(i),d=_.useRef(null),f=bn(e,m=>l(m)),p=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let m=function(b){if(p.paused||!a)return;const C=b.target;a.contains(C)?d.current=C:Ho(d.current,{select:!0})},w=function(b){if(p.paused||!a)return;const C=b.relatedTarget;C!==null&&(a.contains(C)||Ho(d.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const R of b)R.removedNodes.length>0&&Ho(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",w);const E=new MutationObserver(v);return a&&E.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",w),E.disconnect()}}},[r,a,p.paused]),_.useEffect(()=>{if(a){oD.add(p);const m=document.activeElement;if(!a.contains(m)){const v=new CustomEvent(w_,sD);a.addEventListener(w_,c),a.dispatchEvent(v),v.defaultPrevented||(xfe(Afe(oB(a)),{select:!0}),document.activeElement===m&&Ho(a))}return()=>{a.removeEventListener(w_,c),setTimeout(()=>{const v=new CustomEvent(__,sD);a.addEventListener(__,u),a.dispatchEvent(v),v.defaultPrevented||Ho(m??document.body,{select:!0}),a.removeEventListener(__,u),oD.remove(p)},0)}}},[a,c,u,p]);const g=_.useCallback(m=>{if(!n&&!r||p.paused)return;const w=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(w&&v){const E=m.currentTarget,[b,C]=bfe(E);b&&C?!m.shiftKey&&v===C?(m.preventDefault(),n&&Ho(b,{select:!0})):m.shiftKey&&v===b&&(m.preventDefault(),n&&Ho(C,{select:!0})):v===E&&m.preventDefault()}},[n,r,p.paused]);return y.jsx(Gt.div,{tabIndex:-1,...o,ref:f,onKeyDown:g})});iB.displayName=Efe;function xfe(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ho(r,{select:e}),document.activeElement!==n)return}function bfe(t){const e=oB(t),n=iD(e,t),r=iD(e.reverse(),t);return[n,r]}function oB(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function iD(t,e){for(const n of t)if(!Tfe(n,{upTo:e}))return n}function Tfe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Sfe(t){return t instanceof HTMLInputElement&&"select"in t}function Ho(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Sfe(t)&&e&&t.select()}}var oD=Ife();function Ife(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=aD(t,e),t.unshift(e)},remove(e){var n;t=aD(t,e),(n=t[0])==null||n.resume()}}}function aD(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Afe(t){return t.filter(e=>e.tagName!=="A")}const Cfe=["top","right","bottom","left"],Ba=Math.min,br=Math.max,cv=Math.round,hg=Math.floor,mi=t=>({x:t,y:t}),Rfe={left:"right",right:"left",bottom:"top",top:"bottom"},Pfe={start:"end",end:"start"};function tx(t,e,n){return br(t,Ba(e,n))}function fo(t,e){return typeof t=="function"?t(e):t}function po(t){return t.split("-")[0]}function eh(t){return t.split("-")[1]}function uI(t){return t==="x"?"y":"x"}function dI(t){return t==="y"?"height":"width"}function Ua(t){return["top","bottom"].includes(po(t))?"y":"x"}function hI(t){return uI(Ua(t))}function Nfe(t,e,n){n===void 0&&(n=!1);const r=eh(t),s=hI(t),i=dI(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=uv(o)),[o,uv(o)]}function kfe(t){const e=uv(t);return[nx(t),e,nx(e)]}function nx(t){return t.replace(/start|end/g,e=>Pfe[e])}function Dfe(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function Ofe(t,e,n,r){const s=eh(t);let i=Dfe(po(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(nx)))),i}function uv(t){return t.replace(/left|right|bottom|top/g,e=>Rfe[e])}function Lfe(t){return{top:0,right:0,bottom:0,left:0,...t}}function aB(t){return typeof t!="number"?Lfe(t):{top:t,right:t,bottom:t,left:t}}function dv(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function lD(t,e,n){let{reference:r,floating:s}=t;const i=Ua(e),o=hI(e),a=dI(o),l=po(e),c=i==="y",u=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let p;switch(l){case"top":p={x:u,y:r.y-s.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-s.width,y:d};break;default:p={x:r.x,y:r.y}}switch(eh(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const Mfe=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:d}=lD(c,r,l),f=r,p={},g=0;for(let m=0;m<a.length;m++){const{name:w,fn:v}=a[m],{x:E,y:b,data:C,reset:R}=await v({x:u,y:d,initialPlacement:r,placement:f,strategy:s,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});u=E??u,d=b??d,p={...p,[w]:{...p[w],...C}},R&&g<=50&&(g++,typeof R=="object"&&(R.placement&&(f=R.placement),R.rects&&(c=R.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):R.rects),{x:u,y:d}=lD(c,f,l)),m=-1)}return{x:u,y:d,placement:f,strategy:s,middlewareData:p}};async function Rp(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=fo(e,t),g=aB(p),w=a[f?d==="floating"?"reference":"floating":d],v=dv(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(w)))==null||n?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),E=d==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),C=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},R=dv(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:E,offsetParent:b,strategy:l}):E);return{top:(v.top-R.top+g.top)/C.y,bottom:(R.bottom-v.bottom+g.bottom)/C.y,left:(v.left-R.left+g.left)/C.x,right:(R.right-v.right+g.right)/C.x}}const Vfe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=fo(t,e)||{};if(c==null)return{};const d=aB(u),f={x:n,y:r},p=hI(s),g=dI(p),m=await o.getDimensions(c),w=p==="y",v=w?"top":"left",E=w?"bottom":"right",b=w?"clientHeight":"clientWidth",C=i.reference[g]+i.reference[p]-f[p]-i.floating[g],R=f[p]-i.reference[p],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let I=O?O[b]:0;(!I||!await(o.isElement==null?void 0:o.isElement(O)))&&(I=a.floating[b]||i.floating[g]);const A=C/2-R/2,P=I/2-m[g]/2-1,D=Ba(d[v],P),M=Ba(d[E],P),V=D,L=I-m[g]-M,W=I/2-m[g]/2+A,oe=tx(V,W,L),re=!l.arrow&&eh(s)!=null&&W!==oe&&i.reference[g]/2-(W<V?D:M)-m[g]/2<0,Z=re?W<V?W-V:W-L:0;return{[p]:f[p]+Z,data:{[p]:oe,centerOffset:W-oe-Z,...re&&{alignmentOffset:Z}},reset:re}}}),jfe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...w}=fo(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const v=po(s),E=Ua(a),b=po(a)===a,C=await(l.isRTL==null?void 0:l.isRTL(c.floating)),R=f||(b||!m?[uv(a)]:kfe(a)),O=g!=="none";!f&&O&&R.push(...Ofe(a,m,g,C));const I=[a,...R],A=await Rp(e,w),P=[];let D=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&P.push(A[v]),d){const W=Nfe(s,o,C);P.push(A[W[0]],A[W[1]])}if(D=[...D,{placement:s,overflows:P}],!P.every(W=>W<=0)){var M,V;const W=(((M=i.flip)==null?void 0:M.index)||0)+1,oe=I[W];if(oe)return{data:{index:W,overflows:D},reset:{placement:oe}};let re=(V=D.filter(Z=>Z.overflows[0]<=0).sort((Z,U)=>Z.overflows[1]-U.overflows[1])[0])==null?void 0:V.placement;if(!re)switch(p){case"bestFit":{var L;const Z=(L=D.filter(U=>{if(O){const Y=Ua(U.placement);return Y===E||Y==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(Y=>Y>0).reduce((Y,G)=>Y+G,0)]).sort((U,Y)=>U[1]-Y[1])[0])==null?void 0:L[0];Z&&(re=Z);break}case"initialPlacement":re=a;break}if(s!==re)return{reset:{placement:re}}}return{}}}};function cD(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function uD(t){return Cfe.some(e=>t[e]>=0)}const Ffe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=fo(t,e);switch(r){case"referenceHidden":{const i=await Rp(e,{...s,elementContext:"reference"}),o=cD(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:uD(o)}}}case"escaped":{const i=await Rp(e,{...s,altBoundary:!0}),o=cD(i,n.floating);return{data:{escapedOffsets:o,escaped:uD(o)}}}default:return{}}}}};async function Bfe(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=po(n),a=eh(n),l=Ua(n)==="y",c=["left","top"].includes(o)?-1:1,u=i&&l?-1:1,d=fo(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof g=="number"&&(p=a==="end"?g*-1:g),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const Ufe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await Bfe(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},$fe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:v,y:E}=w;return{x:v,y:E}}},...l}=fo(t,e),c={x:n,y:r},u=await Rp(e,l),d=Ua(po(s)),f=uI(d);let p=c[f],g=c[d];if(i){const w=f==="y"?"top":"left",v=f==="y"?"bottom":"right",E=p+u[w],b=p-u[v];p=tx(E,p,b)}if(o){const w=d==="y"?"top":"left",v=d==="y"?"bottom":"right",E=g+u[w],b=g-u[v];g=tx(E,g,b)}const m=a.fn({...e,[f]:p,[d]:g});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[f]:i,[d]:o}}}}}},qfe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=fo(t,e),u={x:n,y:r},d=Ua(s),f=uI(d);let p=u[f],g=u[d];const m=fo(a,e),w=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const b=f==="y"?"height":"width",C=i.reference[f]-i.floating[b]+w.mainAxis,R=i.reference[f]+i.reference[b]-w.mainAxis;p<C?p=C:p>R&&(p=R)}if(c){var v,E;const b=f==="y"?"width":"height",C=["top","left"].includes(po(s)),R=i.reference[d]-i.floating[b]+(C&&((v=o.offset)==null?void 0:v[d])||0)+(C?0:w.crossAxis),O=i.reference[d]+i.reference[b]+(C?0:((E=o.offset)==null?void 0:E[d])||0)-(C?w.crossAxis:0);g<R?g=R:g>O&&(g=O)}return{[f]:p,[d]:g}}}},zfe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=fo(t,e),u=await Rp(e,c),d=po(s),f=eh(s),p=Ua(s)==="y",{width:g,height:m}=i.floating;let w,v;d==="top"||d==="bottom"?(w=d,v=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,w=f==="end"?"top":"bottom");const E=m-u.top-u.bottom,b=g-u.left-u.right,C=Ba(m-u[w],E),R=Ba(g-u[v],b),O=!e.middlewareData.shift;let I=C,A=R;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(A=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(I=E),O&&!f){const D=br(u.left,0),M=br(u.right,0),V=br(u.top,0),L=br(u.bottom,0);p?A=g-2*(D!==0||M!==0?D+M:br(u.left,u.right)):I=m-2*(V!==0||L!==0?V+L:br(u.top,u.bottom))}await l({...e,availableWidth:A,availableHeight:I});const P=await o.getDimensions(a.floating);return g!==P.width||m!==P.height?{reset:{rects:!0}}:{}}}};function M0(){return typeof window<"u"}function th(t){return lB(t)?(t.nodeName||"").toLowerCase():"#document"}function Nr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ai(t){var e;return(e=(lB(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function lB(t){return M0()?t instanceof Node||t instanceof Nr(t).Node:!1}function Bs(t){return M0()?t instanceof Element||t instanceof Nr(t).Element:!1}function bi(t){return M0()?t instanceof HTMLElement||t instanceof Nr(t).HTMLElement:!1}function dD(t){return!M0()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Nr(t).ShadowRoot}function wm(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Us(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function Wfe(t){return["table","td","th"].includes(th(t))}function V0(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function fI(t){const e=pI(),n=Bs(t)?Us(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Hfe(t){let e=$a(t);for(;bi(e)&&!Od(e);){if(fI(e))return e;if(V0(e))return null;e=$a(e)}return null}function pI(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Od(t){return["html","body","#document"].includes(th(t))}function Us(t){return Nr(t).getComputedStyle(t)}function j0(t){return Bs(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function $a(t){if(th(t)==="html")return t;const e=t.assignedSlot||t.parentNode||dD(t)&&t.host||Ai(t);return dD(e)?e.host:e}function cB(t){const e=$a(t);return Od(e)?t.ownerDocument?t.ownerDocument.body:t.body:bi(e)&&wm(e)?e:cB(e)}function Pp(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=cB(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Nr(s);if(i){const a=rx(o);return e.concat(o,o.visualViewport||[],wm(s)?s:[],a&&n?Pp(a):[])}return e.concat(s,Pp(s,[],n))}function rx(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function uB(t){const e=Us(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=bi(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=cv(n)!==i||cv(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function mI(t){return Bs(t)?t:t.contextElement}function nd(t){const e=mI(t);if(!bi(e))return mi(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=uB(e);let o=(i?cv(n.width):n.width)/r,a=(i?cv(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Gfe=mi(0);function dB(t){const e=Nr(t);return!pI()||!e.visualViewport?Gfe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Kfe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Nr(t)?!1:e}function wc(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=mI(t);let o=mi(1);e&&(r?Bs(r)&&(o=nd(r)):o=nd(t));const a=Kfe(i,n,r)?dB(i):mi(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,d=s.height/o.y;if(i){const f=Nr(i),p=r&&Bs(r)?Nr(r):r;let g=f,m=rx(g);for(;m&&r&&p!==g;){const w=nd(m),v=m.getBoundingClientRect(),E=Us(m),b=v.left+(m.clientLeft+parseFloat(E.paddingLeft))*w.x,C=v.top+(m.clientTop+parseFloat(E.paddingTop))*w.y;l*=w.x,c*=w.y,u*=w.x,d*=w.y,l+=b,c+=C,g=Nr(m),m=rx(g)}}return dv({width:u,height:d,x:l,y:c})}function gI(t,e){const n=j0(t).scrollLeft;return e?e.left+n:wc(Ai(t)).left+n}function hB(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:gI(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function Qfe(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Ai(r),a=e?V0(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=mi(1);const u=mi(0),d=bi(r);if((d||!d&&!i)&&((th(r)!=="body"||wm(o))&&(l=j0(r)),bi(r))){const p=wc(r);c=nd(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}const f=o&&!d&&!i?hB(o,l,!0):mi(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function Yfe(t){return Array.from(t.getClientRects())}function Xfe(t){const e=Ai(t),n=j0(t),r=t.ownerDocument.body,s=br(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=br(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+gI(t);const a=-n.scrollTop;return Us(r).direction==="rtl"&&(o+=br(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function Jfe(t,e){const n=Nr(t),r=Ai(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=pI();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function Zfe(t,e){const n=wc(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=bi(t)?nd(t):mi(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function hD(t,e,n){let r;if(e==="viewport")r=Jfe(t,n);else if(e==="document")r=Xfe(Ai(t));else if(Bs(e))r=Zfe(e,n);else{const s=dB(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return dv(r)}function fB(t,e){const n=$a(t);return n===e||!Bs(n)||Od(n)?!1:Us(n).position==="fixed"||fB(n,e)}function epe(t,e){const n=e.get(t);if(n)return n;let r=Pp(t,[],!1).filter(a=>Bs(a)&&th(a)!=="body"),s=null;const i=Us(t).position==="fixed";let o=i?$a(t):t;for(;Bs(o)&&!Od(o);){const a=Us(o),l=fI(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||wm(o)&&!l&&fB(t,o))?r=r.filter(u=>u!==o):s=a,o=$a(o)}return e.set(t,r),r}function tpe(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?V0(e)?[]:epe(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const d=hD(e,u,s);return c.top=br(d.top,c.top),c.right=Ba(d.right,c.right),c.bottom=Ba(d.bottom,c.bottom),c.left=br(d.left,c.left),c},hD(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function npe(t){const{width:e,height:n}=uB(t);return{width:e,height:n}}function rpe(t,e,n){const r=bi(e),s=Ai(e),i=n==="fixed",o=wc(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=mi(0);if(r||!r&&!i)if((th(e)!=="body"||wm(s))&&(a=j0(e)),r){const f=wc(e,!0,i,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else s&&(l.x=gI(s));const c=s&&!r&&!i?hB(s,a):mi(0),u=o.left+a.scrollLeft-l.x-c.x,d=o.top+a.scrollTop-l.y-c.y;return{x:u,y:d,width:o.width,height:o.height}}function E_(t){return Us(t).position==="static"}function fD(t,e){if(!bi(t)||Us(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ai(t)===n&&(n=n.ownerDocument.body),n}function pB(t,e){const n=Nr(t);if(V0(t))return n;if(!bi(t)){let s=$a(t);for(;s&&!Od(s);){if(Bs(s)&&!E_(s))return s;s=$a(s)}return n}let r=fD(t,e);for(;r&&Wfe(r)&&E_(r);)r=fD(r,e);return r&&Od(r)&&E_(r)&&!fI(r)?n:r||Hfe(t)||n}const spe=async function(t){const e=this.getOffsetParent||pB,n=this.getDimensions,r=await n(t.floating);return{reference:rpe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function ipe(t){return Us(t).direction==="rtl"}const ope={convertOffsetParentRelativeRectToViewportRelativeRect:Qfe,getDocumentElement:Ai,getClippingRect:tpe,getOffsetParent:pB,getElementRects:spe,getClientRects:Yfe,getDimensions:npe,getScale:nd,isElement:Bs,isRTL:ipe};function ape(t,e){let n=null,r;const s=Ai(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const{left:c,top:u,width:d,height:f}=t.getBoundingClientRect();if(a||e(),!d||!f)return;const p=hg(u),g=hg(s.clientWidth-(c+d)),m=hg(s.clientHeight-(u+f)),w=hg(c),E={rootMargin:-p+"px "+-g+"px "+-m+"px "+-w+"px",threshold:br(0,Ba(1,l))||1};let b=!0;function C(R){const O=R[0].intersectionRatio;if(O!==l){if(!b)return o();O?o(!1,O):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(C,{...E,root:s.ownerDocument})}catch{n=new IntersectionObserver(C,E)}n.observe(t)}return o(!0),i}function lpe(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=mI(t),u=s||i?[...c?Pp(c):[],...Pp(e)]:[];u.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),i&&v.addEventListener("resize",n)});const d=c&&a?ape(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(v=>{let[E]=v;E&&E.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let g,m=l?wc(t):null;l&&w();function w(){const v=wc(t);m&&(v.x!==m.x||v.y!==m.y||v.width!==m.width||v.height!==m.height)&&n(),m=v,g=requestAnimationFrame(w)}return n(),()=>{var v;u.forEach(E=>{s&&E.removeEventListener("scroll",n),i&&E.removeEventListener("resize",n)}),d==null||d(),(v=p)==null||v.disconnect(),p=null,l&&cancelAnimationFrame(g)}}const cpe=Ufe,upe=$fe,dpe=jfe,hpe=zfe,fpe=Ffe,pD=Vfe,ppe=qfe,mpe=(t,e,n)=>{const r=new Map,s={platform:ope,...n},i={...s.platform,_c:r};return Mfe(t,e,{...s,platform:i})};var Zg=typeof document<"u"?_.useLayoutEffect:_.useEffect;function hv(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!hv(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!hv(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function mB(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function mD(t,e){const n=mB(t);return Math.round(e*n)/n}function x_(t){const e=_.useRef(t);return Zg(()=>{e.current=t}),e}function gpe(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=_.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=_.useState(r);hv(f,r)||p(r);const[g,m]=_.useState(null),[w,v]=_.useState(null),E=_.useCallback(U=>{U!==O.current&&(O.current=U,m(U))},[]),b=_.useCallback(U=>{U!==I.current&&(I.current=U,v(U))},[]),C=i||g,R=o||w,O=_.useRef(null),I=_.useRef(null),A=_.useRef(u),P=l!=null,D=x_(l),M=x_(s),V=x_(c),L=_.useCallback(()=>{if(!O.current||!I.current)return;const U={placement:e,strategy:n,middleware:f};M.current&&(U.platform=M.current),mpe(O.current,I.current,U).then(Y=>{const G={...Y,isPositioned:V.current!==!1};W.current&&!hv(A.current,G)&&(A.current=G,go.flushSync(()=>{d(G)}))})},[f,e,n,M,V]);Zg(()=>{c===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,d(U=>({...U,isPositioned:!1})))},[c]);const W=_.useRef(!1);Zg(()=>(W.current=!0,()=>{W.current=!1}),[]),Zg(()=>{if(C&&(O.current=C),R&&(I.current=R),C&&R){if(D.current)return D.current(C,R,L);L()}},[C,R,L,D,P]);const oe=_.useMemo(()=>({reference:O,floating:I,setReference:E,setFloating:b}),[E,b]),re=_.useMemo(()=>({reference:C,floating:R}),[C,R]),Z=_.useMemo(()=>{const U={position:n,left:0,top:0};if(!re.floating)return U;const Y=mD(re.floating,u.x),G=mD(re.floating,u.y);return a?{...U,transform:"translate("+Y+"px, "+G+"px)",...mB(re.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Y,top:G}},[n,a,re.floating,u.x,u.y]);return _.useMemo(()=>({...u,update:L,refs:oe,elements:re,floatingStyles:Z}),[u,L,oe,re,Z])}const ype=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?pD({element:r.current,padding:s}).fn(n):{}:r?pD({element:r,padding:s}).fn(n):{}}}},vpe=(t,e)=>({...cpe(t),options:[t,e]}),wpe=(t,e)=>({...upe(t),options:[t,e]}),_pe=(t,e)=>({...ppe(t),options:[t,e]}),Epe=(t,e)=>({...dpe(t),options:[t,e]}),xpe=(t,e)=>({...hpe(t),options:[t,e]}),bpe=(t,e)=>({...fpe(t),options:[t,e]}),Tpe=(t,e)=>({...ype(t),options:[t,e]});var Spe="Arrow",gB=_.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return y.jsx(Gt.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});gB.displayName=Spe;var Ipe=gB;function Ape(t){const[e,n]=_.useState(void 0);return Ht(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var yI="Popper",[yB,vB]=Jd(yI),[Cpe,wB]=yB(yI),_B=t=>{const{__scopePopper:e,children:n}=t,[r,s]=_.useState(null);return y.jsx(Cpe,{scope:e,anchor:r,onAnchorChange:s,children:n})};_B.displayName=yI;var EB="PopperAnchor",xB=_.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=wB(EB,n),o=_.useRef(null),a=bn(e,o);return _.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:y.jsx(Gt.div,{...s,ref:a})});xB.displayName=EB;var vI="PopperContent",[Rpe,Ppe]=yB(vI),bB=_.forwardRef((t,e)=>{var se,ye,Be,xe,ue,X;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:g,...m}=t,w=wB(vI,n),[v,E]=_.useState(null),b=bn(e,be=>E(be)),[C,R]=_.useState(null),O=Ape(C),I=(O==null?void 0:O.width)??0,A=(O==null?void 0:O.height)??0,P=r+(i!=="center"?"-"+i:""),D=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},M=Array.isArray(c)?c:[c],V=M.length>0,L={padding:D,boundary:M.filter(kpe),altBoundary:V},{refs:W,floatingStyles:oe,placement:re,isPositioned:Z,middlewareData:U}=gpe({strategy:"fixed",placement:P,whileElementsMounted:(...be)=>lpe(...be,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[vpe({mainAxis:s+A,alignmentAxis:o}),l&&wpe({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?_pe():void 0,...L}),l&&Epe({...L}),xpe({...L,apply:({elements:be,rects:Ce,availableWidth:We,availableHeight:it})=>{const{width:Tt,height:Fn}=Ce.reference,jt=be.floating.style;jt.setProperty("--radix-popper-available-width",`${We}px`),jt.setProperty("--radix-popper-available-height",`${it}px`),jt.setProperty("--radix-popper-anchor-width",`${Tt}px`),jt.setProperty("--radix-popper-anchor-height",`${Fn}px`)}}),C&&Tpe({element:C,padding:a}),Dpe({arrowWidth:I,arrowHeight:A}),f&&bpe({strategy:"referenceHidden",...L})]}),[Y,G]=IB(re),he=Jt(g);Ht(()=>{Z&&(he==null||he())},[Z,he]);const we=(se=U.arrow)==null?void 0:se.x,ve=(ye=U.arrow)==null?void 0:ye.y,De=((Be=U.arrow)==null?void 0:Be.centerOffset)!==0,[_e,Ye]=_.useState();return Ht(()=>{v&&Ye(window.getComputedStyle(v).zIndex)},[v]),y.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...oe,transform:Z?oe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:_e,"--radix-popper-transform-origin":[(xe=U.transformOrigin)==null?void 0:xe.x,(ue=U.transformOrigin)==null?void 0:ue.y].join(" "),...((X=U.hide)==null?void 0:X.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:y.jsx(Rpe,{scope:n,placedSide:Y,onArrowChange:R,arrowX:we,arrowY:ve,shouldHideArrow:De,children:y.jsx(Gt.div,{"data-side":Y,"data-align":G,...m,ref:b,style:{...m.style,animation:Z?void 0:"none"}})})})});bB.displayName=vI;var TB="PopperArrow",Npe={top:"bottom",right:"left",bottom:"top",left:"right"},SB=_.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=Ppe(TB,r),o=Npe[i.placedSide];return y.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:y.jsx(Ipe,{...s,ref:n,style:{...s.style,display:"block"}})})});SB.displayName=TB;function kpe(t){return t!==null}var Dpe=t=>({name:"transformOrigin",options:t,fn(e){var w,v,E;const{placement:n,rects:r,middlewareData:s}=e,o=((w=s.arrow)==null?void 0:w.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=IB(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((v=s.arrow)==null?void 0:v.x)??0)+a/2,p=(((E=s.arrow)==null?void 0:E.y)??0)+l/2;let g="",m="";return c==="bottom"?(g=o?d:`${f}px`,m=`${-l}px`):c==="top"?(g=o?d:`${f}px`,m=`${r.floating.height+l}px`):c==="right"?(g=`${-l}px`,m=o?d:`${p}px`):c==="left"&&(g=`${r.floating.width+l}px`,m=o?d:`${p}px`),{data:{x:g,y:m}}}});function IB(t){const[e,n="center"]=t.split("-");return[e,n]}var Ope=_B,Lpe=xB,Mpe=bB,Vpe=SB,jpe="Portal",AB=_.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=_.useState(!1);Ht(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?sb.createPortal(y.jsx(Gt.div,{...r,ref:e}),o):null});AB.displayName=jpe;function Fpe(t){const e=_.useRef({value:t,previous:t});return _.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Bpe="VisuallyHidden",CB=_.forwardRef((t,e)=>y.jsx(Gt.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));CB.displayName=Bpe;var RB=s5(),b_=function(){},F0=_.forwardRef(function(t,e){var n=_.useRef(null),r=_.useState({onScrollCapture:b_,onWheelCapture:b_,onTouchMoveCapture:b_}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,p=t.noIsolation,g=t.inert,m=t.allowPinchZoom,w=t.as,v=w===void 0?"div":w,E=t.gapMode,b=jd(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=f,R=r5([n,e]),O=kn(kn({},b),s);return _.createElement(_.Fragment,null,u&&_.createElement(C,{sideCar:RB,removeScrollBar:c,shards:d,noIsolation:p,inert:g,setCallbacks:i,allowPinchZoom:!!m,lockRef:n,gapMode:E}),o?_.cloneElement(_.Children.only(a),kn(kn({},O),{ref:R})):_.createElement(v,kn({},O,{className:l,ref:R}),a))});F0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};F0.classNames={fullWidth:wf,zeroRight:vf};var sx=!1;if(typeof window<"u")try{var fg=Object.defineProperty({},"passive",{get:function(){return sx=!0,!0}});window.addEventListener("test",fg,fg),window.removeEventListener("test",fg,fg)}catch{sx=!1}var cu=sx?{passive:!1}:!1,Upe=function(t){return t.tagName==="TEXTAREA"},PB=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Upe(t)&&n[e]==="visible")},$pe=function(t){return PB(t,"overflowY")},qpe=function(t){return PB(t,"overflowX")},gD=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=NB(t,r);if(s){var i=kB(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},zpe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Wpe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},NB=function(t,e){return t==="v"?$pe(e):qpe(e)},kB=function(t,e){return t==="v"?zpe(e):Wpe(e)},Hpe=function(t,e){return t==="h"&&e==="rtl"?-1:1},Gpe=function(t,e,n,r,s){var i=Hpe(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{var p=kB(t,a),g=p[0],m=p[1],w=p[2],v=m-w-i*g;(g||v)&&NB(t,a)&&(d+=v,f+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(Math.abs(d)<1||!s)||!u&&(Math.abs(f)<1||!s))&&(c=!0),c},pg=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},yD=function(t){return[t.deltaX,t.deltaY]},vD=function(t){return t&&"current"in t?t.current:t},Kpe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Qpe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Ype=0,uu=[];function Xpe(t){var e=_.useRef([]),n=_.useRef([0,0]),r=_.useRef(),s=_.useState(Ype++)[0],i=_.useState(ES)[0],o=_.useRef(t);_.useEffect(function(){o.current=t},[t]),_.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var m=hL([t.lockRef.current],(t.shards||[]).map(vD),!0).filter(Boolean);return m.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=_.useCallback(function(m,w){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var v=pg(m),E=n.current,b="deltaX"in m?m.deltaX:E[0]-v[0],C="deltaY"in m?m.deltaY:E[1]-v[1],R,O=m.target,I=Math.abs(b)>Math.abs(C)?"h":"v";if("touches"in m&&I==="h"&&O.type==="range")return!1;var A=gD(I,O);if(!A)return!0;if(A?R=I:(R=I==="v"?"h":"v",A=gD(I,O)),!A)return!1;if(!r.current&&"changedTouches"in m&&(b||C)&&(r.current=R),!R)return!0;var P=r.current||R;return Gpe(P,w,m,P==="h"?b:C,!0)},[]),l=_.useCallback(function(m){var w=m;if(!(!uu.length||uu[uu.length-1]!==i)){var v="deltaY"in w?yD(w):pg(w),E=e.current.filter(function(R){return R.name===w.type&&(R.target===w.target||w.target===R.shadowParent)&&Kpe(R.delta,v)})[0];if(E&&E.should){w.cancelable&&w.preventDefault();return}if(!E){var b=(o.current.shards||[]).map(vD).filter(Boolean).filter(function(R){return R.contains(w.target)}),C=b.length>0?a(w,b[0]):!o.current.noIsolation;C&&w.cancelable&&w.preventDefault()}}},[]),c=_.useCallback(function(m,w,v,E){var b={name:m,delta:w,target:v,should:E,shadowParent:Jpe(v)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(C){return C!==b})},1)},[]),u=_.useCallback(function(m){n.current=pg(m),r.current=void 0},[]),d=_.useCallback(function(m){c(m.type,yD(m),m.target,a(m,t.lockRef.current))},[]),f=_.useCallback(function(m){c(m.type,pg(m),m.target,a(m,t.lockRef.current))},[]);_.useEffect(function(){return uu.push(i),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,cu),document.addEventListener("touchmove",l,cu),document.addEventListener("touchstart",u,cu),function(){uu=uu.filter(function(m){return m!==i}),document.removeEventListener("wheel",l,cu),document.removeEventListener("touchmove",l,cu),document.removeEventListener("touchstart",u,cu)}},[]);var p=t.removeScrollBar,g=t.inert;return _.createElement(_.Fragment,null,g?_.createElement(i,{styles:Qpe(s)}):null,p?_.createElement(l5,{gapMode:t.gapMode}):null)}function Jpe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Zpe=o5(RB,Xpe);var DB=_.forwardRef(function(t,e){return _.createElement(F0,kn({},t,{ref:e,sideCar:Zpe}))});DB.classNames=F0.classNames;var eme=[" ","Enter","ArrowUp","ArrowDown"],tme=[" ","Enter"],_m="Select",[B0,U0,nme]=cfe(_m),[nh,Rge]=Jd(_m,[nme,vB]),$0=vB(),[rme,sl]=nh(_m),[sme,ime]=nh(_m),OB=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:p,form:g}=t,m=$0(e),[w,v]=_.useState(null),[E,b]=_.useState(null),[C,R]=_.useState(!1),O=dfe(c),[I=!1,A]=tv({prop:r,defaultProp:s,onChange:i}),[P,D]=tv({prop:o,defaultProp:a,onChange:l}),M=_.useRef(null),V=w?g||!!w.closest("form"):!0,[L,W]=_.useState(new Set),oe=Array.from(L).map(re=>re.props.value).join(";");return y.jsx(Ope,{...m,children:y.jsxs(rme,{required:p,scope:e,trigger:w,onTriggerChange:v,valueNode:E,onValueNodeChange:b,valueNodeHasChildren:C,onValueNodeHasChildrenChange:R,contentId:Xu(),value:P,onValueChange:D,open:I,onOpenChange:A,dir:O,triggerPointerDownPosRef:M,disabled:f,children:[y.jsx(B0.Provider,{scope:e,children:y.jsx(sme,{scope:t.__scopeSelect,onNativeOptionAdd:_.useCallback(re=>{W(Z=>new Set(Z).add(re))},[]),onNativeOptionRemove:_.useCallback(re=>{W(Z=>{const U=new Set(Z);return U.delete(re),U})},[]),children:n})}),V?y.jsxs(iU,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:P,onChange:re=>D(re.target.value),disabled:f,form:g,children:[P===void 0?y.jsx("option",{value:""}):null,Array.from(L)]},oe):null]})})};OB.displayName=_m;var LB="SelectTrigger",MB=_.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=$0(n),o=sl(LB,n),a=o.disabled||r,l=bn(e,o.onTriggerChange),c=U0(n),u=_.useRef("touch"),[d,f,p]=oU(m=>{const w=c().filter(b=>!b.disabled),v=w.find(b=>b.value===o.value),E=aU(w,m,v);E!==void 0&&o.onValueChange(E.value)}),g=m=>{a||(o.onOpenChange(!0),p()),m&&(o.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return y.jsx(Lpe,{asChild:!0,...i,children:y.jsx(Gt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":sU(o.value)?"":void 0,...s,ref:l,onClick:Ut(s.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&g(m)}),onPointerDown:Ut(s.onPointerDown,m=>{u.current=m.pointerType;const w=m.target;w.hasPointerCapture(m.pointerId)&&w.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(g(m),m.preventDefault())}),onKeyDown:Ut(s.onKeyDown,m=>{const w=d.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(w&&m.key===" ")&&eme.includes(m.key)&&(g(),m.preventDefault())})})})});MB.displayName=LB;var VB="SelectValue",jB=_.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...a}=t,l=sl(VB,n),{onValueNodeHasChildrenChange:c}=l,u=i!==void 0,d=bn(e,l.onValueNodeChange);return Ht(()=>{c(u)},[c,u]),y.jsx(Gt.span,{...a,ref:d,style:{pointerEvents:"none"},children:sU(l.value)?y.jsx(y.Fragment,{children:o}):i})});jB.displayName=VB;var ome="SelectIcon",FB=_.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return y.jsx(Gt.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});FB.displayName=ome;var ame="SelectPortal",BB=t=>y.jsx(AB,{asChild:!0,...t});BB.displayName=ame;var _c="SelectContent",UB=_.forwardRef((t,e)=>{const n=sl(_c,t.__scopeSelect),[r,s]=_.useState();if(Ht(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?go.createPortal(y.jsx($B,{scope:t.__scopeSelect,children:y.jsx(B0.Slot,{scope:t.__scopeSelect,children:y.jsx("div",{children:t.children})})}),i):null}return y.jsx(qB,{...t,ref:e})});UB.displayName=_c;var bs=10,[$B,il]=nh(_c),lme="SelectContentImpl",qB=_.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:w,...v}=t,E=sl(_c,n),[b,C]=_.useState(null),[R,O]=_.useState(null),I=bn(e,se=>C(se)),[A,P]=_.useState(null),[D,M]=_.useState(null),V=U0(n),[L,W]=_.useState(!1),oe=_.useRef(!1);_.useEffect(()=>{if(b)return p5(b)},[b]),n5();const re=_.useCallback(se=>{const[ye,...Be]=V().map(X=>X.ref.current),[xe]=Be.slice(-1),ue=document.activeElement;for(const X of se)if(X===ue||(X==null||X.scrollIntoView({block:"nearest"}),X===ye&&R&&(R.scrollTop=0),X===xe&&R&&(R.scrollTop=R.scrollHeight),X==null||X.focus(),document.activeElement!==ue))return},[V,R]),Z=_.useCallback(()=>re([A,b]),[re,A,b]);_.useEffect(()=>{L&&Z()},[L,Z]);const{onOpenChange:U,triggerPointerDownPosRef:Y}=E;_.useEffect(()=>{if(b){let se={x:0,y:0};const ye=xe=>{var ue,X;se={x:Math.abs(Math.round(xe.pageX)-(((ue=Y.current)==null?void 0:ue.x)??0)),y:Math.abs(Math.round(xe.pageY)-(((X=Y.current)==null?void 0:X.y)??0))}},Be=xe=>{se.x<=10&&se.y<=10?xe.preventDefault():b.contains(xe.target)||U(!1),document.removeEventListener("pointermove",ye),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",ye),document.addEventListener("pointerup",Be,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ye),document.removeEventListener("pointerup",Be,{capture:!0})}}},[b,U,Y]),_.useEffect(()=>{const se=()=>U(!1);return window.addEventListener("blur",se),window.addEventListener("resize",se),()=>{window.removeEventListener("blur",se),window.removeEventListener("resize",se)}},[U]);const[G,he]=oU(se=>{const ye=V().filter(ue=>!ue.disabled),Be=ye.find(ue=>ue.ref.current===document.activeElement),xe=aU(ye,se,Be);xe&&setTimeout(()=>xe.ref.current.focus())}),we=_.useCallback((se,ye,Be)=>{const xe=!oe.current&&!Be;(E.value!==void 0&&E.value===ye||xe)&&(P(se),xe&&(oe.current=!0))},[E.value]),ve=_.useCallback(()=>b==null?void 0:b.focus(),[b]),De=_.useCallback((se,ye,Be)=>{const xe=!oe.current&&!Be;(E.value!==void 0&&E.value===ye||xe)&&M(se)},[E.value]),_e=r==="popper"?ix:zB,Ye=_e===ix?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:w}:{};return y.jsx($B,{scope:n,content:b,viewport:R,onViewportChange:O,itemRefCallback:we,selectedItem:A,onItemLeave:ve,itemTextRefCallback:De,focusSelectedItem:Z,selectedItemText:D,position:r,isPositioned:L,searchRef:G,children:y.jsx(DB,{as:lo,allowPinchZoom:!0,children:y.jsx(iB,{asChild:!0,trapped:E.open,onMountAutoFocus:se=>{se.preventDefault()},onUnmountAutoFocus:Ut(s,se=>{var ye;(ye=E.trigger)==null||ye.focus({preventScroll:!0}),se.preventDefault()}),children:y.jsx(rB,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:se=>se.preventDefault(),onDismiss:()=>E.onOpenChange(!1),children:y.jsx(_e,{role:"listbox",id:E.contentId,"data-state":E.open?"open":"closed",dir:E.dir,onContextMenu:se=>se.preventDefault(),...v,...Ye,onPlaced:()=>W(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:Ut(v.onKeyDown,se=>{const ye=se.ctrlKey||se.altKey||se.metaKey;if(se.key==="Tab"&&se.preventDefault(),!ye&&se.key.length===1&&he(se.key),["ArrowUp","ArrowDown","Home","End"].includes(se.key)){let xe=V().filter(ue=>!ue.disabled).map(ue=>ue.ref.current);if(["ArrowUp","End"].includes(se.key)&&(xe=xe.slice().reverse()),["ArrowUp","ArrowDown"].includes(se.key)){const ue=se.target,X=xe.indexOf(ue);xe=xe.slice(X+1)}setTimeout(()=>re(xe)),se.preventDefault()}})})})})})})});qB.displayName=lme;var cme="SelectItemAlignedPosition",zB=_.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=sl(_c,n),o=il(_c,n),[a,l]=_.useState(null),[c,u]=_.useState(null),d=bn(e,I=>u(I)),f=U0(n),p=_.useRef(!1),g=_.useRef(!0),{viewport:m,selectedItem:w,selectedItemText:v,focusSelectedItem:E}=o,b=_.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&c&&m&&w&&v){const I=i.trigger.getBoundingClientRect(),A=c.getBoundingClientRect(),P=i.valueNode.getBoundingClientRect(),D=v.getBoundingClientRect();if(i.dir!=="rtl"){const ue=D.left-A.left,X=P.left-ue,be=I.left-X,Ce=I.width+be,We=Math.max(Ce,A.width),it=window.innerWidth-bs,Tt=eD(X,[bs,Math.max(bs,it-We)]);a.style.minWidth=Ce+"px",a.style.left=Tt+"px"}else{const ue=A.right-D.right,X=window.innerWidth-P.right-ue,be=window.innerWidth-I.right-X,Ce=I.width+be,We=Math.max(Ce,A.width),it=window.innerWidth-bs,Tt=eD(X,[bs,Math.max(bs,it-We)]);a.style.minWidth=Ce+"px",a.style.right=Tt+"px"}const M=f(),V=window.innerHeight-bs*2,L=m.scrollHeight,W=window.getComputedStyle(c),oe=parseInt(W.borderTopWidth,10),re=parseInt(W.paddingTop,10),Z=parseInt(W.borderBottomWidth,10),U=parseInt(W.paddingBottom,10),Y=oe+re+L+U+Z,G=Math.min(w.offsetHeight*5,Y),he=window.getComputedStyle(m),we=parseInt(he.paddingTop,10),ve=parseInt(he.paddingBottom,10),De=I.top+I.height/2-bs,_e=V-De,Ye=w.offsetHeight/2,se=w.offsetTop+Ye,ye=oe+re+se,Be=Y-ye;if(ye<=De){const ue=M.length>0&&w===M[M.length-1].ref.current;a.style.bottom="0px";const X=c.clientHeight-m.offsetTop-m.offsetHeight,be=Math.max(_e,Ye+(ue?ve:0)+X+Z),Ce=ye+be;a.style.height=Ce+"px"}else{const ue=M.length>0&&w===M[0].ref.current;a.style.top="0px";const be=Math.max(De,oe+m.offsetTop+(ue?we:0)+Ye)+Be;a.style.height=be+"px",m.scrollTop=ye-De+m.offsetTop}a.style.margin=`${bs}px 0`,a.style.minHeight=G+"px",a.style.maxHeight=V+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[f,i.trigger,i.valueNode,a,c,m,w,v,i.dir,r]);Ht(()=>b(),[b]);const[C,R]=_.useState();Ht(()=>{c&&R(window.getComputedStyle(c).zIndex)},[c]);const O=_.useCallback(I=>{I&&g.current===!0&&(b(),E==null||E(),g.current=!1)},[b,E]);return y.jsx(dme,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:O,children:y.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:y.jsx(Gt.div,{...s,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});zB.displayName=cme;var ume="SelectPopperPosition",ix=_.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=bs,...i}=t,o=$0(n);return y.jsx(Mpe,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ix.displayName=ume;var[dme,wI]=nh(_c,{}),ox="SelectViewport",WB=_.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=il(ox,n),o=wI(ox,n),a=bn(e,i.onViewportChange),l=_.useRef(0);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),y.jsx(B0.Slot,{scope:n,children:y.jsx(Gt.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Ut(s.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&d){const p=Math.abs(l.current-u.scrollTop);if(p>0){const g=window.innerHeight-bs*2,m=parseFloat(d.style.minHeight),w=parseFloat(d.style.height),v=Math.max(m,w);if(v<g){const E=v+p,b=Math.min(g,E),C=E-b;d.style.height=b+"px",d.style.bottom==="0px"&&(u.scrollTop=C>0?C:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});WB.displayName=ox;var HB="SelectGroup",[hme,fme]=nh(HB),pme=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Xu();return y.jsx(hme,{scope:n,id:s,children:y.jsx(Gt.div,{role:"group","aria-labelledby":s,...r,ref:e})})});pme.displayName=HB;var GB="SelectLabel",KB=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=fme(GB,n);return y.jsx(Gt.div,{id:s.id,...r,ref:e})});KB.displayName=GB;var fv="SelectItem",[mme,QB]=nh(fv),YB=_.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,a=sl(fv,n),l=il(fv,n),c=a.value===r,[u,d]=_.useState(i??""),[f,p]=_.useState(!1),g=bn(e,E=>{var b;return(b=l.itemRefCallback)==null?void 0:b.call(l,E,r,s)}),m=Xu(),w=_.useRef("touch"),v=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return y.jsx(mme,{scope:n,value:r,disabled:s,textId:m,isSelected:c,onItemTextChange:_.useCallback(E=>{d(b=>b||((E==null?void 0:E.textContent)??"").trim())},[]),children:y.jsx(B0.ItemSlot,{scope:n,value:r,disabled:s,textValue:u,children:y.jsx(Gt.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:g,onFocus:Ut(o.onFocus,()=>p(!0)),onBlur:Ut(o.onBlur,()=>p(!1)),onClick:Ut(o.onClick,()=>{w.current!=="mouse"&&v()}),onPointerUp:Ut(o.onPointerUp,()=>{w.current==="mouse"&&v()}),onPointerDown:Ut(o.onPointerDown,E=>{w.current=E.pointerType}),onPointerMove:Ut(o.onPointerMove,E=>{var b;w.current=E.pointerType,s?(b=l.onItemLeave)==null||b.call(l):w.current==="mouse"&&E.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ut(o.onPointerLeave,E=>{var b;E.currentTarget===document.activeElement&&((b=l.onItemLeave)==null||b.call(l))}),onKeyDown:Ut(o.onKeyDown,E=>{var C;((C=l.searchRef)==null?void 0:C.current)!==""&&E.key===" "||(tme.includes(E.key)&&v(),E.key===" "&&E.preventDefault())})})})})});YB.displayName=fv;var Hh="SelectItemText",XB=_.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=sl(Hh,n),a=il(Hh,n),l=QB(Hh,n),c=ime(Hh,n),[u,d]=_.useState(null),f=bn(e,v=>d(v),l.onItemTextChange,v=>{var E;return(E=a.itemTextRefCallback)==null?void 0:E.call(a,v,l.value,l.disabled)}),p=u==null?void 0:u.textContent,g=_.useMemo(()=>y.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:w}=c;return Ht(()=>(m(g),()=>w(g)),[m,w,g]),y.jsxs(y.Fragment,{children:[y.jsx(Gt.span,{id:l.textId,...i,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?go.createPortal(i.children,o.valueNode):null]})});XB.displayName=Hh;var JB="SelectItemIndicator",ZB=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return QB(JB,n).isSelected?y.jsx(Gt.span,{"aria-hidden":!0,...r,ref:e}):null});ZB.displayName=JB;var ax="SelectScrollUpButton",eU=_.forwardRef((t,e)=>{const n=il(ax,t.__scopeSelect),r=wI(ax,t.__scopeSelect),[s,i]=_.useState(!1),o=bn(e,r.onScrollButtonChange);return Ht(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;i(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?y.jsx(nU,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});eU.displayName=ax;var lx="SelectScrollDownButton",tU=_.forwardRef((t,e)=>{const n=il(lx,t.__scopeSelect),r=wI(lx,t.__scopeSelect),[s,i]=_.useState(!1),o=bn(e,r.onScrollButtonChange);return Ht(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;i(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?y.jsx(nU,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});tU.displayName=lx;var nU=_.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=il("SelectScrollButton",n),o=_.useRef(null),a=U0(n),l=_.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return _.useEffect(()=>()=>l(),[l]),Ht(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),y.jsx(Gt.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Ut(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Ut(s.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Ut(s.onPointerLeave,()=>{l()})})}),gme="SelectSeparator",rU=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return y.jsx(Gt.div,{"aria-hidden":!0,...r,ref:e})});rU.displayName=gme;var cx="SelectArrow",yme=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=$0(n),i=sl(cx,n),o=il(cx,n);return i.open&&o.position==="popper"?y.jsx(Vpe,{...s,...r,ref:e}):null});yme.displayName=cx;function sU(t){return t===""||t===void 0}var iU=_.forwardRef((t,e)=>{const{value:n,...r}=t,s=_.useRef(null),i=bn(e,s),o=Fpe(n);return _.useEffect(()=>{const a=s.current,l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&u){const d=new Event("change",{bubbles:!0});u.call(a,n),a.dispatchEvent(d)}},[o,n]),y.jsx(CB,{asChild:!0,children:y.jsx("select",{...r,ref:i,defaultValue:n})})});iU.displayName="BubbleSelect";function oU(t){const e=Jt(t),n=_.useRef(""),r=_.useRef(0),s=_.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),i=_.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function aU(t,e,n){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=vme(t,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function vme(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var wme=OB,lU=MB,_me=jB,Eme=FB,xme=BB,cU=UB,bme=WB,uU=KB,dU=YB,Tme=XB,Sme=ZB,hU=eU,fU=tU,pU=rU;const Ime=wme,Ame=_me,mU=_.forwardRef(({className:t,children:e,...n},r)=>y.jsxs(lU,{ref:r,className:Ve("flex h-10 w-full items-center justify-between  border-b outline-none  border-neutral-200 bg-white-1 px-3 py-2   placeholder:text-neutral-500 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 dark:border-neutral-800 dark:bg-neutral-950 dark:ring-offset-neutral-950 dark:placeholder:text-neutral-400 dark:focus:ring-neutral-300",t),...n,children:[e,y.jsx(Eme,{asChild:!0,children:y.jsx(s4,{className:"h-6 w-6 opacity-50"})})]}));mU.displayName=lU.displayName;const gU=_.forwardRef(({className:t,...e},n)=>y.jsx(hU,{ref:n,className:Ve("flex cursor-default items-center justify-center py-1",t),...e,children:y.jsx(Ate,{className:"h-4 w-4"})}));gU.displayName=hU.displayName;const yU=_.forwardRef(({className:t,...e},n)=>y.jsx(fU,{ref:n,className:Ve("flex cursor-default items-center justify-center py-1",t),...e,children:y.jsx(s4,{className:"h-4 w-4"})}));yU.displayName=fU.displayName;const vU=_.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>y.jsx(xme,{children:y.jsxs(cU,{ref:s,className:Ve(" z-100 max-h-96 min-w-[8rem] overflow-hidden  border-2  border-neutral-200 bg-white-1 text-black-2 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-neutral-800 dark:bg-neutral-950 dark:text-neutral-50",n==="popper"&&t),position:n,...r,children:[y.jsx(gU,{}),y.jsx(bme,{className:Ve("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),y.jsx(yU,{})]})}));vU.displayName=cU.displayName;const Cme=_.forwardRef(({className:t,...e},n)=>y.jsx(uU,{ref:n,className:Ve("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));Cme.displayName=uU.displayName;const wU=_.forwardRef(({className:t,children:e,...n},r)=>y.jsxs(dU,{ref:r,className:Ve("relative flex w-full cursor-default select-none items-center  py-1.5 pl-8 pr-2  outline-none focus:bg-orange-1 focus:text-white-1 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-neutral-800 dark:focus:text-neutral-50",t),...n,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(Sme,{children:y.jsx(Ite,{className:"h-4 w-4"})})}),y.jsx(Tme,{children:e})]}));wU.displayName=dU.displayName;const Rme=_.forwardRef(({className:t,...e},n)=>y.jsx(pU,{ref:n,className:Ve("-mx-1 my-1 h-px bg-neutral-100 dark:bg-neutral-800",t),...e}));Rme.displayName=pU.displayName;const Pme=({isliding:t})=>{const{scrollYProgress:e}=Oee();return y.jsx(y.Fragment,{children:t&&y.jsx(js.div,{style:{scaleX:e,position:"sticky",top:70,left:0,right:0,height:10,originX:0,backgroundColor:"#8266c9"}})})},Nme=async(t,e,n,r)=>{try{const i=(await Pe.collection("Parts").where("storyId","==",n.storyId).get()).docs,o=i.findIndex(c=>c.id===t),a=i.map(c=>({id:c.id,...c.data()}));if(r(a),o===-1)return null;const l=i[o+1];if(l)e(l.id);else return null}catch(s){console.error("Error getting documents:",s)}},kme=()=>{const{readId:t}=Ha(),[e,n]=_.useState(),[r,s]=_.useState(""),[i,o]=_.useState(""),[a,l]=_.useState([]),c=fs(),[u,d]=_.useState(!1);return _.useEffect(()=>{async function f(){try{const g=(await Pe.collection("Parts").doc(t).get()).data();if(!g)return;Nme(t,o,g,l),await Pe.collection("WrittenStories").doc(g.storyId).get().then(m=>{const w=m.data();w&&s(w.author)}),n(g),d(!0)}catch(p){console.log(p)}}f().then(()=>{})},[t,i]),y.jsxs("div",{className:"relative",children:[y.jsx(Pme,{isliding:u}),y.jsxs("div",{className:"flex flex-row bg-white-1 w-full max-lg:flex-col",children:[y.jsx("div",{className:"relative z-10",children:y.jsxs(Ime,{onValueChange:f=>c(`/read/${f}`),children:[y.jsx(mU,{className:"   sticky top-[80px] left-0 px-10 py-6  lg:w-[300px] 2xl:w-[400px]  max-lg:w-full",children:y.jsx(Ame,{placeholder:"Table of contents"})}),y.jsx(vU,{className:" outline-none focus:border top-11",children:a.map(f=>y.jsx(wU,{value:f.id,className:" text-black-2",children:f.title},f.id))})]})}),y.jsxs("div",{className:" mx-auto border-x-2 p-6 flex-1",children:[y.jsxs("div",{className:"flex flex-col gap-3 mb-7",children:[y.jsx("h1",{className:"text-black-2 text-4xl font-semibold ",children:e?e.title:""}),y.jsx(afe,{owner:r})]}),y.jsx(ofe,{Data:e}),i?y.jsx(Wt,{className:"w-full mt-4",onClick:()=>c(`/read/${i}`),children:"Next Part"}):null]})]})]})};function wD(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Dme(...t){return e=>{let n=!1;const r=t.map(s=>{const i=wD(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():wD(t[s],null)}}}}function _U(...t){return _.useCallback(Dme(...t),t)}function Ome(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}var EU="AlertDialog",[Lme,Pge]=Jd(EU,[g5]),So=g5(),xU=t=>{const{__scopeAlertDialog:e,...n}=t,r=So(e);return y.jsx(C5,{...r,...n,modal:!0})};xU.displayName=EU;var Mme="AlertDialogTrigger",Vme=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=So(n);return y.jsx(eie,{...s,...r,ref:e})});Vme.displayName=Mme;var jme="AlertDialogPortal",bU=t=>{const{__scopeAlertDialog:e,...n}=t,r=So(e);return y.jsx(R5,{...r,...n})};bU.displayName=jme;var Fme="AlertDialogOverlay",TU=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=So(n);return y.jsx(PS,{...s,...r,ref:e})});TU.displayName=Fme;var rd="AlertDialogContent",[Bme,Ume]=Lme(rd),SU=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=So(n),o=_.useRef(null),a=_U(e,o),l=_.useRef(null);return y.jsx(Yse,{contentName:rd,titleName:IU,docsSlug:"alert-dialog",children:y.jsx(Bme,{scope:n,cancelRef:l,children:y.jsxs(NS,{role:"alertdialog",...i,...s,ref:a,onOpenAutoFocus:Ome(s.onOpenAutoFocus,c=>{var u;c.preventDefault(),(u=l.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[y.jsx(h4,{children:r}),y.jsx(qme,{contentRef:o})]})})})});SU.displayName=rd;var IU="AlertDialogTitle",AU=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=So(n);return y.jsx(kS,{...s,...r,ref:e})});AU.displayName=IU;var CU="AlertDialogDescription",RU=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=So(n);return y.jsx(DS,{...s,...r,ref:e})});RU.displayName=CU;var $me="AlertDialogAction",PU=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=So(n);return y.jsx(OS,{...s,...r,ref:e})});PU.displayName=$me;var NU="AlertDialogCancel",kU=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=Ume(NU,n),i=So(n),o=_U(e,s);return y.jsx(OS,{...i,...r,ref:o})});kU.displayName=NU;var qme=({contentRef:t})=>{const e=`\`${rd}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${rd}\` by passing a \`${CU}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${rd}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return _.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},zme=xU,Wme=bU,DU=TU,OU=SU,LU=PU,MU=kU,VU=AU,jU=RU;const Hme=zme,Gme=Wme,FU=_.forwardRef(({className:t,...e},n)=>y.jsx(DU,{className:Ve("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));FU.displayName=DU.displayName;const BU=_.forwardRef(({className:t,...e},n)=>y.jsxs(Gme,{children:[y.jsx(FU,{}),y.jsx(OU,{ref:n,className:Ve("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-neutral-200 bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg dark:border-neutral-800 dark:bg-neutral-950",t),...e})]}));BU.displayName=OU.displayName;const UU=({className:t,...e})=>y.jsx("div",{className:Ve("flex flex-col space-y-2 text-center sm:text-left",t),...e});UU.displayName="AlertDialogHeader";const $U=({className:t,...e})=>y.jsx("div",{className:Ve("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});$U.displayName="AlertDialogFooter";const qU=_.forwardRef(({className:t,...e},n)=>y.jsx(VU,{ref:n,className:Ve("text-lg font-semibold",t),...e}));qU.displayName=VU.displayName;const zU=_.forwardRef(({className:t,...e},n)=>y.jsx(jU,{ref:n,className:Ve("text-sm text-neutral-500 dark:text-neutral-400",t),...e}));zU.displayName=jU.displayName;const WU=_.forwardRef(({className:t,...e},n)=>y.jsx(LU,{ref:n,className:Ve(LS(),t),...e}));WU.displayName=LU.displayName;const HU=_.forwardRef(({className:t,...e},n)=>y.jsx(MU,{ref:n,className:Ve(LS({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));HU.displayName=MU.displayName;const Kme=({storyId:t,isdelete:e,setIsdelete:n})=>{async function r(){if(t)try{(await Pe.collection("Parts").where("storyId","==",t).get()).forEach(async i=>{await Pe.collection("Parts").doc(i.id).delete()}),await Pe.collection("WrittenStories").doc(t).delete()}catch(s){Pr({variant:"destructive",title:"Uh oh! Something went wrong",description:"There was a problem with your request."}),console.log(s)}}return y.jsx(Hme,{open:e,onOpenChange:n,children:y.jsxs(BU,{className:" bg-white-1",children:[y.jsxs(UU,{children:[y.jsx(qU,{children:"Are you absolutely sure?"}),y.jsx(zU,{children:"This action cannot be undone. This will permanently delete your account and remove your data from our servers."})]}),y.jsxs($U,{children:[y.jsx(HU,{children:"Cancel"}),y.jsx(WU,{onClick:r,children:"Yes , delete the story"})]})]})})},Qme=()=>{const{profileId:t}=Ha(),{Data:e}=wj(t||""),{currentUser:n}=$s(),[r,s]=_.useState("#242424"),[i,o]=_.useState(""),[a,l]=_.useState(!1);return y.jsxs("div",{className:" flex-1 flex flex-col gap-8 max-lg:gap-5 max-md:gap-3",children:[e?e.map((c,u)=>{const d=c.desc.length>100?c.desc.slice(0,150)+"...":c.desc;return y.jsxs(js.div,{initial:{scale:0},animate:{scale:1},transition:{delay:1.4},className:" relative w-full px-4 py-6  bg-white-3 flex flex-row gap-4 items-center max-lg:py-10",children:[y.jsx("img",{src:c.ImgUrl,width:150,className:" rounded-md h-full max-sm:hidden"}),y.jsxs("div",{className:"flex flex-col gap-3 ",children:[y.jsx("h1",{className:"text-lg font-bold text-black-2",children:c.title}),y.jsx("p",{className:" text-black-2 leading-6 max-w-[600px]",style:{overflowWrap:"break-word"},children:d}),y.jsx("div",{className:"mt-2 flex flex-wrap w-fit",children:c.tag.map(f=>y.jsx("span",{className:"inline-block  bg-orange-2 border border-black-2  text-black-2 rounded-full px-3 py-1 text-sm mr-2 mb-2",children:f},f))})]}),(n==null?void 0:n.uid)==t&&y.jsx(js.div,{onClick:()=>{l(!a),o(c.id)},whileHover:{backgroundColor:"#8266c9"},className:"absolute right-2 top-2 cursor-pointer p-2 rounded-full",children:y.jsx("img",{src:"../../public/delete.svg",width:20})})]},u)}):y.jsx("div",{className:" w-full h-[300px] flex justify-center items-center",children:y.jsx("img",{src:"../../public/person-sitting.png",width:200})}),(n==null?void 0:n.uid)==t?y.jsx(Ia,{to:"/new",onMouseEnter:()=>s("#fff"),onMouseLeave:()=>s("#242424"),className:"flex justify-center py-10 items-center border-dashed border-2 p-4 border-black-2 w-full  hover:bg-orange-1 hover:border-none transition-colors duration-400 cursor-pointer",children:y.jsx(Kl.plus,{classes:"w-[100px]",Color:r})}):"",y.jsx(Kme,{storyId:i,isdelete:a,setIsdelete:l})]})},Yme=({profileId:t})=>{const[e,n]=_.useState(""),[r,s]=_.useState(!1),i=fs();async function o(){try{s(!0),await Pe.collection("user").doc(t).update({desc:e})}catch(a){console.log(a)}finally{s(!1),i(`/profile/${t}`)}}return y.jsx("div",{className:"p-6 flex-1",children:y.jsxs("div",{className:"flex flex-col gap-3",children:[y.jsx("div",{className:" border-b-2",children:y.jsx("textarea",{value:e,onChange:a=>n(a.target.value),className:"border-none resize-none text-lg outline-none h-[300px] w-full",placeholder:"Write Here"})}),y.jsxs("div",{className:"flex flex-row-reverse gap-3 self-end",children:[y.jsx(Wt,{className:" rounded-full",onClick:o,children:r?y.jsx(T0,{size:"20px"}):y.jsx("span",{children:"Save"})}),y.jsx(Wt,{className:" rounded-full",variant:"outline",onClick:()=>i("/profile/$profileId"),children:"Cancel"})]})]})})},Xme=()=>{const[t,e]=_.useState(!1),{profileId:n}=Ha(),{author:r}=rm(n||""),{currentUser:s}=$s(),[i,o]=_.useState(!0);return _.useEffect(()=>{r||o(!1)},[r]),t?y.jsx(Yme,{profileId:n||""}):y.jsx("div",{className:"flex-1",children:i?y.jsx("div",{className:"flex justify-center items-center py-6",children:y.jsx(T0,{size:"30px"})}):r!=null&&r.desc?y.jsx("div",{className:"w-full",children:y.jsxs("div",{className:"flex flex-col gap-6 py-6 px-5 border-b-2 border-[#dbdbdb] w-full",children:[y.jsx("h1",{className:"text-2xl text-black-2",children:"Who I am"}),y.jsx("div",{className:"text-black-2 leading-6 w-full",style:{overflowWrap:"break-word",wordBreak:"break-word"},children:r.desc})]})}):(s==null?void 0:s.uid)===n?y.jsxs("div",{className:"flex flex-col w-full gap-6 justify-between py-6 px-5 items-center bg-white-3",children:[y.jsx("h1",{className:"font-semibold text-black-2",children:"Tell the world about yourself"}),y.jsx("p",{className:"text-sm max-w-[600px] text-center",children:"Heres where you can share more about yourself: your history, work experience, accomplishments, interests, dreams, and more. You can even add images and use rich text to personalize your bio."}),y.jsx(Wt,{variant:"outline",className:"rounded-full",onClick:()=>e(!0),children:"Get started"})]}):y.jsxs("div",{className:"flex flex-col gap-4 justify-center items-center py-6 text-gray-600 text-sm",children:[y.jsx("img",{src:"../../public/person-sitting.png",width:150}),y.jsx("p",{children:"Mysterious user detected! Maybe they'll reveal more soon. "})]})})},Jme=()=>{const[t,e]=_.useState(vE);return _.useEffect(()=>{e(vE)},[]),y.jsx(Q4,{children:y.jsxs(js.div,{initial:{x:-100},animate:{x:0},className:" w-full py-14  px-5  ",children:[y.jsxs("div",{className:" flex flex-col gap-6",children:[y.jsx("h1",{className:" text-4xl text-black-2 font-semibold",children:"Browse"}),y.jsx("p",{className:" text-white-2 text-lg font-semibold",children:"Explore by genre, mood, or trending reads."})]}),y.jsx("div",{className:" grid grid-cols-3 gap-8 mt-24 max-md:grid-cols-2 max-sm:grid-cols-1",children:t.length>0&&t.map((n,r)=>{const{genre:s,color:i,hoverColor:o}=n,a=g4(i);return y.jsx(js.div,{whileHover:{backgroundColor:o},className:" cursor-pointer rounded-3xl  p-6 h-52 ",style:{backgroundColor:i},children:y.jsx(Ia,{to:`/category/${s.toLowerCase()}`,className:"w-full h-full flex flex-col justify-end",children:y.jsx("p",{style:{color:a},className:" text-2xl font-semibold  text-end ",children:s})})},r)})})]})})},Zme=()=>{const{currentUser:t}=$s(),{categoryId:e}=Ha(),[n,r]=_.useState([]),[s,i]=_.useState(""),[o,a]=_.useState([]),[l,c]=_.useState([]);_.useEffect(()=>{async function d(){try{console.log(e);const p=(await Pe.collection("WrittenStories").where("category","==",e).get()).docs,g=[];p.forEach(m=>{const w=m.data(),v={id:m.id,...w};g.push(v)}),r(g),a(g)}catch(f){console.log(f)}}d()},[t,e]),_.useEffect(()=>{c(vE)},[e]);function u(){if(!s){a(n);return}console.log(n);const p=n.map(g=>{let m=0;const w=g.tag.filter(v=>v.includes(s));return m+=w.length,g.title.toLowerCase().includes(s.toLowerCase())&&(m+=.5),{...g,score:m}}).filter(g=>g.score!=0).sort((g,m)=>m.score-g.score);a(p)}return y.jsxs("div",{className:"max-w-[1200px] m-auto",children:[y.jsxs("div",{className:" py-10 flex flex-col gap-12 justify-center items-center",children:[y.jsxs("div",{className:"flex flex-row gap-1 mt-20 items-center w-full px-5",children:[y.jsx(_f,{onChange:d=>i(d.target.value),value:s,type:"search",className:" rounded-lg py-6 border-2 flex-1",placeholder:"search here"}),y.jsx(Wt,{variant:"outline",className:" border-2  rounded-xl",onClick:u,children:y.jsx("img",{src:"../public/search.svg",width:20})})]}),y.jsx("div",{className:"flex flex-row gap-6 flex-wrap px-5",children:l.length>0&&l.map((d,f)=>{const{genre:p,color:g,hoverColor:m}=d,w=g4(g);return y.jsx(js.div,{whileHover:{backgroundColor:m},className:" cursor-pointer rounded-lg p-2 ",children:y.jsx(Ia,{to:`/category/${p.toLowerCase()}`,className:"w-full h-full",children:y.jsx("p",{style:{color:w},className:"font-semibold  text-center ",children:p})})},f)})})]}),y.jsx("main",{className:" border-t border-black-2 p-5 flex flex-row gap-2 flex-wrap max-md:justify-center",children:o.length>0?o.map(d=>{const{title:f}=d,p=f.length>30?f.slice(0,30)+"...":f;return y.jsx(mp,{items:d,truncatedStr:p,searchItem:!1},d.id)}):y.jsxs("div",{className:"flex flex-col w-full gap-4 justify-center items-center py-6 text-gray-600 text-sm",children:[y.jsx("img",{src:"../../public/person-sitting.png",width:200}),y.jsx("p",{children:"it seems there is no result for you search ,"})]})})]})};function ege(){return y.jsx(N5,{children:y.jsx(jQ,{children:y.jsxs(hq,{children:[y.jsx(Er,{path:"/browse",element:y.jsx(Uo,{children:y.jsx(Jme,{})})}),y.jsx(Er,{path:"/category/:categoryId",element:y.jsx(Uo,{children:y.jsx(Zme,{})})}),y.jsx(Er,{path:"/",element:y.jsx(Uo,{children:y.jsx(wne,{})})}),y.jsx(Er,{path:"/story/:storyId",element:y.jsx(Uo,{children:y.jsx(Pre,{})})}),y.jsx(Er,{path:"/people",element:y.jsx(Uo,{children:y.jsx(Nre,{})})}),y.jsxs(Er,{path:"/Profile/:profileId",element:y.jsx(Uo,{children:y.jsx(Lre,{})}),children:[y.jsx(Er,{path:"about",element:y.jsx(Qme,{})}),y.jsx(Er,{path:"home",element:y.jsx(Xme,{})})]}),y.jsx(Er,{path:"/new",element:y.jsx(Uo,{children:y.jsx(wie,{})})}),y.jsx(Er,{path:"/read/:readId",element:y.jsx(Uo,{children:y.jsx(kme,{})})}),y.jsx(Er,{path:"/signin",element:y.jsx(lie,{})}),y.jsx(Er,{path:"/session/:sessionId",element:y.jsx(ife,{})})]})})})}D2(document.getElementById("root")).render(y.jsx(wq,{children:y.jsx(ege,{})}))});export default tge();
